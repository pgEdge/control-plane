openapi: 3.0.3
info:
    title: pgEdge Control Plane API
    description: Service for creating, modifying, and operating pgEdge databases.
    version: 0.0.1
servers:
    - url: http://localhost:3000
paths:
    /cluster:
        get:
            tags:
                - control-plane
            summary: inspect-cluster control-plane
            description: Returns information about the cluster.
            operationId: inspect-cluster
            responses:
                "200":
                    description: OK response.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Cluster'
                            example:
                                hosts:
                                    - cohort:
                                        cohort_id: pps1n11hqijn9rbee4cjil453
                                        control_available: true
                                        member_id: lah4bsznw6kc0hp7biylmmmll
                                        type: swarm
                                      cpus: 4
                                      default_pgedge_version:
                                        postgres_version: "16"
                                        spock_version: "4"
                                      hostname: i-0123456789abcdef.ec2.internal
                                      id: de3b1388-1f0c-42f1-a86c-59ab72f255ec
                                      ipv4_address: 10.24.34.0
                                      memory: 16GiB
                                      orchestrator: swarm
                                      status:
                                        components:
                                            Enim ut libero repellendus qui nobis non.:
                                                details:
                                                    alarms:
                                                        - '3: NOSPACE'
                                                error: failed to connect to etcd
                                                healthy: false
                                            Nostrum nam.:
                                                details:
                                                    alarms:
                                                        - '3: NOSPACE'
                                                error: failed to connect to etcd
                                                healthy: false
                                        state: available
                                        updated_at: "2021-07-01T12:34:56Z"
                                      supported_pgedge_versions:
                                        - postgres_version: "16"
                                          spock_version: "4"
                                        - postgres_version: "16"
                                          spock_version: "4"
                                        - postgres_version: "16"
                                          spock_version: "4"
                                    - cohort:
                                        cohort_id: pps1n11hqijn9rbee4cjil453
                                        control_available: true
                                        member_id: lah4bsznw6kc0hp7biylmmmll
                                        type: swarm
                                      cpus: 4
                                      default_pgedge_version:
                                        postgres_version: "16"
                                        spock_version: "4"
                                      hostname: i-0123456789abcdef.ec2.internal
                                      id: de3b1388-1f0c-42f1-a86c-59ab72f255ec
                                      ipv4_address: 10.24.34.0
                                      memory: 16GiB
                                      orchestrator: swarm
                                      status:
                                        components:
                                            Enim ut libero repellendus qui nobis non.:
                                                details:
                                                    alarms:
                                                        - '3: NOSPACE'
                                                error: failed to connect to etcd
                                                healthy: false
                                            Nostrum nam.:
                                                details:
                                                    alarms:
                                                        - '3: NOSPACE'
                                                error: failed to connect to etcd
                                                healthy: false
                                        state: available
                                        updated_at: "2021-07-01T12:34:56Z"
                                      supported_pgedge_versions:
                                        - postgres_version: "16"
                                          spock_version: "4"
                                        - postgres_version: "16"
                                          spock_version: "4"
                                        - postgres_version: "16"
                                          spock_version: "4"
                                id: a67cbb36-c3c3-49c9-8aac-f4a0438a883d
                                status:
                                    state: error
                                tenant_id: 8210ec10-2dca-406c-ac4a-0661d2189954
                "404":
                    description: 'not_found: Not Found response.'
                    content:
                        application/vnd.goa.error:
                            schema:
                                $ref: '#/components/schemas/Error'
                "409":
                    description: 'cluster_not_initialized: Conflict response.'
                    content:
                        application/vnd.goa.error:
                            schema:
                                $ref: '#/components/schemas/Error'
    /cluster/init:
        get:
            tags:
                - control-plane
            summary: init-cluster control-plane
            description: Initializes a new cluster.
            operationId: init-cluster
            responses:
                "200":
                    description: OK response.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/ClusterJoinToken'
                            example:
                                server_url: http://192.168.1.1:3000
                                token: PGEDGE-dd440afcf5de20ef8e8cf54f6cb9f125fd55f90e64faa94b906130b31235e730-41e975f41d7ea61058f2fe2572cb52dd
                "409":
                    description: 'cluster_already_initialized: Conflict response.'
                    content:
                        application/vnd.goa.error:
                            schema:
                                $ref: '#/components/schemas/Error'
    /cluster/join:
        post:
            tags:
                - control-plane
            summary: join-cluster control-plane
            description: Join this host to an existing cluster.
            operationId: join-cluster
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            $ref: '#/components/schemas/ClusterJoinToken'
                        example:
                            server_url: http://192.168.1.1:3000
                            token: PGEDGE-dd440afcf5de20ef8e8cf54f6cb9f125fd55f90e64faa94b906130b31235e730-41e975f41d7ea61058f2fe2572cb52dd
            responses:
                "204":
                    description: No Content response.
                "409":
                    description: 'cluster_already_initialized: Conflict response.'
                    content:
                        application/vnd.goa.error:
                            schema:
                                $ref: '#/components/schemas/Error'
    /cluster/join-token:
        get:
            tags:
                - control-plane
            summary: get-join-token control-plane
            description: Gets the join token for this cluster.
            operationId: get-join-token
            responses:
                "200":
                    description: OK response.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/ClusterJoinToken'
                            example:
                                server_url: http://192.168.1.1:3000
                                token: PGEDGE-dd440afcf5de20ef8e8cf54f6cb9f125fd55f90e64faa94b906130b31235e730-41e975f41d7ea61058f2fe2572cb52dd
                "409":
                    description: 'cluster_not_initialized: Conflict response.'
                    content:
                        application/vnd.goa.error:
                            schema:
                                $ref: '#/components/schemas/Error'
    /databases:
        get:
            tags:
                - control-plane
            summary: list-databases control-plane
            description: Lists all databases in the cluster.
            operationId: list-databases
            responses:
                "200":
                    description: OK response.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/DatabaseResponseAbbreviatedCollection'
                            example:
                                - created_at: "2025-01-01T01:30:00Z"
                                  id: 02f1a7db-fca8-4521-b57a-2a375c1ced51
                                  instances:
                                    - host_id: de3b1388-1f0c-42f1-a86c-59ab72f255ec
                                      id: a67cbb36-c3c3-49c9-8aac-f4a0438a883d
                                      node_name: n1
                                      state: available
                                    - host_id: de3b1388-1f0c-42f1-a86c-59ab72f255ec
                                      id: a67cbb36-c3c3-49c9-8aac-f4a0438a883d
                                      node_name: n1
                                      state: available
                                    - host_id: de3b1388-1f0c-42f1-a86c-59ab72f255ec
                                      id: a67cbb36-c3c3-49c9-8aac-f4a0438a883d
                                      node_name: n1
                                      state: available
                                  state: available
                                  tenant_id: 8210ec10-2dca-406c-ac4a-0661d2189954
                                  updated_at: "2025-01-01T02:30:00Z"
                                - created_at: "2025-01-01T01:30:00Z"
                                  id: 02f1a7db-fca8-4521-b57a-2a375c1ced51
                                  instances:
                                    - host_id: de3b1388-1f0c-42f1-a86c-59ab72f255ec
                                      id: a67cbb36-c3c3-49c9-8aac-f4a0438a883d
                                      node_name: n1
                                      state: available
                                    - host_id: de3b1388-1f0c-42f1-a86c-59ab72f255ec
                                      id: a67cbb36-c3c3-49c9-8aac-f4a0438a883d
                                      node_name: n1
                                      state: available
                                    - host_id: de3b1388-1f0c-42f1-a86c-59ab72f255ec
                                      id: a67cbb36-c3c3-49c9-8aac-f4a0438a883d
                                      node_name: n1
                                      state: available
                                  state: available
                                  tenant_id: 8210ec10-2dca-406c-ac4a-0661d2189954
                                  updated_at: "2025-01-01T02:30:00Z"
                "409":
                    description: 'cluster_not_initialized: Conflict response.'
                    content:
                        application/vnd.goa.error:
                            schema:
                                $ref: '#/components/schemas/Error'
        post:
            tags:
                - control-plane
            summary: create-database control-plane
            description: Creates a new database in the cluster.
            operationId: create-database
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            $ref: '#/components/schemas/CreateDatabaseRequest'
                        example:
                            id: 02f1a7db-fca8-4521-b57a-2a375c1ced51
                            spec:
                                backup_config:
                                    provider: pgbackrest
                                    repositories:
                                        - azure_account: pgedge-backups
                                          azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                          azure_endpoint: blob.core.usgovcloudapi.net
                                          azure_key: YXpLZXk=
                                          base_path: /backups
                                          custom_options:
                                            s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                            storage-upload-chunk-size: 5MiB
                                          gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                          gcs_endpoint: localhost
                                          gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                          id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                          retention_full: 2
                                          retention_full_type: count
                                          s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                          s3_endpoint: s3.us-east-1.amazonaws.com
                                          s3_key: AKIAIOSFODNN7EXAMPLE
                                          s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                          s3_region: us-east-1
                                          type: s3
                                        - azure_account: pgedge-backups
                                          azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                          azure_endpoint: blob.core.usgovcloudapi.net
                                          azure_key: YXpLZXk=
                                          base_path: /backups
                                          custom_options:
                                            s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                            storage-upload-chunk-size: 5MiB
                                          gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                          gcs_endpoint: localhost
                                          gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                          id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                          retention_full: 2
                                          retention_full_type: count
                                          s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                          s3_endpoint: s3.us-east-1.amazonaws.com
                                          s3_key: AKIAIOSFODNN7EXAMPLE
                                          s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                          s3_region: us-east-1
                                          type: s3
                                    schedules:
                                        - cron_expression: 0 6 * * ?
                                          id: daily-full-backup
                                          type: full
                                        - cron_expression: 0 6 * * ?
                                          id: daily-full-backup
                                          type: full
                                cpus: 500m
                                database_name: northwind
                                database_users:
                                    - attributes:
                                        - LOGIN
                                        - CREATEDB
                                        - CREATEROLE
                                      db_owner: false
                                      password: secret
                                      roles:
                                        - pgedge_superuser
                                      username: admin
                                    - attributes:
                                        - LOGIN
                                        - CREATEDB
                                        - CREATEROLE
                                      db_owner: false
                                      password: secret
                                      roles:
                                        - pgedge_superuser
                                      username: admin
                                    - attributes:
                                        - LOGIN
                                        - CREATEDB
                                        - CREATEROLE
                                      db_owner: false
                                      password: secret
                                      roles:
                                        - pgedge_superuser
                                      username: admin
                                    - attributes:
                                        - LOGIN
                                        - CREATEDB
                                        - CREATEROLE
                                      db_owner: false
                                      password: secret
                                      roles:
                                        - pgedge_superuser
                                      username: admin
                                deletion_protection: true
                                features:
                                    some_feature: enabled
                                memory: 500M
                                nodes:
                                    - backup_config:
                                        provider: pgbackrest
                                        repositories:
                                            - azure_account: pgedge-backups
                                              azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                              azure_endpoint: blob.core.usgovcloudapi.net
                                              azure_key: YXpLZXk=
                                              base_path: /backups
                                              custom_options:
                                                s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                                storage-upload-chunk-size: 5MiB
                                              gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                              gcs_endpoint: localhost
                                              gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                              id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                              retention_full: 2
                                              retention_full_type: count
                                              s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                              s3_endpoint: s3.us-east-1.amazonaws.com
                                              s3_key: AKIAIOSFODNN7EXAMPLE
                                              s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                              s3_region: us-east-1
                                              type: s3
                                            - azure_account: pgedge-backups
                                              azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                              azure_endpoint: blob.core.usgovcloudapi.net
                                              azure_key: YXpLZXk=
                                              base_path: /backups
                                              custom_options:
                                                s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                                storage-upload-chunk-size: 5MiB
                                              gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                              gcs_endpoint: localhost
                                              gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                              id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                              retention_full: 2
                                              retention_full_type: count
                                              s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                              s3_endpoint: s3.us-east-1.amazonaws.com
                                              s3_key: AKIAIOSFODNN7EXAMPLE
                                              s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                              s3_region: us-east-1
                                              type: s3
                                        schedules:
                                            - cron_expression: 0 6 * * ?
                                              id: daily-full-backup
                                              type: full
                                            - cron_expression: 0 6 * * ?
                                              id: daily-full-backup
                                              type: full
                                      cpus: 500m
                                      host_ids:
                                        - de3b1388-1f0c-42f1-a86c-59ab72f255ec
                                        - de3b1388-1f0c-42f1-a86c-59ab72f255ec
                                        - de3b1388-1f0c-42f1-a86c-59ab72f255ec
                                      memory: 500M
                                      name: n1
                                      port: 5432
                                      postgres_version: "17"
                                      postgresql_conf:
                                        max_connections: 1000
                                      restore_config:
                                        provider: pgbackrest
                                        repository:
                                            azure_account: pgedge-backups
                                            azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                            azure_endpoint: blob.core.usgovcloudapi.net
                                            azure_key: YXpLZXk=
                                            base_path: /backups
                                            custom_options:
                                                s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                            gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                            gcs_endpoint: localhost
                                            gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                            id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                            s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                            s3_endpoint: s3.us-east-1.amazonaws.com
                                            s3_key: AKIAIOSFODNN7EXAMPLE
                                            s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                            s3_region: us-east-1
                                            type: s3
                                        restore_options:
                                            - --set=20250505-153628F
                                            - --type=xid
                                            - --target=123456
                                        source_database_id: 6c8e43ee-26ea-47b8-a8f8-89897e0137bd
                                        source_database_name: northwind
                                        source_node_name: n1
                                      storage_class: loop_device
                                      storage_size: 500GiB
                                    - backup_config:
                                        provider: pgbackrest
                                        repositories:
                                            - azure_account: pgedge-backups
                                              azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                              azure_endpoint: blob.core.usgovcloudapi.net
                                              azure_key: YXpLZXk=
                                              base_path: /backups
                                              custom_options:
                                                s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                                storage-upload-chunk-size: 5MiB
                                              gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                              gcs_endpoint: localhost
                                              gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                              id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                              retention_full: 2
                                              retention_full_type: count
                                              s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                              s3_endpoint: s3.us-east-1.amazonaws.com
                                              s3_key: AKIAIOSFODNN7EXAMPLE
                                              s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                              s3_region: us-east-1
                                              type: s3
                                            - azure_account: pgedge-backups
                                              azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                              azure_endpoint: blob.core.usgovcloudapi.net
                                              azure_key: YXpLZXk=
                                              base_path: /backups
                                              custom_options:
                                                s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                                storage-upload-chunk-size: 5MiB
                                              gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                              gcs_endpoint: localhost
                                              gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                              id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                              retention_full: 2
                                              retention_full_type: count
                                              s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                              s3_endpoint: s3.us-east-1.amazonaws.com
                                              s3_key: AKIAIOSFODNN7EXAMPLE
                                              s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                              s3_region: us-east-1
                                              type: s3
                                        schedules:
                                            - cron_expression: 0 6 * * ?
                                              id: daily-full-backup
                                              type: full
                                            - cron_expression: 0 6 * * ?
                                              id: daily-full-backup
                                              type: full
                                      cpus: 500m
                                      host_ids:
                                        - de3b1388-1f0c-42f1-a86c-59ab72f255ec
                                        - de3b1388-1f0c-42f1-a86c-59ab72f255ec
                                        - de3b1388-1f0c-42f1-a86c-59ab72f255ec
                                      memory: 500M
                                      name: n1
                                      port: 5432
                                      postgres_version: "17"
                                      postgresql_conf:
                                        max_connections: 1000
                                      restore_config:
                                        provider: pgbackrest
                                        repository:
                                            azure_account: pgedge-backups
                                            azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                            azure_endpoint: blob.core.usgovcloudapi.net
                                            azure_key: YXpLZXk=
                                            base_path: /backups
                                            custom_options:
                                                s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                            gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                            gcs_endpoint: localhost
                                            gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                            id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                            s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                            s3_endpoint: s3.us-east-1.amazonaws.com
                                            s3_key: AKIAIOSFODNN7EXAMPLE
                                            s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                            s3_region: us-east-1
                                            type: s3
                                        restore_options:
                                            - --set=20250505-153628F
                                            - --type=xid
                                            - --target=123456
                                        source_database_id: 6c8e43ee-26ea-47b8-a8f8-89897e0137bd
                                        source_database_name: northwind
                                        source_node_name: n1
                                      storage_class: loop_device
                                      storage_size: 500GiB
                                    - backup_config:
                                        provider: pgbackrest
                                        repositories:
                                            - azure_account: pgedge-backups
                                              azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                              azure_endpoint: blob.core.usgovcloudapi.net
                                              azure_key: YXpLZXk=
                                              base_path: /backups
                                              custom_options:
                                                s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                                storage-upload-chunk-size: 5MiB
                                              gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                              gcs_endpoint: localhost
                                              gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                              id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                              retention_full: 2
                                              retention_full_type: count
                                              s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                              s3_endpoint: s3.us-east-1.amazonaws.com
                                              s3_key: AKIAIOSFODNN7EXAMPLE
                                              s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                              s3_region: us-east-1
                                              type: s3
                                            - azure_account: pgedge-backups
                                              azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                              azure_endpoint: blob.core.usgovcloudapi.net
                                              azure_key: YXpLZXk=
                                              base_path: /backups
                                              custom_options:
                                                s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                                storage-upload-chunk-size: 5MiB
                                              gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                              gcs_endpoint: localhost
                                              gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                              id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                              retention_full: 2
                                              retention_full_type: count
                                              s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                              s3_endpoint: s3.us-east-1.amazonaws.com
                                              s3_key: AKIAIOSFODNN7EXAMPLE
                                              s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                              s3_region: us-east-1
                                              type: s3
                                        schedules:
                                            - cron_expression: 0 6 * * ?
                                              id: daily-full-backup
                                              type: full
                                            - cron_expression: 0 6 * * ?
                                              id: daily-full-backup
                                              type: full
                                      cpus: 500m
                                      host_ids:
                                        - de3b1388-1f0c-42f1-a86c-59ab72f255ec
                                        - de3b1388-1f0c-42f1-a86c-59ab72f255ec
                                        - de3b1388-1f0c-42f1-a86c-59ab72f255ec
                                      memory: 500M
                                      name: n1
                                      port: 5432
                                      postgres_version: "17"
                                      postgresql_conf:
                                        max_connections: 1000
                                      restore_config:
                                        provider: pgbackrest
                                        repository:
                                            azure_account: pgedge-backups
                                            azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                            azure_endpoint: blob.core.usgovcloudapi.net
                                            azure_key: YXpLZXk=
                                            base_path: /backups
                                            custom_options:
                                                s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                            gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                            gcs_endpoint: localhost
                                            gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                            id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                            s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                            s3_endpoint: s3.us-east-1.amazonaws.com
                                            s3_key: AKIAIOSFODNN7EXAMPLE
                                            s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                            s3_region: us-east-1
                                            type: s3
                                        restore_options:
                                            - --set=20250505-153628F
                                            - --type=xid
                                            - --target=123456
                                        source_database_id: 6c8e43ee-26ea-47b8-a8f8-89897e0137bd
                                        source_database_name: northwind
                                        source_node_name: n1
                                      storage_class: loop_device
                                      storage_size: 500GiB
                                port: 5432
                                postgres_version: "17"
                                postgresql_conf:
                                    max_connections: 1000
                                restore_config:
                                    provider: pgbackrest
                                    repository:
                                        azure_account: pgedge-backups
                                        azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                        azure_endpoint: blob.core.usgovcloudapi.net
                                        azure_key: YXpLZXk=
                                        base_path: /backups
                                        custom_options:
                                            s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                        gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                        gcs_endpoint: localhost
                                        gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                        id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                        s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                        s3_endpoint: s3.us-east-1.amazonaws.com
                                        s3_key: AKIAIOSFODNN7EXAMPLE
                                        s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                        s3_region: us-east-1
                                        type: s3
                                    restore_options:
                                        - --set=20250505-153628F
                                        - --type=xid
                                        - --target=123456
                                    source_database_id: 6c8e43ee-26ea-47b8-a8f8-89897e0137bd
                                    source_database_name: northwind
                                    source_node_name: n1
                                spock_version: "4"
                                storage_class: loop_device
                                storage_size: 500GiB
                            tenant_id: 8210ec10-2dca-406c-ac4a-0661d2189954
            responses:
                "200":
                    description: OK response.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/ControlPlaneCreateDatabaseResponseBody'
                            example:
                                created_at: "2025-01-01T01:30:00Z"
                                id: 02f1a7db-fca8-4521-b57a-2a375c1ced51
                                instances:
                                    - host_id: de3b1388-1f0c-42f1-a86c-59ab72f255ec
                                      id: a67cbb36-c3c3-49c9-8aac-f4a0438a883d
                                      node_name: n1
                                      state: available
                                    - host_id: de3b1388-1f0c-42f1-a86c-59ab72f255ec
                                      id: a67cbb36-c3c3-49c9-8aac-f4a0438a883d
                                      node_name: n1
                                      state: available
                                    - host_id: de3b1388-1f0c-42f1-a86c-59ab72f255ec
                                      id: a67cbb36-c3c3-49c9-8aac-f4a0438a883d
                                      node_name: n1
                                      state: available
                                spec:
                                    backup_config:
                                        provider: pgbackrest
                                        repositories:
                                            - azure_account: pgedge-backups
                                              azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                              azure_endpoint: blob.core.usgovcloudapi.net
                                              azure_key: YXpLZXk=
                                              base_path: /backups
                                              custom_options:
                                                s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                                storage-upload-chunk-size: 5MiB
                                              gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                              gcs_endpoint: localhost
                                              gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                              id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                              retention_full: 2
                                              retention_full_type: count
                                              s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                              s3_endpoint: s3.us-east-1.amazonaws.com
                                              s3_key: AKIAIOSFODNN7EXAMPLE
                                              s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                              s3_region: us-east-1
                                              type: s3
                                            - azure_account: pgedge-backups
                                              azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                              azure_endpoint: blob.core.usgovcloudapi.net
                                              azure_key: YXpLZXk=
                                              base_path: /backups
                                              custom_options:
                                                s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                                storage-upload-chunk-size: 5MiB
                                              gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                              gcs_endpoint: localhost
                                              gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                              id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                              retention_full: 2
                                              retention_full_type: count
                                              s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                              s3_endpoint: s3.us-east-1.amazonaws.com
                                              s3_key: AKIAIOSFODNN7EXAMPLE
                                              s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                              s3_region: us-east-1
                                              type: s3
                                            - azure_account: pgedge-backups
                                              azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                              azure_endpoint: blob.core.usgovcloudapi.net
                                              azure_key: YXpLZXk=
                                              base_path: /backups
                                              custom_options:
                                                s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                                storage-upload-chunk-size: 5MiB
                                              gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                              gcs_endpoint: localhost
                                              gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                              id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                              retention_full: 2
                                              retention_full_type: count
                                              s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                              s3_endpoint: s3.us-east-1.amazonaws.com
                                              s3_key: AKIAIOSFODNN7EXAMPLE
                                              s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                              s3_region: us-east-1
                                              type: s3
                                        schedules:
                                            - cron_expression: 0 6 * * ?
                                              id: daily-full-backup
                                              type: full
                                            - cron_expression: 0 6 * * ?
                                              id: daily-full-backup
                                              type: full
                                    cpus: 500m
                                    database_name: northwind
                                    database_users:
                                        - attributes:
                                            - LOGIN
                                            - CREATEDB
                                            - CREATEROLE
                                          db_owner: true
                                          password: secret
                                          roles:
                                            - pgedge_superuser
                                          username: admin
                                        - attributes:
                                            - LOGIN
                                            - CREATEDB
                                            - CREATEROLE
                                          db_owner: true
                                          password: secret
                                          roles:
                                            - pgedge_superuser
                                          username: admin
                                        - attributes:
                                            - LOGIN
                                            - CREATEDB
                                            - CREATEROLE
                                          db_owner: true
                                          password: secret
                                          roles:
                                            - pgedge_superuser
                                          username: admin
                                    deletion_protection: true
                                    features:
                                        some_feature: enabled
                                    memory: 500M
                                    nodes:
                                        - backup_config:
                                            provider: pgbackrest
                                            repositories:
                                                - azure_account: pgedge-backups
                                                  azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                  azure_endpoint: blob.core.usgovcloudapi.net
                                                  azure_key: YXpLZXk=
                                                  base_path: /backups
                                                  custom_options:
                                                    s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                                    storage-upload-chunk-size: 5MiB
                                                  gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                  gcs_endpoint: localhost
                                                  gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                                  id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                                  retention_full: 2
                                                  retention_full_type: count
                                                  s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                  s3_endpoint: s3.us-east-1.amazonaws.com
                                                  s3_key: AKIAIOSFODNN7EXAMPLE
                                                  s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                                  s3_region: us-east-1
                                                  type: s3
                                                - azure_account: pgedge-backups
                                                  azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                  azure_endpoint: blob.core.usgovcloudapi.net
                                                  azure_key: YXpLZXk=
                                                  base_path: /backups
                                                  custom_options:
                                                    s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                                    storage-upload-chunk-size: 5MiB
                                                  gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                  gcs_endpoint: localhost
                                                  gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                                  id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                                  retention_full: 2
                                                  retention_full_type: count
                                                  s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                  s3_endpoint: s3.us-east-1.amazonaws.com
                                                  s3_key: AKIAIOSFODNN7EXAMPLE
                                                  s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                                  s3_region: us-east-1
                                                  type: s3
                                                - azure_account: pgedge-backups
                                                  azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                  azure_endpoint: blob.core.usgovcloudapi.net
                                                  azure_key: YXpLZXk=
                                                  base_path: /backups
                                                  custom_options:
                                                    s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                                    storage-upload-chunk-size: 5MiB
                                                  gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                  gcs_endpoint: localhost
                                                  gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                                  id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                                  retention_full: 2
                                                  retention_full_type: count
                                                  s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                  s3_endpoint: s3.us-east-1.amazonaws.com
                                                  s3_key: AKIAIOSFODNN7EXAMPLE
                                                  s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                                  s3_region: us-east-1
                                                  type: s3
                                            schedules:
                                                - cron_expression: 0 6 * * ?
                                                  id: daily-full-backup
                                                  type: full
                                                - cron_expression: 0 6 * * ?
                                                  id: daily-full-backup
                                                  type: full
                                          cpus: 500m
                                          host_ids:
                                            - de3b1388-1f0c-42f1-a86c-59ab72f255ec
                                            - de3b1388-1f0c-42f1-a86c-59ab72f255ec
                                          memory: 500M
                                          name: n1
                                          port: 5432
                                          postgres_version: "17"
                                          postgresql_conf:
                                            max_connections: 1000
                                          restore_config:
                                            provider: pgbackrest
                                            repository:
                                                azure_account: pgedge-backups
                                                azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                azure_endpoint: blob.core.usgovcloudapi.net
                                                azure_key: YXpLZXk=
                                                base_path: /backups
                                                custom_options:
                                                    s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                                gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                gcs_endpoint: localhost
                                                gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                                id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                                s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                s3_endpoint: s3.us-east-1.amazonaws.com
                                                s3_key: AKIAIOSFODNN7EXAMPLE
                                                s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                                s3_region: us-east-1
                                                type: s3
                                            restore_options:
                                                - --set=20250505-153628F
                                                - --type=xid
                                                - --target=123456
                                            source_database_id: 6c8e43ee-26ea-47b8-a8f8-89897e0137bd
                                            source_database_name: northwind
                                            source_node_name: n1
                                          storage_class: loop_device
                                          storage_size: 500GiB
                                        - backup_config:
                                            provider: pgbackrest
                                            repositories:
                                                - azure_account: pgedge-backups
                                                  azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                  azure_endpoint: blob.core.usgovcloudapi.net
                                                  azure_key: YXpLZXk=
                                                  base_path: /backups
                                                  custom_options:
                                                    s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                                    storage-upload-chunk-size: 5MiB
                                                  gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                  gcs_endpoint: localhost
                                                  gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                                  id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                                  retention_full: 2
                                                  retention_full_type: count
                                                  s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                  s3_endpoint: s3.us-east-1.amazonaws.com
                                                  s3_key: AKIAIOSFODNN7EXAMPLE
                                                  s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                                  s3_region: us-east-1
                                                  type: s3
                                                - azure_account: pgedge-backups
                                                  azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                  azure_endpoint: blob.core.usgovcloudapi.net
                                                  azure_key: YXpLZXk=
                                                  base_path: /backups
                                                  custom_options:
                                                    s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                                    storage-upload-chunk-size: 5MiB
                                                  gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                  gcs_endpoint: localhost
                                                  gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                                  id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                                  retention_full: 2
                                                  retention_full_type: count
                                                  s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                  s3_endpoint: s3.us-east-1.amazonaws.com
                                                  s3_key: AKIAIOSFODNN7EXAMPLE
                                                  s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                                  s3_region: us-east-1
                                                  type: s3
                                                - azure_account: pgedge-backups
                                                  azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                  azure_endpoint: blob.core.usgovcloudapi.net
                                                  azure_key: YXpLZXk=
                                                  base_path: /backups
                                                  custom_options:
                                                    s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                                    storage-upload-chunk-size: 5MiB
                                                  gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                  gcs_endpoint: localhost
                                                  gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                                  id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                                  retention_full: 2
                                                  retention_full_type: count
                                                  s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                  s3_endpoint: s3.us-east-1.amazonaws.com
                                                  s3_key: AKIAIOSFODNN7EXAMPLE
                                                  s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                                  s3_region: us-east-1
                                                  type: s3
                                            schedules:
                                                - cron_expression: 0 6 * * ?
                                                  id: daily-full-backup
                                                  type: full
                                                - cron_expression: 0 6 * * ?
                                                  id: daily-full-backup
                                                  type: full
                                          cpus: 500m
                                          host_ids:
                                            - de3b1388-1f0c-42f1-a86c-59ab72f255ec
                                            - de3b1388-1f0c-42f1-a86c-59ab72f255ec
                                          memory: 500M
                                          name: n1
                                          port: 5432
                                          postgres_version: "17"
                                          postgresql_conf:
                                            max_connections: 1000
                                          restore_config:
                                            provider: pgbackrest
                                            repository:
                                                azure_account: pgedge-backups
                                                azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                azure_endpoint: blob.core.usgovcloudapi.net
                                                azure_key: YXpLZXk=
                                                base_path: /backups
                                                custom_options:
                                                    s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                                gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                gcs_endpoint: localhost
                                                gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                                id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                                s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                s3_endpoint: s3.us-east-1.amazonaws.com
                                                s3_key: AKIAIOSFODNN7EXAMPLE
                                                s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                                s3_region: us-east-1
                                                type: s3
                                            restore_options:
                                                - --set=20250505-153628F
                                                - --type=xid
                                                - --target=123456
                                            source_database_id: 6c8e43ee-26ea-47b8-a8f8-89897e0137bd
                                            source_database_name: northwind
                                            source_node_name: n1
                                          storage_class: loop_device
                                          storage_size: 500GiB
                                        - backup_config:
                                            provider: pgbackrest
                                            repositories:
                                                - azure_account: pgedge-backups
                                                  azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                  azure_endpoint: blob.core.usgovcloudapi.net
                                                  azure_key: YXpLZXk=
                                                  base_path: /backups
                                                  custom_options:
                                                    s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                                    storage-upload-chunk-size: 5MiB
                                                  gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                  gcs_endpoint: localhost
                                                  gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                                  id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                                  retention_full: 2
                                                  retention_full_type: count
                                                  s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                  s3_endpoint: s3.us-east-1.amazonaws.com
                                                  s3_key: AKIAIOSFODNN7EXAMPLE
                                                  s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                                  s3_region: us-east-1
                                                  type: s3
                                                - azure_account: pgedge-backups
                                                  azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                  azure_endpoint: blob.core.usgovcloudapi.net
                                                  azure_key: YXpLZXk=
                                                  base_path: /backups
                                                  custom_options:
                                                    s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                                    storage-upload-chunk-size: 5MiB
                                                  gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                  gcs_endpoint: localhost
                                                  gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                                  id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                                  retention_full: 2
                                                  retention_full_type: count
                                                  s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                  s3_endpoint: s3.us-east-1.amazonaws.com
                                                  s3_key: AKIAIOSFODNN7EXAMPLE
                                                  s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                                  s3_region: us-east-1
                                                  type: s3
                                                - azure_account: pgedge-backups
                                                  azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                  azure_endpoint: blob.core.usgovcloudapi.net
                                                  azure_key: YXpLZXk=
                                                  base_path: /backups
                                                  custom_options:
                                                    s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                                    storage-upload-chunk-size: 5MiB
                                                  gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                  gcs_endpoint: localhost
                                                  gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                                  id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                                  retention_full: 2
                                                  retention_full_type: count
                                                  s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                  s3_endpoint: s3.us-east-1.amazonaws.com
                                                  s3_key: AKIAIOSFODNN7EXAMPLE
                                                  s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                                  s3_region: us-east-1
                                                  type: s3
                                            schedules:
                                                - cron_expression: 0 6 * * ?
                                                  id: daily-full-backup
                                                  type: full
                                                - cron_expression: 0 6 * * ?
                                                  id: daily-full-backup
                                                  type: full
                                          cpus: 500m
                                          host_ids:
                                            - de3b1388-1f0c-42f1-a86c-59ab72f255ec
                                            - de3b1388-1f0c-42f1-a86c-59ab72f255ec
                                          memory: 500M
                                          name: n1
                                          port: 5432
                                          postgres_version: "17"
                                          postgresql_conf:
                                            max_connections: 1000
                                          restore_config:
                                            provider: pgbackrest
                                            repository:
                                                azure_account: pgedge-backups
                                                azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                azure_endpoint: blob.core.usgovcloudapi.net
                                                azure_key: YXpLZXk=
                                                base_path: /backups
                                                custom_options:
                                                    s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                                gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                gcs_endpoint: localhost
                                                gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                                id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                                s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                s3_endpoint: s3.us-east-1.amazonaws.com
                                                s3_key: AKIAIOSFODNN7EXAMPLE
                                                s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                                s3_region: us-east-1
                                                type: s3
                                            restore_options:
                                                - --set=20250505-153628F
                                                - --type=xid
                                                - --target=123456
                                            source_database_id: 6c8e43ee-26ea-47b8-a8f8-89897e0137bd
                                            source_database_name: northwind
                                            source_node_name: n1
                                          storage_class: loop_device
                                          storage_size: 500GiB
                                    port: 5432
                                    postgres_version: "17"
                                    postgresql_conf:
                                        max_connections: 1000
                                    restore_config:
                                        provider: pgbackrest
                                        repository:
                                            azure_account: pgedge-backups
                                            azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                            azure_endpoint: blob.core.usgovcloudapi.net
                                            azure_key: YXpLZXk=
                                            base_path: /backups
                                            custom_options:
                                                s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                            gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                            gcs_endpoint: localhost
                                            gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                            id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                            s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                            s3_endpoint: s3.us-east-1.amazonaws.com
                                            s3_key: AKIAIOSFODNN7EXAMPLE
                                            s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                            s3_region: us-east-1
                                            type: s3
                                        restore_options:
                                            - --set=20250505-153628F
                                            - --type=xid
                                            - --target=123456
                                        source_database_id: 6c8e43ee-26ea-47b8-a8f8-89897e0137bd
                                        source_database_name: northwind
                                        source_node_name: n1
                                    spock_version: "4"
                                    storage_class: loop_device
                                    storage_size: 500GiB
                                state: deleting
                                tenant_id: 8210ec10-2dca-406c-ac4a-0661d2189954
                                updated_at: "2025-01-01T02:30:00Z"
                "400":
                    description: 'invalid_input: Bad Request response.'
                    content:
                        application/vnd.goa.error:
                            schema:
                                $ref: '#/components/schemas/Error'
                "409":
                    description: 'cluster_not_initialized: Conflict response.'
                    content:
                        application/vnd.goa.error:
                            schema:
                                $ref: '#/components/schemas/Error'
    /databases/{database_id}:
        delete:
            tags:
                - control-plane
            summary: delete-database control-plane
            description: Deletes a database from the cluster.
            operationId: delete-database
            parameters:
                - name: database_id
                  in: path
                  description: ID of the database to delete.
                  required: true
                  schema:
                    type: string
                    description: ID of the database to delete.
                    example: 02f1a7db-fca8-4521-b57a-2a375c1ced51
                    format: uuid
                  example: 02f1a7db-fca8-4521-b57a-2a375c1ced51
            responses:
                "204":
                    description: No Content response.
                "404":
                    description: 'not_found: Not Found response.'
                    content:
                        application/vnd.goa.error:
                            schema:
                                $ref: '#/components/schemas/Error'
                "409":
                    description: 'database_not_modifiable: Conflict response.'
                    content:
                        application/vnd.goa.error:
                            schema:
                                $ref: '#/components/schemas/Error'
        get:
            tags:
                - control-plane
            summary: inspect-database control-plane
            description: Returns information about a particular database in the cluster.
            operationId: inspect-database
            parameters:
                - name: database_id
                  in: path
                  description: ID of the database to inspect.
                  required: true
                  schema:
                    type: string
                    description: ID of the database to inspect.
                    example: 02f1a7db-fca8-4521-b57a-2a375c1ced51
                  example: 02f1a7db-fca8-4521-b57a-2a375c1ced51
            responses:
                "200":
                    description: OK response.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/ControlPlaneCreateDatabaseResponseBody'
                            example:
                                created_at: "2025-01-01T01:30:00Z"
                                id: 02f1a7db-fca8-4521-b57a-2a375c1ced51
                                instances:
                                    - host_id: de3b1388-1f0c-42f1-a86c-59ab72f255ec
                                      id: a67cbb36-c3c3-49c9-8aac-f4a0438a883d
                                      node_name: n1
                                      state: available
                                    - host_id: de3b1388-1f0c-42f1-a86c-59ab72f255ec
                                      id: a67cbb36-c3c3-49c9-8aac-f4a0438a883d
                                      node_name: n1
                                      state: available
                                    - host_id: de3b1388-1f0c-42f1-a86c-59ab72f255ec
                                      id: a67cbb36-c3c3-49c9-8aac-f4a0438a883d
                                      node_name: n1
                                      state: available
                                spec:
                                    backup_config:
                                        provider: pgbackrest
                                        repositories:
                                            - azure_account: pgedge-backups
                                              azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                              azure_endpoint: blob.core.usgovcloudapi.net
                                              azure_key: YXpLZXk=
                                              base_path: /backups
                                              custom_options:
                                                s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                                storage-upload-chunk-size: 5MiB
                                              gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                              gcs_endpoint: localhost
                                              gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                              id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                              retention_full: 2
                                              retention_full_type: count
                                              s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                              s3_endpoint: s3.us-east-1.amazonaws.com
                                              s3_key: AKIAIOSFODNN7EXAMPLE
                                              s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                              s3_region: us-east-1
                                              type: s3
                                            - azure_account: pgedge-backups
                                              azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                              azure_endpoint: blob.core.usgovcloudapi.net
                                              azure_key: YXpLZXk=
                                              base_path: /backups
                                              custom_options:
                                                s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                                storage-upload-chunk-size: 5MiB
                                              gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                              gcs_endpoint: localhost
                                              gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                              id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                              retention_full: 2
                                              retention_full_type: count
                                              s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                              s3_endpoint: s3.us-east-1.amazonaws.com
                                              s3_key: AKIAIOSFODNN7EXAMPLE
                                              s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                              s3_region: us-east-1
                                              type: s3
                                            - azure_account: pgedge-backups
                                              azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                              azure_endpoint: blob.core.usgovcloudapi.net
                                              azure_key: YXpLZXk=
                                              base_path: /backups
                                              custom_options:
                                                s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                                storage-upload-chunk-size: 5MiB
                                              gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                              gcs_endpoint: localhost
                                              gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                              id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                              retention_full: 2
                                              retention_full_type: count
                                              s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                              s3_endpoint: s3.us-east-1.amazonaws.com
                                              s3_key: AKIAIOSFODNN7EXAMPLE
                                              s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                              s3_region: us-east-1
                                              type: s3
                                        schedules:
                                            - cron_expression: 0 6 * * ?
                                              id: daily-full-backup
                                              type: full
                                            - cron_expression: 0 6 * * ?
                                              id: daily-full-backup
                                              type: full
                                    cpus: 500m
                                    database_name: northwind
                                    database_users:
                                        - attributes:
                                            - LOGIN
                                            - CREATEDB
                                            - CREATEROLE
                                          db_owner: true
                                          password: secret
                                          roles:
                                            - pgedge_superuser
                                          username: admin
                                        - attributes:
                                            - LOGIN
                                            - CREATEDB
                                            - CREATEROLE
                                          db_owner: true
                                          password: secret
                                          roles:
                                            - pgedge_superuser
                                          username: admin
                                        - attributes:
                                            - LOGIN
                                            - CREATEDB
                                            - CREATEROLE
                                          db_owner: true
                                          password: secret
                                          roles:
                                            - pgedge_superuser
                                          username: admin
                                    deletion_protection: true
                                    features:
                                        some_feature: enabled
                                    memory: 500M
                                    nodes:
                                        - backup_config:
                                            provider: pgbackrest
                                            repositories:
                                                - azure_account: pgedge-backups
                                                  azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                  azure_endpoint: blob.core.usgovcloudapi.net
                                                  azure_key: YXpLZXk=
                                                  base_path: /backups
                                                  custom_options:
                                                    s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                                    storage-upload-chunk-size: 5MiB
                                                  gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                  gcs_endpoint: localhost
                                                  gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                                  id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                                  retention_full: 2
                                                  retention_full_type: count
                                                  s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                  s3_endpoint: s3.us-east-1.amazonaws.com
                                                  s3_key: AKIAIOSFODNN7EXAMPLE
                                                  s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                                  s3_region: us-east-1
                                                  type: s3
                                                - azure_account: pgedge-backups
                                                  azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                  azure_endpoint: blob.core.usgovcloudapi.net
                                                  azure_key: YXpLZXk=
                                                  base_path: /backups
                                                  custom_options:
                                                    s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                                    storage-upload-chunk-size: 5MiB
                                                  gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                  gcs_endpoint: localhost
                                                  gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                                  id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                                  retention_full: 2
                                                  retention_full_type: count
                                                  s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                  s3_endpoint: s3.us-east-1.amazonaws.com
                                                  s3_key: AKIAIOSFODNN7EXAMPLE
                                                  s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                                  s3_region: us-east-1
                                                  type: s3
                                                - azure_account: pgedge-backups
                                                  azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                  azure_endpoint: blob.core.usgovcloudapi.net
                                                  azure_key: YXpLZXk=
                                                  base_path: /backups
                                                  custom_options:
                                                    s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                                    storage-upload-chunk-size: 5MiB
                                                  gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                  gcs_endpoint: localhost
                                                  gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                                  id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                                  retention_full: 2
                                                  retention_full_type: count
                                                  s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                  s3_endpoint: s3.us-east-1.amazonaws.com
                                                  s3_key: AKIAIOSFODNN7EXAMPLE
                                                  s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                                  s3_region: us-east-1
                                                  type: s3
                                            schedules:
                                                - cron_expression: 0 6 * * ?
                                                  id: daily-full-backup
                                                  type: full
                                                - cron_expression: 0 6 * * ?
                                                  id: daily-full-backup
                                                  type: full
                                          cpus: 500m
                                          host_ids:
                                            - de3b1388-1f0c-42f1-a86c-59ab72f255ec
                                            - de3b1388-1f0c-42f1-a86c-59ab72f255ec
                                          memory: 500M
                                          name: n1
                                          port: 5432
                                          postgres_version: "17"
                                          postgresql_conf:
                                            max_connections: 1000
                                          restore_config:
                                            provider: pgbackrest
                                            repository:
                                                azure_account: pgedge-backups
                                                azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                azure_endpoint: blob.core.usgovcloudapi.net
                                                azure_key: YXpLZXk=
                                                base_path: /backups
                                                custom_options:
                                                    s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                                gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                gcs_endpoint: localhost
                                                gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                                id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                                s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                s3_endpoint: s3.us-east-1.amazonaws.com
                                                s3_key: AKIAIOSFODNN7EXAMPLE
                                                s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                                s3_region: us-east-1
                                                type: s3
                                            restore_options:
                                                - --set=20250505-153628F
                                                - --type=xid
                                                - --target=123456
                                            source_database_id: 6c8e43ee-26ea-47b8-a8f8-89897e0137bd
                                            source_database_name: northwind
                                            source_node_name: n1
                                          storage_class: loop_device
                                          storage_size: 500GiB
                                        - backup_config:
                                            provider: pgbackrest
                                            repositories:
                                                - azure_account: pgedge-backups
                                                  azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                  azure_endpoint: blob.core.usgovcloudapi.net
                                                  azure_key: YXpLZXk=
                                                  base_path: /backups
                                                  custom_options:
                                                    s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                                    storage-upload-chunk-size: 5MiB
                                                  gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                  gcs_endpoint: localhost
                                                  gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                                  id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                                  retention_full: 2
                                                  retention_full_type: count
                                                  s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                  s3_endpoint: s3.us-east-1.amazonaws.com
                                                  s3_key: AKIAIOSFODNN7EXAMPLE
                                                  s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                                  s3_region: us-east-1
                                                  type: s3
                                                - azure_account: pgedge-backups
                                                  azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                  azure_endpoint: blob.core.usgovcloudapi.net
                                                  azure_key: YXpLZXk=
                                                  base_path: /backups
                                                  custom_options:
                                                    s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                                    storage-upload-chunk-size: 5MiB
                                                  gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                  gcs_endpoint: localhost
                                                  gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                                  id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                                  retention_full: 2
                                                  retention_full_type: count
                                                  s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                  s3_endpoint: s3.us-east-1.amazonaws.com
                                                  s3_key: AKIAIOSFODNN7EXAMPLE
                                                  s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                                  s3_region: us-east-1
                                                  type: s3
                                                - azure_account: pgedge-backups
                                                  azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                  azure_endpoint: blob.core.usgovcloudapi.net
                                                  azure_key: YXpLZXk=
                                                  base_path: /backups
                                                  custom_options:
                                                    s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                                    storage-upload-chunk-size: 5MiB
                                                  gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                  gcs_endpoint: localhost
                                                  gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                                  id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                                  retention_full: 2
                                                  retention_full_type: count
                                                  s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                  s3_endpoint: s3.us-east-1.amazonaws.com
                                                  s3_key: AKIAIOSFODNN7EXAMPLE
                                                  s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                                  s3_region: us-east-1
                                                  type: s3
                                            schedules:
                                                - cron_expression: 0 6 * * ?
                                                  id: daily-full-backup
                                                  type: full
                                                - cron_expression: 0 6 * * ?
                                                  id: daily-full-backup
                                                  type: full
                                          cpus: 500m
                                          host_ids:
                                            - de3b1388-1f0c-42f1-a86c-59ab72f255ec
                                            - de3b1388-1f0c-42f1-a86c-59ab72f255ec
                                          memory: 500M
                                          name: n1
                                          port: 5432
                                          postgres_version: "17"
                                          postgresql_conf:
                                            max_connections: 1000
                                          restore_config:
                                            provider: pgbackrest
                                            repository:
                                                azure_account: pgedge-backups
                                                azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                azure_endpoint: blob.core.usgovcloudapi.net
                                                azure_key: YXpLZXk=
                                                base_path: /backups
                                                custom_options:
                                                    s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                                gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                gcs_endpoint: localhost
                                                gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                                id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                                s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                s3_endpoint: s3.us-east-1.amazonaws.com
                                                s3_key: AKIAIOSFODNN7EXAMPLE
                                                s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                                s3_region: us-east-1
                                                type: s3
                                            restore_options:
                                                - --set=20250505-153628F
                                                - --type=xid
                                                - --target=123456
                                            source_database_id: 6c8e43ee-26ea-47b8-a8f8-89897e0137bd
                                            source_database_name: northwind
                                            source_node_name: n1
                                          storage_class: loop_device
                                          storage_size: 500GiB
                                        - backup_config:
                                            provider: pgbackrest
                                            repositories:
                                                - azure_account: pgedge-backups
                                                  azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                  azure_endpoint: blob.core.usgovcloudapi.net
                                                  azure_key: YXpLZXk=
                                                  base_path: /backups
                                                  custom_options:
                                                    s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                                    storage-upload-chunk-size: 5MiB
                                                  gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                  gcs_endpoint: localhost
                                                  gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                                  id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                                  retention_full: 2
                                                  retention_full_type: count
                                                  s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                  s3_endpoint: s3.us-east-1.amazonaws.com
                                                  s3_key: AKIAIOSFODNN7EXAMPLE
                                                  s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                                  s3_region: us-east-1
                                                  type: s3
                                                - azure_account: pgedge-backups
                                                  azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                  azure_endpoint: blob.core.usgovcloudapi.net
                                                  azure_key: YXpLZXk=
                                                  base_path: /backups
                                                  custom_options:
                                                    s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                                    storage-upload-chunk-size: 5MiB
                                                  gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                  gcs_endpoint: localhost
                                                  gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                                  id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                                  retention_full: 2
                                                  retention_full_type: count
                                                  s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                  s3_endpoint: s3.us-east-1.amazonaws.com
                                                  s3_key: AKIAIOSFODNN7EXAMPLE
                                                  s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                                  s3_region: us-east-1
                                                  type: s3
                                                - azure_account: pgedge-backups
                                                  azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                  azure_endpoint: blob.core.usgovcloudapi.net
                                                  azure_key: YXpLZXk=
                                                  base_path: /backups
                                                  custom_options:
                                                    s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                                    storage-upload-chunk-size: 5MiB
                                                  gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                  gcs_endpoint: localhost
                                                  gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                                  id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                                  retention_full: 2
                                                  retention_full_type: count
                                                  s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                  s3_endpoint: s3.us-east-1.amazonaws.com
                                                  s3_key: AKIAIOSFODNN7EXAMPLE
                                                  s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                                  s3_region: us-east-1
                                                  type: s3
                                            schedules:
                                                - cron_expression: 0 6 * * ?
                                                  id: daily-full-backup
                                                  type: full
                                                - cron_expression: 0 6 * * ?
                                                  id: daily-full-backup
                                                  type: full
                                          cpus: 500m
                                          host_ids:
                                            - de3b1388-1f0c-42f1-a86c-59ab72f255ec
                                            - de3b1388-1f0c-42f1-a86c-59ab72f255ec
                                          memory: 500M
                                          name: n1
                                          port: 5432
                                          postgres_version: "17"
                                          postgresql_conf:
                                            max_connections: 1000
                                          restore_config:
                                            provider: pgbackrest
                                            repository:
                                                azure_account: pgedge-backups
                                                azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                azure_endpoint: blob.core.usgovcloudapi.net
                                                azure_key: YXpLZXk=
                                                base_path: /backups
                                                custom_options:
                                                    s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                                gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                gcs_endpoint: localhost
                                                gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                                id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                                s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                s3_endpoint: s3.us-east-1.amazonaws.com
                                                s3_key: AKIAIOSFODNN7EXAMPLE
                                                s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                                s3_region: us-east-1
                                                type: s3
                                            restore_options:
                                                - --set=20250505-153628F
                                                - --type=xid
                                                - --target=123456
                                            source_database_id: 6c8e43ee-26ea-47b8-a8f8-89897e0137bd
                                            source_database_name: northwind
                                            source_node_name: n1
                                          storage_class: loop_device
                                          storage_size: 500GiB
                                    port: 5432
                                    postgres_version: "17"
                                    postgresql_conf:
                                        max_connections: 1000
                                    restore_config:
                                        provider: pgbackrest
                                        repository:
                                            azure_account: pgedge-backups
                                            azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                            azure_endpoint: blob.core.usgovcloudapi.net
                                            azure_key: YXpLZXk=
                                            base_path: /backups
                                            custom_options:
                                                s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                            gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                            gcs_endpoint: localhost
                                            gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                            id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                            s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                            s3_endpoint: s3.us-east-1.amazonaws.com
                                            s3_key: AKIAIOSFODNN7EXAMPLE
                                            s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                            s3_region: us-east-1
                                            type: s3
                                        restore_options:
                                            - --set=20250505-153628F
                                            - --type=xid
                                            - --target=123456
                                        source_database_id: 6c8e43ee-26ea-47b8-a8f8-89897e0137bd
                                        source_database_name: northwind
                                        source_node_name: n1
                                    spock_version: "4"
                                    storage_class: loop_device
                                    storage_size: 500GiB
                                state: deleting
                                tenant_id: 8210ec10-2dca-406c-ac4a-0661d2189954
                                updated_at: "2025-01-01T02:30:00Z"
                "404":
                    description: 'not_found: Not Found response.'
                    content:
                        application/vnd.goa.error:
                            schema:
                                $ref: '#/components/schemas/Error'
                "409":
                    description: 'cluster_not_initialized: Conflict response.'
                    content:
                        application/vnd.goa.error:
                            schema:
                                $ref: '#/components/schemas/Error'
        post:
            tags:
                - control-plane
            summary: update-database control-plane
            description: Updates a database with the given specification.
            operationId: update-database
            parameters:
                - name: force_update
                  in: query
                  description: Force update the database even if the spec is the same.
                  allowEmptyValue: true
                  schema:
                    type: boolean
                    description: Force update the database even if the spec is the same.
                    example: true
                  example: true
                - name: database_id
                  in: path
                  description: ID of the database to update.
                  required: true
                  schema:
                    type: string
                    description: ID of the database to update.
                    example: 02f1a7db-fca8-4521-b57a-2a375c1ced51
                  example: 02f1a7db-fca8-4521-b57a-2a375c1ced51
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            $ref: '#/components/schemas/UpdateDatabaseRequest'
                        example:
                            spec:
                                backup_config:
                                    provider: pgbackrest
                                    repositories:
                                        - azure_account: pgedge-backups
                                          azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                          azure_endpoint: blob.core.usgovcloudapi.net
                                          azure_key: YXpLZXk=
                                          base_path: /backups
                                          custom_options:
                                            s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                            storage-upload-chunk-size: 5MiB
                                          gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                          gcs_endpoint: localhost
                                          gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                          id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                          retention_full: 2
                                          retention_full_type: count
                                          s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                          s3_endpoint: s3.us-east-1.amazonaws.com
                                          s3_key: AKIAIOSFODNN7EXAMPLE
                                          s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                          s3_region: us-east-1
                                          type: s3
                                    schedules:
                                        - cron_expression: 0 6 * * ?
                                          id: daily-full-backup
                                          type: full
                                        - cron_expression: 0 6 * * ?
                                          id: daily-full-backup
                                          type: full
                                        - cron_expression: 0 6 * * ?
                                          id: daily-full-backup
                                          type: full
                                        - cron_expression: 0 6 * * ?
                                          id: daily-full-backup
                                          type: full
                                cpus: 500m
                                database_name: northwind
                                database_users:
                                    - attributes:
                                        - LOGIN
                                        - CREATEDB
                                        - CREATEROLE
                                      db_owner: true
                                      password: secret
                                      roles:
                                        - pgedge_superuser
                                      username: admin
                                    - attributes:
                                        - LOGIN
                                        - CREATEDB
                                        - CREATEROLE
                                      db_owner: true
                                      password: secret
                                      roles:
                                        - pgedge_superuser
                                      username: admin
                                deletion_protection: true
                                features:
                                    some_feature: enabled
                                memory: 500M
                                nodes:
                                    - backup_config:
                                        provider: pgbackrest
                                        repositories:
                                            - azure_account: pgedge-backups
                                              azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                              azure_endpoint: blob.core.usgovcloudapi.net
                                              azure_key: YXpLZXk=
                                              base_path: /backups
                                              custom_options:
                                                s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                                storage-upload-chunk-size: 5MiB
                                              gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                              gcs_endpoint: localhost
                                              gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                              id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                              retention_full: 2
                                              retention_full_type: count
                                              s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                              s3_endpoint: s3.us-east-1.amazonaws.com
                                              s3_key: AKIAIOSFODNN7EXAMPLE
                                              s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                              s3_region: us-east-1
                                              type: s3
                                        schedules:
                                            - cron_expression: 0 6 * * ?
                                              id: daily-full-backup
                                              type: full
                                            - cron_expression: 0 6 * * ?
                                              id: daily-full-backup
                                              type: full
                                            - cron_expression: 0 6 * * ?
                                              id: daily-full-backup
                                              type: full
                                            - cron_expression: 0 6 * * ?
                                              id: daily-full-backup
                                              type: full
                                      cpus: 500m
                                      host_ids:
                                        - de3b1388-1f0c-42f1-a86c-59ab72f255ec
                                        - de3b1388-1f0c-42f1-a86c-59ab72f255ec
                                        - de3b1388-1f0c-42f1-a86c-59ab72f255ec
                                      memory: 500M
                                      name: n1
                                      port: 5432
                                      postgres_version: "17"
                                      postgresql_conf:
                                        max_connections: 1000
                                      restore_config:
                                        provider: pgbackrest
                                        repository:
                                            azure_account: pgedge-backups
                                            azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                            azure_endpoint: blob.core.usgovcloudapi.net
                                            azure_key: YXpLZXk=
                                            base_path: /backups
                                            custom_options:
                                                s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                            gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                            gcs_endpoint: localhost
                                            gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                            id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                            s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                            s3_endpoint: s3.us-east-1.amazonaws.com
                                            s3_key: AKIAIOSFODNN7EXAMPLE
                                            s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                            s3_region: us-east-1
                                            type: s3
                                        restore_options:
                                            - --set=20250505-153628F
                                            - --type=xid
                                            - --target=123456
                                        source_database_id: 6c8e43ee-26ea-47b8-a8f8-89897e0137bd
                                        source_database_name: northwind
                                        source_node_name: n1
                                      storage_class: loop_device
                                      storage_size: 500GiB
                                    - backup_config:
                                        provider: pgbackrest
                                        repositories:
                                            - azure_account: pgedge-backups
                                              azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                              azure_endpoint: blob.core.usgovcloudapi.net
                                              azure_key: YXpLZXk=
                                              base_path: /backups
                                              custom_options:
                                                s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                                storage-upload-chunk-size: 5MiB
                                              gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                              gcs_endpoint: localhost
                                              gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                              id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                              retention_full: 2
                                              retention_full_type: count
                                              s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                              s3_endpoint: s3.us-east-1.amazonaws.com
                                              s3_key: AKIAIOSFODNN7EXAMPLE
                                              s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                              s3_region: us-east-1
                                              type: s3
                                        schedules:
                                            - cron_expression: 0 6 * * ?
                                              id: daily-full-backup
                                              type: full
                                            - cron_expression: 0 6 * * ?
                                              id: daily-full-backup
                                              type: full
                                            - cron_expression: 0 6 * * ?
                                              id: daily-full-backup
                                              type: full
                                            - cron_expression: 0 6 * * ?
                                              id: daily-full-backup
                                              type: full
                                      cpus: 500m
                                      host_ids:
                                        - de3b1388-1f0c-42f1-a86c-59ab72f255ec
                                        - de3b1388-1f0c-42f1-a86c-59ab72f255ec
                                        - de3b1388-1f0c-42f1-a86c-59ab72f255ec
                                      memory: 500M
                                      name: n1
                                      port: 5432
                                      postgres_version: "17"
                                      postgresql_conf:
                                        max_connections: 1000
                                      restore_config:
                                        provider: pgbackrest
                                        repository:
                                            azure_account: pgedge-backups
                                            azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                            azure_endpoint: blob.core.usgovcloudapi.net
                                            azure_key: YXpLZXk=
                                            base_path: /backups
                                            custom_options:
                                                s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                            gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                            gcs_endpoint: localhost
                                            gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                            id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                            s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                            s3_endpoint: s3.us-east-1.amazonaws.com
                                            s3_key: AKIAIOSFODNN7EXAMPLE
                                            s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                            s3_region: us-east-1
                                            type: s3
                                        restore_options:
                                            - --set=20250505-153628F
                                            - --type=xid
                                            - --target=123456
                                        source_database_id: 6c8e43ee-26ea-47b8-a8f8-89897e0137bd
                                        source_database_name: northwind
                                        source_node_name: n1
                                      storage_class: loop_device
                                      storage_size: 500GiB
                                    - backup_config:
                                        provider: pgbackrest
                                        repositories:
                                            - azure_account: pgedge-backups
                                              azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                              azure_endpoint: blob.core.usgovcloudapi.net
                                              azure_key: YXpLZXk=
                                              base_path: /backups
                                              custom_options:
                                                s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                                storage-upload-chunk-size: 5MiB
                                              gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                              gcs_endpoint: localhost
                                              gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                              id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                              retention_full: 2
                                              retention_full_type: count
                                              s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                              s3_endpoint: s3.us-east-1.amazonaws.com
                                              s3_key: AKIAIOSFODNN7EXAMPLE
                                              s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                              s3_region: us-east-1
                                              type: s3
                                        schedules:
                                            - cron_expression: 0 6 * * ?
                                              id: daily-full-backup
                                              type: full
                                            - cron_expression: 0 6 * * ?
                                              id: daily-full-backup
                                              type: full
                                            - cron_expression: 0 6 * * ?
                                              id: daily-full-backup
                                              type: full
                                            - cron_expression: 0 6 * * ?
                                              id: daily-full-backup
                                              type: full
                                      cpus: 500m
                                      host_ids:
                                        - de3b1388-1f0c-42f1-a86c-59ab72f255ec
                                        - de3b1388-1f0c-42f1-a86c-59ab72f255ec
                                        - de3b1388-1f0c-42f1-a86c-59ab72f255ec
                                      memory: 500M
                                      name: n1
                                      port: 5432
                                      postgres_version: "17"
                                      postgresql_conf:
                                        max_connections: 1000
                                      restore_config:
                                        provider: pgbackrest
                                        repository:
                                            azure_account: pgedge-backups
                                            azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                            azure_endpoint: blob.core.usgovcloudapi.net
                                            azure_key: YXpLZXk=
                                            base_path: /backups
                                            custom_options:
                                                s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                            gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                            gcs_endpoint: localhost
                                            gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                            id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                            s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                            s3_endpoint: s3.us-east-1.amazonaws.com
                                            s3_key: AKIAIOSFODNN7EXAMPLE
                                            s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                            s3_region: us-east-1
                                            type: s3
                                        restore_options:
                                            - --set=20250505-153628F
                                            - --type=xid
                                            - --target=123456
                                        source_database_id: 6c8e43ee-26ea-47b8-a8f8-89897e0137bd
                                        source_database_name: northwind
                                        source_node_name: n1
                                      storage_class: loop_device
                                      storage_size: 500GiB
                                    - backup_config:
                                        provider: pgbackrest
                                        repositories:
                                            - azure_account: pgedge-backups
                                              azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                              azure_endpoint: blob.core.usgovcloudapi.net
                                              azure_key: YXpLZXk=
                                              base_path: /backups
                                              custom_options:
                                                s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                                storage-upload-chunk-size: 5MiB
                                              gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                              gcs_endpoint: localhost
                                              gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                              id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                              retention_full: 2
                                              retention_full_type: count
                                              s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                              s3_endpoint: s3.us-east-1.amazonaws.com
                                              s3_key: AKIAIOSFODNN7EXAMPLE
                                              s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                              s3_region: us-east-1
                                              type: s3
                                        schedules:
                                            - cron_expression: 0 6 * * ?
                                              id: daily-full-backup
                                              type: full
                                            - cron_expression: 0 6 * * ?
                                              id: daily-full-backup
                                              type: full
                                            - cron_expression: 0 6 * * ?
                                              id: daily-full-backup
                                              type: full
                                            - cron_expression: 0 6 * * ?
                                              id: daily-full-backup
                                              type: full
                                      cpus: 500m
                                      host_ids:
                                        - de3b1388-1f0c-42f1-a86c-59ab72f255ec
                                        - de3b1388-1f0c-42f1-a86c-59ab72f255ec
                                        - de3b1388-1f0c-42f1-a86c-59ab72f255ec
                                      memory: 500M
                                      name: n1
                                      port: 5432
                                      postgres_version: "17"
                                      postgresql_conf:
                                        max_connections: 1000
                                      restore_config:
                                        provider: pgbackrest
                                        repository:
                                            azure_account: pgedge-backups
                                            azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                            azure_endpoint: blob.core.usgovcloudapi.net
                                            azure_key: YXpLZXk=
                                            base_path: /backups
                                            custom_options:
                                                s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                            gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                            gcs_endpoint: localhost
                                            gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                            id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                            s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                            s3_endpoint: s3.us-east-1.amazonaws.com
                                            s3_key: AKIAIOSFODNN7EXAMPLE
                                            s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                            s3_region: us-east-1
                                            type: s3
                                        restore_options:
                                            - --set=20250505-153628F
                                            - --type=xid
                                            - --target=123456
                                        source_database_id: 6c8e43ee-26ea-47b8-a8f8-89897e0137bd
                                        source_database_name: northwind
                                        source_node_name: n1
                                      storage_class: loop_device
                                      storage_size: 500GiB
                                port: 5432
                                postgres_version: "17"
                                postgresql_conf:
                                    max_connections: 1000
                                restore_config:
                                    provider: pgbackrest
                                    repository:
                                        azure_account: pgedge-backups
                                        azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                        azure_endpoint: blob.core.usgovcloudapi.net
                                        azure_key: YXpLZXk=
                                        base_path: /backups
                                        custom_options:
                                            s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                        gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                        gcs_endpoint: localhost
                                        gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                        id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                        s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                        s3_endpoint: s3.us-east-1.amazonaws.com
                                        s3_key: AKIAIOSFODNN7EXAMPLE
                                        s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                        s3_region: us-east-1
                                        type: s3
                                    restore_options:
                                        - --set=20250505-153628F
                                        - --type=xid
                                        - --target=123456
                                    source_database_id: 6c8e43ee-26ea-47b8-a8f8-89897e0137bd
                                    source_database_name: northwind
                                    source_node_name: n1
                                spock_version: "4"
                                storage_class: loop_device
                                storage_size: 500GiB
                            tenant_id: 8210ec10-2dca-406c-ac4a-0661d2189954
            responses:
                "200":
                    description: OK response.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/ControlPlaneCreateDatabaseResponseBody'
                            example:
                                created_at: "2025-01-01T01:30:00Z"
                                id: 02f1a7db-fca8-4521-b57a-2a375c1ced51
                                instances:
                                    - host_id: de3b1388-1f0c-42f1-a86c-59ab72f255ec
                                      id: a67cbb36-c3c3-49c9-8aac-f4a0438a883d
                                      node_name: n1
                                      state: available
                                    - host_id: de3b1388-1f0c-42f1-a86c-59ab72f255ec
                                      id: a67cbb36-c3c3-49c9-8aac-f4a0438a883d
                                      node_name: n1
                                      state: available
                                    - host_id: de3b1388-1f0c-42f1-a86c-59ab72f255ec
                                      id: a67cbb36-c3c3-49c9-8aac-f4a0438a883d
                                      node_name: n1
                                      state: available
                                spec:
                                    backup_config:
                                        provider: pgbackrest
                                        repositories:
                                            - azure_account: pgedge-backups
                                              azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                              azure_endpoint: blob.core.usgovcloudapi.net
                                              azure_key: YXpLZXk=
                                              base_path: /backups
                                              custom_options:
                                                s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                                storage-upload-chunk-size: 5MiB
                                              gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                              gcs_endpoint: localhost
                                              gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                              id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                              retention_full: 2
                                              retention_full_type: count
                                              s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                              s3_endpoint: s3.us-east-1.amazonaws.com
                                              s3_key: AKIAIOSFODNN7EXAMPLE
                                              s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                              s3_region: us-east-1
                                              type: s3
                                            - azure_account: pgedge-backups
                                              azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                              azure_endpoint: blob.core.usgovcloudapi.net
                                              azure_key: YXpLZXk=
                                              base_path: /backups
                                              custom_options:
                                                s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                                storage-upload-chunk-size: 5MiB
                                              gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                              gcs_endpoint: localhost
                                              gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                              id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                              retention_full: 2
                                              retention_full_type: count
                                              s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                              s3_endpoint: s3.us-east-1.amazonaws.com
                                              s3_key: AKIAIOSFODNN7EXAMPLE
                                              s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                              s3_region: us-east-1
                                              type: s3
                                            - azure_account: pgedge-backups
                                              azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                              azure_endpoint: blob.core.usgovcloudapi.net
                                              azure_key: YXpLZXk=
                                              base_path: /backups
                                              custom_options:
                                                s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                                storage-upload-chunk-size: 5MiB
                                              gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                              gcs_endpoint: localhost
                                              gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                              id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                              retention_full: 2
                                              retention_full_type: count
                                              s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                              s3_endpoint: s3.us-east-1.amazonaws.com
                                              s3_key: AKIAIOSFODNN7EXAMPLE
                                              s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                              s3_region: us-east-1
                                              type: s3
                                        schedules:
                                            - cron_expression: 0 6 * * ?
                                              id: daily-full-backup
                                              type: full
                                            - cron_expression: 0 6 * * ?
                                              id: daily-full-backup
                                              type: full
                                    cpus: 500m
                                    database_name: northwind
                                    database_users:
                                        - attributes:
                                            - LOGIN
                                            - CREATEDB
                                            - CREATEROLE
                                          db_owner: true
                                          password: secret
                                          roles:
                                            - pgedge_superuser
                                          username: admin
                                        - attributes:
                                            - LOGIN
                                            - CREATEDB
                                            - CREATEROLE
                                          db_owner: true
                                          password: secret
                                          roles:
                                            - pgedge_superuser
                                          username: admin
                                        - attributes:
                                            - LOGIN
                                            - CREATEDB
                                            - CREATEROLE
                                          db_owner: true
                                          password: secret
                                          roles:
                                            - pgedge_superuser
                                          username: admin
                                    deletion_protection: true
                                    features:
                                        some_feature: enabled
                                    memory: 500M
                                    nodes:
                                        - backup_config:
                                            provider: pgbackrest
                                            repositories:
                                                - azure_account: pgedge-backups
                                                  azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                  azure_endpoint: blob.core.usgovcloudapi.net
                                                  azure_key: YXpLZXk=
                                                  base_path: /backups
                                                  custom_options:
                                                    s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                                    storage-upload-chunk-size: 5MiB
                                                  gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                  gcs_endpoint: localhost
                                                  gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                                  id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                                  retention_full: 2
                                                  retention_full_type: count
                                                  s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                  s3_endpoint: s3.us-east-1.amazonaws.com
                                                  s3_key: AKIAIOSFODNN7EXAMPLE
                                                  s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                                  s3_region: us-east-1
                                                  type: s3
                                                - azure_account: pgedge-backups
                                                  azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                  azure_endpoint: blob.core.usgovcloudapi.net
                                                  azure_key: YXpLZXk=
                                                  base_path: /backups
                                                  custom_options:
                                                    s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                                    storage-upload-chunk-size: 5MiB
                                                  gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                  gcs_endpoint: localhost
                                                  gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                                  id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                                  retention_full: 2
                                                  retention_full_type: count
                                                  s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                  s3_endpoint: s3.us-east-1.amazonaws.com
                                                  s3_key: AKIAIOSFODNN7EXAMPLE
                                                  s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                                  s3_region: us-east-1
                                                  type: s3
                                                - azure_account: pgedge-backups
                                                  azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                  azure_endpoint: blob.core.usgovcloudapi.net
                                                  azure_key: YXpLZXk=
                                                  base_path: /backups
                                                  custom_options:
                                                    s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                                    storage-upload-chunk-size: 5MiB
                                                  gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                  gcs_endpoint: localhost
                                                  gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                                  id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                                  retention_full: 2
                                                  retention_full_type: count
                                                  s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                  s3_endpoint: s3.us-east-1.amazonaws.com
                                                  s3_key: AKIAIOSFODNN7EXAMPLE
                                                  s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                                  s3_region: us-east-1
                                                  type: s3
                                            schedules:
                                                - cron_expression: 0 6 * * ?
                                                  id: daily-full-backup
                                                  type: full
                                                - cron_expression: 0 6 * * ?
                                                  id: daily-full-backup
                                                  type: full
                                          cpus: 500m
                                          host_ids:
                                            - de3b1388-1f0c-42f1-a86c-59ab72f255ec
                                            - de3b1388-1f0c-42f1-a86c-59ab72f255ec
                                          memory: 500M
                                          name: n1
                                          port: 5432
                                          postgres_version: "17"
                                          postgresql_conf:
                                            max_connections: 1000
                                          restore_config:
                                            provider: pgbackrest
                                            repository:
                                                azure_account: pgedge-backups
                                                azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                azure_endpoint: blob.core.usgovcloudapi.net
                                                azure_key: YXpLZXk=
                                                base_path: /backups
                                                custom_options:
                                                    s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                                gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                gcs_endpoint: localhost
                                                gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                                id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                                s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                s3_endpoint: s3.us-east-1.amazonaws.com
                                                s3_key: AKIAIOSFODNN7EXAMPLE
                                                s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                                s3_region: us-east-1
                                                type: s3
                                            restore_options:
                                                - --set=20250505-153628F
                                                - --type=xid
                                                - --target=123456
                                            source_database_id: 6c8e43ee-26ea-47b8-a8f8-89897e0137bd
                                            source_database_name: northwind
                                            source_node_name: n1
                                          storage_class: loop_device
                                          storage_size: 500GiB
                                        - backup_config:
                                            provider: pgbackrest
                                            repositories:
                                                - azure_account: pgedge-backups
                                                  azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                  azure_endpoint: blob.core.usgovcloudapi.net
                                                  azure_key: YXpLZXk=
                                                  base_path: /backups
                                                  custom_options:
                                                    s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                                    storage-upload-chunk-size: 5MiB
                                                  gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                  gcs_endpoint: localhost
                                                  gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                                  id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                                  retention_full: 2
                                                  retention_full_type: count
                                                  s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                  s3_endpoint: s3.us-east-1.amazonaws.com
                                                  s3_key: AKIAIOSFODNN7EXAMPLE
                                                  s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                                  s3_region: us-east-1
                                                  type: s3
                                                - azure_account: pgedge-backups
                                                  azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                  azure_endpoint: blob.core.usgovcloudapi.net
                                                  azure_key: YXpLZXk=
                                                  base_path: /backups
                                                  custom_options:
                                                    s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                                    storage-upload-chunk-size: 5MiB
                                                  gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                  gcs_endpoint: localhost
                                                  gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                                  id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                                  retention_full: 2
                                                  retention_full_type: count
                                                  s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                  s3_endpoint: s3.us-east-1.amazonaws.com
                                                  s3_key: AKIAIOSFODNN7EXAMPLE
                                                  s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                                  s3_region: us-east-1
                                                  type: s3
                                                - azure_account: pgedge-backups
                                                  azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                  azure_endpoint: blob.core.usgovcloudapi.net
                                                  azure_key: YXpLZXk=
                                                  base_path: /backups
                                                  custom_options:
                                                    s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                                    storage-upload-chunk-size: 5MiB
                                                  gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                  gcs_endpoint: localhost
                                                  gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                                  id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                                  retention_full: 2
                                                  retention_full_type: count
                                                  s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                  s3_endpoint: s3.us-east-1.amazonaws.com
                                                  s3_key: AKIAIOSFODNN7EXAMPLE
                                                  s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                                  s3_region: us-east-1
                                                  type: s3
                                            schedules:
                                                - cron_expression: 0 6 * * ?
                                                  id: daily-full-backup
                                                  type: full
                                                - cron_expression: 0 6 * * ?
                                                  id: daily-full-backup
                                                  type: full
                                          cpus: 500m
                                          host_ids:
                                            - de3b1388-1f0c-42f1-a86c-59ab72f255ec
                                            - de3b1388-1f0c-42f1-a86c-59ab72f255ec
                                          memory: 500M
                                          name: n1
                                          port: 5432
                                          postgres_version: "17"
                                          postgresql_conf:
                                            max_connections: 1000
                                          restore_config:
                                            provider: pgbackrest
                                            repository:
                                                azure_account: pgedge-backups
                                                azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                azure_endpoint: blob.core.usgovcloudapi.net
                                                azure_key: YXpLZXk=
                                                base_path: /backups
                                                custom_options:
                                                    s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                                gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                gcs_endpoint: localhost
                                                gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                                id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                                s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                s3_endpoint: s3.us-east-1.amazonaws.com
                                                s3_key: AKIAIOSFODNN7EXAMPLE
                                                s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                                s3_region: us-east-1
                                                type: s3
                                            restore_options:
                                                - --set=20250505-153628F
                                                - --type=xid
                                                - --target=123456
                                            source_database_id: 6c8e43ee-26ea-47b8-a8f8-89897e0137bd
                                            source_database_name: northwind
                                            source_node_name: n1
                                          storage_class: loop_device
                                          storage_size: 500GiB
                                        - backup_config:
                                            provider: pgbackrest
                                            repositories:
                                                - azure_account: pgedge-backups
                                                  azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                  azure_endpoint: blob.core.usgovcloudapi.net
                                                  azure_key: YXpLZXk=
                                                  base_path: /backups
                                                  custom_options:
                                                    s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                                    storage-upload-chunk-size: 5MiB
                                                  gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                  gcs_endpoint: localhost
                                                  gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                                  id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                                  retention_full: 2
                                                  retention_full_type: count
                                                  s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                  s3_endpoint: s3.us-east-1.amazonaws.com
                                                  s3_key: AKIAIOSFODNN7EXAMPLE
                                                  s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                                  s3_region: us-east-1
                                                  type: s3
                                                - azure_account: pgedge-backups
                                                  azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                  azure_endpoint: blob.core.usgovcloudapi.net
                                                  azure_key: YXpLZXk=
                                                  base_path: /backups
                                                  custom_options:
                                                    s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                                    storage-upload-chunk-size: 5MiB
                                                  gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                  gcs_endpoint: localhost
                                                  gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                                  id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                                  retention_full: 2
                                                  retention_full_type: count
                                                  s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                  s3_endpoint: s3.us-east-1.amazonaws.com
                                                  s3_key: AKIAIOSFODNN7EXAMPLE
                                                  s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                                  s3_region: us-east-1
                                                  type: s3
                                                - azure_account: pgedge-backups
                                                  azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                  azure_endpoint: blob.core.usgovcloudapi.net
                                                  azure_key: YXpLZXk=
                                                  base_path: /backups
                                                  custom_options:
                                                    s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                                    storage-upload-chunk-size: 5MiB
                                                  gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                  gcs_endpoint: localhost
                                                  gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                                  id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                                  retention_full: 2
                                                  retention_full_type: count
                                                  s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                  s3_endpoint: s3.us-east-1.amazonaws.com
                                                  s3_key: AKIAIOSFODNN7EXAMPLE
                                                  s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                                  s3_region: us-east-1
                                                  type: s3
                                            schedules:
                                                - cron_expression: 0 6 * * ?
                                                  id: daily-full-backup
                                                  type: full
                                                - cron_expression: 0 6 * * ?
                                                  id: daily-full-backup
                                                  type: full
                                          cpus: 500m
                                          host_ids:
                                            - de3b1388-1f0c-42f1-a86c-59ab72f255ec
                                            - de3b1388-1f0c-42f1-a86c-59ab72f255ec
                                          memory: 500M
                                          name: n1
                                          port: 5432
                                          postgres_version: "17"
                                          postgresql_conf:
                                            max_connections: 1000
                                          restore_config:
                                            provider: pgbackrest
                                            repository:
                                                azure_account: pgedge-backups
                                                azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                azure_endpoint: blob.core.usgovcloudapi.net
                                                azure_key: YXpLZXk=
                                                base_path: /backups
                                                custom_options:
                                                    s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                                gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                gcs_endpoint: localhost
                                                gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                                id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                                s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                s3_endpoint: s3.us-east-1.amazonaws.com
                                                s3_key: AKIAIOSFODNN7EXAMPLE
                                                s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                                s3_region: us-east-1
                                                type: s3
                                            restore_options:
                                                - --set=20250505-153628F
                                                - --type=xid
                                                - --target=123456
                                            source_database_id: 6c8e43ee-26ea-47b8-a8f8-89897e0137bd
                                            source_database_name: northwind
                                            source_node_name: n1
                                          storage_class: loop_device
                                          storage_size: 500GiB
                                    port: 5432
                                    postgres_version: "17"
                                    postgresql_conf:
                                        max_connections: 1000
                                    restore_config:
                                        provider: pgbackrest
                                        repository:
                                            azure_account: pgedge-backups
                                            azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                            azure_endpoint: blob.core.usgovcloudapi.net
                                            azure_key: YXpLZXk=
                                            base_path: /backups
                                            custom_options:
                                                s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                            gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                            gcs_endpoint: localhost
                                            gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                            id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                            s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                            s3_endpoint: s3.us-east-1.amazonaws.com
                                            s3_key: AKIAIOSFODNN7EXAMPLE
                                            s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                            s3_region: us-east-1
                                            type: s3
                                        restore_options:
                                            - --set=20250505-153628F
                                            - --type=xid
                                            - --target=123456
                                        source_database_id: 6c8e43ee-26ea-47b8-a8f8-89897e0137bd
                                        source_database_name: northwind
                                        source_node_name: n1
                                    spock_version: "4"
                                    storage_class: loop_device
                                    storage_size: 500GiB
                                state: deleting
                                tenant_id: 8210ec10-2dca-406c-ac4a-0661d2189954
                                updated_at: "2025-01-01T02:30:00Z"
                "404":
                    description: 'not_found: Not Found response.'
                    content:
                        application/vnd.goa.error:
                            schema:
                                $ref: '#/components/schemas/Error'
                "409":
                    description: 'database_not_modifiable: Conflict response.'
                    content:
                        application/vnd.goa.error:
                            schema:
                                $ref: '#/components/schemas/Error'
    /databases/{database_id}/nodes/{node_name}/backups:
        post:
            tags:
                - control-plane
            summary: initiate-database-backup control-plane
            description: Initiates a backup for a database.
            operationId: initiate-database-backup
            parameters:
                - name: database_id
                  in: path
                  description: ID of the database to back up.
                  required: true
                  schema:
                    type: string
                    description: ID of the database to back up.
                    example: 02f1a7db-fca8-4521-b57a-2a375c1ced51
                    format: uuid
                  example: 02f1a7db-fca8-4521-b57a-2a375c1ced51
                - name: node_name
                  in: path
                  description: Name of the node to back up.
                  required: true
                  schema:
                    type: string
                    description: Name of the node to back up.
                    example: n1
                  example: n1
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            $ref: '#/components/schemas/BackupOptions'
                        example:
                            annotations:
                                key: value
                            extra_options:
                                - --option1
                                - --option2
                            type: full
            responses:
                "200":
                    description: OK response.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Task'
                            example:
                                completed_at: "2025-01-01T02:30:00Z"
                                created_at: "2025-01-01T01:30:00Z"
                                database_id: 02f1a7db-fca8-4521-b57a-2a375c1ced51
                                error: failed to connect to database
                                host_id: 2e52dcde-86d8-4f71-b58e-8dc3a10c936a
                                instance_id: 3c875a27-f6a6-4c1c-ba5f-6972fb1fc348
                                node_name: n1
                                status: pending
                                task_id: 3c875a27-f6a6-4c1c-ba5f-6972fb1fc348
                                type: restore
                "404":
                    description: 'not_found: Not Found response.'
                    content:
                        application/vnd.goa.error:
                            schema:
                                $ref: '#/components/schemas/Error'
                "409":
                    description: 'database_not_modifiable: Conflict response.'
                    content:
                        application/vnd.goa.error:
                            schema:
                                $ref: '#/components/schemas/Error'
    /databases/{database_id}/restore:
        post:
            tags:
                - control-plane
            summary: restore-database control-plane
            description: Perform an in-place restore one or more nodes using the given restore configuration.
            operationId: restore-database
            parameters:
                - name: database_id
                  in: path
                  description: ID of the database to restore.
                  required: true
                  schema:
                    type: string
                    description: ID of the database to restore.
                    example: 02f1a7db-fca8-4521-b57a-2a375c1ced51
                    format: uuid
                  example: 02f1a7db-fca8-4521-b57a-2a375c1ced51
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            $ref: '#/components/schemas/RestoreDatabaseRequest'
                        example:
                            restore_config:
                                provider: pgbackrest
                                repository:
                                    azure_account: pgedge-backups
                                    azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                    azure_endpoint: blob.core.usgovcloudapi.net
                                    azure_key: YXpLZXk=
                                    base_path: /backups
                                    custom_options:
                                        s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                    gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                    gcs_endpoint: localhost
                                    gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                    id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                    s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                    s3_endpoint: s3.us-east-1.amazonaws.com
                                    s3_key: AKIAIOSFODNN7EXAMPLE
                                    s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                    s3_region: us-east-1
                                    type: s3
                                restore_options:
                                    - --set=20250505-153628F
                                    - --type=xid
                                    - --target=123456
                                source_database_id: 6c8e43ee-26ea-47b8-a8f8-89897e0137bd
                                source_database_name: northwind
                                source_node_name: n1
                            target_nodes:
                                - n1
            responses:
                "200":
                    description: OK response.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/RestoreDatabaseResponse'
                            example:
                                database:
                                    created_at: "2025-01-01T01:30:00Z"
                                    id: 02f1a7db-fca8-4521-b57a-2a375c1ced51
                                    instances:
                                        - created_at: "2008-04-05T03:29:38Z"
                                          host_id: de3b1388-1f0c-42f1-a86c-59ab72f255ec
                                          id: a67cbb36-c3c3-49c9-8aac-f4a0438a883d
                                          interfaces:
                                            - hostname: postgres-n1
                                              ipv4_address: 10.1.0.113
                                              network_id: l5imrq28sh6s
                                              network_type: docker
                                              port: 5432
                                            - hostname: postgres-n1
                                              ipv4_address: 10.1.0.113
                                              network_id: l5imrq28sh6s
                                              network_type: docker
                                              port: 5432
                                            - hostname: postgres-n1
                                              ipv4_address: 10.1.0.113
                                              network_id: l5imrq28sh6s
                                              network_type: docker
                                              port: 5432
                                          node_name: n1
                                          patroni_paused: true
                                          patroni_state: unknown
                                          pending_restart: true
                                          postgres_version: "17.1"
                                          read_only: true
                                          role: primary
                                          spock_version: 4.0.9
                                          state: backing_up
                                          updated_at: "2003-08-09T22:13:38Z"
                                        - created_at: "2008-04-05T03:29:38Z"
                                          host_id: de3b1388-1f0c-42f1-a86c-59ab72f255ec
                                          id: a67cbb36-c3c3-49c9-8aac-f4a0438a883d
                                          interfaces:
                                            - hostname: postgres-n1
                                              ipv4_address: 10.1.0.113
                                              network_id: l5imrq28sh6s
                                              network_type: docker
                                              port: 5432
                                            - hostname: postgres-n1
                                              ipv4_address: 10.1.0.113
                                              network_id: l5imrq28sh6s
                                              network_type: docker
                                              port: 5432
                                            - hostname: postgres-n1
                                              ipv4_address: 10.1.0.113
                                              network_id: l5imrq28sh6s
                                              network_type: docker
                                              port: 5432
                                          node_name: n1
                                          patroni_paused: true
                                          patroni_state: unknown
                                          pending_restart: true
                                          postgres_version: "17.1"
                                          read_only: true
                                          role: primary
                                          spock_version: 4.0.9
                                          state: backing_up
                                          updated_at: "2003-08-09T22:13:38Z"
                                    spec:
                                        backup_config:
                                            provider: pgbackrest
                                            repositories:
                                                - azure_account: pgedge-backups
                                                  azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                  azure_endpoint: blob.core.usgovcloudapi.net
                                                  azure_key: YXpLZXk=
                                                  base_path: /backups
                                                  custom_options:
                                                    s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                                    storage-upload-chunk-size: 5MiB
                                                  gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                  gcs_endpoint: localhost
                                                  gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                                  id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                                  retention_full: 2
                                                  retention_full_type: count
                                                  s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                  s3_endpoint: s3.us-east-1.amazonaws.com
                                                  s3_key: AKIAIOSFODNN7EXAMPLE
                                                  s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                                  s3_region: us-east-1
                                                  type: s3
                                            schedules:
                                                - cron_expression: 0 6 * * ?
                                                  id: daily-full-backup
                                                  type: full
                                                - cron_expression: 0 6 * * ?
                                                  id: daily-full-backup
                                                  type: full
                                                - cron_expression: 0 6 * * ?
                                                  id: daily-full-backup
                                                  type: full
                                        cpus: 500m
                                        database_name: northwind
                                        database_users:
                                            - attributes:
                                                - LOGIN
                                                - CREATEDB
                                                - CREATEROLE
                                              db_owner: true
                                              password: secret
                                              roles:
                                                - pgedge_superuser
                                              username: admin
                                            - attributes:
                                                - LOGIN
                                                - CREATEDB
                                                - CREATEROLE
                                              db_owner: true
                                              password: secret
                                              roles:
                                                - pgedge_superuser
                                              username: admin
                                        deletion_protection: true
                                        features:
                                            some_feature: enabled
                                        memory: 500M
                                        nodes:
                                            - backup_config:
                                                provider: pgbackrest
                                                repositories:
                                                    - azure_account: pgedge-backups
                                                      azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                      azure_endpoint: blob.core.usgovcloudapi.net
                                                      azure_key: YXpLZXk=
                                                      base_path: /backups
                                                      custom_options:
                                                        s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                                        storage-upload-chunk-size: 5MiB
                                                      gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                      gcs_endpoint: localhost
                                                      gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                                      id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                                      retention_full: 2
                                                      retention_full_type: count
                                                      s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                      s3_endpoint: s3.us-east-1.amazonaws.com
                                                      s3_key: AKIAIOSFODNN7EXAMPLE
                                                      s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                                      s3_region: us-east-1
                                                      type: s3
                                                schedules:
                                                    - cron_expression: 0 6 * * ?
                                                      id: daily-full-backup
                                                      type: full
                                                    - cron_expression: 0 6 * * ?
                                                      id: daily-full-backup
                                                      type: full
                                                    - cron_expression: 0 6 * * ?
                                                      id: daily-full-backup
                                                      type: full
                                              cpus: 500m
                                              host_ids:
                                                - de3b1388-1f0c-42f1-a86c-59ab72f255ec
                                              memory: 500M
                                              name: n1
                                              port: 5432
                                              postgres_version: "17"
                                              postgresql_conf:
                                                max_connections: 1000
                                              restore_config:
                                                provider: pgbackrest
                                                repository:
                                                    azure_account: pgedge-backups
                                                    azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                    azure_endpoint: blob.core.usgovcloudapi.net
                                                    azure_key: YXpLZXk=
                                                    base_path: /backups
                                                    custom_options:
                                                        s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                                    gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                    gcs_endpoint: localhost
                                                    gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                                    id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                                    s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                    s3_endpoint: s3.us-east-1.amazonaws.com
                                                    s3_key: AKIAIOSFODNN7EXAMPLE
                                                    s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                                    s3_region: us-east-1
                                                    type: s3
                                                restore_options:
                                                    - --set=20250505-153628F
                                                    - --type=xid
                                                    - --target=123456
                                                source_database_id: 6c8e43ee-26ea-47b8-a8f8-89897e0137bd
                                                source_database_name: northwind
                                                source_node_name: n1
                                              storage_class: loop_device
                                              storage_size: 500GiB
                                            - backup_config:
                                                provider: pgbackrest
                                                repositories:
                                                    - azure_account: pgedge-backups
                                                      azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                      azure_endpoint: blob.core.usgovcloudapi.net
                                                      azure_key: YXpLZXk=
                                                      base_path: /backups
                                                      custom_options:
                                                        s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                                        storage-upload-chunk-size: 5MiB
                                                      gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                      gcs_endpoint: localhost
                                                      gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                                      id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                                      retention_full: 2
                                                      retention_full_type: count
                                                      s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                      s3_endpoint: s3.us-east-1.amazonaws.com
                                                      s3_key: AKIAIOSFODNN7EXAMPLE
                                                      s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                                      s3_region: us-east-1
                                                      type: s3
                                                schedules:
                                                    - cron_expression: 0 6 * * ?
                                                      id: daily-full-backup
                                                      type: full
                                                    - cron_expression: 0 6 * * ?
                                                      id: daily-full-backup
                                                      type: full
                                                    - cron_expression: 0 6 * * ?
                                                      id: daily-full-backup
                                                      type: full
                                              cpus: 500m
                                              host_ids:
                                                - de3b1388-1f0c-42f1-a86c-59ab72f255ec
                                              memory: 500M
                                              name: n1
                                              port: 5432
                                              postgres_version: "17"
                                              postgresql_conf:
                                                max_connections: 1000
                                              restore_config:
                                                provider: pgbackrest
                                                repository:
                                                    azure_account: pgedge-backups
                                                    azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                    azure_endpoint: blob.core.usgovcloudapi.net
                                                    azure_key: YXpLZXk=
                                                    base_path: /backups
                                                    custom_options:
                                                        s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                                    gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                    gcs_endpoint: localhost
                                                    gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                                    id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                                    s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                    s3_endpoint: s3.us-east-1.amazonaws.com
                                                    s3_key: AKIAIOSFODNN7EXAMPLE
                                                    s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                                    s3_region: us-east-1
                                                    type: s3
                                                restore_options:
                                                    - --set=20250505-153628F
                                                    - --type=xid
                                                    - --target=123456
                                                source_database_id: 6c8e43ee-26ea-47b8-a8f8-89897e0137bd
                                                source_database_name: northwind
                                                source_node_name: n1
                                              storage_class: loop_device
                                              storage_size: 500GiB
                                            - backup_config:
                                                provider: pgbackrest
                                                repositories:
                                                    - azure_account: pgedge-backups
                                                      azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                      azure_endpoint: blob.core.usgovcloudapi.net
                                                      azure_key: YXpLZXk=
                                                      base_path: /backups
                                                      custom_options:
                                                        s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                                        storage-upload-chunk-size: 5MiB
                                                      gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                      gcs_endpoint: localhost
                                                      gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                                      id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                                      retention_full: 2
                                                      retention_full_type: count
                                                      s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                      s3_endpoint: s3.us-east-1.amazonaws.com
                                                      s3_key: AKIAIOSFODNN7EXAMPLE
                                                      s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                                      s3_region: us-east-1
                                                      type: s3
                                                schedules:
                                                    - cron_expression: 0 6 * * ?
                                                      id: daily-full-backup
                                                      type: full
                                                    - cron_expression: 0 6 * * ?
                                                      id: daily-full-backup
                                                      type: full
                                                    - cron_expression: 0 6 * * ?
                                                      id: daily-full-backup
                                                      type: full
                                              cpus: 500m
                                              host_ids:
                                                - de3b1388-1f0c-42f1-a86c-59ab72f255ec
                                              memory: 500M
                                              name: n1
                                              port: 5432
                                              postgres_version: "17"
                                              postgresql_conf:
                                                max_connections: 1000
                                              restore_config:
                                                provider: pgbackrest
                                                repository:
                                                    azure_account: pgedge-backups
                                                    azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                    azure_endpoint: blob.core.usgovcloudapi.net
                                                    azure_key: YXpLZXk=
                                                    base_path: /backups
                                                    custom_options:
                                                        s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                                    gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                    gcs_endpoint: localhost
                                                    gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                                    id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                                    s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                    s3_endpoint: s3.us-east-1.amazonaws.com
                                                    s3_key: AKIAIOSFODNN7EXAMPLE
                                                    s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                                    s3_region: us-east-1
                                                    type: s3
                                                restore_options:
                                                    - --set=20250505-153628F
                                                    - --type=xid
                                                    - --target=123456
                                                source_database_id: 6c8e43ee-26ea-47b8-a8f8-89897e0137bd
                                                source_database_name: northwind
                                                source_node_name: n1
                                              storage_class: loop_device
                                              storage_size: 500GiB
                                            - backup_config:
                                                provider: pgbackrest
                                                repositories:
                                                    - azure_account: pgedge-backups
                                                      azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                      azure_endpoint: blob.core.usgovcloudapi.net
                                                      azure_key: YXpLZXk=
                                                      base_path: /backups
                                                      custom_options:
                                                        s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                                        storage-upload-chunk-size: 5MiB
                                                      gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                      gcs_endpoint: localhost
                                                      gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                                      id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                                      retention_full: 2
                                                      retention_full_type: count
                                                      s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                      s3_endpoint: s3.us-east-1.amazonaws.com
                                                      s3_key: AKIAIOSFODNN7EXAMPLE
                                                      s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                                      s3_region: us-east-1
                                                      type: s3
                                                schedules:
                                                    - cron_expression: 0 6 * * ?
                                                      id: daily-full-backup
                                                      type: full
                                                    - cron_expression: 0 6 * * ?
                                                      id: daily-full-backup
                                                      type: full
                                                    - cron_expression: 0 6 * * ?
                                                      id: daily-full-backup
                                                      type: full
                                              cpus: 500m
                                              host_ids:
                                                - de3b1388-1f0c-42f1-a86c-59ab72f255ec
                                              memory: 500M
                                              name: n1
                                              port: 5432
                                              postgres_version: "17"
                                              postgresql_conf:
                                                max_connections: 1000
                                              restore_config:
                                                provider: pgbackrest
                                                repository:
                                                    azure_account: pgedge-backups
                                                    azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                    azure_endpoint: blob.core.usgovcloudapi.net
                                                    azure_key: YXpLZXk=
                                                    base_path: /backups
                                                    custom_options:
                                                        s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                                    gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                    gcs_endpoint: localhost
                                                    gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                                    id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                                    s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                    s3_endpoint: s3.us-east-1.amazonaws.com
                                                    s3_key: AKIAIOSFODNN7EXAMPLE
                                                    s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                                    s3_region: us-east-1
                                                    type: s3
                                                restore_options:
                                                    - --set=20250505-153628F
                                                    - --type=xid
                                                    - --target=123456
                                                source_database_id: 6c8e43ee-26ea-47b8-a8f8-89897e0137bd
                                                source_database_name: northwind
                                                source_node_name: n1
                                              storage_class: loop_device
                                              storage_size: 500GiB
                                        port: 5432
                                        postgres_version: "17"
                                        postgresql_conf:
                                            max_connections: 1000
                                        restore_config:
                                            provider: pgbackrest
                                            repository:
                                                azure_account: pgedge-backups
                                                azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                azure_endpoint: blob.core.usgovcloudapi.net
                                                azure_key: YXpLZXk=
                                                base_path: /backups
                                                custom_options:
                                                    s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                                gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                gcs_endpoint: localhost
                                                gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                                id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                                s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                                s3_endpoint: s3.us-east-1.amazonaws.com
                                                s3_key: AKIAIOSFODNN7EXAMPLE
                                                s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                                s3_region: us-east-1
                                                type: s3
                                            restore_options:
                                                - --set=20250505-153628F
                                                - --type=xid
                                                - --target=123456
                                            source_database_id: 6c8e43ee-26ea-47b8-a8f8-89897e0137bd
                                            source_database_name: northwind
                                            source_node_name: n1
                                        spock_version: "4"
                                        storage_class: loop_device
                                        storage_size: 500GiB
                                    state: modifying
                                    tenant_id: 8210ec10-2dca-406c-ac4a-0661d2189954
                                    updated_at: "2025-01-01T02:30:00Z"
                                tasks:
                                    - completed_at: "2025-01-01T02:30:00Z"
                                      created_at: "2025-01-01T01:30:00Z"
                                      database_id: 02f1a7db-fca8-4521-b57a-2a375c1ced51
                                      error: failed to connect to database
                                      host_id: 2e52dcde-86d8-4f71-b58e-8dc3a10c936a
                                      instance_id: 3c875a27-f6a6-4c1c-ba5f-6972fb1fc348
                                      node_name: n1
                                      status: pending
                                      task_id: 3c875a27-f6a6-4c1c-ba5f-6972fb1fc348
                                      type: restore
                                    - completed_at: "2025-01-01T02:30:00Z"
                                      created_at: "2025-01-01T01:30:00Z"
                                      database_id: 02f1a7db-fca8-4521-b57a-2a375c1ced51
                                      error: failed to connect to database
                                      host_id: 2e52dcde-86d8-4f71-b58e-8dc3a10c936a
                                      instance_id: 3c875a27-f6a6-4c1c-ba5f-6972fb1fc348
                                      node_name: n1
                                      status: pending
                                      task_id: 3c875a27-f6a6-4c1c-ba5f-6972fb1fc348
                                      type: restore
                                    - completed_at: "2025-01-01T02:30:00Z"
                                      created_at: "2025-01-01T01:30:00Z"
                                      database_id: 02f1a7db-fca8-4521-b57a-2a375c1ced51
                                      error: failed to connect to database
                                      host_id: 2e52dcde-86d8-4f71-b58e-8dc3a10c936a
                                      instance_id: 3c875a27-f6a6-4c1c-ba5f-6972fb1fc348
                                      node_name: n1
                                      status: pending
                                      task_id: 3c875a27-f6a6-4c1c-ba5f-6972fb1fc348
                                      type: restore
                                    - completed_at: "2025-01-01T02:30:00Z"
                                      created_at: "2025-01-01T01:30:00Z"
                                      database_id: 02f1a7db-fca8-4521-b57a-2a375c1ced51
                                      error: failed to connect to database
                                      host_id: 2e52dcde-86d8-4f71-b58e-8dc3a10c936a
                                      instance_id: 3c875a27-f6a6-4c1c-ba5f-6972fb1fc348
                                      node_name: n1
                                      status: pending
                                      task_id: 3c875a27-f6a6-4c1c-ba5f-6972fb1fc348
                                      type: restore
                "400":
                    description: 'invalid_input: Bad Request response.'
                    content:
                        application/vnd.goa.error:
                            schema:
                                $ref: '#/components/schemas/Error'
                "404":
                    description: 'not_found: Not Found response.'
                    content:
                        application/vnd.goa.error:
                            schema:
                                $ref: '#/components/schemas/Error'
                "409":
                    description: 'database_not_modifiable: Conflict response.'
                    content:
                        application/vnd.goa.error:
                            schema:
                                $ref: '#/components/schemas/Error'
    /databases/{database_id}/tasks:
        get:
            tags:
                - control-plane
            summary: list-database-tasks control-plane
            description: Lists all tasks for a database.
            operationId: list-database-tasks
            parameters:
                - name: after_task_id
                  in: query
                  description: ID of the task to start from.
                  allowEmptyValue: true
                  schema:
                    type: string
                    description: ID of the task to start from.
                    example: 3c875a27-f6a6-4c1c-ba5f-6972fb1fc348
                    format: uuid
                  example: 3c875a27-f6a6-4c1c-ba5f-6972fb1fc348
                - name: limit
                  in: query
                  description: Maximum number of tasks to return.
                  allowEmptyValue: true
                  schema:
                    type: integer
                    description: Maximum number of tasks to return.
                    example: 100
                    format: int64
                  example: 100
                - name: sort_order
                  in: query
                  description: Sort order for the tasks.
                  allowEmptyValue: true
                  schema:
                    type: string
                    description: Sort order for the tasks.
                    example: ascend
                    enum:
                        - asc
                        - ascend
                        - ascending
                        - desc
                        - descend
                        - descending
                  example: ascend
                - name: database_id
                  in: path
                  description: ID of the database to list tasks for.
                  required: true
                  schema:
                    type: string
                    description: ID of the database to list tasks for.
                    example: 02f1a7db-fca8-4521-b57a-2a375c1ced51
                    format: uuid
                  example: 02f1a7db-fca8-4521-b57a-2a375c1ced51
            responses:
                "200":
                    description: OK response.
                    content:
                        application/json:
                            schema:
                                type: array
                                items:
                                    $ref: '#/components/schemas/Task'
                                example:
                                    - completed_at: "2025-01-01T02:30:00Z"
                                      created_at: "2025-01-01T01:30:00Z"
                                      database_id: 02f1a7db-fca8-4521-b57a-2a375c1ced51
                                      error: failed to connect to database
                                      host_id: 2e52dcde-86d8-4f71-b58e-8dc3a10c936a
                                      instance_id: 3c875a27-f6a6-4c1c-ba5f-6972fb1fc348
                                      node_name: n1
                                      status: pending
                                      task_id: 3c875a27-f6a6-4c1c-ba5f-6972fb1fc348
                                      type: restore
                                    - completed_at: "2025-01-01T02:30:00Z"
                                      created_at: "2025-01-01T01:30:00Z"
                                      database_id: 02f1a7db-fca8-4521-b57a-2a375c1ced51
                                      error: failed to connect to database
                                      host_id: 2e52dcde-86d8-4f71-b58e-8dc3a10c936a
                                      instance_id: 3c875a27-f6a6-4c1c-ba5f-6972fb1fc348
                                      node_name: n1
                                      status: pending
                                      task_id: 3c875a27-f6a6-4c1c-ba5f-6972fb1fc348
                                      type: restore
                                    - completed_at: "2025-01-01T02:30:00Z"
                                      created_at: "2025-01-01T01:30:00Z"
                                      database_id: 02f1a7db-fca8-4521-b57a-2a375c1ced51
                                      error: failed to connect to database
                                      host_id: 2e52dcde-86d8-4f71-b58e-8dc3a10c936a
                                      instance_id: 3c875a27-f6a6-4c1c-ba5f-6972fb1fc348
                                      node_name: n1
                                      status: pending
                                      task_id: 3c875a27-f6a6-4c1c-ba5f-6972fb1fc348
                                      type: restore
                            example:
                                - completed_at: "2025-01-01T02:30:00Z"
                                  created_at: "2025-01-01T01:30:00Z"
                                  database_id: 02f1a7db-fca8-4521-b57a-2a375c1ced51
                                  error: failed to connect to database
                                  host_id: 2e52dcde-86d8-4f71-b58e-8dc3a10c936a
                                  instance_id: 3c875a27-f6a6-4c1c-ba5f-6972fb1fc348
                                  node_name: n1
                                  status: pending
                                  task_id: 3c875a27-f6a6-4c1c-ba5f-6972fb1fc348
                                  type: restore
                                - completed_at: "2025-01-01T02:30:00Z"
                                  created_at: "2025-01-01T01:30:00Z"
                                  database_id: 02f1a7db-fca8-4521-b57a-2a375c1ced51
                                  error: failed to connect to database
                                  host_id: 2e52dcde-86d8-4f71-b58e-8dc3a10c936a
                                  instance_id: 3c875a27-f6a6-4c1c-ba5f-6972fb1fc348
                                  node_name: n1
                                  status: pending
                                  task_id: 3c875a27-f6a6-4c1c-ba5f-6972fb1fc348
                                  type: restore
                                - completed_at: "2025-01-01T02:30:00Z"
                                  created_at: "2025-01-01T01:30:00Z"
                                  database_id: 02f1a7db-fca8-4521-b57a-2a375c1ced51
                                  error: failed to connect to database
                                  host_id: 2e52dcde-86d8-4f71-b58e-8dc3a10c936a
                                  instance_id: 3c875a27-f6a6-4c1c-ba5f-6972fb1fc348
                                  node_name: n1
                                  status: pending
                                  task_id: 3c875a27-f6a6-4c1c-ba5f-6972fb1fc348
                                  type: restore
                                - completed_at: "2025-01-01T02:30:00Z"
                                  created_at: "2025-01-01T01:30:00Z"
                                  database_id: 02f1a7db-fca8-4521-b57a-2a375c1ced51
                                  error: failed to connect to database
                                  host_id: 2e52dcde-86d8-4f71-b58e-8dc3a10c936a
                                  instance_id: 3c875a27-f6a6-4c1c-ba5f-6972fb1fc348
                                  node_name: n1
                                  status: pending
                                  task_id: 3c875a27-f6a6-4c1c-ba5f-6972fb1fc348
                                  type: restore
                "404":
                    description: 'not_found: Not Found response.'
                    content:
                        application/vnd.goa.error:
                            schema:
                                $ref: '#/components/schemas/Error'
                "409":
                    description: 'cluster_not_initialized: Conflict response.'
                    content:
                        application/vnd.goa.error:
                            schema:
                                $ref: '#/components/schemas/Error'
    /databases/{database_id}/tasks/{task_id}:
        get:
            tags:
                - control-plane
            summary: inspect-database-task control-plane
            description: Returns information about a particular task for a database.
            operationId: inspect-database-task
            parameters:
                - name: database_id
                  in: path
                  description: ID of the database to inspect tasks for.
                  required: true
                  schema:
                    type: string
                    description: ID of the database to inspect tasks for.
                    example: 02f1a7db-fca8-4521-b57a-2a375c1ced51
                    format: uuid
                  example: 02f1a7db-fca8-4521-b57a-2a375c1ced51
                - name: task_id
                  in: path
                  description: ID of the task to inspect.
                  required: true
                  schema:
                    type: string
                    description: ID of the task to inspect.
                    example: 3c875a27-f6a6-4c1c-ba5f-6972fb1fc348
                    format: uuid
                  example: 3c875a27-f6a6-4c1c-ba5f-6972fb1fc348
            responses:
                "200":
                    description: OK response.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Task'
                            example:
                                completed_at: "2025-01-01T02:30:00Z"
                                created_at: "2025-01-01T01:30:00Z"
                                database_id: 02f1a7db-fca8-4521-b57a-2a375c1ced51
                                error: failed to connect to database
                                host_id: 2e52dcde-86d8-4f71-b58e-8dc3a10c936a
                                instance_id: 3c875a27-f6a6-4c1c-ba5f-6972fb1fc348
                                node_name: n1
                                status: pending
                                task_id: 3c875a27-f6a6-4c1c-ba5f-6972fb1fc348
                                type: restore
                "404":
                    description: 'not_found: Not Found response.'
                    content:
                        application/vnd.goa.error:
                            schema:
                                $ref: '#/components/schemas/Error'
                "409":
                    description: 'cluster_not_initialized: Conflict response.'
                    content:
                        application/vnd.goa.error:
                            schema:
                                $ref: '#/components/schemas/Error'
    /databases/{database_id}/tasks/{task_id}/log:
        get:
            tags:
                - control-plane
            summary: get-database-task-log control-plane
            description: Returns the log of a particular task for a database.
            operationId: get-database-task-log
            parameters:
                - name: after_line_id
                  in: query
                  description: ID of the line to start from.
                  allowEmptyValue: true
                  schema:
                    type: string
                    description: ID of the line to start from.
                    example: 3c875a27-f6a6-4c1c-ba5f-6972fb1fc348
                    format: uuid
                  example: 3c875a27-f6a6-4c1c-ba5f-6972fb1fc348
                - name: limit
                  in: query
                  description: Maximum number of lines to return.
                  allowEmptyValue: true
                  schema:
                    type: integer
                    description: Maximum number of lines to return.
                    example: 100
                    format: int64
                  example: 100
                - name: database_id
                  in: path
                  description: ID of the database to get task log for.
                  required: true
                  schema:
                    type: string
                    description: ID of the database to get task log for.
                    example: 02f1a7db-fca8-4521-b57a-2a375c1ced51
                    format: uuid
                  example: 02f1a7db-fca8-4521-b57a-2a375c1ced51
                - name: task_id
                  in: path
                  description: ID of the task to get log for.
                  required: true
                  schema:
                    type: string
                    description: ID of the task to get log for.
                    example: 3c875a27-f6a6-4c1c-ba5f-6972fb1fc348
                    format: uuid
                  example: 3c875a27-f6a6-4c1c-ba5f-6972fb1fc348
            responses:
                "200":
                    description: OK response.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/TaskLog'
                            example:
                                database_id: 02f1a7db-fca8-4521-b57a-2a375c1ced51
                                last_line_id: 3c875a27-f6a6-4c1c-ba5f-6972fb1fc348
                                lines:
                                    - Task started
                                    - Task completed
                                task_id: 3c875a27-f6a6-4c1c-ba5f-6972fb1fc348
                                task_status: pending
                "404":
                    description: 'not_found: Not Found response.'
                    content:
                        application/vnd.goa.error:
                            schema:
                                $ref: '#/components/schemas/Error'
                "409":
                    description: 'cluster_not_initialized: Conflict response.'
                    content:
                        application/vnd.goa.error:
                            schema:
                                $ref: '#/components/schemas/Error'
    /hosts:
        get:
            tags:
                - control-plane
            summary: list-hosts control-plane
            description: Lists all hosts within the cluster.
            operationId: list-hosts
            responses:
                "200":
                    description: OK response.
                    content:
                        application/json:
                            schema:
                                type: array
                                items:
                                    $ref: '#/components/schemas/Host'
                                example:
                                    - cohort:
                                        cohort_id: pps1n11hqijn9rbee4cjil453
                                        control_available: true
                                        member_id: lah4bsznw6kc0hp7biylmmmll
                                        type: swarm
                                      cpus: 4
                                      default_pgedge_version:
                                        postgres_version: "16"
                                        spock_version: "4"
                                      hostname: i-0123456789abcdef.ec2.internal
                                      id: de3b1388-1f0c-42f1-a86c-59ab72f255ec
                                      ipv4_address: 10.24.34.0
                                      memory: 16GiB
                                      orchestrator: swarm
                                      status:
                                        components:
                                            Non modi totam quis et aut.:
                                                details:
                                                    alarms:
                                                        - '3: NOSPACE'
                                                error: failed to connect to etcd
                                                healthy: false
                                            Voluptas necessitatibus culpa fugit.:
                                                details:
                                                    alarms:
                                                        - '3: NOSPACE'
                                                error: failed to connect to etcd
                                                healthy: false
                                        state: available
                                        updated_at: "2021-07-01T12:34:56Z"
                                      supported_pgedge_versions:
                                        - postgres_version: "16"
                                          spock_version: "4"
                                        - postgres_version: "16"
                                          spock_version: "4"
                                        - postgres_version: "16"
                                          spock_version: "4"
                                        - postgres_version: "16"
                                          spock_version: "4"
                                    - cohort:
                                        cohort_id: pps1n11hqijn9rbee4cjil453
                                        control_available: true
                                        member_id: lah4bsznw6kc0hp7biylmmmll
                                        type: swarm
                                      cpus: 4
                                      default_pgedge_version:
                                        postgres_version: "16"
                                        spock_version: "4"
                                      hostname: i-0123456789abcdef.ec2.internal
                                      id: de3b1388-1f0c-42f1-a86c-59ab72f255ec
                                      ipv4_address: 10.24.34.0
                                      memory: 16GiB
                                      orchestrator: swarm
                                      status:
                                        components:
                                            Non modi totam quis et aut.:
                                                details:
                                                    alarms:
                                                        - '3: NOSPACE'
                                                error: failed to connect to etcd
                                                healthy: false
                                            Voluptas necessitatibus culpa fugit.:
                                                details:
                                                    alarms:
                                                        - '3: NOSPACE'
                                                error: failed to connect to etcd
                                                healthy: false
                                        state: available
                                        updated_at: "2021-07-01T12:34:56Z"
                                      supported_pgedge_versions:
                                        - postgres_version: "16"
                                          spock_version: "4"
                                        - postgres_version: "16"
                                          spock_version: "4"
                                        - postgres_version: "16"
                                          spock_version: "4"
                                        - postgres_version: "16"
                                          spock_version: "4"
                            example:
                                - cohort:
                                    cohort_id: pps1n11hqijn9rbee4cjil453
                                    control_available: true
                                    member_id: lah4bsznw6kc0hp7biylmmmll
                                    type: swarm
                                  cpus: 4
                                  default_pgedge_version:
                                    postgres_version: "16"
                                    spock_version: "4"
                                  hostname: i-0123456789abcdef.ec2.internal
                                  id: de3b1388-1f0c-42f1-a86c-59ab72f255ec
                                  ipv4_address: 10.24.34.0
                                  memory: 16GiB
                                  orchestrator: swarm
                                  status:
                                    components:
                                        Non modi totam quis et aut.:
                                            details:
                                                alarms:
                                                    - '3: NOSPACE'
                                            error: failed to connect to etcd
                                            healthy: false
                                        Voluptas necessitatibus culpa fugit.:
                                            details:
                                                alarms:
                                                    - '3: NOSPACE'
                                            error: failed to connect to etcd
                                            healthy: false
                                    state: available
                                    updated_at: "2021-07-01T12:34:56Z"
                                  supported_pgedge_versions:
                                    - postgres_version: "16"
                                      spock_version: "4"
                                    - postgres_version: "16"
                                      spock_version: "4"
                                    - postgres_version: "16"
                                      spock_version: "4"
                                    - postgres_version: "16"
                                      spock_version: "4"
                                - cohort:
                                    cohort_id: pps1n11hqijn9rbee4cjil453
                                    control_available: true
                                    member_id: lah4bsznw6kc0hp7biylmmmll
                                    type: swarm
                                  cpus: 4
                                  default_pgedge_version:
                                    postgres_version: "16"
                                    spock_version: "4"
                                  hostname: i-0123456789abcdef.ec2.internal
                                  id: de3b1388-1f0c-42f1-a86c-59ab72f255ec
                                  ipv4_address: 10.24.34.0
                                  memory: 16GiB
                                  orchestrator: swarm
                                  status:
                                    components:
                                        Non modi totam quis et aut.:
                                            details:
                                                alarms:
                                                    - '3: NOSPACE'
                                            error: failed to connect to etcd
                                            healthy: false
                                        Voluptas necessitatibus culpa fugit.:
                                            details:
                                                alarms:
                                                    - '3: NOSPACE'
                                            error: failed to connect to etcd
                                            healthy: false
                                    state: available
                                    updated_at: "2021-07-01T12:34:56Z"
                                  supported_pgedge_versions:
                                    - postgres_version: "16"
                                      spock_version: "4"
                                    - postgres_version: "16"
                                      spock_version: "4"
                                    - postgres_version: "16"
                                      spock_version: "4"
                                    - postgres_version: "16"
                                      spock_version: "4"
                                - cohort:
                                    cohort_id: pps1n11hqijn9rbee4cjil453
                                    control_available: true
                                    member_id: lah4bsznw6kc0hp7biylmmmll
                                    type: swarm
                                  cpus: 4
                                  default_pgedge_version:
                                    postgres_version: "16"
                                    spock_version: "4"
                                  hostname: i-0123456789abcdef.ec2.internal
                                  id: de3b1388-1f0c-42f1-a86c-59ab72f255ec
                                  ipv4_address: 10.24.34.0
                                  memory: 16GiB
                                  orchestrator: swarm
                                  status:
                                    components:
                                        Non modi totam quis et aut.:
                                            details:
                                                alarms:
                                                    - '3: NOSPACE'
                                            error: failed to connect to etcd
                                            healthy: false
                                        Voluptas necessitatibus culpa fugit.:
                                            details:
                                                alarms:
                                                    - '3: NOSPACE'
                                            error: failed to connect to etcd
                                            healthy: false
                                    state: available
                                    updated_at: "2021-07-01T12:34:56Z"
                                  supported_pgedge_versions:
                                    - postgres_version: "16"
                                      spock_version: "4"
                                    - postgres_version: "16"
                                      spock_version: "4"
                                    - postgres_version: "16"
                                      spock_version: "4"
                                    - postgres_version: "16"
                                      spock_version: "4"
                                - cohort:
                                    cohort_id: pps1n11hqijn9rbee4cjil453
                                    control_available: true
                                    member_id: lah4bsznw6kc0hp7biylmmmll
                                    type: swarm
                                  cpus: 4
                                  default_pgedge_version:
                                    postgres_version: "16"
                                    spock_version: "4"
                                  hostname: i-0123456789abcdef.ec2.internal
                                  id: de3b1388-1f0c-42f1-a86c-59ab72f255ec
                                  ipv4_address: 10.24.34.0
                                  memory: 16GiB
                                  orchestrator: swarm
                                  status:
                                    components:
                                        Non modi totam quis et aut.:
                                            details:
                                                alarms:
                                                    - '3: NOSPACE'
                                            error: failed to connect to etcd
                                            healthy: false
                                        Voluptas necessitatibus culpa fugit.:
                                            details:
                                                alarms:
                                                    - '3: NOSPACE'
                                            error: failed to connect to etcd
                                            healthy: false
                                    state: available
                                    updated_at: "2021-07-01T12:34:56Z"
                                  supported_pgedge_versions:
                                    - postgres_version: "16"
                                      spock_version: "4"
                                    - postgres_version: "16"
                                      spock_version: "4"
                                    - postgres_version: "16"
                                      spock_version: "4"
                                    - postgres_version: "16"
                                      spock_version: "4"
                "409":
                    description: 'cluster_not_initialized: Conflict response.'
                    content:
                        application/vnd.goa.error:
                            schema:
                                $ref: '#/components/schemas/Error'
    /hosts/{host_id}:
        delete:
            tags:
                - control-plane
            summary: remove-host control-plane
            description: Removes a host from the cluster.
            operationId: remove-host
            parameters:
                - name: host_id
                  in: path
                  description: ID of the host to remove.
                  required: true
                  schema:
                    type: string
                    description: ID of the host to remove.
                    example: de3b1388-1f0c-42f1-a86c-59ab72f255ec
                  example: de3b1388-1f0c-42f1-a86c-59ab72f255ec
            responses:
                "204":
                    description: No Content response.
                "404":
                    description: 'not_found: Not Found response.'
                    content:
                        application/vnd.goa.error:
                            schema:
                                $ref: '#/components/schemas/Error'
                "409":
                    description: 'cluster_not_initialized: Conflict response.'
                    content:
                        application/vnd.goa.error:
                            schema:
                                $ref: '#/components/schemas/Error'
        get:
            tags:
                - control-plane
            summary: inspect-host control-plane
            description: Returns information about a particular host in the cluster.
            operationId: inspect-host
            parameters:
                - name: host_id
                  in: path
                  description: ID of the host to inspect.
                  required: true
                  schema:
                    type: string
                    description: ID of the host to inspect.
                    example: de3b1388-1f0c-42f1-a86c-59ab72f255ec
                  example: de3b1388-1f0c-42f1-a86c-59ab72f255ec
            responses:
                "200":
                    description: OK response.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Host'
                            example:
                                cohort:
                                    cohort_id: pps1n11hqijn9rbee4cjil453
                                    control_available: true
                                    member_id: lah4bsznw6kc0hp7biylmmmll
                                    type: swarm
                                cpus: 4
                                default_pgedge_version:
                                    postgres_version: "16"
                                    spock_version: "4"
                                hostname: i-0123456789abcdef.ec2.internal
                                id: de3b1388-1f0c-42f1-a86c-59ab72f255ec
                                ipv4_address: 10.24.34.0
                                memory: 16GiB
                                orchestrator: swarm
                                status:
                                    components:
                                        Enim ut libero repellendus qui nobis non.:
                                            details:
                                                alarms:
                                                    - '3: NOSPACE'
                                            error: failed to connect to etcd
                                            healthy: false
                                        Nostrum nam.:
                                            details:
                                                alarms:
                                                    - '3: NOSPACE'
                                            error: failed to connect to etcd
                                            healthy: false
                                    state: available
                                    updated_at: "2021-07-01T12:34:56Z"
                                supported_pgedge_versions:
                                    - postgres_version: "16"
                                      spock_version: "4"
                                    - postgres_version: "16"
                                      spock_version: "4"
                                    - postgres_version: "16"
                                      spock_version: "4"
                "404":
                    description: 'not_found: Not Found response.'
                    content:
                        application/vnd.goa.error:
                            schema:
                                $ref: '#/components/schemas/Error'
                "409":
                    description: 'cluster_not_initialized: Conflict response.'
                    content:
                        application/vnd.goa.error:
                            schema:
                                $ref: '#/components/schemas/Error'
    /openapi.json:
        get:
            tags:
                - control-plane
            summary: Download ./gen/http/openapi3.json
            operationId: /openapi.json
            responses:
                "200":
                    description: File downloaded
    /version:
        get:
            tags:
                - control-plane
            summary: get-version control-plane
            description: Returns version information for the Control Plane server.
            operationId: get-version
            responses:
                "200":
                    description: OK response.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/VersionInfo'
                            example:
                                arch: amd64
                                revision: abc123
                                revision_time: "2025-01-01T01:30:00Z"
                                version: 1.0.0
components:
    schemas:
        BackupConfigSpec:
            type: object
            properties:
                provider:
                    type: string
                    description: The backup provider for this backup configuration.
                    default: pgbackrest
                    example: pgbackrest
                    enum:
                        - pgbackrest
                repositories:
                    type: array
                    items:
                        $ref: '#/components/schemas/BackupRepositorySpec'
                    description: The repositories for this backup configuration.
                    example:
                        - azure_account: pgedge-backups
                          azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                          azure_endpoint: blob.core.usgovcloudapi.net
                          azure_key: YXpLZXk=
                          base_path: /backups
                          custom_options:
                            s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                            storage-upload-chunk-size: 5MiB
                          gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                          gcs_endpoint: localhost
                          gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                          id: f6b84a99-5e91-4203-be1e-131fe82e5984
                          retention_full: 2
                          retention_full_type: count
                          s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                          s3_endpoint: s3.us-east-1.amazonaws.com
                          s3_key: AKIAIOSFODNN7EXAMPLE
                          s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                          s3_region: us-east-1
                          type: s3
                        - azure_account: pgedge-backups
                          azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                          azure_endpoint: blob.core.usgovcloudapi.net
                          azure_key: YXpLZXk=
                          base_path: /backups
                          custom_options:
                            s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                            storage-upload-chunk-size: 5MiB
                          gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                          gcs_endpoint: localhost
                          gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                          id: f6b84a99-5e91-4203-be1e-131fe82e5984
                          retention_full: 2
                          retention_full_type: count
                          s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                          s3_endpoint: s3.us-east-1.amazonaws.com
                          s3_key: AKIAIOSFODNN7EXAMPLE
                          s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                          s3_region: us-east-1
                          type: s3
                    minItems: 1
                schedules:
                    type: array
                    items:
                        $ref: '#/components/schemas/BackupScheduleSpec'
                    description: The schedules for this backup configuration.
                    example:
                        - cron_expression: 0 6 * * ?
                          id: daily-full-backup
                          type: full
                        - cron_expression: 0 6 * * ?
                          id: daily-full-backup
                          type: full
            example:
                provider: pgbackrest
                repositories:
                    - azure_account: pgedge-backups
                      azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                      azure_endpoint: blob.core.usgovcloudapi.net
                      azure_key: YXpLZXk=
                      base_path: /backups
                      custom_options:
                        s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                        storage-upload-chunk-size: 5MiB
                      gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                      gcs_endpoint: localhost
                      gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                      id: f6b84a99-5e91-4203-be1e-131fe82e5984
                      retention_full: 2
                      retention_full_type: count
                      s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                      s3_endpoint: s3.us-east-1.amazonaws.com
                      s3_key: AKIAIOSFODNN7EXAMPLE
                      s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                      s3_region: us-east-1
                      type: s3
                schedules:
                    - cron_expression: 0 6 * * ?
                      id: daily-full-backup
                      type: full
                    - cron_expression: 0 6 * * ?
                      id: daily-full-backup
                      type: full
                    - cron_expression: 0 6 * * ?
                      id: daily-full-backup
                      type: full
                    - cron_expression: 0 6 * * ?
                      id: daily-full-backup
                      type: full
            required:
                - repositories
        BackupOptions:
            type: object
            properties:
                annotations:
                    type: object
                    description: Annotations for the backup.
                    example:
                        key: value
                    additionalProperties:
                        type: string
                        example: Et tempora occaecati.
                extra_options:
                    type: array
                    items:
                        type: string
                        example: Molestiae ut ipsum deserunt quis totam.
                    description: Extra options for the backup.
                    example:
                        - --option1
                        - --option2
                type:
                    type: string
                    description: The type of backup.
                    example: full
                    enum:
                        - full
                        - diff
                        - incr
            example:
                annotations:
                    key: value
                extra_options:
                    - --option1
                    - --option2
                type: full
            required:
                - type
        BackupRepositorySpec:
            type: object
            properties:
                azure_account:
                    type: string
                    description: The Azure account name for this repository. Only applies when type = 'azure'.
                    example: pgedge-backups
                azure_container:
                    type: string
                    description: The Azure container name for this repository. Only applies when type = 'azure'.
                    example: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                azure_endpoint:
                    type: string
                    description: The optional Azure endpoint for this repository. Only applies when type = 'azure'.
                    example: blob.core.usgovcloudapi.net
                azure_key:
                    type: string
                    description: An optional Azure storage account access key to use for this repository. If not provided, pgbackrest will use the VM's managed identity.
                    example: YXpLZXk=
                base_path:
                    type: string
                    description: The base path within the repository to store backups.
                    example: /backups
                custom_options:
                    type: object
                    description: Additional options to apply to this repository.
                    example:
                        s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                        storage-upload-chunk-size: 5MiB
                    additionalProperties:
                        type: string
                        example: Quos dolorem tempore ut qui ratione repellat.
                gcs_bucket:
                    type: string
                    description: The GCS bucket name for this repository. Only applies when type = 'gcs'.
                    example: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                gcs_endpoint:
                    type: string
                    description: The optional GCS endpoint for this repository. Only applies when type = 'gcs'.
                    example: localhost
                gcs_key:
                    type: string
                    description: Optional base64-encoded private key data. If omitted, pgbackrest will use the service account attached to the instance profile.
                    example: ZXhhbXBsZSBnY3Mga2V5Cg==
                id:
                    type: string
                    description: The unique identifier of this repository.
                    example: f6b84a99-5e91-4203-be1e-131fe82e5984
                retention_full:
                    type: integer
                    description: The count of full backups to retain or the time to retain full backups.
                    example: 2
                    format: int64
                retention_full_type:
                    type: string
                    description: The type of measure used for retention_full.
                    example: count
                    enum:
                        - time
                        - count
                s3_bucket:
                    type: string
                    description: The S3 bucket name for this repository. Only applies when type = 's3'.
                    example: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                s3_endpoint:
                    type: string
                    description: The optional S3 endpoint for this repository. Only applies when type = 's3'.
                    example: s3.us-east-1.amazonaws.com
                s3_key:
                    type: string
                    description: An optional AWS access key ID to use for this repository. If not provided, pgbackrest will use the default credential provider chain.
                    example: AKIAIOSFODNN7EXAMPLE
                s3_key_secret:
                    type: string
                    description: The corresponding secret for the AWS access key ID in s3_key.
                    example: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                s3_region:
                    type: string
                    description: The region of the S3 bucket for this repository. Only applies when type = 's3'.
                    example: us-east-1
                type:
                    type: string
                    description: The type of this repository.
                    example: s3
                    enum:
                        - s3
                        - gcs
                        - azure
            example:
                azure_account: pgedge-backups
                azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                azure_endpoint: blob.core.usgovcloudapi.net
                azure_key: YXpLZXk=
                base_path: /backups
                custom_options:
                    s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                    storage-upload-chunk-size: 5MiB
                gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                gcs_endpoint: localhost
                gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                id: f6b84a99-5e91-4203-be1e-131fe82e5984
                retention_full: 2
                retention_full_type: count
                s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                s3_endpoint: s3.us-east-1.amazonaws.com
                s3_key: AKIAIOSFODNN7EXAMPLE
                s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                s3_region: us-east-1
                type: s3
            required:
                - type
        BackupScheduleSpec:
            type: object
            properties:
                cron_expression:
                    type: string
                    description: The cron expression for this schedule.
                    example: 0 6 * * ?
                id:
                    type: string
                    description: The unique identifier for this backup schedule.
                    example: daily-full-backup
                type:
                    type: string
                    description: The type of backup to take on this schedule.
                    example: full
                    enum:
                        - full
                        - incr
            example:
                cron_expression: 0 6 * * ?
                id: daily-full-backup
                type: full
            required:
                - id
                - type
                - cron_expression
        Cluster:
            type: object
            properties:
                hosts:
                    type: array
                    items:
                        $ref: '#/components/schemas/Host'
                    description: All of the hosts in the cluster.
                    example:
                        - cohort:
                            cohort_id: pps1n11hqijn9rbee4cjil453
                            control_available: true
                            member_id: lah4bsznw6kc0hp7biylmmmll
                            type: swarm
                          cpus: 4
                          default_pgedge_version:
                            postgres_version: "16"
                            spock_version: "4"
                          hostname: i-0123456789abcdef.ec2.internal
                          id: de3b1388-1f0c-42f1-a86c-59ab72f255ec
                          ipv4_address: 10.24.34.0
                          memory: 16GiB
                          orchestrator: swarm
                          status:
                            components:
                                Dolorem veniam non.:
                                    details:
                                        alarms:
                                            - '3: NOSPACE'
                                    error: failed to connect to etcd
                                    healthy: false
                                Et voluptatum ex ea.:
                                    details:
                                        alarms:
                                            - '3: NOSPACE'
                                    error: failed to connect to etcd
                                    healthy: false
                                Nostrum repellendus sint qui qui.:
                                    details:
                                        alarms:
                                            - '3: NOSPACE'
                                    error: failed to connect to etcd
                                    healthy: false
                            state: available
                            updated_at: "2021-07-01T12:34:56Z"
                          supported_pgedge_versions:
                            - postgres_version: "16"
                              spock_version: "4"
                            - postgres_version: "16"
                              spock_version: "4"
                            - postgres_version: "16"
                              spock_version: "4"
                            - postgres_version: "16"
                              spock_version: "4"
                        - cohort:
                            cohort_id: pps1n11hqijn9rbee4cjil453
                            control_available: true
                            member_id: lah4bsznw6kc0hp7biylmmmll
                            type: swarm
                          cpus: 4
                          default_pgedge_version:
                            postgres_version: "16"
                            spock_version: "4"
                          hostname: i-0123456789abcdef.ec2.internal
                          id: de3b1388-1f0c-42f1-a86c-59ab72f255ec
                          ipv4_address: 10.24.34.0
                          memory: 16GiB
                          orchestrator: swarm
                          status:
                            components:
                                Dolorem veniam non.:
                                    details:
                                        alarms:
                                            - '3: NOSPACE'
                                    error: failed to connect to etcd
                                    healthy: false
                                Et voluptatum ex ea.:
                                    details:
                                        alarms:
                                            - '3: NOSPACE'
                                    error: failed to connect to etcd
                                    healthy: false
                                Nostrum repellendus sint qui qui.:
                                    details:
                                        alarms:
                                            - '3: NOSPACE'
                                    error: failed to connect to etcd
                                    healthy: false
                            state: available
                            updated_at: "2021-07-01T12:34:56Z"
                          supported_pgedge_versions:
                            - postgres_version: "16"
                              spock_version: "4"
                            - postgres_version: "16"
                              spock_version: "4"
                            - postgres_version: "16"
                              spock_version: "4"
                            - postgres_version: "16"
                              spock_version: "4"
                id:
                    type: string
                    description: Unique identifier for the cluster.
                    example: a67cbb36-c3c3-49c9-8aac-f4a0438a883d
                    format: uuid
                status:
                    $ref: '#/components/schemas/ClusterStatus'
                tenant_id:
                    type: string
                    description: Unique identifier for the cluster's owner.
                    example: 8210ec10-2dca-406c-ac4a-0661d2189954
                    format: uuid
            example:
                hosts:
                    - cohort:
                        cohort_id: pps1n11hqijn9rbee4cjil453
                        control_available: true
                        member_id: lah4bsznw6kc0hp7biylmmmll
                        type: swarm
                      cpus: 4
                      default_pgedge_version:
                        postgres_version: "16"
                        spock_version: "4"
                      hostname: i-0123456789abcdef.ec2.internal
                      id: de3b1388-1f0c-42f1-a86c-59ab72f255ec
                      ipv4_address: 10.24.34.0
                      memory: 16GiB
                      orchestrator: swarm
                      status:
                        components:
                            Dolorem veniam non.:
                                details:
                                    alarms:
                                        - '3: NOSPACE'
                                error: failed to connect to etcd
                                healthy: false
                            Et voluptatum ex ea.:
                                details:
                                    alarms:
                                        - '3: NOSPACE'
                                error: failed to connect to etcd
                                healthy: false
                            Nostrum repellendus sint qui qui.:
                                details:
                                    alarms:
                                        - '3: NOSPACE'
                                error: failed to connect to etcd
                                healthy: false
                        state: available
                        updated_at: "2021-07-01T12:34:56Z"
                      supported_pgedge_versions:
                        - postgres_version: "16"
                          spock_version: "4"
                        - postgres_version: "16"
                          spock_version: "4"
                        - postgres_version: "16"
                          spock_version: "4"
                        - postgres_version: "16"
                          spock_version: "4"
                    - cohort:
                        cohort_id: pps1n11hqijn9rbee4cjil453
                        control_available: true
                        member_id: lah4bsznw6kc0hp7biylmmmll
                        type: swarm
                      cpus: 4
                      default_pgedge_version:
                        postgres_version: "16"
                        spock_version: "4"
                      hostname: i-0123456789abcdef.ec2.internal
                      id: de3b1388-1f0c-42f1-a86c-59ab72f255ec
                      ipv4_address: 10.24.34.0
                      memory: 16GiB
                      orchestrator: swarm
                      status:
                        components:
                            Dolorem veniam non.:
                                details:
                                    alarms:
                                        - '3: NOSPACE'
                                error: failed to connect to etcd
                                healthy: false
                            Et voluptatum ex ea.:
                                details:
                                    alarms:
                                        - '3: NOSPACE'
                                error: failed to connect to etcd
                                healthy: false
                            Nostrum repellendus sint qui qui.:
                                details:
                                    alarms:
                                        - '3: NOSPACE'
                                error: failed to connect to etcd
                                healthy: false
                        state: available
                        updated_at: "2021-07-01T12:34:56Z"
                      supported_pgedge_versions:
                        - postgres_version: "16"
                          spock_version: "4"
                        - postgres_version: "16"
                          spock_version: "4"
                        - postgres_version: "16"
                          spock_version: "4"
                        - postgres_version: "16"
                          spock_version: "4"
                    - cohort:
                        cohort_id: pps1n11hqijn9rbee4cjil453
                        control_available: true
                        member_id: lah4bsznw6kc0hp7biylmmmll
                        type: swarm
                      cpus: 4
                      default_pgedge_version:
                        postgres_version: "16"
                        spock_version: "4"
                      hostname: i-0123456789abcdef.ec2.internal
                      id: de3b1388-1f0c-42f1-a86c-59ab72f255ec
                      ipv4_address: 10.24.34.0
                      memory: 16GiB
                      orchestrator: swarm
                      status:
                        components:
                            Dolorem veniam non.:
                                details:
                                    alarms:
                                        - '3: NOSPACE'
                                error: failed to connect to etcd
                                healthy: false
                            Et voluptatum ex ea.:
                                details:
                                    alarms:
                                        - '3: NOSPACE'
                                error: failed to connect to etcd
                                healthy: false
                            Nostrum repellendus sint qui qui.:
                                details:
                                    alarms:
                                        - '3: NOSPACE'
                                error: failed to connect to etcd
                                healthy: false
                        state: available
                        updated_at: "2021-07-01T12:34:56Z"
                      supported_pgedge_versions:
                        - postgres_version: "16"
                          spock_version: "4"
                        - postgres_version: "16"
                          spock_version: "4"
                        - postgres_version: "16"
                          spock_version: "4"
                        - postgres_version: "16"
                          spock_version: "4"
                id: a67cbb36-c3c3-49c9-8aac-f4a0438a883d
                status:
                    state: available
                tenant_id: 8210ec10-2dca-406c-ac4a-0661d2189954
            required:
                - id
                - tenant_id
                - status
                - hosts
        ClusterCredentials:
            type: object
            properties:
                ca_cert:
                    type: string
                    description: The base64-encoded CA certificate for the cluster.
                    example: ZGE4NDdkMzMtM2FiYi00YzE2LTkzOGQtNDRkODU2ZDFlZWZlCg==
                client_cert:
                    type: string
                    description: The base64-encoded etcd client certificate for the new cluster member.
                    example: NWM0MGMyZTAtYjAyYS00NzkxLTk0YjAtMjMyN2EyZGQ4ZDc3Cg==
                client_key:
                    type: string
                    description: The base64-encoded etcd client key for the new cluster member.
                    example: Y2FlNjhmODQtYjE1Ni00YWYyLWFhMWEtM2FhNzI2MmVhYTM0Cg==
                server_cert:
                    type: string
                    description: The base64-encoded etcd server certificate for the new cluster member.
                    example: Nzc1OGQyY2UtZjdjOC00YmE4LTk2ZmQtOWE3MjVmYmY3NDdiCg==
                server_key:
                    type: string
                    description: The base64-encoded etcd server key for the new cluster member.
                    example: NWRhNzY1ZGUtNzJkMi00OTU3LTk4ODUtOWRiZThjOGE5MGQ3Cg==
            example:
                ca_cert: ZGE4NDdkMzMtM2FiYi00YzE2LTkzOGQtNDRkODU2ZDFlZWZlCg==
                client_cert: NWM0MGMyZTAtYjAyYS00NzkxLTk0YjAtMjMyN2EyZGQ4ZDc3Cg==
                client_key: Y2FlNjhmODQtYjE1Ni00YWYyLWFhMWEtM2FhNzI2MmVhYTM0Cg==
                server_cert: Nzc1OGQyY2UtZjdjOC00YmE4LTk2ZmQtOWE3MjVmYmY3NDdiCg==
                server_key: NWRhNzY1ZGUtNzJkMi00OTU3LTk4ODUtOWRiZThjOGE5MGQ3Cg==
            required:
                - ca_cert
                - client_cert
                - client_key
                - server_cert
                - server_key
        ClusterJoinOptions:
            type: object
            properties:
                credentials:
                    $ref: '#/components/schemas/ClusterCredentials'
                peer:
                    $ref: '#/components/schemas/ClusterPeer'
            example:
                credentials:
                    ca_cert: ZGE4NDdkMzMtM2FiYi00YzE2LTkzOGQtNDRkODU2ZDFlZWZlCg==
                    client_cert: NWM0MGMyZTAtYjAyYS00NzkxLTk0YjAtMjMyN2EyZGQ4ZDc3Cg==
                    client_key: Y2FlNjhmODQtYjE1Ni00YWYyLWFhMWEtM2FhNzI2MmVhYTM0Cg==
                    server_cert: Nzc1OGQyY2UtZjdjOC00YmE4LTk2ZmQtOWE3MjVmYmY3NDdiCg==
                    server_key: NWRhNzY1ZGUtNzJkMi00OTU3LTk4ODUtOWRiZThjOGE5MGQ3Cg==
                peer:
                    client_url: http://192.168.1.1:2379
                    name: de3b1388-1f0c-42f1-a86c-59ab72f255ec
                    peer_url: http://192.168.1.1:2380
            required:
                - peer
        ClusterJoinRequest:
            type: object
            properties:
                host_id:
                    type: string
                    description: The unique identifier for the host that's joining the cluster.
                    example: de3b1388-1f0c-42f1-a86c-59ab72f255ec
                    format: uuid
                hostname:
                    type: string
                    description: The hostname of the host that's joining the cluster.
                    example: ip-10-1-0-113.ec2.internal
                ipv4_address:
                    type: string
                    description: The IPv4 address of the host that's joining the cluster.
                    example: 10.1.0.113
                    format: ipv4
                token:
                    type: string
                    description: Token to join the cluster.
                    example: PGEDGE-dd440afcf5de20ef8e8cf54f6cb9f125fd55f90e64faa94b906130b31235e730-41e975f41d7ea61058f2fe2572cb52dd
            example:
                host_id: de3b1388-1f0c-42f1-a86c-59ab72f255ec
                hostname: ip-10-1-0-113.ec2.internal
                ipv4_address: 10.1.0.113
                token: PGEDGE-dd440afcf5de20ef8e8cf54f6cb9f125fd55f90e64faa94b906130b31235e730-41e975f41d7ea61058f2fe2572cb52dd
            required:
                - token
                - host_id
                - hostname
                - ipv4_address
        ClusterJoinToken:
            type: object
            properties:
                server_url:
                    type: string
                    description: Existing server to join
                    example: http://192.168.1.1:3000
                    format: uri
                token:
                    type: string
                    description: Token to join an existing cluster.
                    example: PGEDGE-dd440afcf5de20ef8e8cf54f6cb9f125fd55f90e64faa94b906130b31235e730-41e975f41d7ea61058f2fe2572cb52dd
            example:
                server_url: http://192.168.1.1:3000
                token: PGEDGE-dd440afcf5de20ef8e8cf54f6cb9f125fd55f90e64faa94b906130b31235e730-41e975f41d7ea61058f2fe2572cb52dd
            required:
                - token
                - server_url
        ClusterPeer:
            type: object
            properties:
                client_url:
                    type: string
                    description: The Etcd client endpoint for this cluster member.
                    example: http://192.168.1.1:2379
                    format: uri
                name:
                    type: string
                    description: The name of the cluster member.
                    example: de3b1388-1f0c-42f1-a86c-59ab72f255ec
                    format: uuid
                peer_url:
                    type: string
                    description: The Etcd peer endpoint for this cluster member.
                    example: http://192.168.1.1:2380
                    format: uri
            example:
                client_url: http://192.168.1.1:2379
                name: de3b1388-1f0c-42f1-a86c-59ab72f255ec
                peer_url: http://192.168.1.1:2380
            required:
                - name
                - peer_url
                - client_url
        ClusterStatus:
            type: object
            properties:
                state:
                    type: string
                    description: The current state of the cluster.
                    example: error
                    enum:
                        - available
                        - error
            example:
                state: available
            required:
                - state
        ComponentStatus:
            type: object
            properties:
                details:
                    type: object
                    description: Additional details about the component.
                    example:
                        alarms:
                            - '3: NOSPACE'
                    additionalProperties: true
                error:
                    type: string
                    description: Error message from any errors that occurred during the health check.
                    example: failed to connect to etcd
                healthy:
                    type: boolean
                    description: Indicates if the component is healthy.
                    example: false
            example:
                details:
                    alarms:
                        - '3: NOSPACE'
                error: failed to connect to etcd
                healthy: false
            required:
                - error
                - details
        ControlPlaneCreateDatabaseResponseBody:
            type: object
            properties:
                created_at:
                    type: string
                    description: The time that the database was created.
                    example: "2025-01-01T01:30:00Z"
                    format: date-time
                id:
                    type: string
                    description: Unique identifier for the database.
                    example: 02f1a7db-fca8-4521-b57a-2a375c1ced51
                    format: uuid
                instances:
                    $ref: '#/components/schemas/InstanceResponseAbbreviatedCollection'
                spec:
                    $ref: '#/components/schemas/DatabaseSpec'
                state:
                    type: string
                    description: Current state of the database.
                    example: modifying
                    enum:
                        - creating
                        - modifying
                        - available
                        - deleting
                        - degraded
                        - unknown
                tenant_id:
                    type: string
                    description: Unique identifier for the databases's owner.
                    example: 8210ec10-2dca-406c-ac4a-0661d2189954
                    format: uuid
                updated_at:
                    type: string
                    description: The time that the database was last updated.
                    example: "2025-01-01T02:30:00Z"
                    format: date-time
            description: Create-DatabaseResponseBody result type (default view)
            example:
                created_at: "2025-01-01T01:30:00Z"
                id: 02f1a7db-fca8-4521-b57a-2a375c1ced51
                instances:
                    - host_id: de3b1388-1f0c-42f1-a86c-59ab72f255ec
                      id: a67cbb36-c3c3-49c9-8aac-f4a0438a883d
                      node_name: n1
                      state: available
                    - host_id: de3b1388-1f0c-42f1-a86c-59ab72f255ec
                      id: a67cbb36-c3c3-49c9-8aac-f4a0438a883d
                      node_name: n1
                      state: available
                    - host_id: de3b1388-1f0c-42f1-a86c-59ab72f255ec
                      id: a67cbb36-c3c3-49c9-8aac-f4a0438a883d
                      node_name: n1
                      state: available
                spec:
                    backup_config:
                        provider: pgbackrest
                        repositories:
                            - azure_account: pgedge-backups
                              azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                              azure_endpoint: blob.core.usgovcloudapi.net
                              azure_key: YXpLZXk=
                              base_path: /backups
                              custom_options:
                                s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                storage-upload-chunk-size: 5MiB
                              gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                              gcs_endpoint: localhost
                              gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                              id: f6b84a99-5e91-4203-be1e-131fe82e5984
                              retention_full: 2
                              retention_full_type: count
                              s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                              s3_endpoint: s3.us-east-1.amazonaws.com
                              s3_key: AKIAIOSFODNN7EXAMPLE
                              s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                              s3_region: us-east-1
                              type: s3
                            - azure_account: pgedge-backups
                              azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                              azure_endpoint: blob.core.usgovcloudapi.net
                              azure_key: YXpLZXk=
                              base_path: /backups
                              custom_options:
                                s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                storage-upload-chunk-size: 5MiB
                              gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                              gcs_endpoint: localhost
                              gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                              id: f6b84a99-5e91-4203-be1e-131fe82e5984
                              retention_full: 2
                              retention_full_type: count
                              s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                              s3_endpoint: s3.us-east-1.amazonaws.com
                              s3_key: AKIAIOSFODNN7EXAMPLE
                              s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                              s3_region: us-east-1
                              type: s3
                            - azure_account: pgedge-backups
                              azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                              azure_endpoint: blob.core.usgovcloudapi.net
                              azure_key: YXpLZXk=
                              base_path: /backups
                              custom_options:
                                s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                storage-upload-chunk-size: 5MiB
                              gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                              gcs_endpoint: localhost
                              gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                              id: f6b84a99-5e91-4203-be1e-131fe82e5984
                              retention_full: 2
                              retention_full_type: count
                              s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                              s3_endpoint: s3.us-east-1.amazonaws.com
                              s3_key: AKIAIOSFODNN7EXAMPLE
                              s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                              s3_region: us-east-1
                              type: s3
                        schedules:
                            - cron_expression: 0 6 * * ?
                              id: daily-full-backup
                              type: full
                            - cron_expression: 0 6 * * ?
                              id: daily-full-backup
                              type: full
                    cpus: 500m
                    database_name: northwind
                    database_users:
                        - attributes:
                            - LOGIN
                            - CREATEDB
                            - CREATEROLE
                          db_owner: true
                          password: secret
                          roles:
                            - pgedge_superuser
                          username: admin
                        - attributes:
                            - LOGIN
                            - CREATEDB
                            - CREATEROLE
                          db_owner: true
                          password: secret
                          roles:
                            - pgedge_superuser
                          username: admin
                        - attributes:
                            - LOGIN
                            - CREATEDB
                            - CREATEROLE
                          db_owner: true
                          password: secret
                          roles:
                            - pgedge_superuser
                          username: admin
                    deletion_protection: true
                    features:
                        some_feature: enabled
                    memory: 500M
                    nodes:
                        - backup_config:
                            provider: pgbackrest
                            repositories:
                                - azure_account: pgedge-backups
                                  azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                  azure_endpoint: blob.core.usgovcloudapi.net
                                  azure_key: YXpLZXk=
                                  base_path: /backups
                                  custom_options:
                                    s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                    storage-upload-chunk-size: 5MiB
                                  gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                  gcs_endpoint: localhost
                                  gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                  id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                  retention_full: 2
                                  retention_full_type: count
                                  s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                  s3_endpoint: s3.us-east-1.amazonaws.com
                                  s3_key: AKIAIOSFODNN7EXAMPLE
                                  s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                  s3_region: us-east-1
                                  type: s3
                                - azure_account: pgedge-backups
                                  azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                  azure_endpoint: blob.core.usgovcloudapi.net
                                  azure_key: YXpLZXk=
                                  base_path: /backups
                                  custom_options:
                                    s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                    storage-upload-chunk-size: 5MiB
                                  gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                  gcs_endpoint: localhost
                                  gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                  id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                  retention_full: 2
                                  retention_full_type: count
                                  s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                  s3_endpoint: s3.us-east-1.amazonaws.com
                                  s3_key: AKIAIOSFODNN7EXAMPLE
                                  s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                  s3_region: us-east-1
                                  type: s3
                                - azure_account: pgedge-backups
                                  azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                  azure_endpoint: blob.core.usgovcloudapi.net
                                  azure_key: YXpLZXk=
                                  base_path: /backups
                                  custom_options:
                                    s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                    storage-upload-chunk-size: 5MiB
                                  gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                  gcs_endpoint: localhost
                                  gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                  id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                  retention_full: 2
                                  retention_full_type: count
                                  s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                  s3_endpoint: s3.us-east-1.amazonaws.com
                                  s3_key: AKIAIOSFODNN7EXAMPLE
                                  s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                  s3_region: us-east-1
                                  type: s3
                            schedules:
                                - cron_expression: 0 6 * * ?
                                  id: daily-full-backup
                                  type: full
                                - cron_expression: 0 6 * * ?
                                  id: daily-full-backup
                                  type: full
                          cpus: 500m
                          host_ids:
                            - de3b1388-1f0c-42f1-a86c-59ab72f255ec
                            - de3b1388-1f0c-42f1-a86c-59ab72f255ec
                          memory: 500M
                          name: n1
                          port: 5432
                          postgres_version: "17"
                          postgresql_conf:
                            max_connections: 1000
                          restore_config:
                            provider: pgbackrest
                            repository:
                                azure_account: pgedge-backups
                                azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                azure_endpoint: blob.core.usgovcloudapi.net
                                azure_key: YXpLZXk=
                                base_path: /backups
                                custom_options:
                                    s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                gcs_endpoint: localhost
                                gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                s3_endpoint: s3.us-east-1.amazonaws.com
                                s3_key: AKIAIOSFODNN7EXAMPLE
                                s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                s3_region: us-east-1
                                type: s3
                            restore_options:
                                - --set=20250505-153628F
                                - --type=xid
                                - --target=123456
                            source_database_id: 6c8e43ee-26ea-47b8-a8f8-89897e0137bd
                            source_database_name: northwind
                            source_node_name: n1
                          storage_class: loop_device
                          storage_size: 500GiB
                        - backup_config:
                            provider: pgbackrest
                            repositories:
                                - azure_account: pgedge-backups
                                  azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                  azure_endpoint: blob.core.usgovcloudapi.net
                                  azure_key: YXpLZXk=
                                  base_path: /backups
                                  custom_options:
                                    s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                    storage-upload-chunk-size: 5MiB
                                  gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                  gcs_endpoint: localhost
                                  gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                  id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                  retention_full: 2
                                  retention_full_type: count
                                  s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                  s3_endpoint: s3.us-east-1.amazonaws.com
                                  s3_key: AKIAIOSFODNN7EXAMPLE
                                  s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                  s3_region: us-east-1
                                  type: s3
                                - azure_account: pgedge-backups
                                  azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                  azure_endpoint: blob.core.usgovcloudapi.net
                                  azure_key: YXpLZXk=
                                  base_path: /backups
                                  custom_options:
                                    s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                    storage-upload-chunk-size: 5MiB
                                  gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                  gcs_endpoint: localhost
                                  gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                  id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                  retention_full: 2
                                  retention_full_type: count
                                  s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                  s3_endpoint: s3.us-east-1.amazonaws.com
                                  s3_key: AKIAIOSFODNN7EXAMPLE
                                  s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                  s3_region: us-east-1
                                  type: s3
                                - azure_account: pgedge-backups
                                  azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                  azure_endpoint: blob.core.usgovcloudapi.net
                                  azure_key: YXpLZXk=
                                  base_path: /backups
                                  custom_options:
                                    s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                    storage-upload-chunk-size: 5MiB
                                  gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                  gcs_endpoint: localhost
                                  gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                  id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                  retention_full: 2
                                  retention_full_type: count
                                  s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                  s3_endpoint: s3.us-east-1.amazonaws.com
                                  s3_key: AKIAIOSFODNN7EXAMPLE
                                  s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                  s3_region: us-east-1
                                  type: s3
                            schedules:
                                - cron_expression: 0 6 * * ?
                                  id: daily-full-backup
                                  type: full
                                - cron_expression: 0 6 * * ?
                                  id: daily-full-backup
                                  type: full
                          cpus: 500m
                          host_ids:
                            - de3b1388-1f0c-42f1-a86c-59ab72f255ec
                            - de3b1388-1f0c-42f1-a86c-59ab72f255ec
                          memory: 500M
                          name: n1
                          port: 5432
                          postgres_version: "17"
                          postgresql_conf:
                            max_connections: 1000
                          restore_config:
                            provider: pgbackrest
                            repository:
                                azure_account: pgedge-backups
                                azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                azure_endpoint: blob.core.usgovcloudapi.net
                                azure_key: YXpLZXk=
                                base_path: /backups
                                custom_options:
                                    s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                gcs_endpoint: localhost
                                gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                s3_endpoint: s3.us-east-1.amazonaws.com
                                s3_key: AKIAIOSFODNN7EXAMPLE
                                s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                s3_region: us-east-1
                                type: s3
                            restore_options:
                                - --set=20250505-153628F
                                - --type=xid
                                - --target=123456
                            source_database_id: 6c8e43ee-26ea-47b8-a8f8-89897e0137bd
                            source_database_name: northwind
                            source_node_name: n1
                          storage_class: loop_device
                          storage_size: 500GiB
                        - backup_config:
                            provider: pgbackrest
                            repositories:
                                - azure_account: pgedge-backups
                                  azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                  azure_endpoint: blob.core.usgovcloudapi.net
                                  azure_key: YXpLZXk=
                                  base_path: /backups
                                  custom_options:
                                    s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                    storage-upload-chunk-size: 5MiB
                                  gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                  gcs_endpoint: localhost
                                  gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                  id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                  retention_full: 2
                                  retention_full_type: count
                                  s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                  s3_endpoint: s3.us-east-1.amazonaws.com
                                  s3_key: AKIAIOSFODNN7EXAMPLE
                                  s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                  s3_region: us-east-1
                                  type: s3
                                - azure_account: pgedge-backups
                                  azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                  azure_endpoint: blob.core.usgovcloudapi.net
                                  azure_key: YXpLZXk=
                                  base_path: /backups
                                  custom_options:
                                    s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                    storage-upload-chunk-size: 5MiB
                                  gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                  gcs_endpoint: localhost
                                  gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                  id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                  retention_full: 2
                                  retention_full_type: count
                                  s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                  s3_endpoint: s3.us-east-1.amazonaws.com
                                  s3_key: AKIAIOSFODNN7EXAMPLE
                                  s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                  s3_region: us-east-1
                                  type: s3
                                - azure_account: pgedge-backups
                                  azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                  azure_endpoint: blob.core.usgovcloudapi.net
                                  azure_key: YXpLZXk=
                                  base_path: /backups
                                  custom_options:
                                    s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                    storage-upload-chunk-size: 5MiB
                                  gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                  gcs_endpoint: localhost
                                  gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                  id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                  retention_full: 2
                                  retention_full_type: count
                                  s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                  s3_endpoint: s3.us-east-1.amazonaws.com
                                  s3_key: AKIAIOSFODNN7EXAMPLE
                                  s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                  s3_region: us-east-1
                                  type: s3
                            schedules:
                                - cron_expression: 0 6 * * ?
                                  id: daily-full-backup
                                  type: full
                                - cron_expression: 0 6 * * ?
                                  id: daily-full-backup
                                  type: full
                          cpus: 500m
                          host_ids:
                            - de3b1388-1f0c-42f1-a86c-59ab72f255ec
                            - de3b1388-1f0c-42f1-a86c-59ab72f255ec
                          memory: 500M
                          name: n1
                          port: 5432
                          postgres_version: "17"
                          postgresql_conf:
                            max_connections: 1000
                          restore_config:
                            provider: pgbackrest
                            repository:
                                azure_account: pgedge-backups
                                azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                azure_endpoint: blob.core.usgovcloudapi.net
                                azure_key: YXpLZXk=
                                base_path: /backups
                                custom_options:
                                    s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                gcs_endpoint: localhost
                                gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                s3_endpoint: s3.us-east-1.amazonaws.com
                                s3_key: AKIAIOSFODNN7EXAMPLE
                                s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                s3_region: us-east-1
                                type: s3
                            restore_options:
                                - --set=20250505-153628F
                                - --type=xid
                                - --target=123456
                            source_database_id: 6c8e43ee-26ea-47b8-a8f8-89897e0137bd
                            source_database_name: northwind
                            source_node_name: n1
                          storage_class: loop_device
                          storage_size: 500GiB
                    port: 5432
                    postgres_version: "17"
                    postgresql_conf:
                        max_connections: 1000
                    restore_config:
                        provider: pgbackrest
                        repository:
                            azure_account: pgedge-backups
                            azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                            azure_endpoint: blob.core.usgovcloudapi.net
                            azure_key: YXpLZXk=
                            base_path: /backups
                            custom_options:
                                s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                            gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                            gcs_endpoint: localhost
                            gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                            id: f6b84a99-5e91-4203-be1e-131fe82e5984
                            s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                            s3_endpoint: s3.us-east-1.amazonaws.com
                            s3_key: AKIAIOSFODNN7EXAMPLE
                            s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                            s3_region: us-east-1
                            type: s3
                        restore_options:
                            - --set=20250505-153628F
                            - --type=xid
                            - --target=123456
                        source_database_id: 6c8e43ee-26ea-47b8-a8f8-89897e0137bd
                        source_database_name: northwind
                        source_node_name: n1
                    spock_version: "4"
                    storage_class: loop_device
                    storage_size: 500GiB
                state: deleting
                tenant_id: 8210ec10-2dca-406c-ac4a-0661d2189954
                updated_at: "2025-01-01T02:30:00Z"
            required:
                - id
                - created_at
                - updated_at
                - state
        CreateDatabaseRequest:
            type: object
            properties:
                id:
                    type: string
                    description: Unique identifier for the database.
                    example: 02f1a7db-fca8-4521-b57a-2a375c1ced51
                    format: uuid
                spec:
                    $ref: '#/components/schemas/DatabaseSpec'
                tenant_id:
                    type: string
                    description: Unique identifier for the databases's owner.
                    example: 8210ec10-2dca-406c-ac4a-0661d2189954
                    format: uuid
            example:
                id: 02f1a7db-fca8-4521-b57a-2a375c1ced51
                spec:
                    backup_config:
                        provider: pgbackrest
                        repositories:
                            - azure_account: pgedge-backups
                              azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                              azure_endpoint: blob.core.usgovcloudapi.net
                              azure_key: YXpLZXk=
                              base_path: /backups
                              custom_options:
                                s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                storage-upload-chunk-size: 5MiB
                              gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                              gcs_endpoint: localhost
                              gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                              id: f6b84a99-5e91-4203-be1e-131fe82e5984
                              retention_full: 2
                              retention_full_type: count
                              s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                              s3_endpoint: s3.us-east-1.amazonaws.com
                              s3_key: AKIAIOSFODNN7EXAMPLE
                              s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                              s3_region: us-east-1
                              type: s3
                        schedules:
                            - cron_expression: 0 6 * * ?
                              id: daily-full-backup
                              type: full
                            - cron_expression: 0 6 * * ?
                              id: daily-full-backup
                              type: full
                            - cron_expression: 0 6 * * ?
                              id: daily-full-backup
                              type: full
                    cpus: 500m
                    database_name: northwind
                    database_users:
                        - attributes:
                            - LOGIN
                            - CREATEDB
                            - CREATEROLE
                          db_owner: true
                          password: secret
                          roles:
                            - pgedge_superuser
                          username: admin
                        - attributes:
                            - LOGIN
                            - CREATEDB
                            - CREATEROLE
                          db_owner: true
                          password: secret
                          roles:
                            - pgedge_superuser
                          username: admin
                    deletion_protection: true
                    features:
                        some_feature: enabled
                    memory: 500M
                    nodes:
                        - backup_config:
                            provider: pgbackrest
                            repositories:
                                - azure_account: pgedge-backups
                                  azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                  azure_endpoint: blob.core.usgovcloudapi.net
                                  azure_key: YXpLZXk=
                                  base_path: /backups
                                  custom_options:
                                    s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                    storage-upload-chunk-size: 5MiB
                                  gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                  gcs_endpoint: localhost
                                  gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                  id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                  retention_full: 2
                                  retention_full_type: count
                                  s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                  s3_endpoint: s3.us-east-1.amazonaws.com
                                  s3_key: AKIAIOSFODNN7EXAMPLE
                                  s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                  s3_region: us-east-1
                                  type: s3
                            schedules:
                                - cron_expression: 0 6 * * ?
                                  id: daily-full-backup
                                  type: full
                                - cron_expression: 0 6 * * ?
                                  id: daily-full-backup
                                  type: full
                                - cron_expression: 0 6 * * ?
                                  id: daily-full-backup
                                  type: full
                          cpus: 500m
                          host_ids:
                            - de3b1388-1f0c-42f1-a86c-59ab72f255ec
                          memory: 500M
                          name: n1
                          port: 5432
                          postgres_version: "17"
                          postgresql_conf:
                            max_connections: 1000
                          restore_config:
                            provider: pgbackrest
                            repository:
                                azure_account: pgedge-backups
                                azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                azure_endpoint: blob.core.usgovcloudapi.net
                                azure_key: YXpLZXk=
                                base_path: /backups
                                custom_options:
                                    s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                gcs_endpoint: localhost
                                gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                s3_endpoint: s3.us-east-1.amazonaws.com
                                s3_key: AKIAIOSFODNN7EXAMPLE
                                s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                s3_region: us-east-1
                                type: s3
                            restore_options:
                                - --set=20250505-153628F
                                - --type=xid
                                - --target=123456
                            source_database_id: 6c8e43ee-26ea-47b8-a8f8-89897e0137bd
                            source_database_name: northwind
                            source_node_name: n1
                          storage_class: loop_device
                          storage_size: 500GiB
                        - backup_config:
                            provider: pgbackrest
                            repositories:
                                - azure_account: pgedge-backups
                                  azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                  azure_endpoint: blob.core.usgovcloudapi.net
                                  azure_key: YXpLZXk=
                                  base_path: /backups
                                  custom_options:
                                    s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                    storage-upload-chunk-size: 5MiB
                                  gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                  gcs_endpoint: localhost
                                  gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                  id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                  retention_full: 2
                                  retention_full_type: count
                                  s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                  s3_endpoint: s3.us-east-1.amazonaws.com
                                  s3_key: AKIAIOSFODNN7EXAMPLE
                                  s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                  s3_region: us-east-1
                                  type: s3
                            schedules:
                                - cron_expression: 0 6 * * ?
                                  id: daily-full-backup
                                  type: full
                                - cron_expression: 0 6 * * ?
                                  id: daily-full-backup
                                  type: full
                                - cron_expression: 0 6 * * ?
                                  id: daily-full-backup
                                  type: full
                          cpus: 500m
                          host_ids:
                            - de3b1388-1f0c-42f1-a86c-59ab72f255ec
                          memory: 500M
                          name: n1
                          port: 5432
                          postgres_version: "17"
                          postgresql_conf:
                            max_connections: 1000
                          restore_config:
                            provider: pgbackrest
                            repository:
                                azure_account: pgedge-backups
                                azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                azure_endpoint: blob.core.usgovcloudapi.net
                                azure_key: YXpLZXk=
                                base_path: /backups
                                custom_options:
                                    s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                gcs_endpoint: localhost
                                gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                s3_endpoint: s3.us-east-1.amazonaws.com
                                s3_key: AKIAIOSFODNN7EXAMPLE
                                s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                s3_region: us-east-1
                                type: s3
                            restore_options:
                                - --set=20250505-153628F
                                - --type=xid
                                - --target=123456
                            source_database_id: 6c8e43ee-26ea-47b8-a8f8-89897e0137bd
                            source_database_name: northwind
                            source_node_name: n1
                          storage_class: loop_device
                          storage_size: 500GiB
                        - backup_config:
                            provider: pgbackrest
                            repositories:
                                - azure_account: pgedge-backups
                                  azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                  azure_endpoint: blob.core.usgovcloudapi.net
                                  azure_key: YXpLZXk=
                                  base_path: /backups
                                  custom_options:
                                    s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                    storage-upload-chunk-size: 5MiB
                                  gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                  gcs_endpoint: localhost
                                  gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                  id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                  retention_full: 2
                                  retention_full_type: count
                                  s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                  s3_endpoint: s3.us-east-1.amazonaws.com
                                  s3_key: AKIAIOSFODNN7EXAMPLE
                                  s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                  s3_region: us-east-1
                                  type: s3
                            schedules:
                                - cron_expression: 0 6 * * ?
                                  id: daily-full-backup
                                  type: full
                                - cron_expression: 0 6 * * ?
                                  id: daily-full-backup
                                  type: full
                                - cron_expression: 0 6 * * ?
                                  id: daily-full-backup
                                  type: full
                          cpus: 500m
                          host_ids:
                            - de3b1388-1f0c-42f1-a86c-59ab72f255ec
                          memory: 500M
                          name: n1
                          port: 5432
                          postgres_version: "17"
                          postgresql_conf:
                            max_connections: 1000
                          restore_config:
                            provider: pgbackrest
                            repository:
                                azure_account: pgedge-backups
                                azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                azure_endpoint: blob.core.usgovcloudapi.net
                                azure_key: YXpLZXk=
                                base_path: /backups
                                custom_options:
                                    s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                gcs_endpoint: localhost
                                gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                s3_endpoint: s3.us-east-1.amazonaws.com
                                s3_key: AKIAIOSFODNN7EXAMPLE
                                s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                s3_region: us-east-1
                                type: s3
                            restore_options:
                                - --set=20250505-153628F
                                - --type=xid
                                - --target=123456
                            source_database_id: 6c8e43ee-26ea-47b8-a8f8-89897e0137bd
                            source_database_name: northwind
                            source_node_name: n1
                          storage_class: loop_device
                          storage_size: 500GiB
                        - backup_config:
                            provider: pgbackrest
                            repositories:
                                - azure_account: pgedge-backups
                                  azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                  azure_endpoint: blob.core.usgovcloudapi.net
                                  azure_key: YXpLZXk=
                                  base_path: /backups
                                  custom_options:
                                    s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                    storage-upload-chunk-size: 5MiB
                                  gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                  gcs_endpoint: localhost
                                  gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                  id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                  retention_full: 2
                                  retention_full_type: count
                                  s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                  s3_endpoint: s3.us-east-1.amazonaws.com
                                  s3_key: AKIAIOSFODNN7EXAMPLE
                                  s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                  s3_region: us-east-1
                                  type: s3
                            schedules:
                                - cron_expression: 0 6 * * ?
                                  id: daily-full-backup
                                  type: full
                                - cron_expression: 0 6 * * ?
                                  id: daily-full-backup
                                  type: full
                                - cron_expression: 0 6 * * ?
                                  id: daily-full-backup
                                  type: full
                          cpus: 500m
                          host_ids:
                            - de3b1388-1f0c-42f1-a86c-59ab72f255ec
                          memory: 500M
                          name: n1
                          port: 5432
                          postgres_version: "17"
                          postgresql_conf:
                            max_connections: 1000
                          restore_config:
                            provider: pgbackrest
                            repository:
                                azure_account: pgedge-backups
                                azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                azure_endpoint: blob.core.usgovcloudapi.net
                                azure_key: YXpLZXk=
                                base_path: /backups
                                custom_options:
                                    s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                gcs_endpoint: localhost
                                gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                s3_endpoint: s3.us-east-1.amazonaws.com
                                s3_key: AKIAIOSFODNN7EXAMPLE
                                s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                s3_region: us-east-1
                                type: s3
                            restore_options:
                                - --set=20250505-153628F
                                - --type=xid
                                - --target=123456
                            source_database_id: 6c8e43ee-26ea-47b8-a8f8-89897e0137bd
                            source_database_name: northwind
                            source_node_name: n1
                          storage_class: loop_device
                          storage_size: 500GiB
                    port: 5432
                    postgres_version: "17"
                    postgresql_conf:
                        max_connections: 1000
                    restore_config:
                        provider: pgbackrest
                        repository:
                            azure_account: pgedge-backups
                            azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                            azure_endpoint: blob.core.usgovcloudapi.net
                            azure_key: YXpLZXk=
                            base_path: /backups
                            custom_options:
                                s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                            gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                            gcs_endpoint: localhost
                            gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                            id: f6b84a99-5e91-4203-be1e-131fe82e5984
                            s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                            s3_endpoint: s3.us-east-1.amazonaws.com
                            s3_key: AKIAIOSFODNN7EXAMPLE
                            s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                            s3_region: us-east-1
                            type: s3
                        restore_options:
                            - --set=20250505-153628F
                            - --type=xid
                            - --target=123456
                        source_database_id: 6c8e43ee-26ea-47b8-a8f8-89897e0137bd
                        source_database_name: northwind
                        source_node_name: n1
                    spock_version: "4"
                    storage_class: loop_device
                    storage_size: 500GiB
                tenant_id: 8210ec10-2dca-406c-ac4a-0661d2189954
        Database:
            type: object
            properties:
                created_at:
                    type: string
                    description: The time that the database was created.
                    example: "2025-01-01T01:30:00Z"
                    format: date-time
                id:
                    type: string
                    description: Unique identifier for the database.
                    example: 02f1a7db-fca8-4521-b57a-2a375c1ced51
                    format: uuid
                instances:
                    $ref: '#/components/schemas/InstanceCollection'
                spec:
                    $ref: '#/components/schemas/DatabaseSpec'
                state:
                    type: string
                    description: Current state of the database.
                    example: deleting
                    enum:
                        - creating
                        - modifying
                        - available
                        - deleting
                        - degraded
                        - unknown
                tenant_id:
                    type: string
                    description: Unique identifier for the databases's owner.
                    example: 8210ec10-2dca-406c-ac4a-0661d2189954
                    format: uuid
                updated_at:
                    type: string
                    description: The time that the database was last updated.
                    example: "2025-01-01T02:30:00Z"
                    format: date-time
            example:
                created_at: "2025-01-01T01:30:00Z"
                id: 02f1a7db-fca8-4521-b57a-2a375c1ced51
                instances:
                    - created_at: "2008-04-05T03:29:38Z"
                      host_id: de3b1388-1f0c-42f1-a86c-59ab72f255ec
                      id: a67cbb36-c3c3-49c9-8aac-f4a0438a883d
                      interfaces:
                        - hostname: postgres-n1
                          ipv4_address: 10.1.0.113
                          network_id: l5imrq28sh6s
                          network_type: docker
                          port: 5432
                        - hostname: postgres-n1
                          ipv4_address: 10.1.0.113
                          network_id: l5imrq28sh6s
                          network_type: docker
                          port: 5432
                        - hostname: postgres-n1
                          ipv4_address: 10.1.0.113
                          network_id: l5imrq28sh6s
                          network_type: docker
                          port: 5432
                      node_name: n1
                      patroni_paused: true
                      patroni_state: unknown
                      pending_restart: true
                      postgres_version: "17.1"
                      read_only: true
                      role: primary
                      spock_version: 4.0.9
                      state: backing_up
                      updated_at: "2003-08-09T22:13:38Z"
                    - created_at: "2008-04-05T03:29:38Z"
                      host_id: de3b1388-1f0c-42f1-a86c-59ab72f255ec
                      id: a67cbb36-c3c3-49c9-8aac-f4a0438a883d
                      interfaces:
                        - hostname: postgres-n1
                          ipv4_address: 10.1.0.113
                          network_id: l5imrq28sh6s
                          network_type: docker
                          port: 5432
                        - hostname: postgres-n1
                          ipv4_address: 10.1.0.113
                          network_id: l5imrq28sh6s
                          network_type: docker
                          port: 5432
                        - hostname: postgres-n1
                          ipv4_address: 10.1.0.113
                          network_id: l5imrq28sh6s
                          network_type: docker
                          port: 5432
                      node_name: n1
                      patroni_paused: true
                      patroni_state: unknown
                      pending_restart: true
                      postgres_version: "17.1"
                      read_only: true
                      role: primary
                      spock_version: 4.0.9
                      state: backing_up
                      updated_at: "2003-08-09T22:13:38Z"
                spec:
                    backup_config:
                        provider: pgbackrest
                        repositories:
                            - azure_account: pgedge-backups
                              azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                              azure_endpoint: blob.core.usgovcloudapi.net
                              azure_key: YXpLZXk=
                              base_path: /backups
                              custom_options:
                                s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                storage-upload-chunk-size: 5MiB
                              gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                              gcs_endpoint: localhost
                              gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                              id: f6b84a99-5e91-4203-be1e-131fe82e5984
                              retention_full: 2
                              retention_full_type: count
                              s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                              s3_endpoint: s3.us-east-1.amazonaws.com
                              s3_key: AKIAIOSFODNN7EXAMPLE
                              s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                              s3_region: us-east-1
                              type: s3
                        schedules:
                            - cron_expression: 0 6 * * ?
                              id: daily-full-backup
                              type: full
                            - cron_expression: 0 6 * * ?
                              id: daily-full-backup
                              type: full
                            - cron_expression: 0 6 * * ?
                              id: daily-full-backup
                              type: full
                    cpus: 500m
                    database_name: northwind
                    database_users:
                        - attributes:
                            - LOGIN
                            - CREATEDB
                            - CREATEROLE
                          db_owner: true
                          password: secret
                          roles:
                            - pgedge_superuser
                          username: admin
                        - attributes:
                            - LOGIN
                            - CREATEDB
                            - CREATEROLE
                          db_owner: true
                          password: secret
                          roles:
                            - pgedge_superuser
                          username: admin
                    deletion_protection: true
                    features:
                        some_feature: enabled
                    memory: 500M
                    nodes:
                        - backup_config:
                            provider: pgbackrest
                            repositories:
                                - azure_account: pgedge-backups
                                  azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                  azure_endpoint: blob.core.usgovcloudapi.net
                                  azure_key: YXpLZXk=
                                  base_path: /backups
                                  custom_options:
                                    s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                    storage-upload-chunk-size: 5MiB
                                  gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                  gcs_endpoint: localhost
                                  gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                  id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                  retention_full: 2
                                  retention_full_type: count
                                  s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                  s3_endpoint: s3.us-east-1.amazonaws.com
                                  s3_key: AKIAIOSFODNN7EXAMPLE
                                  s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                  s3_region: us-east-1
                                  type: s3
                            schedules:
                                - cron_expression: 0 6 * * ?
                                  id: daily-full-backup
                                  type: full
                                - cron_expression: 0 6 * * ?
                                  id: daily-full-backup
                                  type: full
                                - cron_expression: 0 6 * * ?
                                  id: daily-full-backup
                                  type: full
                          cpus: 500m
                          host_ids:
                            - de3b1388-1f0c-42f1-a86c-59ab72f255ec
                          memory: 500M
                          name: n1
                          port: 5432
                          postgres_version: "17"
                          postgresql_conf:
                            max_connections: 1000
                          restore_config:
                            provider: pgbackrest
                            repository:
                                azure_account: pgedge-backups
                                azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                azure_endpoint: blob.core.usgovcloudapi.net
                                azure_key: YXpLZXk=
                                base_path: /backups
                                custom_options:
                                    s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                gcs_endpoint: localhost
                                gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                s3_endpoint: s3.us-east-1.amazonaws.com
                                s3_key: AKIAIOSFODNN7EXAMPLE
                                s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                s3_region: us-east-1
                                type: s3
                            restore_options:
                                - --set=20250505-153628F
                                - --type=xid
                                - --target=123456
                            source_database_id: 6c8e43ee-26ea-47b8-a8f8-89897e0137bd
                            source_database_name: northwind
                            source_node_name: n1
                          storage_class: loop_device
                          storage_size: 500GiB
                        - backup_config:
                            provider: pgbackrest
                            repositories:
                                - azure_account: pgedge-backups
                                  azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                  azure_endpoint: blob.core.usgovcloudapi.net
                                  azure_key: YXpLZXk=
                                  base_path: /backups
                                  custom_options:
                                    s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                    storage-upload-chunk-size: 5MiB
                                  gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                  gcs_endpoint: localhost
                                  gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                  id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                  retention_full: 2
                                  retention_full_type: count
                                  s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                  s3_endpoint: s3.us-east-1.amazonaws.com
                                  s3_key: AKIAIOSFODNN7EXAMPLE
                                  s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                  s3_region: us-east-1
                                  type: s3
                            schedules:
                                - cron_expression: 0 6 * * ?
                                  id: daily-full-backup
                                  type: full
                                - cron_expression: 0 6 * * ?
                                  id: daily-full-backup
                                  type: full
                                - cron_expression: 0 6 * * ?
                                  id: daily-full-backup
                                  type: full
                          cpus: 500m
                          host_ids:
                            - de3b1388-1f0c-42f1-a86c-59ab72f255ec
                          memory: 500M
                          name: n1
                          port: 5432
                          postgres_version: "17"
                          postgresql_conf:
                            max_connections: 1000
                          restore_config:
                            provider: pgbackrest
                            repository:
                                azure_account: pgedge-backups
                                azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                azure_endpoint: blob.core.usgovcloudapi.net
                                azure_key: YXpLZXk=
                                base_path: /backups
                                custom_options:
                                    s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                gcs_endpoint: localhost
                                gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                s3_endpoint: s3.us-east-1.amazonaws.com
                                s3_key: AKIAIOSFODNN7EXAMPLE
                                s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                s3_region: us-east-1
                                type: s3
                            restore_options:
                                - --set=20250505-153628F
                                - --type=xid
                                - --target=123456
                            source_database_id: 6c8e43ee-26ea-47b8-a8f8-89897e0137bd
                            source_database_name: northwind
                            source_node_name: n1
                          storage_class: loop_device
                          storage_size: 500GiB
                        - backup_config:
                            provider: pgbackrest
                            repositories:
                                - azure_account: pgedge-backups
                                  azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                  azure_endpoint: blob.core.usgovcloudapi.net
                                  azure_key: YXpLZXk=
                                  base_path: /backups
                                  custom_options:
                                    s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                    storage-upload-chunk-size: 5MiB
                                  gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                  gcs_endpoint: localhost
                                  gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                  id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                  retention_full: 2
                                  retention_full_type: count
                                  s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                  s3_endpoint: s3.us-east-1.amazonaws.com
                                  s3_key: AKIAIOSFODNN7EXAMPLE
                                  s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                  s3_region: us-east-1
                                  type: s3
                            schedules:
                                - cron_expression: 0 6 * * ?
                                  id: daily-full-backup
                                  type: full
                                - cron_expression: 0 6 * * ?
                                  id: daily-full-backup
                                  type: full
                                - cron_expression: 0 6 * * ?
                                  id: daily-full-backup
                                  type: full
                          cpus: 500m
                          host_ids:
                            - de3b1388-1f0c-42f1-a86c-59ab72f255ec
                          memory: 500M
                          name: n1
                          port: 5432
                          postgres_version: "17"
                          postgresql_conf:
                            max_connections: 1000
                          restore_config:
                            provider: pgbackrest
                            repository:
                                azure_account: pgedge-backups
                                azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                azure_endpoint: blob.core.usgovcloudapi.net
                                azure_key: YXpLZXk=
                                base_path: /backups
                                custom_options:
                                    s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                gcs_endpoint: localhost
                                gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                s3_endpoint: s3.us-east-1.amazonaws.com
                                s3_key: AKIAIOSFODNN7EXAMPLE
                                s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                s3_region: us-east-1
                                type: s3
                            restore_options:
                                - --set=20250505-153628F
                                - --type=xid
                                - --target=123456
                            source_database_id: 6c8e43ee-26ea-47b8-a8f8-89897e0137bd
                            source_database_name: northwind
                            source_node_name: n1
                          storage_class: loop_device
                          storage_size: 500GiB
                        - backup_config:
                            provider: pgbackrest
                            repositories:
                                - azure_account: pgedge-backups
                                  azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                  azure_endpoint: blob.core.usgovcloudapi.net
                                  azure_key: YXpLZXk=
                                  base_path: /backups
                                  custom_options:
                                    s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                    storage-upload-chunk-size: 5MiB
                                  gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                  gcs_endpoint: localhost
                                  gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                  id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                  retention_full: 2
                                  retention_full_type: count
                                  s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                  s3_endpoint: s3.us-east-1.amazonaws.com
                                  s3_key: AKIAIOSFODNN7EXAMPLE
                                  s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                  s3_region: us-east-1
                                  type: s3
                            schedules:
                                - cron_expression: 0 6 * * ?
                                  id: daily-full-backup
                                  type: full
                                - cron_expression: 0 6 * * ?
                                  id: daily-full-backup
                                  type: full
                                - cron_expression: 0 6 * * ?
                                  id: daily-full-backup
                                  type: full
                          cpus: 500m
                          host_ids:
                            - de3b1388-1f0c-42f1-a86c-59ab72f255ec
                          memory: 500M
                          name: n1
                          port: 5432
                          postgres_version: "17"
                          postgresql_conf:
                            max_connections: 1000
                          restore_config:
                            provider: pgbackrest
                            repository:
                                azure_account: pgedge-backups
                                azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                azure_endpoint: blob.core.usgovcloudapi.net
                                azure_key: YXpLZXk=
                                base_path: /backups
                                custom_options:
                                    s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                gcs_endpoint: localhost
                                gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                s3_endpoint: s3.us-east-1.amazonaws.com
                                s3_key: AKIAIOSFODNN7EXAMPLE
                                s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                s3_region: us-east-1
                                type: s3
                            restore_options:
                                - --set=20250505-153628F
                                - --type=xid
                                - --target=123456
                            source_database_id: 6c8e43ee-26ea-47b8-a8f8-89897e0137bd
                            source_database_name: northwind
                            source_node_name: n1
                          storage_class: loop_device
                          storage_size: 500GiB
                    port: 5432
                    postgres_version: "17"
                    postgresql_conf:
                        max_connections: 1000
                    restore_config:
                        provider: pgbackrest
                        repository:
                            azure_account: pgedge-backups
                            azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                            azure_endpoint: blob.core.usgovcloudapi.net
                            azure_key: YXpLZXk=
                            base_path: /backups
                            custom_options:
                                s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                            gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                            gcs_endpoint: localhost
                            gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                            id: f6b84a99-5e91-4203-be1e-131fe82e5984
                            s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                            s3_endpoint: s3.us-east-1.amazonaws.com
                            s3_key: AKIAIOSFODNN7EXAMPLE
                            s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                            s3_region: us-east-1
                            type: s3
                        restore_options:
                            - --set=20250505-153628F
                            - --type=xid
                            - --target=123456
                        source_database_id: 6c8e43ee-26ea-47b8-a8f8-89897e0137bd
                        source_database_name: northwind
                        source_node_name: n1
                    spock_version: "4"
                    storage_class: loop_device
                    storage_size: 500GiB
                state: degraded
                tenant_id: 8210ec10-2dca-406c-ac4a-0661d2189954
                updated_at: "2025-01-01T02:30:00Z"
            required:
                - id
                - created_at
                - updated_at
                - state
        DatabaseNodeSpec:
            type: object
            properties:
                backup_config:
                    $ref: '#/components/schemas/BackupConfigSpec'
                cpus:
                    type: string
                    description: The number of CPUs to allocate for the database on this node and to use for tuning Postgres. Defaults to the number of available CPUs on the host. Can include an SI suffix, e.g. '500m' for 500 millicpus. Whether this limit will be enforced depends on the orchestrator.
                    example: 500m
                host_ids:
                    type: array
                    items:
                        type: string
                        example: de3b1388-1f0c-42f1-a86c-59ab72f255ec
                        format: uuid
                    description: The IDs of the hosts that should run this node. When multiple hosts are specified, one host will chosen as a primary and the others will be read replicas.
                    example:
                        - de3b1388-1f0c-42f1-a86c-59ab72f255ec
                        - de3b1388-1f0c-42f1-a86c-59ab72f255ec
                        - de3b1388-1f0c-42f1-a86c-59ab72f255ec
                    minItems: 1
                memory:
                    type: string
                    description: The amount of memory in SI or IEC notation to allocate for the database on this node and to use for tuning Postgres. Defaults to the total available memory on the host. Whether this limit will be enforced depends on the orchestrator.
                    example: 500M
                name:
                    type: string
                    description: The name of the database node.
                    example: n1
                    pattern: n[0-9]+
                port:
                    type: integer
                    description: The port used by the Postgres database for this node. Overrides the Postgres port set in the DatabaseSpec.
                    example: 5432
                    format: int64
                postgres_version:
                    type: string
                    description: The major version of Postgres for this node. Overrides the Postgres version set in the DatabaseSpec.
                    example: "17"
                    enum:
                        - "16"
                        - "17"
                postgresql_conf:
                    type: object
                    description: Additional postgresql.conf settings for this particular node. Will be merged with the settings provided by control-plane.
                    example:
                        max_connections: 1000
                    additionalProperties: true
                restore_config:
                    $ref: '#/components/schemas/RestoreConfigSpec'
                storage_class:
                    type: string
                    description: The storage class to use for the database on this node. The possible values and defaults depend on the orchestrator.
                    example: loop_device
                storage_size:
                    type: string
                    description: The size of the storage for this node in SI or IEC notation. Support for this value depends on the orchestrator and storage class.
                    example: 500GiB
            example:
                backup_config:
                    provider: pgbackrest
                    repositories:
                        - azure_account: pgedge-backups
                          azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                          azure_endpoint: blob.core.usgovcloudapi.net
                          azure_key: YXpLZXk=
                          base_path: /backups
                          custom_options:
                            s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                            storage-upload-chunk-size: 5MiB
                          gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                          gcs_endpoint: localhost
                          gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                          id: f6b84a99-5e91-4203-be1e-131fe82e5984
                          retention_full: 2
                          retention_full_type: count
                          s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                          s3_endpoint: s3.us-east-1.amazonaws.com
                          s3_key: AKIAIOSFODNN7EXAMPLE
                          s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                          s3_region: us-east-1
                          type: s3
                    schedules:
                        - cron_expression: 0 6 * * ?
                          id: daily-full-backup
                          type: full
                        - cron_expression: 0 6 * * ?
                          id: daily-full-backup
                          type: full
                        - cron_expression: 0 6 * * ?
                          id: daily-full-backup
                          type: full
                cpus: 500m
                host_ids:
                    - de3b1388-1f0c-42f1-a86c-59ab72f255ec
                    - de3b1388-1f0c-42f1-a86c-59ab72f255ec
                memory: 500M
                name: n1
                port: 5432
                postgres_version: "17"
                postgresql_conf:
                    max_connections: 1000
                restore_config:
                    provider: pgbackrest
                    repository:
                        azure_account: pgedge-backups
                        azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                        azure_endpoint: blob.core.usgovcloudapi.net
                        azure_key: YXpLZXk=
                        base_path: /backups
                        custom_options:
                            s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                        gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                        gcs_endpoint: localhost
                        gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                        id: f6b84a99-5e91-4203-be1e-131fe82e5984
                        s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                        s3_endpoint: s3.us-east-1.amazonaws.com
                        s3_key: AKIAIOSFODNN7EXAMPLE
                        s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                        s3_region: us-east-1
                        type: s3
                    restore_options:
                        - --set=20250505-153628F
                        - --type=xid
                        - --target=123456
                    source_database_id: 6c8e43ee-26ea-47b8-a8f8-89897e0137bd
                    source_database_name: northwind
                    source_node_name: n1
                storage_class: loop_device
                storage_size: 500GiB
            required:
                - name
                - host_ids
        DatabaseReplicaSpec:
            type: object
            properties:
                host_id:
                    type: string
                    description: The ID of the host that should run this read replica.
                    example: de3b1388-1f0c-42f1-a86c-59ab72f255ec
                    format: uuid
            example:
                host_id: de3b1388-1f0c-42f1-a86c-59ab72f255ec
            required:
                - host_id
        DatabaseResponseAbbreviated:
            type: object
            properties:
                created_at:
                    type: string
                    description: The time that the database was created.
                    example: "2025-01-01T01:30:00Z"
                    format: date-time
                id:
                    type: string
                    description: Unique identifier for the database.
                    example: 02f1a7db-fca8-4521-b57a-2a375c1ced51
                    format: uuid
                instances:
                    $ref: '#/components/schemas/InstanceResponseAbbreviatedCollection'
                state:
                    type: string
                    description: Current state of the database.
                    example: modifying
                    enum:
                        - creating
                        - modifying
                        - available
                        - deleting
                        - degraded
                        - unknown
                tenant_id:
                    type: string
                    description: Unique identifier for the databases's owner.
                    example: 8210ec10-2dca-406c-ac4a-0661d2189954
                    format: uuid
                updated_at:
                    type: string
                    description: The time that the database was last updated.
                    example: "2025-01-01T02:30:00Z"
                    format: date-time
            description: DatabaseResponse result type (abbreviated view)
            example:
                created_at: "2025-01-01T01:30:00Z"
                id: 02f1a7db-fca8-4521-b57a-2a375c1ced51
                instances:
                    - host_id: de3b1388-1f0c-42f1-a86c-59ab72f255ec
                      id: a67cbb36-c3c3-49c9-8aac-f4a0438a883d
                      node_name: n1
                      state: available
                    - host_id: de3b1388-1f0c-42f1-a86c-59ab72f255ec
                      id: a67cbb36-c3c3-49c9-8aac-f4a0438a883d
                      node_name: n1
                      state: available
                    - host_id: de3b1388-1f0c-42f1-a86c-59ab72f255ec
                      id: a67cbb36-c3c3-49c9-8aac-f4a0438a883d
                      node_name: n1
                      state: available
                state: degraded
                tenant_id: 8210ec10-2dca-406c-ac4a-0661d2189954
                updated_at: "2025-01-01T02:30:00Z"
            required:
                - id
                - created_at
                - updated_at
                - state
        DatabaseResponseAbbreviatedCollection:
            type: array
            items:
                $ref: '#/components/schemas/DatabaseResponseAbbreviated'
            description: List-DatabasesResponseBody is the result type for an array of DatabaseResponse (abbreviated view)
            example:
                - created_at: "2025-01-01T01:30:00Z"
                  id: 02f1a7db-fca8-4521-b57a-2a375c1ced51
                  instances:
                    - host_id: de3b1388-1f0c-42f1-a86c-59ab72f255ec
                      id: a67cbb36-c3c3-49c9-8aac-f4a0438a883d
                      node_name: n1
                      state: available
                    - host_id: de3b1388-1f0c-42f1-a86c-59ab72f255ec
                      id: a67cbb36-c3c3-49c9-8aac-f4a0438a883d
                      node_name: n1
                      state: available
                    - host_id: de3b1388-1f0c-42f1-a86c-59ab72f255ec
                      id: a67cbb36-c3c3-49c9-8aac-f4a0438a883d
                      node_name: n1
                      state: available
                  state: available
                  tenant_id: 8210ec10-2dca-406c-ac4a-0661d2189954
                  updated_at: "2025-01-01T02:30:00Z"
                - created_at: "2025-01-01T01:30:00Z"
                  id: 02f1a7db-fca8-4521-b57a-2a375c1ced51
                  instances:
                    - host_id: de3b1388-1f0c-42f1-a86c-59ab72f255ec
                      id: a67cbb36-c3c3-49c9-8aac-f4a0438a883d
                      node_name: n1
                      state: available
                    - host_id: de3b1388-1f0c-42f1-a86c-59ab72f255ec
                      id: a67cbb36-c3c3-49c9-8aac-f4a0438a883d
                      node_name: n1
                      state: available
                    - host_id: de3b1388-1f0c-42f1-a86c-59ab72f255ec
                      id: a67cbb36-c3c3-49c9-8aac-f4a0438a883d
                      node_name: n1
                      state: available
                  state: available
                  tenant_id: 8210ec10-2dca-406c-ac4a-0661d2189954
                  updated_at: "2025-01-01T02:30:00Z"
                - created_at: "2025-01-01T01:30:00Z"
                  id: 02f1a7db-fca8-4521-b57a-2a375c1ced51
                  instances:
                    - host_id: de3b1388-1f0c-42f1-a86c-59ab72f255ec
                      id: a67cbb36-c3c3-49c9-8aac-f4a0438a883d
                      node_name: n1
                      state: available
                    - host_id: de3b1388-1f0c-42f1-a86c-59ab72f255ec
                      id: a67cbb36-c3c3-49c9-8aac-f4a0438a883d
                      node_name: n1
                      state: available
                    - host_id: de3b1388-1f0c-42f1-a86c-59ab72f255ec
                      id: a67cbb36-c3c3-49c9-8aac-f4a0438a883d
                      node_name: n1
                      state: available
                  state: available
                  tenant_id: 8210ec10-2dca-406c-ac4a-0661d2189954
                  updated_at: "2025-01-01T02:30:00Z"
                - created_at: "2025-01-01T01:30:00Z"
                  id: 02f1a7db-fca8-4521-b57a-2a375c1ced51
                  instances:
                    - host_id: de3b1388-1f0c-42f1-a86c-59ab72f255ec
                      id: a67cbb36-c3c3-49c9-8aac-f4a0438a883d
                      node_name: n1
                      state: available
                    - host_id: de3b1388-1f0c-42f1-a86c-59ab72f255ec
                      id: a67cbb36-c3c3-49c9-8aac-f4a0438a883d
                      node_name: n1
                      state: available
                    - host_id: de3b1388-1f0c-42f1-a86c-59ab72f255ec
                      id: a67cbb36-c3c3-49c9-8aac-f4a0438a883d
                      node_name: n1
                      state: available
                  state: available
                  tenant_id: 8210ec10-2dca-406c-ac4a-0661d2189954
                  updated_at: "2025-01-01T02:30:00Z"
        DatabaseSpec:
            type: object
            properties:
                backup_config:
                    $ref: '#/components/schemas/BackupConfigSpec'
                cpus:
                    type: string
                    description: The number of CPUs to allocate for the database and to use for tuning Postgres. Defaults to the number of available CPUs on the host. Can include an SI suffix, e.g. '500m' for 500 millicpus. Whether this limit will be enforced depends on the orchestrator.
                    example: 500m
                database_name:
                    type: string
                    description: The name of the Postgres database.
                    example: northwind
                database_users:
                    type: array
                    items:
                        $ref: '#/components/schemas/DatabaseUserSpec'
                    description: The users to create for this database.
                    example:
                        - attributes:
                            - LOGIN
                            - CREATEDB
                            - CREATEROLE
                          db_owner: true
                          password: secret
                          roles:
                            - pgedge_superuser
                          username: admin
                        - attributes:
                            - LOGIN
                            - CREATEDB
                            - CREATEROLE
                          db_owner: true
                          password: secret
                          roles:
                            - pgedge_superuser
                          username: admin
                        - attributes:
                            - LOGIN
                            - CREATEDB
                            - CREATEROLE
                          db_owner: true
                          password: secret
                          roles:
                            - pgedge_superuser
                          username: admin
                deletion_protection:
                    type: boolean
                    description: Prevents deletion when true.
                    example: true
                features:
                    type: object
                    description: The feature flags for this database.
                    example:
                        some_feature: enabled
                    additionalProperties:
                        type: string
                        example: Unde maiores.
                memory:
                    type: string
                    description: The amount of memory in SI or IEC notation to allocate for the database and to use for tuning Postgres. Defaults to the total available memory on the host. Whether this limit will be enforced depends on the orchestrator.
                    example: 500M
                nodes:
                    type: array
                    items:
                        $ref: '#/components/schemas/DatabaseNodeSpec'
                    description: The Spock nodes for this database.
                    example:
                        - backup_config:
                            provider: pgbackrest
                            repositories:
                                - azure_account: pgedge-backups
                                  azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                  azure_endpoint: blob.core.usgovcloudapi.net
                                  azure_key: YXpLZXk=
                                  base_path: /backups
                                  custom_options:
                                    s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                    storage-upload-chunk-size: 5MiB
                                  gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                  gcs_endpoint: localhost
                                  gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                  id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                  retention_full: 2
                                  retention_full_type: count
                                  s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                  s3_endpoint: s3.us-east-1.amazonaws.com
                                  s3_key: AKIAIOSFODNN7EXAMPLE
                                  s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                  s3_region: us-east-1
                                  type: s3
                            schedules:
                                - cron_expression: 0 6 * * ?
                                  id: daily-full-backup
                                  type: full
                                - cron_expression: 0 6 * * ?
                                  id: daily-full-backup
                                  type: full
                                - cron_expression: 0 6 * * ?
                                  id: daily-full-backup
                                  type: full
                          cpus: 500m
                          host_ids:
                            - de3b1388-1f0c-42f1-a86c-59ab72f255ec
                          memory: 500M
                          name: n1
                          port: 5432
                          postgres_version: "17"
                          postgresql_conf:
                            max_connections: 1000
                          restore_config:
                            provider: pgbackrest
                            repository:
                                azure_account: pgedge-backups
                                azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                azure_endpoint: blob.core.usgovcloudapi.net
                                azure_key: YXpLZXk=
                                base_path: /backups
                                custom_options:
                                    s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                gcs_endpoint: localhost
                                gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                s3_endpoint: s3.us-east-1.amazonaws.com
                                s3_key: AKIAIOSFODNN7EXAMPLE
                                s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                s3_region: us-east-1
                                type: s3
                            restore_options:
                                - --set=20250505-153628F
                                - --type=xid
                                - --target=123456
                            source_database_id: 6c8e43ee-26ea-47b8-a8f8-89897e0137bd
                            source_database_name: northwind
                            source_node_name: n1
                          storage_class: loop_device
                          storage_size: 500GiB
                        - backup_config:
                            provider: pgbackrest
                            repositories:
                                - azure_account: pgedge-backups
                                  azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                  azure_endpoint: blob.core.usgovcloudapi.net
                                  azure_key: YXpLZXk=
                                  base_path: /backups
                                  custom_options:
                                    s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                    storage-upload-chunk-size: 5MiB
                                  gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                  gcs_endpoint: localhost
                                  gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                  id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                  retention_full: 2
                                  retention_full_type: count
                                  s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                  s3_endpoint: s3.us-east-1.amazonaws.com
                                  s3_key: AKIAIOSFODNN7EXAMPLE
                                  s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                  s3_region: us-east-1
                                  type: s3
                            schedules:
                                - cron_expression: 0 6 * * ?
                                  id: daily-full-backup
                                  type: full
                                - cron_expression: 0 6 * * ?
                                  id: daily-full-backup
                                  type: full
                                - cron_expression: 0 6 * * ?
                                  id: daily-full-backup
                                  type: full
                          cpus: 500m
                          host_ids:
                            - de3b1388-1f0c-42f1-a86c-59ab72f255ec
                          memory: 500M
                          name: n1
                          port: 5432
                          postgres_version: "17"
                          postgresql_conf:
                            max_connections: 1000
                          restore_config:
                            provider: pgbackrest
                            repository:
                                azure_account: pgedge-backups
                                azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                azure_endpoint: blob.core.usgovcloudapi.net
                                azure_key: YXpLZXk=
                                base_path: /backups
                                custom_options:
                                    s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                gcs_endpoint: localhost
                                gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                s3_endpoint: s3.us-east-1.amazonaws.com
                                s3_key: AKIAIOSFODNN7EXAMPLE
                                s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                s3_region: us-east-1
                                type: s3
                            restore_options:
                                - --set=20250505-153628F
                                - --type=xid
                                - --target=123456
                            source_database_id: 6c8e43ee-26ea-47b8-a8f8-89897e0137bd
                            source_database_name: northwind
                            source_node_name: n1
                          storage_class: loop_device
                          storage_size: 500GiB
                        - backup_config:
                            provider: pgbackrest
                            repositories:
                                - azure_account: pgedge-backups
                                  azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                  azure_endpoint: blob.core.usgovcloudapi.net
                                  azure_key: YXpLZXk=
                                  base_path: /backups
                                  custom_options:
                                    s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                    storage-upload-chunk-size: 5MiB
                                  gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                  gcs_endpoint: localhost
                                  gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                  id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                  retention_full: 2
                                  retention_full_type: count
                                  s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                  s3_endpoint: s3.us-east-1.amazonaws.com
                                  s3_key: AKIAIOSFODNN7EXAMPLE
                                  s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                  s3_region: us-east-1
                                  type: s3
                            schedules:
                                - cron_expression: 0 6 * * ?
                                  id: daily-full-backup
                                  type: full
                                - cron_expression: 0 6 * * ?
                                  id: daily-full-backup
                                  type: full
                                - cron_expression: 0 6 * * ?
                                  id: daily-full-backup
                                  type: full
                          cpus: 500m
                          host_ids:
                            - de3b1388-1f0c-42f1-a86c-59ab72f255ec
                          memory: 500M
                          name: n1
                          port: 5432
                          postgres_version: "17"
                          postgresql_conf:
                            max_connections: 1000
                          restore_config:
                            provider: pgbackrest
                            repository:
                                azure_account: pgedge-backups
                                azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                azure_endpoint: blob.core.usgovcloudapi.net
                                azure_key: YXpLZXk=
                                base_path: /backups
                                custom_options:
                                    s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                gcs_endpoint: localhost
                                gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                s3_endpoint: s3.us-east-1.amazonaws.com
                                s3_key: AKIAIOSFODNN7EXAMPLE
                                s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                s3_region: us-east-1
                                type: s3
                            restore_options:
                                - --set=20250505-153628F
                                - --type=xid
                                - --target=123456
                            source_database_id: 6c8e43ee-26ea-47b8-a8f8-89897e0137bd
                            source_database_name: northwind
                            source_node_name: n1
                          storage_class: loop_device
                          storage_size: 500GiB
                        - backup_config:
                            provider: pgbackrest
                            repositories:
                                - azure_account: pgedge-backups
                                  azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                  azure_endpoint: blob.core.usgovcloudapi.net
                                  azure_key: YXpLZXk=
                                  base_path: /backups
                                  custom_options:
                                    s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                    storage-upload-chunk-size: 5MiB
                                  gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                  gcs_endpoint: localhost
                                  gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                  id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                  retention_full: 2
                                  retention_full_type: count
                                  s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                  s3_endpoint: s3.us-east-1.amazonaws.com
                                  s3_key: AKIAIOSFODNN7EXAMPLE
                                  s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                  s3_region: us-east-1
                                  type: s3
                            schedules:
                                - cron_expression: 0 6 * * ?
                                  id: daily-full-backup
                                  type: full
                                - cron_expression: 0 6 * * ?
                                  id: daily-full-backup
                                  type: full
                                - cron_expression: 0 6 * * ?
                                  id: daily-full-backup
                                  type: full
                          cpus: 500m
                          host_ids:
                            - de3b1388-1f0c-42f1-a86c-59ab72f255ec
                          memory: 500M
                          name: n1
                          port: 5432
                          postgres_version: "17"
                          postgresql_conf:
                            max_connections: 1000
                          restore_config:
                            provider: pgbackrest
                            repository:
                                azure_account: pgedge-backups
                                azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                azure_endpoint: blob.core.usgovcloudapi.net
                                azure_key: YXpLZXk=
                                base_path: /backups
                                custom_options:
                                    s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                gcs_endpoint: localhost
                                gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                s3_endpoint: s3.us-east-1.amazonaws.com
                                s3_key: AKIAIOSFODNN7EXAMPLE
                                s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                s3_region: us-east-1
                                type: s3
                            restore_options:
                                - --set=20250505-153628F
                                - --type=xid
                                - --target=123456
                            source_database_id: 6c8e43ee-26ea-47b8-a8f8-89897e0137bd
                            source_database_name: northwind
                            source_node_name: n1
                          storage_class: loop_device
                          storage_size: 500GiB
                port:
                    type: integer
                    description: The port used by the Postgres database.
                    example: 5432
                    format: int64
                postgres_version:
                    type: string
                    description: The major version of the Postgres database.
                    example: "17"
                    enum:
                        - "16"
                        - "17"
                postgresql_conf:
                    type: object
                    description: Additional postgresql.conf settings. Will be merged with the settings provided by control-plane.
                    example:
                        max_connections: 1000
                    additionalProperties: true
                restore_config:
                    $ref: '#/components/schemas/RestoreConfigSpec'
                spock_version:
                    type: string
                    description: The major version of the Spock extension.
                    example: "4"
                    enum:
                        - "4"
                storage_class:
                    type: string
                    description: The storage class to use for the database. The possible values and defaults depend on the orchestrator.
                    example: loop_device
                storage_size:
                    type: string
                    description: The size of the storage in SI or IEC notation. Support for this value depends on the orchestrator and storage class.
                    example: 500GiB
            example:
                backup_config:
                    provider: pgbackrest
                    repositories:
                        - azure_account: pgedge-backups
                          azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                          azure_endpoint: blob.core.usgovcloudapi.net
                          azure_key: YXpLZXk=
                          base_path: /backups
                          custom_options:
                            s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                            storage-upload-chunk-size: 5MiB
                          gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                          gcs_endpoint: localhost
                          gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                          id: f6b84a99-5e91-4203-be1e-131fe82e5984
                          retention_full: 2
                          retention_full_type: count
                          s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                          s3_endpoint: s3.us-east-1.amazonaws.com
                          s3_key: AKIAIOSFODNN7EXAMPLE
                          s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                          s3_region: us-east-1
                          type: s3
                    schedules:
                        - cron_expression: 0 6 * * ?
                          id: daily-full-backup
                          type: full
                        - cron_expression: 0 6 * * ?
                          id: daily-full-backup
                          type: full
                        - cron_expression: 0 6 * * ?
                          id: daily-full-backup
                          type: full
                cpus: 500m
                database_name: northwind
                database_users:
                    - attributes:
                        - LOGIN
                        - CREATEDB
                        - CREATEROLE
                      db_owner: true
                      password: secret
                      roles:
                        - pgedge_superuser
                      username: admin
                    - attributes:
                        - LOGIN
                        - CREATEDB
                        - CREATEROLE
                      db_owner: true
                      password: secret
                      roles:
                        - pgedge_superuser
                      username: admin
                    - attributes:
                        - LOGIN
                        - CREATEDB
                        - CREATEROLE
                      db_owner: true
                      password: secret
                      roles:
                        - pgedge_superuser
                      username: admin
                deletion_protection: true
                features:
                    some_feature: enabled
                memory: 500M
                nodes:
                    - backup_config:
                        provider: pgbackrest
                        repositories:
                            - azure_account: pgedge-backups
                              azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                              azure_endpoint: blob.core.usgovcloudapi.net
                              azure_key: YXpLZXk=
                              base_path: /backups
                              custom_options:
                                s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                storage-upload-chunk-size: 5MiB
                              gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                              gcs_endpoint: localhost
                              gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                              id: f6b84a99-5e91-4203-be1e-131fe82e5984
                              retention_full: 2
                              retention_full_type: count
                              s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                              s3_endpoint: s3.us-east-1.amazonaws.com
                              s3_key: AKIAIOSFODNN7EXAMPLE
                              s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                              s3_region: us-east-1
                              type: s3
                        schedules:
                            - cron_expression: 0 6 * * ?
                              id: daily-full-backup
                              type: full
                            - cron_expression: 0 6 * * ?
                              id: daily-full-backup
                              type: full
                            - cron_expression: 0 6 * * ?
                              id: daily-full-backup
                              type: full
                      cpus: 500m
                      host_ids:
                        - de3b1388-1f0c-42f1-a86c-59ab72f255ec
                      memory: 500M
                      name: n1
                      port: 5432
                      postgres_version: "17"
                      postgresql_conf:
                        max_connections: 1000
                      restore_config:
                        provider: pgbackrest
                        repository:
                            azure_account: pgedge-backups
                            azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                            azure_endpoint: blob.core.usgovcloudapi.net
                            azure_key: YXpLZXk=
                            base_path: /backups
                            custom_options:
                                s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                            gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                            gcs_endpoint: localhost
                            gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                            id: f6b84a99-5e91-4203-be1e-131fe82e5984
                            s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                            s3_endpoint: s3.us-east-1.amazonaws.com
                            s3_key: AKIAIOSFODNN7EXAMPLE
                            s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                            s3_region: us-east-1
                            type: s3
                        restore_options:
                            - --set=20250505-153628F
                            - --type=xid
                            - --target=123456
                        source_database_id: 6c8e43ee-26ea-47b8-a8f8-89897e0137bd
                        source_database_name: northwind
                        source_node_name: n1
                      storage_class: loop_device
                      storage_size: 500GiB
                    - backup_config:
                        provider: pgbackrest
                        repositories:
                            - azure_account: pgedge-backups
                              azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                              azure_endpoint: blob.core.usgovcloudapi.net
                              azure_key: YXpLZXk=
                              base_path: /backups
                              custom_options:
                                s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                storage-upload-chunk-size: 5MiB
                              gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                              gcs_endpoint: localhost
                              gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                              id: f6b84a99-5e91-4203-be1e-131fe82e5984
                              retention_full: 2
                              retention_full_type: count
                              s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                              s3_endpoint: s3.us-east-1.amazonaws.com
                              s3_key: AKIAIOSFODNN7EXAMPLE
                              s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                              s3_region: us-east-1
                              type: s3
                        schedules:
                            - cron_expression: 0 6 * * ?
                              id: daily-full-backup
                              type: full
                            - cron_expression: 0 6 * * ?
                              id: daily-full-backup
                              type: full
                            - cron_expression: 0 6 * * ?
                              id: daily-full-backup
                              type: full
                      cpus: 500m
                      host_ids:
                        - de3b1388-1f0c-42f1-a86c-59ab72f255ec
                      memory: 500M
                      name: n1
                      port: 5432
                      postgres_version: "17"
                      postgresql_conf:
                        max_connections: 1000
                      restore_config:
                        provider: pgbackrest
                        repository:
                            azure_account: pgedge-backups
                            azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                            azure_endpoint: blob.core.usgovcloudapi.net
                            azure_key: YXpLZXk=
                            base_path: /backups
                            custom_options:
                                s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                            gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                            gcs_endpoint: localhost
                            gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                            id: f6b84a99-5e91-4203-be1e-131fe82e5984
                            s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                            s3_endpoint: s3.us-east-1.amazonaws.com
                            s3_key: AKIAIOSFODNN7EXAMPLE
                            s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                            s3_region: us-east-1
                            type: s3
                        restore_options:
                            - --set=20250505-153628F
                            - --type=xid
                            - --target=123456
                        source_database_id: 6c8e43ee-26ea-47b8-a8f8-89897e0137bd
                        source_database_name: northwind
                        source_node_name: n1
                      storage_class: loop_device
                      storage_size: 500GiB
                    - backup_config:
                        provider: pgbackrest
                        repositories:
                            - azure_account: pgedge-backups
                              azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                              azure_endpoint: blob.core.usgovcloudapi.net
                              azure_key: YXpLZXk=
                              base_path: /backups
                              custom_options:
                                s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                storage-upload-chunk-size: 5MiB
                              gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                              gcs_endpoint: localhost
                              gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                              id: f6b84a99-5e91-4203-be1e-131fe82e5984
                              retention_full: 2
                              retention_full_type: count
                              s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                              s3_endpoint: s3.us-east-1.amazonaws.com
                              s3_key: AKIAIOSFODNN7EXAMPLE
                              s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                              s3_region: us-east-1
                              type: s3
                        schedules:
                            - cron_expression: 0 6 * * ?
                              id: daily-full-backup
                              type: full
                            - cron_expression: 0 6 * * ?
                              id: daily-full-backup
                              type: full
                            - cron_expression: 0 6 * * ?
                              id: daily-full-backup
                              type: full
                      cpus: 500m
                      host_ids:
                        - de3b1388-1f0c-42f1-a86c-59ab72f255ec
                      memory: 500M
                      name: n1
                      port: 5432
                      postgres_version: "17"
                      postgresql_conf:
                        max_connections: 1000
                      restore_config:
                        provider: pgbackrest
                        repository:
                            azure_account: pgedge-backups
                            azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                            azure_endpoint: blob.core.usgovcloudapi.net
                            azure_key: YXpLZXk=
                            base_path: /backups
                            custom_options:
                                s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                            gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                            gcs_endpoint: localhost
                            gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                            id: f6b84a99-5e91-4203-be1e-131fe82e5984
                            s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                            s3_endpoint: s3.us-east-1.amazonaws.com
                            s3_key: AKIAIOSFODNN7EXAMPLE
                            s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                            s3_region: us-east-1
                            type: s3
                        restore_options:
                            - --set=20250505-153628F
                            - --type=xid
                            - --target=123456
                        source_database_id: 6c8e43ee-26ea-47b8-a8f8-89897e0137bd
                        source_database_name: northwind
                        source_node_name: n1
                      storage_class: loop_device
                      storage_size: 500GiB
                    - backup_config:
                        provider: pgbackrest
                        repositories:
                            - azure_account: pgedge-backups
                              azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                              azure_endpoint: blob.core.usgovcloudapi.net
                              azure_key: YXpLZXk=
                              base_path: /backups
                              custom_options:
                                s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                storage-upload-chunk-size: 5MiB
                              gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                              gcs_endpoint: localhost
                              gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                              id: f6b84a99-5e91-4203-be1e-131fe82e5984
                              retention_full: 2
                              retention_full_type: count
                              s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                              s3_endpoint: s3.us-east-1.amazonaws.com
                              s3_key: AKIAIOSFODNN7EXAMPLE
                              s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                              s3_region: us-east-1
                              type: s3
                        schedules:
                            - cron_expression: 0 6 * * ?
                              id: daily-full-backup
                              type: full
                            - cron_expression: 0 6 * * ?
                              id: daily-full-backup
                              type: full
                            - cron_expression: 0 6 * * ?
                              id: daily-full-backup
                              type: full
                      cpus: 500m
                      host_ids:
                        - de3b1388-1f0c-42f1-a86c-59ab72f255ec
                      memory: 500M
                      name: n1
                      port: 5432
                      postgres_version: "17"
                      postgresql_conf:
                        max_connections: 1000
                      restore_config:
                        provider: pgbackrest
                        repository:
                            azure_account: pgedge-backups
                            azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                            azure_endpoint: blob.core.usgovcloudapi.net
                            azure_key: YXpLZXk=
                            base_path: /backups
                            custom_options:
                                s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                            gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                            gcs_endpoint: localhost
                            gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                            id: f6b84a99-5e91-4203-be1e-131fe82e5984
                            s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                            s3_endpoint: s3.us-east-1.amazonaws.com
                            s3_key: AKIAIOSFODNN7EXAMPLE
                            s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                            s3_region: us-east-1
                            type: s3
                        restore_options:
                            - --set=20250505-153628F
                            - --type=xid
                            - --target=123456
                        source_database_id: 6c8e43ee-26ea-47b8-a8f8-89897e0137bd
                        source_database_name: northwind
                        source_node_name: n1
                      storage_class: loop_device
                      storage_size: 500GiB
                port: 5432
                postgres_version: "17"
                postgresql_conf:
                    max_connections: 1000
                restore_config:
                    provider: pgbackrest
                    repository:
                        azure_account: pgedge-backups
                        azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                        azure_endpoint: blob.core.usgovcloudapi.net
                        azure_key: YXpLZXk=
                        base_path: /backups
                        custom_options:
                            s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                        gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                        gcs_endpoint: localhost
                        gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                        id: f6b84a99-5e91-4203-be1e-131fe82e5984
                        s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                        s3_endpoint: s3.us-east-1.amazonaws.com
                        s3_key: AKIAIOSFODNN7EXAMPLE
                        s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                        s3_region: us-east-1
                        type: s3
                    restore_options:
                        - --set=20250505-153628F
                        - --type=xid
                        - --target=123456
                    source_database_id: 6c8e43ee-26ea-47b8-a8f8-89897e0137bd
                    source_database_name: northwind
                    source_node_name: n1
                spock_version: "4"
                storage_class: loop_device
                storage_size: 500GiB
            required:
                - database_name
                - nodes
        DatabaseUserSpec:
            type: object
            properties:
                attributes:
                    type: array
                    items:
                        type: string
                        example: Iure corporis aliquid.
                    description: The attributes to assign to this database user.
                    example:
                        - LOGIN
                        - CREATEDB
                        - CREATEROLE
                db_owner:
                    type: boolean
                    description: If true, this user will be granted database ownership.
                    example: false
                password:
                    type: string
                    description: The password for this database user.
                    example: secret
                roles:
                    type: array
                    items:
                        type: string
                        example: Porro repudiandae pariatur eligendi consequatur omnis non.
                    description: The roles to assign to this database user.
                    example:
                        - pgedge_superuser
                username:
                    type: string
                    description: The username for this database user.
                    example: admin
            example:
                attributes:
                    - LOGIN
                    - CREATEDB
                    - CREATEROLE
                db_owner: false
                password: secret
                roles:
                    - pgedge_superuser
                username: admin
            required:
                - username
                - password
        Error:
            type: object
            properties:
                fault:
                    type: boolean
                    description: Is the error a server-side fault?
                    example: true
                id:
                    type: string
                    description: ID is a unique identifier for this particular occurrence of the problem.
                    example: 123abc
                message:
                    type: string
                    description: Message is a human-readable explanation specific to this occurrence of the problem.
                    example: parameter 'p' must be an integer
                name:
                    type: string
                    description: Name is the name of this class of errors.
                    example: bad_request
                temporary:
                    type: boolean
                    description: Is the error temporary?
                    example: false
                timeout:
                    type: boolean
                    description: Is the error a timeout?
                    example: true
            example:
                fault: false
                id: 123abc
                message: parameter 'p' must be an integer
                name: bad_request
                temporary: true
                timeout: true
            required:
                - name
                - id
                - message
                - temporary
                - timeout
                - fault
        Host:
            type: object
            properties:
                cohort:
                    $ref: '#/components/schemas/HostCohort'
                cpus:
                    type: integer
                    description: The number of CPUs on this host.
                    example: 4
                    format: int64
                default_pgedge_version:
                    $ref: '#/components/schemas/PgEdgeVersion'
                hostname:
                    type: string
                    description: The hostname of this host.
                    example: i-0123456789abcdef.ec2.internal
                id:
                    type: string
                    description: Unique identifier for the host.
                    example: de3b1388-1f0c-42f1-a86c-59ab72f255ec
                    format: uuid
                ipv4_address:
                    type: string
                    description: The IPv4 address of this host.
                    example: 10.24.34.0
                    format: ipv4
                memory:
                    type: string
                    description: The amount of memory available on this host.
                    example: 16GiB
                orchestrator:
                    type: string
                    description: The orchestrator used by this host.
                    example: swarm
                status:
                    $ref: '#/components/schemas/HostStatus'
                supported_pgedge_versions:
                    type: array
                    items:
                        $ref: '#/components/schemas/PgEdgeVersion'
                    description: The PgEdge versions supported by this host.
                    example:
                        - postgres_version: "16"
                          spock_version: "4"
                        - postgres_version: "16"
                          spock_version: "4"
                        - postgres_version: "16"
                          spock_version: "4"
            example:
                cohort:
                    cohort_id: pps1n11hqijn9rbee4cjil453
                    control_available: true
                    member_id: lah4bsznw6kc0hp7biylmmmll
                    type: swarm
                cpus: 4
                default_pgedge_version:
                    postgres_version: "16"
                    spock_version: "4"
                hostname: i-0123456789abcdef.ec2.internal
                id: de3b1388-1f0c-42f1-a86c-59ab72f255ec
                ipv4_address: 10.24.34.0
                memory: 16GiB
                orchestrator: swarm
                status:
                    components:
                        Dolorem veniam non.:
                            details:
                                alarms:
                                    - '3: NOSPACE'
                            error: failed to connect to etcd
                            healthy: false
                        Et voluptatum ex ea.:
                            details:
                                alarms:
                                    - '3: NOSPACE'
                            error: failed to connect to etcd
                            healthy: false
                        Nostrum repellendus sint qui qui.:
                            details:
                                alarms:
                                    - '3: NOSPACE'
                            error: failed to connect to etcd
                            healthy: false
                    state: available
                    updated_at: "2021-07-01T12:34:56Z"
                supported_pgedge_versions:
                    - postgres_version: "16"
                      spock_version: "4"
                    - postgres_version: "16"
                      spock_version: "4"
            required:
                - id
                - orchestrator
                - hostname
                - ipv4_address
                - cpus
                - memory
                - status
                - default_pgedge_version
                - supported_pgedge_versions
        HostCohort:
            type: object
            properties:
                cohort_id:
                    type: string
                    description: The cohort ID that the host belongs to.
                    example: pps1n11hqijn9rbee4cjil453
                control_available:
                    type: boolean
                    description: Indicates if the host is a control node in the cohort.
                    example: true
                member_id:
                    type: string
                    description: The member ID of the host within the cohort.
                    example: lah4bsznw6kc0hp7biylmmmll
                type:
                    type: string
                    description: The type of cohort that the host belongs to.
                    example: swarm
            example:
                cohort_id: pps1n11hqijn9rbee4cjil453
                control_available: true
                member_id: lah4bsznw6kc0hp7biylmmmll
                type: swarm
            required:
                - type
                - cohort_id
                - member_id
                - control_available
        HostStatus:
            type: object
            properties:
                components:
                    type: object
                    description: The status of each component of the host.
                    example:
                        Esse ut.:
                            details:
                                alarms:
                                    - '3: NOSPACE'
                            error: failed to connect to etcd
                            healthy: false
                        Rerum soluta aliquam neque velit.:
                            details:
                                alarms:
                                    - '3: NOSPACE'
                            error: failed to connect to etcd
                            healthy: false
                        Voluptatem enim dignissimos quasi nihil ea ut.:
                            details:
                                alarms:
                                    - '3: NOSPACE'
                            error: failed to connect to etcd
                            healthy: false
                    additionalProperties:
                        $ref: '#/components/schemas/ComponentStatus'
                state:
                    type: string
                    example: available
                    enum:
                        - healthy
                        - unreachable
                        - degraded
                        - unknown
                updated_at:
                    type: string
                    description: The last time the host status was updated.
                    example: "2021-07-01T12:34:56Z"
                    format: date-time
            example:
                components:
                    Dicta delectus dolorum fugit quo.:
                        details:
                            alarms:
                                - '3: NOSPACE'
                        error: failed to connect to etcd
                        healthy: false
                    Fugiat dignissimos qui hic voluptates voluptatem mollitia.:
                        details:
                            alarms:
                                - '3: NOSPACE'
                        error: failed to connect to etcd
                        healthy: false
                    Ratione asperiores iusto nostrum commodi quidem occaecati.:
                        details:
                            alarms:
                                - '3: NOSPACE'
                        error: failed to connect to etcd
                        healthy: false
                state: available
                updated_at: "2021-07-01T12:34:56Z"
            required:
                - state
                - updated_at
                - components
        Instance:
            type: object
            properties:
                created_at:
                    type: string
                    description: The time that the instance was created.
                    example: "2012-05-29T03:43:47Z"
                    format: date-time
                host_id:
                    type: string
                    description: The ID of the host this instance is running on.
                    example: de3b1388-1f0c-42f1-a86c-59ab72f255ec
                    format: uuid
                id:
                    type: string
                    description: Unique identifier for the instance.
                    example: a67cbb36-c3c3-49c9-8aac-f4a0438a883d
                    format: uuid
                interfaces:
                    type: array
                    items:
                        $ref: '#/components/schemas/InstanceInterface'
                    description: All interfaces that this instance serves on.
                    example:
                        - hostname: postgres-n1
                          ipv4_address: 10.1.0.113
                          network_id: l5imrq28sh6s
                          network_type: docker
                          port: 5432
                        - hostname: postgres-n1
                          ipv4_address: 10.1.0.113
                          network_id: l5imrq28sh6s
                          network_type: docker
                          port: 5432
                        - hostname: postgres-n1
                          ipv4_address: 10.1.0.113
                          network_id: l5imrq28sh6s
                          network_type: docker
                          port: 5432
                        - hostname: postgres-n1
                          ipv4_address: 10.1.0.113
                          network_id: l5imrq28sh6s
                          network_type: docker
                          port: 5432
                node_name:
                    type: string
                    description: The Spock node name for this instance.
                    example: n1
                patroni_paused:
                    type: boolean
                    description: True if Patroni has been paused for this instance.
                    example: true
                patroni_state:
                    type: string
                    example: stopped
                    enum:
                        - stopping
                        - stopped
                        - stop failed
                        - crashed
                        - running
                        - starting
                        - start failed
                        - restarting
                        - restart failed
                        - initializing new cluster
                        - initdb failed
                        - running custom bootstrap script
                        - custom bootstrap failed
                        - creating replica
                        - unknown
                pending_restart:
                    type: boolean
                    description: True if this instance is pending to be restarted from a configuration change.
                    example: false
                postgres_version:
                    type: string
                    description: The version of Postgres for this instance.
                    example: "17.1"
                read_only:
                    type: boolean
                    description: True if this instance is in read-only mode.
                    example: true
                role:
                    type: string
                    example: replica
                    enum:
                        - replica
                        - primary
                spock_version:
                    type: string
                    description: The version of Spock for this instance.
                    example: 4.0.9
                state:
                    type: string
                    example: backing_up
                    enum:
                        - creating
                        - modifying
                        - backing_up
                        - restoring
                        - deleting
                        - available
                        - degraded
                        - unknown
                updated_at:
                    type: string
                    description: The time that the instance was last updated.
                    example: "2003-02-13T05:23:56Z"
                    format: date-time
            example:
                created_at: "1994-12-22T14:05:09Z"
                host_id: de3b1388-1f0c-42f1-a86c-59ab72f255ec
                id: a67cbb36-c3c3-49c9-8aac-f4a0438a883d
                interfaces:
                    - hostname: postgres-n1
                      ipv4_address: 10.1.0.113
                      network_id: l5imrq28sh6s
                      network_type: docker
                      port: 5432
                    - hostname: postgres-n1
                      ipv4_address: 10.1.0.113
                      network_id: l5imrq28sh6s
                      network_type: docker
                      port: 5432
                node_name: n1
                patroni_paused: false
                patroni_state: initdb failed
                pending_restart: false
                postgres_version: "17.1"
                read_only: true
                role: replica
                spock_version: 4.0.9
                state: creating
                updated_at: "1988-09-15T19:42:49Z"
            required:
                - id
                - host_id
                - node_name
                - created_at
                - updated_at
                - state
        InstanceCollection:
            type: array
            items:
                $ref: '#/components/schemas/Instance'
            example:
                - created_at: "2008-04-05T03:29:38Z"
                  host_id: de3b1388-1f0c-42f1-a86c-59ab72f255ec
                  id: a67cbb36-c3c3-49c9-8aac-f4a0438a883d
                  interfaces:
                    - hostname: postgres-n1
                      ipv4_address: 10.1.0.113
                      network_id: l5imrq28sh6s
                      network_type: docker
                      port: 5432
                    - hostname: postgres-n1
                      ipv4_address: 10.1.0.113
                      network_id: l5imrq28sh6s
                      network_type: docker
                      port: 5432
                    - hostname: postgres-n1
                      ipv4_address: 10.1.0.113
                      network_id: l5imrq28sh6s
                      network_type: docker
                      port: 5432
                  node_name: n1
                  patroni_paused: true
                  patroni_state: unknown
                  pending_restart: true
                  postgres_version: "17.1"
                  read_only: true
                  role: primary
                  spock_version: 4.0.9
                  state: backing_up
                  updated_at: "2003-08-09T22:13:38Z"
                - created_at: "2008-04-05T03:29:38Z"
                  host_id: de3b1388-1f0c-42f1-a86c-59ab72f255ec
                  id: a67cbb36-c3c3-49c9-8aac-f4a0438a883d
                  interfaces:
                    - hostname: postgres-n1
                      ipv4_address: 10.1.0.113
                      network_id: l5imrq28sh6s
                      network_type: docker
                      port: 5432
                    - hostname: postgres-n1
                      ipv4_address: 10.1.0.113
                      network_id: l5imrq28sh6s
                      network_type: docker
                      port: 5432
                    - hostname: postgres-n1
                      ipv4_address: 10.1.0.113
                      network_id: l5imrq28sh6s
                      network_type: docker
                      port: 5432
                  node_name: n1
                  patroni_paused: true
                  patroni_state: unknown
                  pending_restart: true
                  postgres_version: "17.1"
                  read_only: true
                  role: primary
                  spock_version: 4.0.9
                  state: backing_up
                  updated_at: "2003-08-09T22:13:38Z"
                - created_at: "2008-04-05T03:29:38Z"
                  host_id: de3b1388-1f0c-42f1-a86c-59ab72f255ec
                  id: a67cbb36-c3c3-49c9-8aac-f4a0438a883d
                  interfaces:
                    - hostname: postgres-n1
                      ipv4_address: 10.1.0.113
                      network_id: l5imrq28sh6s
                      network_type: docker
                      port: 5432
                    - hostname: postgres-n1
                      ipv4_address: 10.1.0.113
                      network_id: l5imrq28sh6s
                      network_type: docker
                      port: 5432
                    - hostname: postgres-n1
                      ipv4_address: 10.1.0.113
                      network_id: l5imrq28sh6s
                      network_type: docker
                      port: 5432
                  node_name: n1
                  patroni_paused: true
                  patroni_state: unknown
                  pending_restart: true
                  postgres_version: "17.1"
                  read_only: true
                  role: primary
                  spock_version: 4.0.9
                  state: backing_up
                  updated_at: "2003-08-09T22:13:38Z"
                - created_at: "2008-04-05T03:29:38Z"
                  host_id: de3b1388-1f0c-42f1-a86c-59ab72f255ec
                  id: a67cbb36-c3c3-49c9-8aac-f4a0438a883d
                  interfaces:
                    - hostname: postgres-n1
                      ipv4_address: 10.1.0.113
                      network_id: l5imrq28sh6s
                      network_type: docker
                      port: 5432
                    - hostname: postgres-n1
                      ipv4_address: 10.1.0.113
                      network_id: l5imrq28sh6s
                      network_type: docker
                      port: 5432
                    - hostname: postgres-n1
                      ipv4_address: 10.1.0.113
                      network_id: l5imrq28sh6s
                      network_type: docker
                      port: 5432
                  node_name: n1
                  patroni_paused: true
                  patroni_state: unknown
                  pending_restart: true
                  postgres_version: "17.1"
                  read_only: true
                  role: primary
                  spock_version: 4.0.9
                  state: backing_up
                  updated_at: "2003-08-09T22:13:38Z"
        InstanceInterface:
            type: object
            properties:
                hostname:
                    type: string
                    description: The hostname of the instance on this interface.
                    example: postgres-n1
                ipv4_address:
                    type: string
                    description: The IPv4 address of the instance on this interface.
                    example: 10.1.0.113
                    format: ipv4
                network_id:
                    type: string
                    description: The unique identifier of the network for this interface.
                    example: l5imrq28sh6s
                network_type:
                    type: string
                    description: The type of network for this interface.
                    example: docker
                    enum:
                        - docker
                        - host
                port:
                    type: integer
                    description: The Postgres port for the instance on this interface.
                    example: 5432
                    format: int64
            example:
                hostname: postgres-n1
                ipv4_address: 10.1.0.113
                network_id: l5imrq28sh6s
                network_type: docker
                port: 5432
            required:
                - network_type
                - port
        InstanceResponseAbbreviated:
            type: object
            properties:
                host_id:
                    type: string
                    description: The ID of the host this instance is running on.
                    example: de3b1388-1f0c-42f1-a86c-59ab72f255ec
                    format: uuid
                id:
                    type: string
                    description: Unique identifier for the instance.
                    example: a67cbb36-c3c3-49c9-8aac-f4a0438a883d
                    format: uuid
                node_name:
                    type: string
                    description: The Spock node name for this instance.
                    example: n1
                state:
                    type: string
                    example: backing_up
                    enum:
                        - creating
                        - modifying
                        - backing_up
                        - restoring
                        - deleting
                        - available
                        - degraded
                        - unknown
            description: InstanceResponse result type (abbreviated view)
            example:
                host_id: de3b1388-1f0c-42f1-a86c-59ab72f255ec
                id: a67cbb36-c3c3-49c9-8aac-f4a0438a883d
                node_name: n1
                state: degraded
            required:
                - id
                - host_id
                - node_name
                - state
        InstanceResponseAbbreviatedCollection:
            type: array
            items:
                $ref: '#/components/schemas/InstanceResponseAbbreviated'
            description: InstanceCollectionResponse is the result type for an array of InstanceResponse (abbreviated view)
            example:
                - host_id: de3b1388-1f0c-42f1-a86c-59ab72f255ec
                  id: a67cbb36-c3c3-49c9-8aac-f4a0438a883d
                  node_name: n1
                  state: available
                - host_id: de3b1388-1f0c-42f1-a86c-59ab72f255ec
                  id: a67cbb36-c3c3-49c9-8aac-f4a0438a883d
                  node_name: n1
                  state: available
        PgEdgeVersion:
            type: object
            properties:
                postgres_version:
                    type: string
                    description: The Postgres major version.
                    example: "16"
                spock_version:
                    type: string
                    description: The Spock major version.
                    example: "4"
            example:
                postgres_version: "16"
                spock_version: "4"
            required:
                - postgres_version
                - spock_version
        RestoreConfigSpec:
            type: object
            properties:
                provider:
                    type: string
                    description: The backup provider for this restore configuration.
                    default: pgbackrest
                    example: pgbackrest
                    enum:
                        - pgbackrest
                repository:
                    $ref: '#/components/schemas/RestoreRepositorySpec'
                restore_options:
                    type: array
                    items:
                        type: string
                        example: Voluptas enim maiores sint voluptatibus earum.
                    description: Additional options to use when restoring this database. If omitted, the database will be restored to the latest point in the given repository.
                    example:
                        - --set=20250505-153628F
                        - --type=xid
                        - --target=123456
                source_database_id:
                    type: string
                    description: The ID of the database to restore this database from.
                    example: 6c8e43ee-26ea-47b8-a8f8-89897e0137bd
                source_database_name:
                    type: string
                    description: The name of the database in this repository. This database will be renamed to the database_name in the DatabaseSpec.
                    example: northwind
                source_node_name:
                    type: string
                    description: The name of the node to restore this database from.
                    example: n1
            example:
                provider: pgbackrest
                repository:
                    azure_account: pgedge-backups
                    azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                    azure_endpoint: blob.core.usgovcloudapi.net
                    azure_key: YXpLZXk=
                    base_path: /backups
                    custom_options:
                        s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                    gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                    gcs_endpoint: localhost
                    gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                    id: f6b84a99-5e91-4203-be1e-131fe82e5984
                    s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                    s3_endpoint: s3.us-east-1.amazonaws.com
                    s3_key: AKIAIOSFODNN7EXAMPLE
                    s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                    s3_region: us-east-1
                    type: s3
                restore_options:
                    - --set=20250505-153628F
                    - --type=xid
                    - --target=123456
                source_database_id: 6c8e43ee-26ea-47b8-a8f8-89897e0137bd
                source_database_name: northwind
                source_node_name: n1
            required:
                - source_database_id
                - source_node_name
                - source_database_name
                - repository
        RestoreDatabaseRequest:
            type: object
            properties:
                restore_config:
                    $ref: '#/components/schemas/RestoreConfigSpec'
                target_nodes:
                    type: array
                    items:
                        type: string
                        example: Voluptatem autem quis praesentium ab fugit.
                    description: The nodes to restore. Defaults to all nodes if empty or unspecified.
                    example:
                        - n1
            example:
                restore_config:
                    provider: pgbackrest
                    repository:
                        azure_account: pgedge-backups
                        azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                        azure_endpoint: blob.core.usgovcloudapi.net
                        azure_key: YXpLZXk=
                        base_path: /backups
                        custom_options:
                            s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                        gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                        gcs_endpoint: localhost
                        gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                        id: f6b84a99-5e91-4203-be1e-131fe82e5984
                        s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                        s3_endpoint: s3.us-east-1.amazonaws.com
                        s3_key: AKIAIOSFODNN7EXAMPLE
                        s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                        s3_region: us-east-1
                        type: s3
                    restore_options:
                        - --set=20250505-153628F
                        - --type=xid
                        - --target=123456
                    source_database_id: 6c8e43ee-26ea-47b8-a8f8-89897e0137bd
                    source_database_name: northwind
                    source_node_name: n1
                target_nodes:
                    - n1
            required:
                - restore_config
        RestoreDatabaseResponse:
            type: object
            properties:
                database:
                    $ref: '#/components/schemas/Database'
                tasks:
                    type: array
                    items:
                        $ref: '#/components/schemas/Task'
                    description: The restore tasks that were created to restore this database.
                    example:
                        - completed_at: "2025-01-01T02:30:00Z"
                          created_at: "2025-01-01T01:30:00Z"
                          database_id: 02f1a7db-fca8-4521-b57a-2a375c1ced51
                          error: failed to connect to database
                          host_id: 2e52dcde-86d8-4f71-b58e-8dc3a10c936a
                          instance_id: 3c875a27-f6a6-4c1c-ba5f-6972fb1fc348
                          node_name: n1
                          status: pending
                          task_id: 3c875a27-f6a6-4c1c-ba5f-6972fb1fc348
                          type: restore
                        - completed_at: "2025-01-01T02:30:00Z"
                          created_at: "2025-01-01T01:30:00Z"
                          database_id: 02f1a7db-fca8-4521-b57a-2a375c1ced51
                          error: failed to connect to database
                          host_id: 2e52dcde-86d8-4f71-b58e-8dc3a10c936a
                          instance_id: 3c875a27-f6a6-4c1c-ba5f-6972fb1fc348
                          node_name: n1
                          status: pending
                          task_id: 3c875a27-f6a6-4c1c-ba5f-6972fb1fc348
                          type: restore
                        - completed_at: "2025-01-01T02:30:00Z"
                          created_at: "2025-01-01T01:30:00Z"
                          database_id: 02f1a7db-fca8-4521-b57a-2a375c1ced51
                          error: failed to connect to database
                          host_id: 2e52dcde-86d8-4f71-b58e-8dc3a10c936a
                          instance_id: 3c875a27-f6a6-4c1c-ba5f-6972fb1fc348
                          node_name: n1
                          status: pending
                          task_id: 3c875a27-f6a6-4c1c-ba5f-6972fb1fc348
                          type: restore
                        - completed_at: "2025-01-01T02:30:00Z"
                          created_at: "2025-01-01T01:30:00Z"
                          database_id: 02f1a7db-fca8-4521-b57a-2a375c1ced51
                          error: failed to connect to database
                          host_id: 2e52dcde-86d8-4f71-b58e-8dc3a10c936a
                          instance_id: 3c875a27-f6a6-4c1c-ba5f-6972fb1fc348
                          node_name: n1
                          status: pending
                          task_id: 3c875a27-f6a6-4c1c-ba5f-6972fb1fc348
                          type: restore
            example:
                database:
                    created_at: "2025-01-01T01:30:00Z"
                    id: 02f1a7db-fca8-4521-b57a-2a375c1ced51
                    instances:
                        - created_at: "2008-04-05T03:29:38Z"
                          host_id: de3b1388-1f0c-42f1-a86c-59ab72f255ec
                          id: a67cbb36-c3c3-49c9-8aac-f4a0438a883d
                          interfaces:
                            - hostname: postgres-n1
                              ipv4_address: 10.1.0.113
                              network_id: l5imrq28sh6s
                              network_type: docker
                              port: 5432
                            - hostname: postgres-n1
                              ipv4_address: 10.1.0.113
                              network_id: l5imrq28sh6s
                              network_type: docker
                              port: 5432
                            - hostname: postgres-n1
                              ipv4_address: 10.1.0.113
                              network_id: l5imrq28sh6s
                              network_type: docker
                              port: 5432
                          node_name: n1
                          patroni_paused: true
                          patroni_state: unknown
                          pending_restart: true
                          postgres_version: "17.1"
                          read_only: true
                          role: primary
                          spock_version: 4.0.9
                          state: backing_up
                          updated_at: "2003-08-09T22:13:38Z"
                        - created_at: "2008-04-05T03:29:38Z"
                          host_id: de3b1388-1f0c-42f1-a86c-59ab72f255ec
                          id: a67cbb36-c3c3-49c9-8aac-f4a0438a883d
                          interfaces:
                            - hostname: postgres-n1
                              ipv4_address: 10.1.0.113
                              network_id: l5imrq28sh6s
                              network_type: docker
                              port: 5432
                            - hostname: postgres-n1
                              ipv4_address: 10.1.0.113
                              network_id: l5imrq28sh6s
                              network_type: docker
                              port: 5432
                            - hostname: postgres-n1
                              ipv4_address: 10.1.0.113
                              network_id: l5imrq28sh6s
                              network_type: docker
                              port: 5432
                          node_name: n1
                          patroni_paused: true
                          patroni_state: unknown
                          pending_restart: true
                          postgres_version: "17.1"
                          read_only: true
                          role: primary
                          spock_version: 4.0.9
                          state: backing_up
                          updated_at: "2003-08-09T22:13:38Z"
                    spec:
                        backup_config:
                            provider: pgbackrest
                            repositories:
                                - azure_account: pgedge-backups
                                  azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                  azure_endpoint: blob.core.usgovcloudapi.net
                                  azure_key: YXpLZXk=
                                  base_path: /backups
                                  custom_options:
                                    s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                    storage-upload-chunk-size: 5MiB
                                  gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                  gcs_endpoint: localhost
                                  gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                  id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                  retention_full: 2
                                  retention_full_type: count
                                  s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                  s3_endpoint: s3.us-east-1.amazonaws.com
                                  s3_key: AKIAIOSFODNN7EXAMPLE
                                  s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                  s3_region: us-east-1
                                  type: s3
                            schedules:
                                - cron_expression: 0 6 * * ?
                                  id: daily-full-backup
                                  type: full
                                - cron_expression: 0 6 * * ?
                                  id: daily-full-backup
                                  type: full
                                - cron_expression: 0 6 * * ?
                                  id: daily-full-backup
                                  type: full
                        cpus: 500m
                        database_name: northwind
                        database_users:
                            - attributes:
                                - LOGIN
                                - CREATEDB
                                - CREATEROLE
                              db_owner: true
                              password: secret
                              roles:
                                - pgedge_superuser
                              username: admin
                            - attributes:
                                - LOGIN
                                - CREATEDB
                                - CREATEROLE
                              db_owner: true
                              password: secret
                              roles:
                                - pgedge_superuser
                              username: admin
                        deletion_protection: true
                        features:
                            some_feature: enabled
                        memory: 500M
                        nodes:
                            - backup_config:
                                provider: pgbackrest
                                repositories:
                                    - azure_account: pgedge-backups
                                      azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                      azure_endpoint: blob.core.usgovcloudapi.net
                                      azure_key: YXpLZXk=
                                      base_path: /backups
                                      custom_options:
                                        s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                        storage-upload-chunk-size: 5MiB
                                      gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                      gcs_endpoint: localhost
                                      gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                      id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                      retention_full: 2
                                      retention_full_type: count
                                      s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                      s3_endpoint: s3.us-east-1.amazonaws.com
                                      s3_key: AKIAIOSFODNN7EXAMPLE
                                      s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                      s3_region: us-east-1
                                      type: s3
                                schedules:
                                    - cron_expression: 0 6 * * ?
                                      id: daily-full-backup
                                      type: full
                                    - cron_expression: 0 6 * * ?
                                      id: daily-full-backup
                                      type: full
                                    - cron_expression: 0 6 * * ?
                                      id: daily-full-backup
                                      type: full
                              cpus: 500m
                              host_ids:
                                - de3b1388-1f0c-42f1-a86c-59ab72f255ec
                              memory: 500M
                              name: n1
                              port: 5432
                              postgres_version: "17"
                              postgresql_conf:
                                max_connections: 1000
                              restore_config:
                                provider: pgbackrest
                                repository:
                                    azure_account: pgedge-backups
                                    azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                    azure_endpoint: blob.core.usgovcloudapi.net
                                    azure_key: YXpLZXk=
                                    base_path: /backups
                                    custom_options:
                                        s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                    gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                    gcs_endpoint: localhost
                                    gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                    id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                    s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                    s3_endpoint: s3.us-east-1.amazonaws.com
                                    s3_key: AKIAIOSFODNN7EXAMPLE
                                    s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                    s3_region: us-east-1
                                    type: s3
                                restore_options:
                                    - --set=20250505-153628F
                                    - --type=xid
                                    - --target=123456
                                source_database_id: 6c8e43ee-26ea-47b8-a8f8-89897e0137bd
                                source_database_name: northwind
                                source_node_name: n1
                              storage_class: loop_device
                              storage_size: 500GiB
                            - backup_config:
                                provider: pgbackrest
                                repositories:
                                    - azure_account: pgedge-backups
                                      azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                      azure_endpoint: blob.core.usgovcloudapi.net
                                      azure_key: YXpLZXk=
                                      base_path: /backups
                                      custom_options:
                                        s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                        storage-upload-chunk-size: 5MiB
                                      gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                      gcs_endpoint: localhost
                                      gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                      id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                      retention_full: 2
                                      retention_full_type: count
                                      s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                      s3_endpoint: s3.us-east-1.amazonaws.com
                                      s3_key: AKIAIOSFODNN7EXAMPLE
                                      s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                      s3_region: us-east-1
                                      type: s3
                                schedules:
                                    - cron_expression: 0 6 * * ?
                                      id: daily-full-backup
                                      type: full
                                    - cron_expression: 0 6 * * ?
                                      id: daily-full-backup
                                      type: full
                                    - cron_expression: 0 6 * * ?
                                      id: daily-full-backup
                                      type: full
                              cpus: 500m
                              host_ids:
                                - de3b1388-1f0c-42f1-a86c-59ab72f255ec
                              memory: 500M
                              name: n1
                              port: 5432
                              postgres_version: "17"
                              postgresql_conf:
                                max_connections: 1000
                              restore_config:
                                provider: pgbackrest
                                repository:
                                    azure_account: pgedge-backups
                                    azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                    azure_endpoint: blob.core.usgovcloudapi.net
                                    azure_key: YXpLZXk=
                                    base_path: /backups
                                    custom_options:
                                        s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                    gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                    gcs_endpoint: localhost
                                    gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                    id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                    s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                    s3_endpoint: s3.us-east-1.amazonaws.com
                                    s3_key: AKIAIOSFODNN7EXAMPLE
                                    s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                    s3_region: us-east-1
                                    type: s3
                                restore_options:
                                    - --set=20250505-153628F
                                    - --type=xid
                                    - --target=123456
                                source_database_id: 6c8e43ee-26ea-47b8-a8f8-89897e0137bd
                                source_database_name: northwind
                                source_node_name: n1
                              storage_class: loop_device
                              storage_size: 500GiB
                            - backup_config:
                                provider: pgbackrest
                                repositories:
                                    - azure_account: pgedge-backups
                                      azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                      azure_endpoint: blob.core.usgovcloudapi.net
                                      azure_key: YXpLZXk=
                                      base_path: /backups
                                      custom_options:
                                        s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                        storage-upload-chunk-size: 5MiB
                                      gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                      gcs_endpoint: localhost
                                      gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                      id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                      retention_full: 2
                                      retention_full_type: count
                                      s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                      s3_endpoint: s3.us-east-1.amazonaws.com
                                      s3_key: AKIAIOSFODNN7EXAMPLE
                                      s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                      s3_region: us-east-1
                                      type: s3
                                schedules:
                                    - cron_expression: 0 6 * * ?
                                      id: daily-full-backup
                                      type: full
                                    - cron_expression: 0 6 * * ?
                                      id: daily-full-backup
                                      type: full
                                    - cron_expression: 0 6 * * ?
                                      id: daily-full-backup
                                      type: full
                              cpus: 500m
                              host_ids:
                                - de3b1388-1f0c-42f1-a86c-59ab72f255ec
                              memory: 500M
                              name: n1
                              port: 5432
                              postgres_version: "17"
                              postgresql_conf:
                                max_connections: 1000
                              restore_config:
                                provider: pgbackrest
                                repository:
                                    azure_account: pgedge-backups
                                    azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                    azure_endpoint: blob.core.usgovcloudapi.net
                                    azure_key: YXpLZXk=
                                    base_path: /backups
                                    custom_options:
                                        s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                    gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                    gcs_endpoint: localhost
                                    gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                    id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                    s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                    s3_endpoint: s3.us-east-1.amazonaws.com
                                    s3_key: AKIAIOSFODNN7EXAMPLE
                                    s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                    s3_region: us-east-1
                                    type: s3
                                restore_options:
                                    - --set=20250505-153628F
                                    - --type=xid
                                    - --target=123456
                                source_database_id: 6c8e43ee-26ea-47b8-a8f8-89897e0137bd
                                source_database_name: northwind
                                source_node_name: n1
                              storage_class: loop_device
                              storage_size: 500GiB
                            - backup_config:
                                provider: pgbackrest
                                repositories:
                                    - azure_account: pgedge-backups
                                      azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                      azure_endpoint: blob.core.usgovcloudapi.net
                                      azure_key: YXpLZXk=
                                      base_path: /backups
                                      custom_options:
                                        s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                        storage-upload-chunk-size: 5MiB
                                      gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                      gcs_endpoint: localhost
                                      gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                      id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                      retention_full: 2
                                      retention_full_type: count
                                      s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                      s3_endpoint: s3.us-east-1.amazonaws.com
                                      s3_key: AKIAIOSFODNN7EXAMPLE
                                      s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                      s3_region: us-east-1
                                      type: s3
                                schedules:
                                    - cron_expression: 0 6 * * ?
                                      id: daily-full-backup
                                      type: full
                                    - cron_expression: 0 6 * * ?
                                      id: daily-full-backup
                                      type: full
                                    - cron_expression: 0 6 * * ?
                                      id: daily-full-backup
                                      type: full
                              cpus: 500m
                              host_ids:
                                - de3b1388-1f0c-42f1-a86c-59ab72f255ec
                              memory: 500M
                              name: n1
                              port: 5432
                              postgres_version: "17"
                              postgresql_conf:
                                max_connections: 1000
                              restore_config:
                                provider: pgbackrest
                                repository:
                                    azure_account: pgedge-backups
                                    azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                    azure_endpoint: blob.core.usgovcloudapi.net
                                    azure_key: YXpLZXk=
                                    base_path: /backups
                                    custom_options:
                                        s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                    gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                    gcs_endpoint: localhost
                                    gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                    id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                    s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                    s3_endpoint: s3.us-east-1.amazonaws.com
                                    s3_key: AKIAIOSFODNN7EXAMPLE
                                    s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                    s3_region: us-east-1
                                    type: s3
                                restore_options:
                                    - --set=20250505-153628F
                                    - --type=xid
                                    - --target=123456
                                source_database_id: 6c8e43ee-26ea-47b8-a8f8-89897e0137bd
                                source_database_name: northwind
                                source_node_name: n1
                              storage_class: loop_device
                              storage_size: 500GiB
                        port: 5432
                        postgres_version: "17"
                        postgresql_conf:
                            max_connections: 1000
                        restore_config:
                            provider: pgbackrest
                            repository:
                                azure_account: pgedge-backups
                                azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                azure_endpoint: blob.core.usgovcloudapi.net
                                azure_key: YXpLZXk=
                                base_path: /backups
                                custom_options:
                                    s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                gcs_endpoint: localhost
                                gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                s3_endpoint: s3.us-east-1.amazonaws.com
                                s3_key: AKIAIOSFODNN7EXAMPLE
                                s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                s3_region: us-east-1
                                type: s3
                            restore_options:
                                - --set=20250505-153628F
                                - --type=xid
                                - --target=123456
                            source_database_id: 6c8e43ee-26ea-47b8-a8f8-89897e0137bd
                            source_database_name: northwind
                            source_node_name: n1
                        spock_version: "4"
                        storage_class: loop_device
                        storage_size: 500GiB
                    state: modifying
                    tenant_id: 8210ec10-2dca-406c-ac4a-0661d2189954
                    updated_at: "2025-01-01T02:30:00Z"
                tasks:
                    - completed_at: "2025-01-01T02:30:00Z"
                      created_at: "2025-01-01T01:30:00Z"
                      database_id: 02f1a7db-fca8-4521-b57a-2a375c1ced51
                      error: failed to connect to database
                      host_id: 2e52dcde-86d8-4f71-b58e-8dc3a10c936a
                      instance_id: 3c875a27-f6a6-4c1c-ba5f-6972fb1fc348
                      node_name: n1
                      status: pending
                      task_id: 3c875a27-f6a6-4c1c-ba5f-6972fb1fc348
                      type: restore
                    - completed_at: "2025-01-01T02:30:00Z"
                      created_at: "2025-01-01T01:30:00Z"
                      database_id: 02f1a7db-fca8-4521-b57a-2a375c1ced51
                      error: failed to connect to database
                      host_id: 2e52dcde-86d8-4f71-b58e-8dc3a10c936a
                      instance_id: 3c875a27-f6a6-4c1c-ba5f-6972fb1fc348
                      node_name: n1
                      status: pending
                      task_id: 3c875a27-f6a6-4c1c-ba5f-6972fb1fc348
                      type: restore
                    - completed_at: "2025-01-01T02:30:00Z"
                      created_at: "2025-01-01T01:30:00Z"
                      database_id: 02f1a7db-fca8-4521-b57a-2a375c1ced51
                      error: failed to connect to database
                      host_id: 2e52dcde-86d8-4f71-b58e-8dc3a10c936a
                      instance_id: 3c875a27-f6a6-4c1c-ba5f-6972fb1fc348
                      node_name: n1
                      status: pending
                      task_id: 3c875a27-f6a6-4c1c-ba5f-6972fb1fc348
                      type: restore
                    - completed_at: "2025-01-01T02:30:00Z"
                      created_at: "2025-01-01T01:30:00Z"
                      database_id: 02f1a7db-fca8-4521-b57a-2a375c1ced51
                      error: failed to connect to database
                      host_id: 2e52dcde-86d8-4f71-b58e-8dc3a10c936a
                      instance_id: 3c875a27-f6a6-4c1c-ba5f-6972fb1fc348
                      node_name: n1
                      status: pending
                      task_id: 3c875a27-f6a6-4c1c-ba5f-6972fb1fc348
                      type: restore
        RestoreRepositorySpec:
            type: object
            properties:
                azure_account:
                    type: string
                    description: The Azure account name for this repository. Only applies when type = 'azure'.
                    example: pgedge-backups
                azure_container:
                    type: string
                    description: The Azure container name for this repository. Only applies when type = 'azure'.
                    example: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                azure_endpoint:
                    type: string
                    description: The optional Azure endpoint for this repository. Only applies when type = 'azure'.
                    example: blob.core.usgovcloudapi.net
                azure_key:
                    type: string
                    description: An optional Azure storage account access key to use for this repository. If not provided, pgbackrest will use the VM's managed identity.
                    example: YXpLZXk=
                base_path:
                    type: string
                    description: The base path within the repository where backups are stored.
                    example: /backups
                custom_options:
                    type: object
                    description: Additional options to apply to this repository.
                    example:
                        s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                    additionalProperties:
                        type: string
                        example: Nobis velit fugiat rerum dicta optio.
                gcs_bucket:
                    type: string
                    description: The GCS bucket name for this repository. Only applies when type = 'gcs'.
                    example: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                gcs_endpoint:
                    type: string
                    description: The optional GCS endpoint for this repository. Only applies when type = 'gcs'.
                    example: localhost
                gcs_key:
                    type: string
                    description: Optional base64-encoded private key data. If omitted, pgbackrest will use the service account attached to the instance profile.
                    example: ZXhhbXBsZSBnY3Mga2V5Cg==
                id:
                    type: string
                    description: The unique identifier of this repository.
                    example: f6b84a99-5e91-4203-be1e-131fe82e5984
                s3_bucket:
                    type: string
                    description: The S3 bucket name for this repository. Only applies when type = 's3'.
                    example: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                s3_endpoint:
                    type: string
                    description: The optional S3 endpoint for this repository. Only applies when type = 's3'.
                    example: s3.us-east-1.amazonaws.com
                s3_key:
                    type: string
                    description: An optional AWS access key ID to use for this repository. If not provided, pgbackrest will use the default credential provider chain.
                    example: AKIAIOSFODNN7EXAMPLE
                s3_key_secret:
                    type: string
                    description: The corresponding secret for the AWS access key ID in s3_key.
                    example: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                s3_region:
                    type: string
                    description: The region of the S3 bucket for this repository. Only applies when type = 's3'.
                    example: us-east-1
                type:
                    type: string
                    description: The type of this repository.
                    example: s3
                    enum:
                        - s3
                        - gcs
                        - azure
            example:
                azure_account: pgedge-backups
                azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                azure_endpoint: blob.core.usgovcloudapi.net
                azure_key: YXpLZXk=
                base_path: /backups
                custom_options:
                    s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                gcs_endpoint: localhost
                gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                id: f6b84a99-5e91-4203-be1e-131fe82e5984
                s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                s3_endpoint: s3.us-east-1.amazonaws.com
                s3_key: AKIAIOSFODNN7EXAMPLE
                s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                s3_region: us-east-1
                type: s3
            required:
                - type
        Task:
            type: object
            properties:
                completed_at:
                    type: string
                    description: The time when the task was completed.
                    example: "2025-01-01T02:30:00Z"
                    format: date-time
                created_at:
                    type: string
                    description: The time when the task was created.
                    example: "2025-01-01T01:30:00Z"
                    format: date-time
                database_id:
                    type: string
                    description: The database ID of the task.
                    example: 02f1a7db-fca8-4521-b57a-2a375c1ced51
                    format: uuid
                error:
                    type: string
                    description: The error message if the task failed.
                    example: failed to connect to database
                host_id:
                    type: string
                    description: The ID of the host that the task is running on.
                    example: 2e52dcde-86d8-4f71-b58e-8dc3a10c936a
                    format: uuid
                instance_id:
                    type: string
                    description: The ID of the instance that the task is operating on.
                    example: 3c875a27-f6a6-4c1c-ba5f-6972fb1fc348
                    format: uuid
                node_name:
                    type: string
                    description: The name of the node that the task is operating on.
                    example: n1
                status:
                    type: string
                    description: The status of the task.
                    example: pending
                    enum:
                        - pending
                        - running
                        - completed
                        - failed
                        - unknown
                task_id:
                    type: string
                    description: The unique ID of the task.
                    example: 3c875a27-f6a6-4c1c-ba5f-6972fb1fc348
                    format: uuid
                type:
                    type: string
                    description: The type of the task.
                    example: restore
            example:
                completed_at: "2025-01-01T02:30:00Z"
                created_at: "2025-01-01T01:30:00Z"
                database_id: 02f1a7db-fca8-4521-b57a-2a375c1ced51
                error: failed to connect to database
                host_id: 2e52dcde-86d8-4f71-b58e-8dc3a10c936a
                instance_id: 3c875a27-f6a6-4c1c-ba5f-6972fb1fc348
                node_name: n1
                status: pending
                task_id: 3c875a27-f6a6-4c1c-ba5f-6972fb1fc348
                type: restore
            required:
                - database_id
                - task_id
                - created_at
                - type
                - status
        TaskLog:
            type: object
            properties:
                database_id:
                    type: string
                    description: The database ID of the task log.
                    example: 02f1a7db-fca8-4521-b57a-2a375c1ced51
                    format: uuid
                last_line_id:
                    type: string
                    description: The ID of the last line in the task log.
                    example: 3c875a27-f6a6-4c1c-ba5f-6972fb1fc348
                    format: uuid
                lines:
                    type: array
                    items:
                        type: string
                        example: Nihil facere ad tenetur iure quisquam.
                    description: The lines of the task log.
                    example:
                        - Task started
                        - Task completed
                task_id:
                    type: string
                    description: The unique ID of the task log.
                    example: 3c875a27-f6a6-4c1c-ba5f-6972fb1fc348
                    format: uuid
                task_status:
                    type: string
                    description: The status of the task.
                    example: pending
                    enum:
                        - pending
                        - running
                        - completed
                        - failed
                        - unknown
            example:
                database_id: 02f1a7db-fca8-4521-b57a-2a375c1ced51
                last_line_id: 3c875a27-f6a6-4c1c-ba5f-6972fb1fc348
                lines:
                    - Task started
                    - Task completed
                task_id: 3c875a27-f6a6-4c1c-ba5f-6972fb1fc348
                task_status: pending
            required:
                - database_id
                - task_id
                - task_status
                - lines
        UpdateDatabaseRequest:
            type: object
            properties:
                spec:
                    $ref: '#/components/schemas/DatabaseSpec'
                tenant_id:
                    type: string
                    description: Unique identifier for the databases's owner.
                    example: 8210ec10-2dca-406c-ac4a-0661d2189954
                    format: uuid
            example:
                spec:
                    backup_config:
                        provider: pgbackrest
                        repositories:
                            - azure_account: pgedge-backups
                              azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                              azure_endpoint: blob.core.usgovcloudapi.net
                              azure_key: YXpLZXk=
                              base_path: /backups
                              custom_options:
                                s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                storage-upload-chunk-size: 5MiB
                              gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                              gcs_endpoint: localhost
                              gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                              id: f6b84a99-5e91-4203-be1e-131fe82e5984
                              retention_full: 2
                              retention_full_type: count
                              s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                              s3_endpoint: s3.us-east-1.amazonaws.com
                              s3_key: AKIAIOSFODNN7EXAMPLE
                              s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                              s3_region: us-east-1
                              type: s3
                        schedules:
                            - cron_expression: 0 6 * * ?
                              id: daily-full-backup
                              type: full
                            - cron_expression: 0 6 * * ?
                              id: daily-full-backup
                              type: full
                            - cron_expression: 0 6 * * ?
                              id: daily-full-backup
                              type: full
                    cpus: 500m
                    database_name: northwind
                    database_users:
                        - attributes:
                            - LOGIN
                            - CREATEDB
                            - CREATEROLE
                          db_owner: true
                          password: secret
                          roles:
                            - pgedge_superuser
                          username: admin
                        - attributes:
                            - LOGIN
                            - CREATEDB
                            - CREATEROLE
                          db_owner: true
                          password: secret
                          roles:
                            - pgedge_superuser
                          username: admin
                    deletion_protection: true
                    features:
                        some_feature: enabled
                    memory: 500M
                    nodes:
                        - backup_config:
                            provider: pgbackrest
                            repositories:
                                - azure_account: pgedge-backups
                                  azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                  azure_endpoint: blob.core.usgovcloudapi.net
                                  azure_key: YXpLZXk=
                                  base_path: /backups
                                  custom_options:
                                    s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                    storage-upload-chunk-size: 5MiB
                                  gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                  gcs_endpoint: localhost
                                  gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                  id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                  retention_full: 2
                                  retention_full_type: count
                                  s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                  s3_endpoint: s3.us-east-1.amazonaws.com
                                  s3_key: AKIAIOSFODNN7EXAMPLE
                                  s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                  s3_region: us-east-1
                                  type: s3
                            schedules:
                                - cron_expression: 0 6 * * ?
                                  id: daily-full-backup
                                  type: full
                                - cron_expression: 0 6 * * ?
                                  id: daily-full-backup
                                  type: full
                                - cron_expression: 0 6 * * ?
                                  id: daily-full-backup
                                  type: full
                          cpus: 500m
                          host_ids:
                            - de3b1388-1f0c-42f1-a86c-59ab72f255ec
                          memory: 500M
                          name: n1
                          port: 5432
                          postgres_version: "17"
                          postgresql_conf:
                            max_connections: 1000
                          restore_config:
                            provider: pgbackrest
                            repository:
                                azure_account: pgedge-backups
                                azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                azure_endpoint: blob.core.usgovcloudapi.net
                                azure_key: YXpLZXk=
                                base_path: /backups
                                custom_options:
                                    s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                gcs_endpoint: localhost
                                gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                s3_endpoint: s3.us-east-1.amazonaws.com
                                s3_key: AKIAIOSFODNN7EXAMPLE
                                s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                s3_region: us-east-1
                                type: s3
                            restore_options:
                                - --set=20250505-153628F
                                - --type=xid
                                - --target=123456
                            source_database_id: 6c8e43ee-26ea-47b8-a8f8-89897e0137bd
                            source_database_name: northwind
                            source_node_name: n1
                          storage_class: loop_device
                          storage_size: 500GiB
                        - backup_config:
                            provider: pgbackrest
                            repositories:
                                - azure_account: pgedge-backups
                                  azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                  azure_endpoint: blob.core.usgovcloudapi.net
                                  azure_key: YXpLZXk=
                                  base_path: /backups
                                  custom_options:
                                    s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                    storage-upload-chunk-size: 5MiB
                                  gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                  gcs_endpoint: localhost
                                  gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                  id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                  retention_full: 2
                                  retention_full_type: count
                                  s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                  s3_endpoint: s3.us-east-1.amazonaws.com
                                  s3_key: AKIAIOSFODNN7EXAMPLE
                                  s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                  s3_region: us-east-1
                                  type: s3
                            schedules:
                                - cron_expression: 0 6 * * ?
                                  id: daily-full-backup
                                  type: full
                                - cron_expression: 0 6 * * ?
                                  id: daily-full-backup
                                  type: full
                                - cron_expression: 0 6 * * ?
                                  id: daily-full-backup
                                  type: full
                          cpus: 500m
                          host_ids:
                            - de3b1388-1f0c-42f1-a86c-59ab72f255ec
                          memory: 500M
                          name: n1
                          port: 5432
                          postgres_version: "17"
                          postgresql_conf:
                            max_connections: 1000
                          restore_config:
                            provider: pgbackrest
                            repository:
                                azure_account: pgedge-backups
                                azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                azure_endpoint: blob.core.usgovcloudapi.net
                                azure_key: YXpLZXk=
                                base_path: /backups
                                custom_options:
                                    s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                gcs_endpoint: localhost
                                gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                s3_endpoint: s3.us-east-1.amazonaws.com
                                s3_key: AKIAIOSFODNN7EXAMPLE
                                s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                s3_region: us-east-1
                                type: s3
                            restore_options:
                                - --set=20250505-153628F
                                - --type=xid
                                - --target=123456
                            source_database_id: 6c8e43ee-26ea-47b8-a8f8-89897e0137bd
                            source_database_name: northwind
                            source_node_name: n1
                          storage_class: loop_device
                          storage_size: 500GiB
                        - backup_config:
                            provider: pgbackrest
                            repositories:
                                - azure_account: pgedge-backups
                                  azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                  azure_endpoint: blob.core.usgovcloudapi.net
                                  azure_key: YXpLZXk=
                                  base_path: /backups
                                  custom_options:
                                    s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                    storage-upload-chunk-size: 5MiB
                                  gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                  gcs_endpoint: localhost
                                  gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                  id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                  retention_full: 2
                                  retention_full_type: count
                                  s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                  s3_endpoint: s3.us-east-1.amazonaws.com
                                  s3_key: AKIAIOSFODNN7EXAMPLE
                                  s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                  s3_region: us-east-1
                                  type: s3
                            schedules:
                                - cron_expression: 0 6 * * ?
                                  id: daily-full-backup
                                  type: full
                                - cron_expression: 0 6 * * ?
                                  id: daily-full-backup
                                  type: full
                                - cron_expression: 0 6 * * ?
                                  id: daily-full-backup
                                  type: full
                          cpus: 500m
                          host_ids:
                            - de3b1388-1f0c-42f1-a86c-59ab72f255ec
                          memory: 500M
                          name: n1
                          port: 5432
                          postgres_version: "17"
                          postgresql_conf:
                            max_connections: 1000
                          restore_config:
                            provider: pgbackrest
                            repository:
                                azure_account: pgedge-backups
                                azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                azure_endpoint: blob.core.usgovcloudapi.net
                                azure_key: YXpLZXk=
                                base_path: /backups
                                custom_options:
                                    s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                gcs_endpoint: localhost
                                gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                s3_endpoint: s3.us-east-1.amazonaws.com
                                s3_key: AKIAIOSFODNN7EXAMPLE
                                s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                s3_region: us-east-1
                                type: s3
                            restore_options:
                                - --set=20250505-153628F
                                - --type=xid
                                - --target=123456
                            source_database_id: 6c8e43ee-26ea-47b8-a8f8-89897e0137bd
                            source_database_name: northwind
                            source_node_name: n1
                          storage_class: loop_device
                          storage_size: 500GiB
                        - backup_config:
                            provider: pgbackrest
                            repositories:
                                - azure_account: pgedge-backups
                                  azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                  azure_endpoint: blob.core.usgovcloudapi.net
                                  azure_key: YXpLZXk=
                                  base_path: /backups
                                  custom_options:
                                    s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                    storage-upload-chunk-size: 5MiB
                                  gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                  gcs_endpoint: localhost
                                  gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                  id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                  retention_full: 2
                                  retention_full_type: count
                                  s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                  s3_endpoint: s3.us-east-1.amazonaws.com
                                  s3_key: AKIAIOSFODNN7EXAMPLE
                                  s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                  s3_region: us-east-1
                                  type: s3
                            schedules:
                                - cron_expression: 0 6 * * ?
                                  id: daily-full-backup
                                  type: full
                                - cron_expression: 0 6 * * ?
                                  id: daily-full-backup
                                  type: full
                                - cron_expression: 0 6 * * ?
                                  id: daily-full-backup
                                  type: full
                          cpus: 500m
                          host_ids:
                            - de3b1388-1f0c-42f1-a86c-59ab72f255ec
                          memory: 500M
                          name: n1
                          port: 5432
                          postgres_version: "17"
                          postgresql_conf:
                            max_connections: 1000
                          restore_config:
                            provider: pgbackrest
                            repository:
                                azure_account: pgedge-backups
                                azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                azure_endpoint: blob.core.usgovcloudapi.net
                                azure_key: YXpLZXk=
                                base_path: /backups
                                custom_options:
                                    s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                                gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                gcs_endpoint: localhost
                                gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                                id: f6b84a99-5e91-4203-be1e-131fe82e5984
                                s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                                s3_endpoint: s3.us-east-1.amazonaws.com
                                s3_key: AKIAIOSFODNN7EXAMPLE
                                s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                                s3_region: us-east-1
                                type: s3
                            restore_options:
                                - --set=20250505-153628F
                                - --type=xid
                                - --target=123456
                            source_database_id: 6c8e43ee-26ea-47b8-a8f8-89897e0137bd
                            source_database_name: northwind
                            source_node_name: n1
                          storage_class: loop_device
                          storage_size: 500GiB
                    port: 5432
                    postgres_version: "17"
                    postgresql_conf:
                        max_connections: 1000
                    restore_config:
                        provider: pgbackrest
                        repository:
                            azure_account: pgedge-backups
                            azure_container: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                            azure_endpoint: blob.core.usgovcloudapi.net
                            azure_key: YXpLZXk=
                            base_path: /backups
                            custom_options:
                                s3-kms-key-id: 1234abcd-12ab-34cd-56ef-1234567890ab
                            gcs_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                            gcs_endpoint: localhost
                            gcs_key: ZXhhbXBsZSBnY3Mga2V5Cg==
                            id: f6b84a99-5e91-4203-be1e-131fe82e5984
                            s3_bucket: pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1
                            s3_endpoint: s3.us-east-1.amazonaws.com
                            s3_key: AKIAIOSFODNN7EXAMPLE
                            s3_key_secret: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
                            s3_region: us-east-1
                            type: s3
                        restore_options:
                            - --set=20250505-153628F
                            - --type=xid
                            - --target=123456
                        source_database_id: 6c8e43ee-26ea-47b8-a8f8-89897e0137bd
                        source_database_name: northwind
                        source_node_name: n1
                    spock_version: "4"
                    storage_class: loop_device
                    storage_size: 500GiB
                tenant_id: 8210ec10-2dca-406c-ac4a-0661d2189954
        VersionInfo:
            type: object
            properties:
                arch:
                    type: string
                    description: The CPU architecture of the API server.
                    example: amd64
                revision:
                    type: string
                    description: The VCS revision of the API server.
                    example: abc123
                revision_time:
                    type: string
                    description: The timestamp associated with the revision.
                    example: "2025-01-01T01:30:00Z"
                    format: date-time
                version:
                    type: string
                    description: The version of the API server.
                    example: 1.0.0
            example:
                arch: amd64
                revision: abc123
                revision_time: "2025-01-01T01:30:00Z"
                version: 1.0.0
            required:
                - version
                - revision
                - revision_time
                - arch
tags:
    - name: control-plane
