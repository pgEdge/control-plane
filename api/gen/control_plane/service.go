// Code generated by goa v3.19.1, DO NOT EDIT.
//
// control-plane service
//
// Command:
// $ goa gen github.com/pgEdge/control-plane/api/design

package controlplane

import (
	"context"
)

// Service is the control-plane service interface.
type Service interface {
	// Returns information about the cluster.
	InspectCluster(context.Context) (res *Cluster, err error)
	// Lists all hosts within the cluster.
	ListHosts(context.Context) (res []*Host, err error)
	// Returns information about a particular host in the cluster.
	InspectHost(context.Context, *InspectHostPayload) (res *Host, err error)
	// Removes a host from the cluster.
	RemoveHost(context.Context, *RemoveHostPayload) (err error)
	// Lists all databases in the cluster.
	ListDatabases(context.Context) (res []*Database, err error)
	// Creates a new database in the cluster.
	CreateDatabase(context.Context, *CreateDatabaseRequest) (res *Database, err error)
	// Returns information about a particular database in the cluster.
	InspectDatabase(context.Context, *InspectDatabasePayload) (res *Database, err error)
	// Updates a database with the given specification.
	UpdateDatabase(context.Context, *UpdateDatabasePayload) (res *Database, err error)
	// Deletes a database from the cluster.
	DeleteDatabase(context.Context, *DeleteDatabasePayload) (err error)
}

// APIName is the name of the API as defined in the design.
const APIName = "control-plane"

// APIVersion is the version of the API as defined in the design.
const APIVersion = "0.0.1"

// ServiceName is the name of the service as defined in the design. This is the
// same value that is set in the endpoint request contexts under the ServiceKey
// key.
const ServiceName = "control-plane"

// MethodNames lists the service method names as defined in the design. These
// are the same values that are set in the endpoint request contexts under the
// MethodKey key.
var MethodNames = [9]string{"inspect-cluster", "list-hosts", "inspect-host", "remove-host", "list-databases", "create-database", "inspect-database", "update-database", "delete-database"}

type BackupConfigSpec struct {
	// The unique identifier for this backup configuration.
	ID string
	// The names of the nodes where this backup configuration should be applied.
	// The configuration will apply to all nodes when this field is empty or
	// unspecified.
	NodeNames []string
	// The backup provider for this backup configuration.
	Provider string
	// The repositories for this backup configuration.
	Repositories []*BackupRepositorySpec
	// The schedules for this backup configuration.
	Schedules []*BackupScheduleSpec
}

type BackupRepositorySpec struct {
	// The unique identifier of this repository.
	ID *string
	// The type of this repository.
	Type string
	// The S3 bucket name for this repository. Only applies when type = 's3'.
	S3Bucket *string
	// The region of the S3 bucket for this repository. Only applies when type =
	// 's3'.
	S3Region *string
	// The optional S3 endpoint for this repository. Only applies when type = 's3'.
	S3Endpoint *string
	// The GCS bucket name for this repository. Only applies when type = 'gcs'.
	GcsBucket *string
	// The optional GCS endpoint for this repository. Only applies when type =
	// 'gcs'.
	GcsEndpoint *string
	// The Azure account name for this repository. Only applies when type = 'azure'.
	AzureAccount *string
	// The Azure container name for this repository. Only applies when type =
	// 'azure'.
	AzureContainer *string
	// The optional Azure endpoint for this repository. Only applies when type =
	// 'azure'.
	AzureEndpoint *string
	// The count of full backups to retain or the time to retain full backups.
	RetentionFull *int
	// The type of measure used for retention_full.
	RetentionFullType *string
	// The base path within the repository to store backups.
	BasePath *string
}

type BackupScheduleSpec struct {
	// The unique identifier for this backup schedule.
	ID string
	// The type of backup to take on this schedule.
	Type string
	// The cron expression for this schedule.
	CronExpression string
}

// Cluster is the result type of the control-plane service inspect-cluster
// method.
type Cluster struct {
	// Unique identifier for the cluster.
	ID string
	// Unique identifier for the cluster's owner.
	TenantID string
	// Current status of the cluster.
	Status *ClusterStatus
	// All of the hosts in the cluster.
	Hosts []*Host
}

type ClusterStatus struct {
	// The current state of the cluster.
	State string
}

// CreateDatabaseRequest is the payload type of the control-plane service
// create-database method.
type CreateDatabaseRequest struct {
	// Unique identifier for the database.
	ID *string
	// Unique identifier for the databases's owner.
	TenantID *string
	// The specification for the database.
	Spec *DatabaseSpec
}

// Database is the result type of the control-plane service create-database
// method.
type Database struct {
	// Unique identifier for the database.
	ID string
	// Unique identifier for the databases's owner.
	TenantID *string
	// The time that the database was created.
	CreatedAt *string
	// The time that the database was last updated.
	UpdatedAt *string
	// Current status of the database.
	Status *DatabaseStatus
	// All of the instances in the database.
	Instances *Instance
	// The user-provided specification for the database.
	Spec *DatabaseSpec
}

type DatabaseExtensionSpec struct {
	// The name of the extension to install in this database.
	Name string
	// The version of the extension to install in this database.
	Version *string
}

type DatabaseNodeSpec struct {
	// The name of the database node.
	Name string
	// A unique identifier for the instance that will be created from this node
	// specification.
	InstanceID string
	// The ID of the host that should run this node.
	HostID string
	// The major version of Postgres for this node. Overrides the Postgres version
	// set in the DatabaseSpec.
	PostgresVersion *string
	// The port used by the Postgres database for this node. Overrides the Postgres
	// port set in the DatabaseSpec.
	Port *int
	// Read replicas for this database node.
	ReadReplicas *DatabaseReplicaSpec
	// Additional postgresql.conf settings for this particular node. Will be merged
	// with the settings provided by control-plane.
	PostgresqlConf map[string]any
}

type DatabaseReplicaSpec struct {
	// A unique identifier for the instance that will be created from this replica
	// specification.
	InstanceID string
	// The ID of the host that should run this read replica.
	HostID string
}

type DatabaseSpec struct {
	// The name of the Postgres database.
	DatabaseName string
	// The major version of the Postgres database.
	PostgresVersion *string
	// The major version of the Spock extension.
	SpockVersion *string
	// The port used by the Postgres database.
	Port *int
	// Prevents deletion when true.
	DeletionProtection *bool
	// The Spock nodes for this database.
	Nodes []*DatabaseNodeSpec
	// The users to create for this database.
	DatabaseUsers []*DatabaseUserSpec
	// The extensions to install for this database.
	Extensions []*DatabaseExtensionSpec
	// The feature flags for this database.
	Features map[string]string
	// The backup configurations for this database.
	BackupConfigs []*BackupConfigSpec
	// Additional postgresql.conf settings. Will be merged with the settings
	// provided by control-plane.
	PostgresqlConf map[string]any
}

type DatabaseStatus struct {
	State *string
	// The time that the database status was last updated.
	UpdatedAt *string
}

type DatabaseUserSpec struct {
	// The username for this database user.
	Username string
	// The password for this database user.
	Password string
	// The roles to assign to this database user.
	Roles []string
	// Enables SUPERUSER for this database user when true.
	Superuser *bool
}

// DeleteDatabasePayload is the payload type of the control-plane service
// delete-database method.
type DeleteDatabasePayload struct {
	// ID of the database to delete.
	DatabaseID *string
}

// Host is the result type of the control-plane service inspect-host method.
type Host struct {
	// Unique identifier for the host
	ID string
	// The type of this host
	Type *string
	// The cohort that this host belongs to
	Cohort *string
	// The hostname of this host.
	Hostname string
	// The IPv4 address of this host.
	Ipv4Address string
	// The configuration for this host
	Config *HostConfiguration
	// Current status of the host
	Status *HostStatus
}

type HostConfiguration struct {
	// Enables the Vector service for metrics and log collection
	VectorEnabled *bool
	// Enables the Treafik load balancer
	TraefikEnabled *bool
}

type HostStatus struct {
	State string
}

// InspectDatabasePayload is the payload type of the control-plane service
// inspect-database method.
type InspectDatabasePayload struct {
	// ID of the database to inspect.
	DatabaseID *string
}

// InspectHostPayload is the payload type of the control-plane service
// inspect-host method.
type InspectHostPayload struct {
	// ID of the host to inspect.
	HostID *string
}

type Instance struct {
	// Unique identifier for the instance.
	ID string
	// The ID of the host this instance is running on.
	HostID *string
	// The Spock node name for this instance.
	NodeName *string
	// The time that the instance was created.
	CreatedAt *string
	// The time that the instance was last updated.
	UpdatedAt *string
	// Current status of the instance.
	Status *InstanceStatus
	// All interfaces that this instance serves on.
	Interfaces []*InstanceInterface
}

type InstanceInterface struct {
	// The type of network for this interface.
	NetworkType *string
	// The unique identifier of the network for this interface.
	NetworkID *string
	// The hostname of the instance on this interface.
	Hostname *string
	// The IPv4 address of the instance on this interface.
	Ipv4Address *string
	// The Postgres port for the instance on this interface.
	Port *int
}

type InstanceStatus struct {
	State        string
	PatroniState *string
	Role         *string
	// True if this instance is in read-only mode.
	ReadOnly *bool
	// True if this instance is pending to be restarted from a configuration change.
	PendingRestart *bool
	// True if Patroni has been paused for this instance.
	PatroniPaused *bool
	// The version of Postgres for this instance.
	PostgresVersion *string
	// The version of Spock for this instance.
	SpockVersion *string
	// The time that the instance status was last updated.
	UpdatedAt *string
}

// RemoveHostPayload is the payload type of the control-plane service
// remove-host method.
type RemoveHostPayload struct {
	// ID of the host to remove.
	HostID *string
}

// UpdateDatabasePayload is the payload type of the control-plane service
// update-database method.
type UpdateDatabasePayload struct {
	// ID of the database to update.
	DatabaseID *string
	Request    *UpdateDatabaseRequest
}

type UpdateDatabaseRequest struct {
	// The specification for the database.
	Spec *DatabaseSpec
}
