// Code generated by goa v3.19.1, DO NOT EDIT.
//
// control-plane HTTP client CLI support package
//
// Command:
// $ goa gen github.com/pgEdge/control-plane/api/apiv1/design -o apiv1

package client

import (
	"encoding/json"
	"fmt"
	"strconv"
	"unicode/utf8"

	controlplane "github.com/pgEdge/control-plane/api/apiv1/gen/control_plane"
	goa "goa.design/goa/v3/pkg"
)

// BuildInitClusterPayload builds the payload for the control-plane
// init-cluster endpoint from CLI flags.
func BuildInitClusterPayload(controlPlaneInitClusterClusterID string) (*controlplane.InitClusterRequest, error) {
	var err error
	var clusterID *string
	{
		if controlPlaneInitClusterClusterID != "" {
			clusterID = &controlPlaneInitClusterClusterID
			if utf8.RuneCountInString(*clusterID) < 1 {
				err = goa.MergeErrors(err, goa.InvalidLengthError("cluster_id", *clusterID, utf8.RuneCountInString(*clusterID), 1, true))
			}
			if utf8.RuneCountInString(*clusterID) > 63 {
				err = goa.MergeErrors(err, goa.InvalidLengthError("cluster_id", *clusterID, utf8.RuneCountInString(*clusterID), 63, false))
			}
			if err != nil {
				return nil, err
			}
		}
	}
	v := &controlplane.InitClusterRequest{}
	if clusterID != nil {
		tmpclusterID := controlplane.Identifier(*clusterID)
		v.ClusterID = &tmpclusterID
	}

	return v, nil
}

// BuildJoinClusterPayload builds the payload for the control-plane
// join-cluster endpoint from CLI flags.
func BuildJoinClusterPayload(controlPlaneJoinClusterBody string) (*controlplane.ClusterJoinToken, error) {
	var err error
	var body JoinClusterRequestBody
	{
		err = json.Unmarshal([]byte(controlPlaneJoinClusterBody), &body)
		if err != nil {
			return nil, fmt.Errorf("invalid JSON for body, \nerror: %s, \nexample of valid JSON:\n%s", err, "'{\n      \"server_url\": \"http://192.168.1.1:3000\",\n      \"token\": \"PGEDGE-dd440afcf5de20ef8e8cf54f6cb9f125fd55f90e64faa94b906130b31235e730-41e975f41d7ea61058f2fe2572cb52dd\"\n   }'")
		}
		err = goa.MergeErrors(err, goa.ValidateFormat("body.server_url", body.ServerURL, goa.FormatURI))
		if err != nil {
			return nil, err
		}
	}
	v := &controlplane.ClusterJoinToken{
		Token:     body.Token,
		ServerURL: body.ServerURL,
	}

	return v, nil
}

// BuildGetJoinOptionsPayload builds the payload for the control-plane
// get-join-options endpoint from CLI flags.
func BuildGetJoinOptionsPayload(controlPlaneGetJoinOptionsBody string) (*controlplane.ClusterJoinRequest, error) {
	var err error
	var body GetJoinOptionsRequestBody
	{
		err = json.Unmarshal([]byte(controlPlaneGetJoinOptionsBody), &body)
		if err != nil {
			return nil, fmt.Errorf("invalid JSON for body, \nerror: %s, \nexample of valid JSON:\n%s", err, "'{\n      \"embedded_etcd_enabled\": true,\n      \"host_id\": \"host-1\",\n      \"hostname\": \"ip-10-1-0-113.ec2.internal\",\n      \"ipv4_address\": \"10.1.0.113\",\n      \"token\": \"PGEDGE-dd440afcf5de20ef8e8cf54f6cb9f125fd55f90e64faa94b906130b31235e730-41e975f41d7ea61058f2fe2572cb52dd\"\n   }'")
		}
		err = goa.MergeErrors(err, goa.ValidatePattern("body.token", body.Token, "^PGEDGE-[\\w]{64}-[\\w]{32}$"))
		if utf8.RuneCountInString(body.HostID) < 1 {
			err = goa.MergeErrors(err, goa.InvalidLengthError("body.host_id", body.HostID, utf8.RuneCountInString(body.HostID), 1, true))
		}
		if utf8.RuneCountInString(body.HostID) > 63 {
			err = goa.MergeErrors(err, goa.InvalidLengthError("body.host_id", body.HostID, utf8.RuneCountInString(body.HostID), 63, false))
		}
		if utf8.RuneCountInString(body.Hostname) < 3 {
			err = goa.MergeErrors(err, goa.InvalidLengthError("body.hostname", body.Hostname, utf8.RuneCountInString(body.Hostname), 3, true))
		}
		if utf8.RuneCountInString(body.Hostname) > 128 {
			err = goa.MergeErrors(err, goa.InvalidLengthError("body.hostname", body.Hostname, utf8.RuneCountInString(body.Hostname), 128, false))
		}
		err = goa.MergeErrors(err, goa.ValidateFormat("body.ipv4_address", body.Ipv4Address, goa.FormatIPv4))
		if err != nil {
			return nil, err
		}
	}
	v := &controlplane.ClusterJoinRequest{
		Token:               body.Token,
		HostID:              controlplane.Identifier(body.HostID),
		Hostname:            body.Hostname,
		Ipv4Address:         body.Ipv4Address,
		EmbeddedEtcdEnabled: body.EmbeddedEtcdEnabled,
	}

	return v, nil
}

// BuildGetHostPayload builds the payload for the control-plane get-host
// endpoint from CLI flags.
func BuildGetHostPayload(controlPlaneGetHostHostID string) (*controlplane.GetHostPayload, error) {
	var err error
	var hostID string
	{
		hostID = controlPlaneGetHostHostID
		if utf8.RuneCountInString(hostID) < 1 {
			err = goa.MergeErrors(err, goa.InvalidLengthError("host_id", hostID, utf8.RuneCountInString(hostID), 1, true))
		}
		if utf8.RuneCountInString(hostID) > 63 {
			err = goa.MergeErrors(err, goa.InvalidLengthError("host_id", hostID, utf8.RuneCountInString(hostID), 63, false))
		}
		if err != nil {
			return nil, err
		}
	}
	v := &controlplane.GetHostPayload{}
	v.HostID = controlplane.Identifier(hostID)

	return v, nil
}

// BuildRemoveHostPayload builds the payload for the control-plane remove-host
// endpoint from CLI flags.
func BuildRemoveHostPayload(controlPlaneRemoveHostHostID string, controlPlaneRemoveHostForce string) (*controlplane.RemoveHostPayload, error) {
	var err error
	var hostID string
	{
		hostID = controlPlaneRemoveHostHostID
		if utf8.RuneCountInString(hostID) < 1 {
			err = goa.MergeErrors(err, goa.InvalidLengthError("host_id", hostID, utf8.RuneCountInString(hostID), 1, true))
		}
		if utf8.RuneCountInString(hostID) > 63 {
			err = goa.MergeErrors(err, goa.InvalidLengthError("host_id", hostID, utf8.RuneCountInString(hostID), 63, false))
		}
		if err != nil {
			return nil, err
		}
	}
	var force bool
	{
		if controlPlaneRemoveHostForce != "" {
			force, err = strconv.ParseBool(controlPlaneRemoveHostForce)
			if err != nil {
				return nil, fmt.Errorf("invalid value for force, must be BOOL")
			}
		}
	}
	v := &controlplane.RemoveHostPayload{}
	v.HostID = controlplane.Identifier(hostID)
	v.Force = force

	return v, nil
}

// BuildCreateDatabasePayload builds the payload for the control-plane
// create-database endpoint from CLI flags.
func BuildCreateDatabasePayload(controlPlaneCreateDatabaseBody string) (*controlplane.CreateDatabaseRequest, error) {
	var err error
	var body CreateDatabaseRequestBody
	{
		err = json.Unmarshal([]byte(controlPlaneCreateDatabaseBody), &body)
		if err != nil {
			return nil, fmt.Errorf("invalid JSON for body, \nerror: %s, \nexample of valid JSON:\n%s", err, "'{\n      \"id\": \"storefront\",\n      \"spec\": {\n         \"database_name\": \"storefront\",\n         \"database_users\": [\n            {\n               \"attributes\": [\n                  \"LOGIN\",\n                  \"SUPERUSER\"\n               ],\n               \"db_owner\": true,\n               \"password\": \"password\",\n               \"username\": \"admin\"\n            }\n         ],\n         \"nodes\": [\n            {\n               \"host_ids\": [\n                  \"us-east-1\"\n               ],\n               \"name\": \"n1\"\n            },\n            {\n               \"host_ids\": [\n                  \"ap-south-1\"\n               ],\n               \"name\": \"n2\"\n            },\n            {\n               \"host_ids\": [\n                  \"eu-central-1\"\n               ],\n               \"name\": \"n3\"\n            }\n         ],\n         \"port\": 5432,\n         \"postgresql_conf\": {\n            \"max_connections\": 5000\n         }\n      }\n   }'")
		}
		if body.Spec == nil {
			err = goa.MergeErrors(err, goa.MissingFieldError("spec", "body"))
		}
		if body.ID != nil {
			if utf8.RuneCountInString(*body.ID) < 1 {
				err = goa.MergeErrors(err, goa.InvalidLengthError("body.id", *body.ID, utf8.RuneCountInString(*body.ID), 1, true))
			}
		}
		if body.ID != nil {
			if utf8.RuneCountInString(*body.ID) > 63 {
				err = goa.MergeErrors(err, goa.InvalidLengthError("body.id", *body.ID, utf8.RuneCountInString(*body.ID), 63, false))
			}
		}
		if body.TenantID != nil {
			if utf8.RuneCountInString(*body.TenantID) < 1 {
				err = goa.MergeErrors(err, goa.InvalidLengthError("body.tenant_id", *body.TenantID, utf8.RuneCountInString(*body.TenantID), 1, true))
			}
		}
		if body.TenantID != nil {
			if utf8.RuneCountInString(*body.TenantID) > 63 {
				err = goa.MergeErrors(err, goa.InvalidLengthError("body.tenant_id", *body.TenantID, utf8.RuneCountInString(*body.TenantID), 63, false))
			}
		}
		if body.Spec != nil {
			if err2 := ValidateDatabaseSpecRequestBody(body.Spec); err2 != nil {
				err = goa.MergeErrors(err, err2)
			}
		}
		if err != nil {
			return nil, err
		}
	}
	v := &controlplane.CreateDatabaseRequest{}
	if body.ID != nil {
		id := controlplane.Identifier(*body.ID)
		v.ID = &id
	}
	if body.TenantID != nil {
		tenantID := controlplane.Identifier(*body.TenantID)
		v.TenantID = &tenantID
	}
	if body.Spec != nil {
		v.Spec = marshalDatabaseSpecRequestBodyToControlplaneDatabaseSpec(body.Spec)
	}

	return v, nil
}

// BuildGetDatabasePayload builds the payload for the control-plane
// get-database endpoint from CLI flags.
func BuildGetDatabasePayload(controlPlaneGetDatabaseDatabaseID string) (*controlplane.GetDatabasePayload, error) {
	var err error
	var databaseID string
	{
		databaseID = controlPlaneGetDatabaseDatabaseID
		if utf8.RuneCountInString(databaseID) < 1 {
			err = goa.MergeErrors(err, goa.InvalidLengthError("database_id", databaseID, utf8.RuneCountInString(databaseID), 1, true))
		}
		if utf8.RuneCountInString(databaseID) > 63 {
			err = goa.MergeErrors(err, goa.InvalidLengthError("database_id", databaseID, utf8.RuneCountInString(databaseID), 63, false))
		}
		if err != nil {
			return nil, err
		}
	}
	v := &controlplane.GetDatabasePayload{}
	v.DatabaseID = controlplane.Identifier(databaseID)

	return v, nil
}

// BuildUpdateDatabasePayload builds the payload for the control-plane
// update-database endpoint from CLI flags.
func BuildUpdateDatabasePayload(controlPlaneUpdateDatabaseBody string, controlPlaneUpdateDatabaseDatabaseID string, controlPlaneUpdateDatabaseForceUpdate string) (*controlplane.UpdateDatabasePayload, error) {
	var err error
	var body UpdateDatabaseRequestBody
	{
		err = json.Unmarshal([]byte(controlPlaneUpdateDatabaseBody), &body)
		if err != nil {
			return nil, fmt.Errorf("invalid JSON for body, \nerror: %s, \nexample of valid JSON:\n%s", err, "'{\n      \"spec\": {\n         \"database_name\": \"storefront\",\n         \"database_users\": [\n            {\n               \"attributes\": [\n                  \"LOGIN\",\n                  \"SUPERUSER\"\n               ],\n               \"db_owner\": true,\n               \"username\": \"admin\"\n            }\n         ],\n         \"nodes\": [\n            {\n               \"backup_config\": {\n                  \"repositories\": [\n                     {\n                        \"s3_bucket\": \"storefront-db-backups-us-east-1\",\n                        \"type\": \"s3\"\n                     }\n                  ]\n               },\n               \"host_ids\": [\n                  \"us-east-1\"\n               ],\n               \"name\": \"n1\"\n            },\n            {\n               \"backup_config\": {\n                  \"repositories\": [\n                     {\n                        \"s3_bucket\": \"storefront-db-backups-ap-south-1\",\n                        \"type\": \"s3\"\n                     }\n                  ]\n               },\n               \"host_ids\": [\n                  \"ap-south-1\"\n               ],\n               \"name\": \"n2\"\n            },\n            {\n               \"backup_config\": {\n                  \"repositories\": [\n                     {\n                        \"s3_bucket\": \"storefront-db-backups-eu-central-1\",\n                        \"type\": \"s3\"\n                     }\n                  ]\n               },\n               \"host_ids\": [\n                  \"eu-central-1\"\n               ],\n               \"name\": \"n3\",\n               \"restore_config\": {\n                  \"repository\": {\n                     \"s3_bucket\": \"storefront-db-backups-us-east-1\",\n                     \"type\": \"s3\"\n                  },\n                  \"source_database_id\": \"storefront\",\n                  \"source_database_name\": \"storefront\",\n                  \"source_node_name\": \"n1\"\n               }\n            }\n         ],\n         \"port\": 5432\n      }\n   }'")
		}
		if body.Spec == nil {
			err = goa.MergeErrors(err, goa.MissingFieldError("spec", "body"))
		}
		if body.TenantID != nil {
			if utf8.RuneCountInString(*body.TenantID) < 1 {
				err = goa.MergeErrors(err, goa.InvalidLengthError("body.tenant_id", *body.TenantID, utf8.RuneCountInString(*body.TenantID), 1, true))
			}
		}
		if body.TenantID != nil {
			if utf8.RuneCountInString(*body.TenantID) > 63 {
				err = goa.MergeErrors(err, goa.InvalidLengthError("body.tenant_id", *body.TenantID, utf8.RuneCountInString(*body.TenantID), 63, false))
			}
		}
		if body.Spec != nil {
			if err2 := ValidateDatabaseSpecRequestBodyRequestBody(body.Spec); err2 != nil {
				err = goa.MergeErrors(err, err2)
			}
		}
		if err != nil {
			return nil, err
		}
	}
	var databaseID string
	{
		databaseID = controlPlaneUpdateDatabaseDatabaseID
		if utf8.RuneCountInString(databaseID) < 1 {
			err = goa.MergeErrors(err, goa.InvalidLengthError("database_id", databaseID, utf8.RuneCountInString(databaseID), 1, true))
		}
		if utf8.RuneCountInString(databaseID) > 63 {
			err = goa.MergeErrors(err, goa.InvalidLengthError("database_id", databaseID, utf8.RuneCountInString(databaseID), 63, false))
		}
		if err != nil {
			return nil, err
		}
	}
	var forceUpdate bool
	{
		if controlPlaneUpdateDatabaseForceUpdate != "" {
			forceUpdate, err = strconv.ParseBool(controlPlaneUpdateDatabaseForceUpdate)
			if err != nil {
				return nil, fmt.Errorf("invalid value for forceUpdate, must be BOOL")
			}
		}
	}
	v := &controlplane.UpdateDatabaseRequest{}
	if body.TenantID != nil {
		tenantID := controlplane.Identifier(*body.TenantID)
		v.TenantID = &tenantID
	}
	if body.Spec != nil {
		v.Spec = marshalDatabaseSpecRequestBodyRequestBodyToControlplaneDatabaseSpec(body.Spec)
	}
	res := &controlplane.UpdateDatabasePayload{
		Request: v,
	}
	res.DatabaseID = controlplane.Identifier(databaseID)
	res.ForceUpdate = forceUpdate

	return res, nil
}

// BuildDeleteDatabasePayload builds the payload for the control-plane
// delete-database endpoint from CLI flags.
func BuildDeleteDatabasePayload(controlPlaneDeleteDatabaseDatabaseID string, controlPlaneDeleteDatabaseForce string) (*controlplane.DeleteDatabasePayload, error) {
	var err error
	var databaseID string
	{
		databaseID = controlPlaneDeleteDatabaseDatabaseID
		if utf8.RuneCountInString(databaseID) < 1 {
			err = goa.MergeErrors(err, goa.InvalidLengthError("database_id", databaseID, utf8.RuneCountInString(databaseID), 1, true))
		}
		if utf8.RuneCountInString(databaseID) > 63 {
			err = goa.MergeErrors(err, goa.InvalidLengthError("database_id", databaseID, utf8.RuneCountInString(databaseID), 63, false))
		}
		if err != nil {
			return nil, err
		}
	}
	var force bool
	{
		if controlPlaneDeleteDatabaseForce != "" {
			force, err = strconv.ParseBool(controlPlaneDeleteDatabaseForce)
			if err != nil {
				return nil, fmt.Errorf("invalid value for force, must be BOOL")
			}
		}
	}
	v := &controlplane.DeleteDatabasePayload{}
	v.DatabaseID = controlplane.Identifier(databaseID)
	v.Force = force

	return v, nil
}

// BuildBackupDatabaseNodePayload builds the payload for the control-plane
// backup-database-node endpoint from CLI flags.
func BuildBackupDatabaseNodePayload(controlPlaneBackupDatabaseNodeBody string, controlPlaneBackupDatabaseNodeDatabaseID string, controlPlaneBackupDatabaseNodeNodeName string, controlPlaneBackupDatabaseNodeForce string) (*controlplane.BackupDatabaseNodePayload, error) {
	var err error
	var body BackupDatabaseNodeRequestBody
	{
		err = json.Unmarshal([]byte(controlPlaneBackupDatabaseNodeBody), &body)
		if err != nil {
			return nil, fmt.Errorf("invalid JSON for body, \nerror: %s, \nexample of valid JSON:\n%s", err, "'{\n      \"annotations\": {\n         \"initiated-by\": \"backup-cron-job\"\n      },\n      \"backup_options\": {\n         \"archive-check\": \"n\"\n      },\n      \"type\": \"full\"\n   }'")
		}
		if !(body.Type == "full" || body.Type == "diff" || body.Type == "incr") {
			err = goa.MergeErrors(err, goa.InvalidEnumValueError("body.type", body.Type, []any{"full", "diff", "incr"}))
		}
		if err != nil {
			return nil, err
		}
	}
	var databaseID string
	{
		databaseID = controlPlaneBackupDatabaseNodeDatabaseID
		if utf8.RuneCountInString(databaseID) < 1 {
			err = goa.MergeErrors(err, goa.InvalidLengthError("database_id", databaseID, utf8.RuneCountInString(databaseID), 1, true))
		}
		if utf8.RuneCountInString(databaseID) > 63 {
			err = goa.MergeErrors(err, goa.InvalidLengthError("database_id", databaseID, utf8.RuneCountInString(databaseID), 63, false))
		}
		if err != nil {
			return nil, err
		}
	}
	var nodeName string
	{
		nodeName = controlPlaneBackupDatabaseNodeNodeName
		err = goa.MergeErrors(err, goa.ValidatePattern("node_name", nodeName, "n[0-9]+"))
		if err != nil {
			return nil, err
		}
	}
	var force bool
	{
		if controlPlaneBackupDatabaseNodeForce != "" {
			force, err = strconv.ParseBool(controlPlaneBackupDatabaseNodeForce)
			if err != nil {
				return nil, fmt.Errorf("invalid value for force, must be BOOL")
			}
		}
	}
	v := &controlplane.BackupOptions{
		Type: body.Type,
	}
	if body.Annotations != nil {
		v.Annotations = make(map[string]string, len(body.Annotations))
		for key, val := range body.Annotations {
			tk := key
			tv := val
			v.Annotations[tk] = tv
		}
	}
	if body.BackupOptions != nil {
		v.BackupOptions = make(map[string]string, len(body.BackupOptions))
		for key, val := range body.BackupOptions {
			tk := key
			tv := val
			v.BackupOptions[tk] = tv
		}
	}
	res := &controlplane.BackupDatabaseNodePayload{
		Options: v,
	}
	res.DatabaseID = controlplane.Identifier(databaseID)
	res.NodeName = nodeName
	res.Force = force

	return res, nil
}

// BuildSwitchoverDatabaseNodePayload builds the payload for the control-plane
// switchover-database-node endpoint from CLI flags.
func BuildSwitchoverDatabaseNodePayload(controlPlaneSwitchoverDatabaseNodeBody string, controlPlaneSwitchoverDatabaseNodeDatabaseID string, controlPlaneSwitchoverDatabaseNodeNodeName string) (*controlplane.SwitchoverDatabaseNodePayload, error) {
	var err error
	var body SwitchoverDatabaseNodeRequestBody
	{
		err = json.Unmarshal([]byte(controlPlaneSwitchoverDatabaseNodeBody), &body)
		if err != nil {
			return nil, fmt.Errorf("invalid JSON for body, \nerror: %s, \nexample of valid JSON:\n%s", err, "'{\n      \"candidate_instance_id\": \"68f50878-44d2-4524-a823-e31bd478706d-n1-689qacsi\",\n      \"scheduled_at\": \"2025-09-20T22:00:00+05:30\"\n   }'")
		}
		if body.ScheduledAt != nil {
			err = goa.MergeErrors(err, goa.ValidateFormat("body.scheduled_at", *body.ScheduledAt, goa.FormatDateTime))
		}
		if err != nil {
			return nil, err
		}
	}
	var databaseID string
	{
		databaseID = controlPlaneSwitchoverDatabaseNodeDatabaseID
		if utf8.RuneCountInString(databaseID) < 1 {
			err = goa.MergeErrors(err, goa.InvalidLengthError("database_id", databaseID, utf8.RuneCountInString(databaseID), 1, true))
		}
		if utf8.RuneCountInString(databaseID) > 63 {
			err = goa.MergeErrors(err, goa.InvalidLengthError("database_id", databaseID, utf8.RuneCountInString(databaseID), 63, false))
		}
		if err != nil {
			return nil, err
		}
	}
	var nodeName string
	{
		nodeName = controlPlaneSwitchoverDatabaseNodeNodeName
		err = goa.MergeErrors(err, goa.ValidatePattern("node_name", nodeName, "n[0-9]+"))
		if err != nil {
			return nil, err
		}
	}
	v := &controlplane.SwitchoverDatabaseNodePayload{
		CandidateInstanceID: body.CandidateInstanceID,
		ScheduledAt:         body.ScheduledAt,
	}
	v.DatabaseID = controlplane.Identifier(databaseID)
	v.NodeName = nodeName

	return v, nil
}

// BuildFailoverDatabaseNodePayload builds the payload for the control-plane
// failover-database-node endpoint from CLI flags.
func BuildFailoverDatabaseNodePayload(controlPlaneFailoverDatabaseNodeBody string, controlPlaneFailoverDatabaseNodeDatabaseID string, controlPlaneFailoverDatabaseNodeNodeName string) (*controlplane.FailoverDatabaseNodeRequest, error) {
	var err error
	var body FailoverDatabaseNodeRequestBody
	{
		err = json.Unmarshal([]byte(controlPlaneFailoverDatabaseNodeBody), &body)
		if err != nil {
			return nil, fmt.Errorf("invalid JSON for body, \nerror: %s, \nexample of valid JSON:\n%s", err, "'{\n      \"candidate_instance_id\": \"68f50878-44d2-4524-a823-e31bd478706d-n1-689qacsi\",\n      \"skip_validation\": true\n   }'")
		}
	}
	var databaseID string
	{
		databaseID = controlPlaneFailoverDatabaseNodeDatabaseID
		if utf8.RuneCountInString(databaseID) < 1 {
			err = goa.MergeErrors(err, goa.InvalidLengthError("database_id", databaseID, utf8.RuneCountInString(databaseID), 1, true))
		}
		if utf8.RuneCountInString(databaseID) > 63 {
			err = goa.MergeErrors(err, goa.InvalidLengthError("database_id", databaseID, utf8.RuneCountInString(databaseID), 63, false))
		}
		if err != nil {
			return nil, err
		}
	}
	var nodeName string
	{
		nodeName = controlPlaneFailoverDatabaseNodeNodeName
		err = goa.MergeErrors(err, goa.ValidatePattern("node_name", nodeName, "n[0-9]+"))
		if err != nil {
			return nil, err
		}
	}
	v := &controlplane.FailoverDatabaseNodeRequest{
		CandidateInstanceID: body.CandidateInstanceID,
		SkipValidation:      body.SkipValidation,
	}
	{
		var zero bool
		if v.SkipValidation == zero {
			v.SkipValidation = false
		}
	}
	v.DatabaseID = controlplane.Identifier(databaseID)
	v.NodeName = nodeName

	return v, nil
}

// BuildListDatabaseTasksPayload builds the payload for the control-plane
// list-database-tasks endpoint from CLI flags.
func BuildListDatabaseTasksPayload(controlPlaneListDatabaseTasksDatabaseID string, controlPlaneListDatabaseTasksAfterTaskID string, controlPlaneListDatabaseTasksLimit string, controlPlaneListDatabaseTasksSortOrder string) (*controlplane.ListDatabaseTasksPayload, error) {
	var err error
	var databaseID string
	{
		databaseID = controlPlaneListDatabaseTasksDatabaseID
		if utf8.RuneCountInString(databaseID) < 1 {
			err = goa.MergeErrors(err, goa.InvalidLengthError("database_id", databaseID, utf8.RuneCountInString(databaseID), 1, true))
		}
		if utf8.RuneCountInString(databaseID) > 63 {
			err = goa.MergeErrors(err, goa.InvalidLengthError("database_id", databaseID, utf8.RuneCountInString(databaseID), 63, false))
		}
		if err != nil {
			return nil, err
		}
	}
	var afterTaskID *string
	{
		if controlPlaneListDatabaseTasksAfterTaskID != "" {
			afterTaskID = &controlPlaneListDatabaseTasksAfterTaskID
			err = goa.MergeErrors(err, goa.ValidateFormat("after_task_id", *afterTaskID, goa.FormatUUID))
			if err != nil {
				return nil, err
			}
		}
	}
	var limit *int
	{
		if controlPlaneListDatabaseTasksLimit != "" {
			var v int64
			v, err = strconv.ParseInt(controlPlaneListDatabaseTasksLimit, 10, strconv.IntSize)
			val := int(v)
			limit = &val
			if err != nil {
				return nil, fmt.Errorf("invalid value for limit, must be INT")
			}
		}
	}
	var sortOrder *string
	{
		if controlPlaneListDatabaseTasksSortOrder != "" {
			sortOrder = &controlPlaneListDatabaseTasksSortOrder
			if !(*sortOrder == "asc" || *sortOrder == "ascend" || *sortOrder == "ascending" || *sortOrder == "desc" || *sortOrder == "descend" || *sortOrder == "descending") {
				err = goa.MergeErrors(err, goa.InvalidEnumValueError("sort_order", *sortOrder, []any{"asc", "ascend", "ascending", "desc", "descend", "descending"}))
			}
			if err != nil {
				return nil, err
			}
		}
	}
	v := &controlplane.ListDatabaseTasksPayload{}
	v.DatabaseID = controlplane.Identifier(databaseID)
	v.AfterTaskID = afterTaskID
	v.Limit = limit
	v.SortOrder = sortOrder

	return v, nil
}

// BuildGetDatabaseTaskPayload builds the payload for the control-plane
// get-database-task endpoint from CLI flags.
func BuildGetDatabaseTaskPayload(controlPlaneGetDatabaseTaskDatabaseID string, controlPlaneGetDatabaseTaskTaskID string) (*controlplane.GetDatabaseTaskPayload, error) {
	var err error
	var databaseID string
	{
		databaseID = controlPlaneGetDatabaseTaskDatabaseID
		if utf8.RuneCountInString(databaseID) < 1 {
			err = goa.MergeErrors(err, goa.InvalidLengthError("database_id", databaseID, utf8.RuneCountInString(databaseID), 1, true))
		}
		if utf8.RuneCountInString(databaseID) > 63 {
			err = goa.MergeErrors(err, goa.InvalidLengthError("database_id", databaseID, utf8.RuneCountInString(databaseID), 63, false))
		}
		if err != nil {
			return nil, err
		}
	}
	var taskID string
	{
		taskID = controlPlaneGetDatabaseTaskTaskID
		err = goa.MergeErrors(err, goa.ValidateFormat("task_id", taskID, goa.FormatUUID))
		if err != nil {
			return nil, err
		}
	}
	v := &controlplane.GetDatabaseTaskPayload{}
	v.DatabaseID = controlplane.Identifier(databaseID)
	v.TaskID = taskID

	return v, nil
}

// BuildGetDatabaseTaskLogPayload builds the payload for the control-plane
// get-database-task-log endpoint from CLI flags.
func BuildGetDatabaseTaskLogPayload(controlPlaneGetDatabaseTaskLogDatabaseID string, controlPlaneGetDatabaseTaskLogTaskID string, controlPlaneGetDatabaseTaskLogAfterEntryID string, controlPlaneGetDatabaseTaskLogLimit string) (*controlplane.GetDatabaseTaskLogPayload, error) {
	var err error
	var databaseID string
	{
		databaseID = controlPlaneGetDatabaseTaskLogDatabaseID
		if utf8.RuneCountInString(databaseID) < 1 {
			err = goa.MergeErrors(err, goa.InvalidLengthError("database_id", databaseID, utf8.RuneCountInString(databaseID), 1, true))
		}
		if utf8.RuneCountInString(databaseID) > 63 {
			err = goa.MergeErrors(err, goa.InvalidLengthError("database_id", databaseID, utf8.RuneCountInString(databaseID), 63, false))
		}
		if err != nil {
			return nil, err
		}
	}
	var taskID string
	{
		taskID = controlPlaneGetDatabaseTaskLogTaskID
		err = goa.MergeErrors(err, goa.ValidateFormat("task_id", taskID, goa.FormatUUID))
		if err != nil {
			return nil, err
		}
	}
	var afterEntryID *string
	{
		if controlPlaneGetDatabaseTaskLogAfterEntryID != "" {
			afterEntryID = &controlPlaneGetDatabaseTaskLogAfterEntryID
			err = goa.MergeErrors(err, goa.ValidateFormat("after_entry_id", *afterEntryID, goa.FormatUUID))
			if err != nil {
				return nil, err
			}
		}
	}
	var limit *int
	{
		if controlPlaneGetDatabaseTaskLogLimit != "" {
			var v int64
			v, err = strconv.ParseInt(controlPlaneGetDatabaseTaskLogLimit, 10, strconv.IntSize)
			val := int(v)
			limit = &val
			if err != nil {
				return nil, fmt.Errorf("invalid value for limit, must be INT")
			}
		}
	}
	v := &controlplane.GetDatabaseTaskLogPayload{}
	v.DatabaseID = controlplane.Identifier(databaseID)
	v.TaskID = taskID
	v.AfterEntryID = afterEntryID
	v.Limit = limit

	return v, nil
}

// BuildRestoreDatabasePayload builds the payload for the control-plane
// restore-database endpoint from CLI flags.
func BuildRestoreDatabasePayload(controlPlaneRestoreDatabaseBody string, controlPlaneRestoreDatabaseDatabaseID string, controlPlaneRestoreDatabaseForce string) (*controlplane.RestoreDatabasePayload, error) {
	var err error
	var body RestoreDatabaseRequestBody
	{
		err = json.Unmarshal([]byte(controlPlaneRestoreDatabaseBody), &body)
		if err != nil {
			return nil, fmt.Errorf("invalid JSON for body, \nerror: %s, \nexample of valid JSON:\n%s", err, "'{\n      \"restore_config\": {\n         \"repository\": {\n            \"base_path\": \"/backups\",\n            \"type\": \"posix\"\n         },\n         \"source_database_id\": \"storefront\",\n         \"source_database_name\": \"storefront\",\n         \"source_node_name\": \"n1\"\n      },\n      \"target_nodes\": [\n         \"n1\"\n      ]\n   }'")
		}
		if body.RestoreConfig == nil {
			err = goa.MergeErrors(err, goa.MissingFieldError("restore_config", "body"))
		}
		if body.RestoreConfig != nil {
			if err2 := ValidateRestoreConfigSpecRequestBodyRequestBody(body.RestoreConfig); err2 != nil {
				err = goa.MergeErrors(err, err2)
			}
		}
		if len(body.TargetNodes) > 9 {
			err = goa.MergeErrors(err, goa.InvalidLengthError("body.target_nodes", body.TargetNodes, len(body.TargetNodes), 9, false))
		}
		if err != nil {
			return nil, err
		}
	}
	var databaseID string
	{
		databaseID = controlPlaneRestoreDatabaseDatabaseID
		if utf8.RuneCountInString(databaseID) < 1 {
			err = goa.MergeErrors(err, goa.InvalidLengthError("database_id", databaseID, utf8.RuneCountInString(databaseID), 1, true))
		}
		if utf8.RuneCountInString(databaseID) > 63 {
			err = goa.MergeErrors(err, goa.InvalidLengthError("database_id", databaseID, utf8.RuneCountInString(databaseID), 63, false))
		}
		if err != nil {
			return nil, err
		}
	}
	var force bool
	{
		if controlPlaneRestoreDatabaseForce != "" {
			force, err = strconv.ParseBool(controlPlaneRestoreDatabaseForce)
			if err != nil {
				return nil, fmt.Errorf("invalid value for force, must be BOOL")
			}
		}
	}
	v := &controlplane.RestoreDatabaseRequest{}
	if body.RestoreConfig != nil {
		v.RestoreConfig = marshalRestoreConfigSpecRequestBodyRequestBodyToControlplaneRestoreConfigSpec(body.RestoreConfig)
	}
	if body.TargetNodes != nil {
		v.TargetNodes = make([]string, len(body.TargetNodes))
		for i, val := range body.TargetNodes {
			v.TargetNodes[i] = val
		}
	}
	res := &controlplane.RestoreDatabasePayload{
		Request: v,
	}
	res.DatabaseID = controlplane.Identifier(databaseID)
	res.Force = force

	return res, nil
}

// BuildRestartInstancePayload builds the payload for the control-plane
// restart-instance endpoint from CLI flags.
func BuildRestartInstancePayload(controlPlaneRestartInstanceBody string, controlPlaneRestartInstanceDatabaseID string, controlPlaneRestartInstanceInstanceID string) (*controlplane.RestartInstancePayload, error) {
	var err error
	var body struct {
		// The time at which the restart is scheduled.
		ScheduledAt *string `form:"scheduled_at" json:"scheduled_at" xml:"scheduled_at"`
	}
	{
		err = json.Unmarshal([]byte(controlPlaneRestartInstanceBody), &body)
		if err != nil {
			return nil, fmt.Errorf("invalid JSON for body, \nerror: %s, \nexample of valid JSON:\n%s", err, "'{\n      \"scheduled_at\": \"2025-06-18T16:52:05Z\"\n   }'")
		}
	}
	var databaseID string
	{
		databaseID = controlPlaneRestartInstanceDatabaseID
		if utf8.RuneCountInString(databaseID) < 1 {
			err = goa.MergeErrors(err, goa.InvalidLengthError("database_id", databaseID, utf8.RuneCountInString(databaseID), 1, true))
		}
		if utf8.RuneCountInString(databaseID) > 63 {
			err = goa.MergeErrors(err, goa.InvalidLengthError("database_id", databaseID, utf8.RuneCountInString(databaseID), 63, false))
		}
		if err != nil {
			return nil, err
		}
	}
	var instanceID string
	{
		instanceID = controlPlaneRestartInstanceInstanceID
		if utf8.RuneCountInString(instanceID) < 1 {
			err = goa.MergeErrors(err, goa.InvalidLengthError("instance_id", instanceID, utf8.RuneCountInString(instanceID), 1, true))
		}
		if utf8.RuneCountInString(instanceID) > 63 {
			err = goa.MergeErrors(err, goa.InvalidLengthError("instance_id", instanceID, utf8.RuneCountInString(instanceID), 63, false))
		}
		if err != nil {
			return nil, err
		}
	}
	v := &controlplane.RestartInstancePayload{
		ScheduledAt: body.ScheduledAt,
	}
	v.DatabaseID = controlplane.Identifier(databaseID)
	v.InstanceID = controlplane.Identifier(instanceID)

	return v, nil
}

// BuildStopInstancePayload builds the payload for the control-plane
// stop-instance endpoint from CLI flags.
func BuildStopInstancePayload(controlPlaneStopInstanceDatabaseID string, controlPlaneStopInstanceInstanceID string, controlPlaneStopInstanceForce string) (*controlplane.StopInstancePayload, error) {
	var err error
	var databaseID string
	{
		databaseID = controlPlaneStopInstanceDatabaseID
		if utf8.RuneCountInString(databaseID) < 1 {
			err = goa.MergeErrors(err, goa.InvalidLengthError("database_id", databaseID, utf8.RuneCountInString(databaseID), 1, true))
		}
		if utf8.RuneCountInString(databaseID) > 63 {
			err = goa.MergeErrors(err, goa.InvalidLengthError("database_id", databaseID, utf8.RuneCountInString(databaseID), 63, false))
		}
		if err != nil {
			return nil, err
		}
	}
	var instanceID string
	{
		instanceID = controlPlaneStopInstanceInstanceID
		if utf8.RuneCountInString(instanceID) < 1 {
			err = goa.MergeErrors(err, goa.InvalidLengthError("instance_id", instanceID, utf8.RuneCountInString(instanceID), 1, true))
		}
		if utf8.RuneCountInString(instanceID) > 63 {
			err = goa.MergeErrors(err, goa.InvalidLengthError("instance_id", instanceID, utf8.RuneCountInString(instanceID), 63, false))
		}
		if err != nil {
			return nil, err
		}
	}
	var force bool
	{
		if controlPlaneStopInstanceForce != "" {
			force, err = strconv.ParseBool(controlPlaneStopInstanceForce)
			if err != nil {
				return nil, fmt.Errorf("invalid value for force, must be BOOL")
			}
		}
	}
	v := &controlplane.StopInstancePayload{}
	v.DatabaseID = controlplane.Identifier(databaseID)
	v.InstanceID = controlplane.Identifier(instanceID)
	v.Force = force

	return v, nil
}

// BuildStartInstancePayload builds the payload for the control-plane
// start-instance endpoint from CLI flags.
func BuildStartInstancePayload(controlPlaneStartInstanceDatabaseID string, controlPlaneStartInstanceInstanceID string, controlPlaneStartInstanceForce string) (*controlplane.StartInstancePayload, error) {
	var err error
	var databaseID string
	{
		databaseID = controlPlaneStartInstanceDatabaseID
		if utf8.RuneCountInString(databaseID) < 1 {
			err = goa.MergeErrors(err, goa.InvalidLengthError("database_id", databaseID, utf8.RuneCountInString(databaseID), 1, true))
		}
		if utf8.RuneCountInString(databaseID) > 63 {
			err = goa.MergeErrors(err, goa.InvalidLengthError("database_id", databaseID, utf8.RuneCountInString(databaseID), 63, false))
		}
		if err != nil {
			return nil, err
		}
	}
	var instanceID string
	{
		instanceID = controlPlaneStartInstanceInstanceID
		if utf8.RuneCountInString(instanceID) < 1 {
			err = goa.MergeErrors(err, goa.InvalidLengthError("instance_id", instanceID, utf8.RuneCountInString(instanceID), 1, true))
		}
		if utf8.RuneCountInString(instanceID) > 63 {
			err = goa.MergeErrors(err, goa.InvalidLengthError("instance_id", instanceID, utf8.RuneCountInString(instanceID), 63, false))
		}
		if err != nil {
			return nil, err
		}
	}
	var force bool
	{
		if controlPlaneStartInstanceForce != "" {
			force, err = strconv.ParseBool(controlPlaneStartInstanceForce)
			if err != nil {
				return nil, fmt.Errorf("invalid value for force, must be BOOL")
			}
		}
	}
	v := &controlplane.StartInstancePayload{}
	v.DatabaseID = controlplane.Identifier(databaseID)
	v.InstanceID = controlplane.Identifier(instanceID)
	v.Force = force

	return v, nil
}

// BuildCancelDatabaseTaskPayload builds the payload for the control-plane
// cancel-database-task endpoint from CLI flags.
func BuildCancelDatabaseTaskPayload(controlPlaneCancelDatabaseTaskDatabaseID string, controlPlaneCancelDatabaseTaskTaskID string) (*controlplane.CancelDatabaseTaskPayload, error) {
	var err error
	var databaseID string
	{
		databaseID = controlPlaneCancelDatabaseTaskDatabaseID
		if utf8.RuneCountInString(databaseID) < 1 {
			err = goa.MergeErrors(err, goa.InvalidLengthError("database_id", databaseID, utf8.RuneCountInString(databaseID), 1, true))
		}
		if utf8.RuneCountInString(databaseID) > 63 {
			err = goa.MergeErrors(err, goa.InvalidLengthError("database_id", databaseID, utf8.RuneCountInString(databaseID), 63, false))
		}
		if err != nil {
			return nil, err
		}
	}
	var taskID string
	{
		taskID = controlPlaneCancelDatabaseTaskTaskID
		if utf8.RuneCountInString(taskID) < 1 {
			err = goa.MergeErrors(err, goa.InvalidLengthError("task_id", taskID, utf8.RuneCountInString(taskID), 1, true))
		}
		if utf8.RuneCountInString(taskID) > 63 {
			err = goa.MergeErrors(err, goa.InvalidLengthError("task_id", taskID, utf8.RuneCountInString(taskID), 63, false))
		}
		if err != nil {
			return nil, err
		}
	}
	v := &controlplane.CancelDatabaseTaskPayload{}
	v.DatabaseID = controlplane.Identifier(databaseID)
	v.TaskID = controlplane.Identifier(taskID)

	return v, nil
}
