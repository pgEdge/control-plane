// Code generated by goa v3.19.1, DO NOT EDIT.
//
// control-plane HTTP server
//
// Command:
// $ goa gen github.com/pgEdge/control-plane/api/apiv1/design -o apiv1

package server

import (
	"context"
	"net/http"
	"path"

	controlplane "github.com/pgEdge/control-plane/api/apiv1/gen/control_plane"
	goahttp "goa.design/goa/v3/http"
	goa "goa.design/goa/v3/pkg"
)

// Server lists the control-plane service endpoint HTTP handlers.
type Server struct {
	Mounts              []*MountPoint
	InitCluster         http.Handler
	JoinCluster         http.Handler
	GetJoinToken        http.Handler
	GetJoinOptions      http.Handler
	GetCluster          http.Handler
	ListHosts           http.Handler
	GetHost             http.Handler
	RemoveHost          http.Handler
	ListDatabases       http.Handler
	CreateDatabase      http.Handler
	GetDatabase         http.Handler
	UpdateDatabase      http.Handler
	DeleteDatabase      http.Handler
	BackupDatabaseNode  http.Handler
	ListDatabaseTasks   http.Handler
	GetDatabaseTask     http.Handler
	GetDatabaseTaskLog  http.Handler
	RestoreDatabase     http.Handler
	GetVersion          http.Handler
	RestartInstance     http.Handler
	StopInstance        http.Handler
	StartInstance       http.Handler
	CancelDatabaseTask  http.Handler
	GenHTTPOpenapi3JSON http.Handler
}

// MountPoint holds information about the mounted endpoints.
type MountPoint struct {
	// Method is the name of the service method served by the mounted HTTP handler.
	Method string
	// Verb is the HTTP method used to match requests to the mounted handler.
	Verb string
	// Pattern is the HTTP request path pattern used to match requests to the
	// mounted handler.
	Pattern string
}

// New instantiates HTTP handlers for all the control-plane service endpoints
// using the provided encoder and decoder. The handlers are mounted on the
// given mux using the HTTP verb and path defined in the design. errhandler is
// called whenever a response fails to be encoded. formatter is used to format
// errors returned by the service methods prior to encoding. Both errhandler
// and formatter are optional and can be nil.
func New(
	e *controlplane.Endpoints,
	mux goahttp.Muxer,
	decoder func(*http.Request) goahttp.Decoder,
	encoder func(context.Context, http.ResponseWriter) goahttp.Encoder,
	errhandler func(context.Context, http.ResponseWriter, error),
	formatter func(ctx context.Context, err error) goahttp.Statuser,
	fileSystemGenHTTPOpenapi3JSON http.FileSystem,
) *Server {
	if fileSystemGenHTTPOpenapi3JSON == nil {
		fileSystemGenHTTPOpenapi3JSON = http.Dir(".")
	}
	fileSystemGenHTTPOpenapi3JSON = appendPrefix(fileSystemGenHTTPOpenapi3JSON, "/gen/http")
	return &Server{
		Mounts: []*MountPoint{
			{"InitCluster", "GET", "/v1/cluster/init"},
			{"JoinCluster", "POST", "/v1/cluster/join"},
			{"GetJoinToken", "GET", "/v1/cluster/join-token"},
			{"GetJoinOptions", "POST", "/v1/internal/cluster/join-options"},
			{"GetCluster", "GET", "/v1/cluster"},
			{"ListHosts", "GET", "/v1/hosts"},
			{"GetHost", "GET", "/v1/hosts/{host_id}"},
			{"RemoveHost", "DELETE", "/v1/hosts/{host_id}"},
			{"ListDatabases", "GET", "/v1/databases"},
			{"CreateDatabase", "POST", "/v1/databases"},
			{"GetDatabase", "GET", "/v1/databases/{database_id}"},
			{"UpdateDatabase", "POST", "/v1/databases/{database_id}"},
			{"DeleteDatabase", "DELETE", "/v1/databases/{database_id}"},
			{"BackupDatabaseNode", "POST", "/v1/databases/{database_id}/nodes/{node_name}/backups"},
			{"ListDatabaseTasks", "GET", "/v1/databases/{database_id}/tasks"},
			{"GetDatabaseTask", "GET", "/v1/databases/{database_id}/tasks/{task_id}"},
			{"GetDatabaseTaskLog", "GET", "/v1/databases/{database_id}/tasks/{task_id}/log"},
			{"RestoreDatabase", "POST", "/v1/databases/{database_id}/restore"},
			{"GetVersion", "GET", "/v1/version"},
			{"RestartInstance", "POST", "/v1/databases/{database_id}/instances/{instance_id}/restart"},
			{"StopInstance", "POST", "/v1/databases/{database_id}/instances/{instance_id}/stop-instance"},
			{"StartInstance", "POST", "/v1/databases/{database_id}/instances/{instance_id}/start-instance"},
			{"CancelDatabaseTask", "GET", "/v1/databases/{database_id}/tasks/{task_id}/cancel"},
			{"Serve ./gen/http/openapi3.json", "GET", "/v1/openapi.json"},
		},
		InitCluster:         NewInitClusterHandler(e.InitCluster, mux, decoder, encoder, errhandler, formatter),
		JoinCluster:         NewJoinClusterHandler(e.JoinCluster, mux, decoder, encoder, errhandler, formatter),
		GetJoinToken:        NewGetJoinTokenHandler(e.GetJoinToken, mux, decoder, encoder, errhandler, formatter),
		GetJoinOptions:      NewGetJoinOptionsHandler(e.GetJoinOptions, mux, decoder, encoder, errhandler, formatter),
		GetCluster:          NewGetClusterHandler(e.GetCluster, mux, decoder, encoder, errhandler, formatter),
		ListHosts:           NewListHostsHandler(e.ListHosts, mux, decoder, encoder, errhandler, formatter),
		GetHost:             NewGetHostHandler(e.GetHost, mux, decoder, encoder, errhandler, formatter),
		RemoveHost:          NewRemoveHostHandler(e.RemoveHost, mux, decoder, encoder, errhandler, formatter),
		ListDatabases:       NewListDatabasesHandler(e.ListDatabases, mux, decoder, encoder, errhandler, formatter),
		CreateDatabase:      NewCreateDatabaseHandler(e.CreateDatabase, mux, decoder, encoder, errhandler, formatter),
		GetDatabase:         NewGetDatabaseHandler(e.GetDatabase, mux, decoder, encoder, errhandler, formatter),
		UpdateDatabase:      NewUpdateDatabaseHandler(e.UpdateDatabase, mux, decoder, encoder, errhandler, formatter),
		DeleteDatabase:      NewDeleteDatabaseHandler(e.DeleteDatabase, mux, decoder, encoder, errhandler, formatter),
		BackupDatabaseNode:  NewBackupDatabaseNodeHandler(e.BackupDatabaseNode, mux, decoder, encoder, errhandler, formatter),
		ListDatabaseTasks:   NewListDatabaseTasksHandler(e.ListDatabaseTasks, mux, decoder, encoder, errhandler, formatter),
		GetDatabaseTask:     NewGetDatabaseTaskHandler(e.GetDatabaseTask, mux, decoder, encoder, errhandler, formatter),
		GetDatabaseTaskLog:  NewGetDatabaseTaskLogHandler(e.GetDatabaseTaskLog, mux, decoder, encoder, errhandler, formatter),
		RestoreDatabase:     NewRestoreDatabaseHandler(e.RestoreDatabase, mux, decoder, encoder, errhandler, formatter),
		GetVersion:          NewGetVersionHandler(e.GetVersion, mux, decoder, encoder, errhandler, formatter),
		RestartInstance:     NewRestartInstanceHandler(e.RestartInstance, mux, decoder, encoder, errhandler, formatter),
		StopInstance:        NewStopInstanceHandler(e.StopInstance, mux, decoder, encoder, errhandler, formatter),
		StartInstance:       NewStartInstanceHandler(e.StartInstance, mux, decoder, encoder, errhandler, formatter),
		CancelDatabaseTask:  NewCancelDatabaseTaskHandler(e.CancelDatabaseTask, mux, decoder, encoder, errhandler, formatter),
		GenHTTPOpenapi3JSON: http.FileServer(fileSystemGenHTTPOpenapi3JSON),
	}
}

// Service returns the name of the service served.
func (s *Server) Service() string { return "control-plane" }

// Use wraps the server handlers with the given middleware.
func (s *Server) Use(m func(http.Handler) http.Handler) {
	s.InitCluster = m(s.InitCluster)
	s.JoinCluster = m(s.JoinCluster)
	s.GetJoinToken = m(s.GetJoinToken)
	s.GetJoinOptions = m(s.GetJoinOptions)
	s.GetCluster = m(s.GetCluster)
	s.ListHosts = m(s.ListHosts)
	s.GetHost = m(s.GetHost)
	s.RemoveHost = m(s.RemoveHost)
	s.ListDatabases = m(s.ListDatabases)
	s.CreateDatabase = m(s.CreateDatabase)
	s.GetDatabase = m(s.GetDatabase)
	s.UpdateDatabase = m(s.UpdateDatabase)
	s.DeleteDatabase = m(s.DeleteDatabase)
	s.BackupDatabaseNode = m(s.BackupDatabaseNode)
	s.ListDatabaseTasks = m(s.ListDatabaseTasks)
	s.GetDatabaseTask = m(s.GetDatabaseTask)
	s.GetDatabaseTaskLog = m(s.GetDatabaseTaskLog)
	s.RestoreDatabase = m(s.RestoreDatabase)
	s.GetVersion = m(s.GetVersion)
	s.RestartInstance = m(s.RestartInstance)
	s.StopInstance = m(s.StopInstance)
	s.StartInstance = m(s.StartInstance)
	s.CancelDatabaseTask = m(s.CancelDatabaseTask)
}

// MethodNames returns the methods served.
func (s *Server) MethodNames() []string { return controlplane.MethodNames[:] }

// Mount configures the mux to serve the control-plane endpoints.
func Mount(mux goahttp.Muxer, h *Server) {
	MountInitClusterHandler(mux, h.InitCluster)
	MountJoinClusterHandler(mux, h.JoinCluster)
	MountGetJoinTokenHandler(mux, h.GetJoinToken)
	MountGetJoinOptionsHandler(mux, h.GetJoinOptions)
	MountGetClusterHandler(mux, h.GetCluster)
	MountListHostsHandler(mux, h.ListHosts)
	MountGetHostHandler(mux, h.GetHost)
	MountRemoveHostHandler(mux, h.RemoveHost)
	MountListDatabasesHandler(mux, h.ListDatabases)
	MountCreateDatabaseHandler(mux, h.CreateDatabase)
	MountGetDatabaseHandler(mux, h.GetDatabase)
	MountUpdateDatabaseHandler(mux, h.UpdateDatabase)
	MountDeleteDatabaseHandler(mux, h.DeleteDatabase)
	MountBackupDatabaseNodeHandler(mux, h.BackupDatabaseNode)
	MountListDatabaseTasksHandler(mux, h.ListDatabaseTasks)
	MountGetDatabaseTaskHandler(mux, h.GetDatabaseTask)
	MountGetDatabaseTaskLogHandler(mux, h.GetDatabaseTaskLog)
	MountRestoreDatabaseHandler(mux, h.RestoreDatabase)
	MountGetVersionHandler(mux, h.GetVersion)
	MountRestartInstanceHandler(mux, h.RestartInstance)
	MountStopInstanceHandler(mux, h.StopInstance)
	MountStartInstanceHandler(mux, h.StartInstance)
	MountCancelDatabaseTaskHandler(mux, h.CancelDatabaseTask)
	MountGenHTTPOpenapi3JSON(mux, http.StripPrefix("/v1", h.GenHTTPOpenapi3JSON))
}

// Mount configures the mux to serve the control-plane endpoints.
func (s *Server) Mount(mux goahttp.Muxer) {
	Mount(mux, s)
}

// MountInitClusterHandler configures the mux to serve the "control-plane"
// service "init-cluster" endpoint.
func MountInitClusterHandler(mux goahttp.Muxer, h http.Handler) {
	f, ok := h.(http.HandlerFunc)
	if !ok {
		f = func(w http.ResponseWriter, r *http.Request) {
			h.ServeHTTP(w, r)
		}
	}
	mux.Handle("GET", "/v1/cluster/init", f)
}

// NewInitClusterHandler creates a HTTP handler which loads the HTTP request
// and calls the "control-plane" service "init-cluster" endpoint.
func NewInitClusterHandler(
	endpoint goa.Endpoint,
	mux goahttp.Muxer,
	decoder func(*http.Request) goahttp.Decoder,
	encoder func(context.Context, http.ResponseWriter) goahttp.Encoder,
	errhandler func(context.Context, http.ResponseWriter, error),
	formatter func(ctx context.Context, err error) goahttp.Statuser,
) http.Handler {
	var (
		encodeResponse = EncodeInitClusterResponse(encoder)
		encodeError    = EncodeInitClusterError(encoder, formatter)
	)
	return http.HandlerFunc(func(w http.ResponseWriter, r *http.Request) {
		ctx := context.WithValue(r.Context(), goahttp.AcceptTypeKey, r.Header.Get("Accept"))
		ctx = context.WithValue(ctx, goa.MethodKey, "init-cluster")
		ctx = context.WithValue(ctx, goa.ServiceKey, "control-plane")
		var err error
		res, err := endpoint(ctx, nil)
		if err != nil {
			if err := encodeError(ctx, w, err); err != nil {
				errhandler(ctx, w, err)
			}
			return
		}
		if err := encodeResponse(ctx, w, res); err != nil {
			errhandler(ctx, w, err)
		}
	})
}

// MountJoinClusterHandler configures the mux to serve the "control-plane"
// service "join-cluster" endpoint.
func MountJoinClusterHandler(mux goahttp.Muxer, h http.Handler) {
	f, ok := h.(http.HandlerFunc)
	if !ok {
		f = func(w http.ResponseWriter, r *http.Request) {
			h.ServeHTTP(w, r)
		}
	}
	mux.Handle("POST", "/v1/cluster/join", f)
}

// NewJoinClusterHandler creates a HTTP handler which loads the HTTP request
// and calls the "control-plane" service "join-cluster" endpoint.
func NewJoinClusterHandler(
	endpoint goa.Endpoint,
	mux goahttp.Muxer,
	decoder func(*http.Request) goahttp.Decoder,
	encoder func(context.Context, http.ResponseWriter) goahttp.Encoder,
	errhandler func(context.Context, http.ResponseWriter, error),
	formatter func(ctx context.Context, err error) goahttp.Statuser,
) http.Handler {
	var (
		decodeRequest  = DecodeJoinClusterRequest(mux, decoder)
		encodeResponse = EncodeJoinClusterResponse(encoder)
		encodeError    = EncodeJoinClusterError(encoder, formatter)
	)
	return http.HandlerFunc(func(w http.ResponseWriter, r *http.Request) {
		ctx := context.WithValue(r.Context(), goahttp.AcceptTypeKey, r.Header.Get("Accept"))
		ctx = context.WithValue(ctx, goa.MethodKey, "join-cluster")
		ctx = context.WithValue(ctx, goa.ServiceKey, "control-plane")
		payload, err := decodeRequest(r)
		if err != nil {
			if err := encodeError(ctx, w, err); err != nil {
				errhandler(ctx, w, err)
			}
			return
		}
		res, err := endpoint(ctx, payload)
		if err != nil {
			if err := encodeError(ctx, w, err); err != nil {
				errhandler(ctx, w, err)
			}
			return
		}
		if err := encodeResponse(ctx, w, res); err != nil {
			errhandler(ctx, w, err)
		}
	})
}

// MountGetJoinTokenHandler configures the mux to serve the "control-plane"
// service "get-join-token" endpoint.
func MountGetJoinTokenHandler(mux goahttp.Muxer, h http.Handler) {
	f, ok := h.(http.HandlerFunc)
	if !ok {
		f = func(w http.ResponseWriter, r *http.Request) {
			h.ServeHTTP(w, r)
		}
	}
	mux.Handle("GET", "/v1/cluster/join-token", f)
}

// NewGetJoinTokenHandler creates a HTTP handler which loads the HTTP request
// and calls the "control-plane" service "get-join-token" endpoint.
func NewGetJoinTokenHandler(
	endpoint goa.Endpoint,
	mux goahttp.Muxer,
	decoder func(*http.Request) goahttp.Decoder,
	encoder func(context.Context, http.ResponseWriter) goahttp.Encoder,
	errhandler func(context.Context, http.ResponseWriter, error),
	formatter func(ctx context.Context, err error) goahttp.Statuser,
) http.Handler {
	var (
		encodeResponse = EncodeGetJoinTokenResponse(encoder)
		encodeError    = EncodeGetJoinTokenError(encoder, formatter)
	)
	return http.HandlerFunc(func(w http.ResponseWriter, r *http.Request) {
		ctx := context.WithValue(r.Context(), goahttp.AcceptTypeKey, r.Header.Get("Accept"))
		ctx = context.WithValue(ctx, goa.MethodKey, "get-join-token")
		ctx = context.WithValue(ctx, goa.ServiceKey, "control-plane")
		var err error
		res, err := endpoint(ctx, nil)
		if err != nil {
			if err := encodeError(ctx, w, err); err != nil {
				errhandler(ctx, w, err)
			}
			return
		}
		if err := encodeResponse(ctx, w, res); err != nil {
			errhandler(ctx, w, err)
		}
	})
}

// MountGetJoinOptionsHandler configures the mux to serve the "control-plane"
// service "get-join-options" endpoint.
func MountGetJoinOptionsHandler(mux goahttp.Muxer, h http.Handler) {
	f, ok := h.(http.HandlerFunc)
	if !ok {
		f = func(w http.ResponseWriter, r *http.Request) {
			h.ServeHTTP(w, r)
		}
	}
	mux.Handle("POST", "/v1/internal/cluster/join-options", f)
}

// NewGetJoinOptionsHandler creates a HTTP handler which loads the HTTP request
// and calls the "control-plane" service "get-join-options" endpoint.
func NewGetJoinOptionsHandler(
	endpoint goa.Endpoint,
	mux goahttp.Muxer,
	decoder func(*http.Request) goahttp.Decoder,
	encoder func(context.Context, http.ResponseWriter) goahttp.Encoder,
	errhandler func(context.Context, http.ResponseWriter, error),
	formatter func(ctx context.Context, err error) goahttp.Statuser,
) http.Handler {
	var (
		decodeRequest  = DecodeGetJoinOptionsRequest(mux, decoder)
		encodeResponse = EncodeGetJoinOptionsResponse(encoder)
		encodeError    = EncodeGetJoinOptionsError(encoder, formatter)
	)
	return http.HandlerFunc(func(w http.ResponseWriter, r *http.Request) {
		ctx := context.WithValue(r.Context(), goahttp.AcceptTypeKey, r.Header.Get("Accept"))
		ctx = context.WithValue(ctx, goa.MethodKey, "get-join-options")
		ctx = context.WithValue(ctx, goa.ServiceKey, "control-plane")
		payload, err := decodeRequest(r)
		if err != nil {
			if err := encodeError(ctx, w, err); err != nil {
				errhandler(ctx, w, err)
			}
			return
		}
		res, err := endpoint(ctx, payload)
		if err != nil {
			if err := encodeError(ctx, w, err); err != nil {
				errhandler(ctx, w, err)
			}
			return
		}
		if err := encodeResponse(ctx, w, res); err != nil {
			errhandler(ctx, w, err)
		}
	})
}

// MountGetClusterHandler configures the mux to serve the "control-plane"
// service "get-cluster" endpoint.
func MountGetClusterHandler(mux goahttp.Muxer, h http.Handler) {
	f, ok := h.(http.HandlerFunc)
	if !ok {
		f = func(w http.ResponseWriter, r *http.Request) {
			h.ServeHTTP(w, r)
		}
	}
	mux.Handle("GET", "/v1/cluster", f)
}

// NewGetClusterHandler creates a HTTP handler which loads the HTTP request and
// calls the "control-plane" service "get-cluster" endpoint.
func NewGetClusterHandler(
	endpoint goa.Endpoint,
	mux goahttp.Muxer,
	decoder func(*http.Request) goahttp.Decoder,
	encoder func(context.Context, http.ResponseWriter) goahttp.Encoder,
	errhandler func(context.Context, http.ResponseWriter, error),
	formatter func(ctx context.Context, err error) goahttp.Statuser,
) http.Handler {
	var (
		encodeResponse = EncodeGetClusterResponse(encoder)
		encodeError    = EncodeGetClusterError(encoder, formatter)
	)
	return http.HandlerFunc(func(w http.ResponseWriter, r *http.Request) {
		ctx := context.WithValue(r.Context(), goahttp.AcceptTypeKey, r.Header.Get("Accept"))
		ctx = context.WithValue(ctx, goa.MethodKey, "get-cluster")
		ctx = context.WithValue(ctx, goa.ServiceKey, "control-plane")
		var err error
		res, err := endpoint(ctx, nil)
		if err != nil {
			if err := encodeError(ctx, w, err); err != nil {
				errhandler(ctx, w, err)
			}
			return
		}
		if err := encodeResponse(ctx, w, res); err != nil {
			errhandler(ctx, w, err)
		}
	})
}

// MountListHostsHandler configures the mux to serve the "control-plane"
// service "list-hosts" endpoint.
func MountListHostsHandler(mux goahttp.Muxer, h http.Handler) {
	f, ok := h.(http.HandlerFunc)
	if !ok {
		f = func(w http.ResponseWriter, r *http.Request) {
			h.ServeHTTP(w, r)
		}
	}
	mux.Handle("GET", "/v1/hosts", f)
}

// NewListHostsHandler creates a HTTP handler which loads the HTTP request and
// calls the "control-plane" service "list-hosts" endpoint.
func NewListHostsHandler(
	endpoint goa.Endpoint,
	mux goahttp.Muxer,
	decoder func(*http.Request) goahttp.Decoder,
	encoder func(context.Context, http.ResponseWriter) goahttp.Encoder,
	errhandler func(context.Context, http.ResponseWriter, error),
	formatter func(ctx context.Context, err error) goahttp.Statuser,
) http.Handler {
	var (
		encodeResponse = EncodeListHostsResponse(encoder)
		encodeError    = EncodeListHostsError(encoder, formatter)
	)
	return http.HandlerFunc(func(w http.ResponseWriter, r *http.Request) {
		ctx := context.WithValue(r.Context(), goahttp.AcceptTypeKey, r.Header.Get("Accept"))
		ctx = context.WithValue(ctx, goa.MethodKey, "list-hosts")
		ctx = context.WithValue(ctx, goa.ServiceKey, "control-plane")
		var err error
		res, err := endpoint(ctx, nil)
		if err != nil {
			if err := encodeError(ctx, w, err); err != nil {
				errhandler(ctx, w, err)
			}
			return
		}
		if err := encodeResponse(ctx, w, res); err != nil {
			errhandler(ctx, w, err)
		}
	})
}

// MountGetHostHandler configures the mux to serve the "control-plane" service
// "get-host" endpoint.
func MountGetHostHandler(mux goahttp.Muxer, h http.Handler) {
	f, ok := h.(http.HandlerFunc)
	if !ok {
		f = func(w http.ResponseWriter, r *http.Request) {
			h.ServeHTTP(w, r)
		}
	}
	mux.Handle("GET", "/v1/hosts/{host_id}", f)
}

// NewGetHostHandler creates a HTTP handler which loads the HTTP request and
// calls the "control-plane" service "get-host" endpoint.
func NewGetHostHandler(
	endpoint goa.Endpoint,
	mux goahttp.Muxer,
	decoder func(*http.Request) goahttp.Decoder,
	encoder func(context.Context, http.ResponseWriter) goahttp.Encoder,
	errhandler func(context.Context, http.ResponseWriter, error),
	formatter func(ctx context.Context, err error) goahttp.Statuser,
) http.Handler {
	var (
		decodeRequest  = DecodeGetHostRequest(mux, decoder)
		encodeResponse = EncodeGetHostResponse(encoder)
		encodeError    = EncodeGetHostError(encoder, formatter)
	)
	return http.HandlerFunc(func(w http.ResponseWriter, r *http.Request) {
		ctx := context.WithValue(r.Context(), goahttp.AcceptTypeKey, r.Header.Get("Accept"))
		ctx = context.WithValue(ctx, goa.MethodKey, "get-host")
		ctx = context.WithValue(ctx, goa.ServiceKey, "control-plane")
		payload, err := decodeRequest(r)
		if err != nil {
			if err := encodeError(ctx, w, err); err != nil {
				errhandler(ctx, w, err)
			}
			return
		}
		res, err := endpoint(ctx, payload)
		if err != nil {
			if err := encodeError(ctx, w, err); err != nil {
				errhandler(ctx, w, err)
			}
			return
		}
		if err := encodeResponse(ctx, w, res); err != nil {
			errhandler(ctx, w, err)
		}
	})
}

// MountRemoveHostHandler configures the mux to serve the "control-plane"
// service "remove-host" endpoint.
func MountRemoveHostHandler(mux goahttp.Muxer, h http.Handler) {
	f, ok := h.(http.HandlerFunc)
	if !ok {
		f = func(w http.ResponseWriter, r *http.Request) {
			h.ServeHTTP(w, r)
		}
	}
	mux.Handle("DELETE", "/v1/hosts/{host_id}", f)
}

// NewRemoveHostHandler creates a HTTP handler which loads the HTTP request and
// calls the "control-plane" service "remove-host" endpoint.
func NewRemoveHostHandler(
	endpoint goa.Endpoint,
	mux goahttp.Muxer,
	decoder func(*http.Request) goahttp.Decoder,
	encoder func(context.Context, http.ResponseWriter) goahttp.Encoder,
	errhandler func(context.Context, http.ResponseWriter, error),
	formatter func(ctx context.Context, err error) goahttp.Statuser,
) http.Handler {
	var (
		decodeRequest  = DecodeRemoveHostRequest(mux, decoder)
		encodeResponse = EncodeRemoveHostResponse(encoder)
		encodeError    = EncodeRemoveHostError(encoder, formatter)
	)
	return http.HandlerFunc(func(w http.ResponseWriter, r *http.Request) {
		ctx := context.WithValue(r.Context(), goahttp.AcceptTypeKey, r.Header.Get("Accept"))
		ctx = context.WithValue(ctx, goa.MethodKey, "remove-host")
		ctx = context.WithValue(ctx, goa.ServiceKey, "control-plane")
		payload, err := decodeRequest(r)
		if err != nil {
			if err := encodeError(ctx, w, err); err != nil {
				errhandler(ctx, w, err)
			}
			return
		}
		res, err := endpoint(ctx, payload)
		if err != nil {
			if err := encodeError(ctx, w, err); err != nil {
				errhandler(ctx, w, err)
			}
			return
		}
		if err := encodeResponse(ctx, w, res); err != nil {
			errhandler(ctx, w, err)
		}
	})
}

// MountListDatabasesHandler configures the mux to serve the "control-plane"
// service "list-databases" endpoint.
func MountListDatabasesHandler(mux goahttp.Muxer, h http.Handler) {
	f, ok := h.(http.HandlerFunc)
	if !ok {
		f = func(w http.ResponseWriter, r *http.Request) {
			h.ServeHTTP(w, r)
		}
	}
	mux.Handle("GET", "/v1/databases", f)
}

// NewListDatabasesHandler creates a HTTP handler which loads the HTTP request
// and calls the "control-plane" service "list-databases" endpoint.
func NewListDatabasesHandler(
	endpoint goa.Endpoint,
	mux goahttp.Muxer,
	decoder func(*http.Request) goahttp.Decoder,
	encoder func(context.Context, http.ResponseWriter) goahttp.Encoder,
	errhandler func(context.Context, http.ResponseWriter, error),
	formatter func(ctx context.Context, err error) goahttp.Statuser,
) http.Handler {
	var (
		encodeResponse = EncodeListDatabasesResponse(encoder)
		encodeError    = EncodeListDatabasesError(encoder, formatter)
	)
	return http.HandlerFunc(func(w http.ResponseWriter, r *http.Request) {
		ctx := context.WithValue(r.Context(), goahttp.AcceptTypeKey, r.Header.Get("Accept"))
		ctx = context.WithValue(ctx, goa.MethodKey, "list-databases")
		ctx = context.WithValue(ctx, goa.ServiceKey, "control-plane")
		var err error
		res, err := endpoint(ctx, nil)
		if err != nil {
			if err := encodeError(ctx, w, err); err != nil {
				errhandler(ctx, w, err)
			}
			return
		}
		if err := encodeResponse(ctx, w, res); err != nil {
			errhandler(ctx, w, err)
		}
	})
}

// MountCreateDatabaseHandler configures the mux to serve the "control-plane"
// service "create-database" endpoint.
func MountCreateDatabaseHandler(mux goahttp.Muxer, h http.Handler) {
	f, ok := h.(http.HandlerFunc)
	if !ok {
		f = func(w http.ResponseWriter, r *http.Request) {
			h.ServeHTTP(w, r)
		}
	}
	mux.Handle("POST", "/v1/databases", f)
}

// NewCreateDatabaseHandler creates a HTTP handler which loads the HTTP request
// and calls the "control-plane" service "create-database" endpoint.
func NewCreateDatabaseHandler(
	endpoint goa.Endpoint,
	mux goahttp.Muxer,
	decoder func(*http.Request) goahttp.Decoder,
	encoder func(context.Context, http.ResponseWriter) goahttp.Encoder,
	errhandler func(context.Context, http.ResponseWriter, error),
	formatter func(ctx context.Context, err error) goahttp.Statuser,
) http.Handler {
	var (
		decodeRequest  = DecodeCreateDatabaseRequest(mux, decoder)
		encodeResponse = EncodeCreateDatabaseResponse(encoder)
		encodeError    = EncodeCreateDatabaseError(encoder, formatter)
	)
	return http.HandlerFunc(func(w http.ResponseWriter, r *http.Request) {
		ctx := context.WithValue(r.Context(), goahttp.AcceptTypeKey, r.Header.Get("Accept"))
		ctx = context.WithValue(ctx, goa.MethodKey, "create-database")
		ctx = context.WithValue(ctx, goa.ServiceKey, "control-plane")
		payload, err := decodeRequest(r)
		if err != nil {
			if err := encodeError(ctx, w, err); err != nil {
				errhandler(ctx, w, err)
			}
			return
		}
		res, err := endpoint(ctx, payload)
		if err != nil {
			if err := encodeError(ctx, w, err); err != nil {
				errhandler(ctx, w, err)
			}
			return
		}
		if err := encodeResponse(ctx, w, res); err != nil {
			errhandler(ctx, w, err)
		}
	})
}

// MountGetDatabaseHandler configures the mux to serve the "control-plane"
// service "get-database" endpoint.
func MountGetDatabaseHandler(mux goahttp.Muxer, h http.Handler) {
	f, ok := h.(http.HandlerFunc)
	if !ok {
		f = func(w http.ResponseWriter, r *http.Request) {
			h.ServeHTTP(w, r)
		}
	}
	mux.Handle("GET", "/v1/databases/{database_id}", f)
}

// NewGetDatabaseHandler creates a HTTP handler which loads the HTTP request
// and calls the "control-plane" service "get-database" endpoint.
func NewGetDatabaseHandler(
	endpoint goa.Endpoint,
	mux goahttp.Muxer,
	decoder func(*http.Request) goahttp.Decoder,
	encoder func(context.Context, http.ResponseWriter) goahttp.Encoder,
	errhandler func(context.Context, http.ResponseWriter, error),
	formatter func(ctx context.Context, err error) goahttp.Statuser,
) http.Handler {
	var (
		decodeRequest  = DecodeGetDatabaseRequest(mux, decoder)
		encodeResponse = EncodeGetDatabaseResponse(encoder)
		encodeError    = EncodeGetDatabaseError(encoder, formatter)
	)
	return http.HandlerFunc(func(w http.ResponseWriter, r *http.Request) {
		ctx := context.WithValue(r.Context(), goahttp.AcceptTypeKey, r.Header.Get("Accept"))
		ctx = context.WithValue(ctx, goa.MethodKey, "get-database")
		ctx = context.WithValue(ctx, goa.ServiceKey, "control-plane")
		payload, err := decodeRequest(r)
		if err != nil {
			if err := encodeError(ctx, w, err); err != nil {
				errhandler(ctx, w, err)
			}
			return
		}
		res, err := endpoint(ctx, payload)
		if err != nil {
			if err := encodeError(ctx, w, err); err != nil {
				errhandler(ctx, w, err)
			}
			return
		}
		if err := encodeResponse(ctx, w, res); err != nil {
			errhandler(ctx, w, err)
		}
	})
}

// MountUpdateDatabaseHandler configures the mux to serve the "control-plane"
// service "update-database" endpoint.
func MountUpdateDatabaseHandler(mux goahttp.Muxer, h http.Handler) {
	f, ok := h.(http.HandlerFunc)
	if !ok {
		f = func(w http.ResponseWriter, r *http.Request) {
			h.ServeHTTP(w, r)
		}
	}
	mux.Handle("POST", "/v1/databases/{database_id}", f)
}

// NewUpdateDatabaseHandler creates a HTTP handler which loads the HTTP request
// and calls the "control-plane" service "update-database" endpoint.
func NewUpdateDatabaseHandler(
	endpoint goa.Endpoint,
	mux goahttp.Muxer,
	decoder func(*http.Request) goahttp.Decoder,
	encoder func(context.Context, http.ResponseWriter) goahttp.Encoder,
	errhandler func(context.Context, http.ResponseWriter, error),
	formatter func(ctx context.Context, err error) goahttp.Statuser,
) http.Handler {
	var (
		decodeRequest  = DecodeUpdateDatabaseRequest(mux, decoder)
		encodeResponse = EncodeUpdateDatabaseResponse(encoder)
		encodeError    = EncodeUpdateDatabaseError(encoder, formatter)
	)
	return http.HandlerFunc(func(w http.ResponseWriter, r *http.Request) {
		ctx := context.WithValue(r.Context(), goahttp.AcceptTypeKey, r.Header.Get("Accept"))
		ctx = context.WithValue(ctx, goa.MethodKey, "update-database")
		ctx = context.WithValue(ctx, goa.ServiceKey, "control-plane")
		payload, err := decodeRequest(r)
		if err != nil {
			if err := encodeError(ctx, w, err); err != nil {
				errhandler(ctx, w, err)
			}
			return
		}
		res, err := endpoint(ctx, payload)
		if err != nil {
			if err := encodeError(ctx, w, err); err != nil {
				errhandler(ctx, w, err)
			}
			return
		}
		if err := encodeResponse(ctx, w, res); err != nil {
			errhandler(ctx, w, err)
		}
	})
}

// MountDeleteDatabaseHandler configures the mux to serve the "control-plane"
// service "delete-database" endpoint.
func MountDeleteDatabaseHandler(mux goahttp.Muxer, h http.Handler) {
	f, ok := h.(http.HandlerFunc)
	if !ok {
		f = func(w http.ResponseWriter, r *http.Request) {
			h.ServeHTTP(w, r)
		}
	}
	mux.Handle("DELETE", "/v1/databases/{database_id}", f)
}

// NewDeleteDatabaseHandler creates a HTTP handler which loads the HTTP request
// and calls the "control-plane" service "delete-database" endpoint.
func NewDeleteDatabaseHandler(
	endpoint goa.Endpoint,
	mux goahttp.Muxer,
	decoder func(*http.Request) goahttp.Decoder,
	encoder func(context.Context, http.ResponseWriter) goahttp.Encoder,
	errhandler func(context.Context, http.ResponseWriter, error),
	formatter func(ctx context.Context, err error) goahttp.Statuser,
) http.Handler {
	var (
		decodeRequest  = DecodeDeleteDatabaseRequest(mux, decoder)
		encodeResponse = EncodeDeleteDatabaseResponse(encoder)
		encodeError    = EncodeDeleteDatabaseError(encoder, formatter)
	)
	return http.HandlerFunc(func(w http.ResponseWriter, r *http.Request) {
		ctx := context.WithValue(r.Context(), goahttp.AcceptTypeKey, r.Header.Get("Accept"))
		ctx = context.WithValue(ctx, goa.MethodKey, "delete-database")
		ctx = context.WithValue(ctx, goa.ServiceKey, "control-plane")
		payload, err := decodeRequest(r)
		if err != nil {
			if err := encodeError(ctx, w, err); err != nil {
				errhandler(ctx, w, err)
			}
			return
		}
		res, err := endpoint(ctx, payload)
		if err != nil {
			if err := encodeError(ctx, w, err); err != nil {
				errhandler(ctx, w, err)
			}
			return
		}
		if err := encodeResponse(ctx, w, res); err != nil {
			errhandler(ctx, w, err)
		}
	})
}

// MountBackupDatabaseNodeHandler configures the mux to serve the
// "control-plane" service "backup-database-node" endpoint.
func MountBackupDatabaseNodeHandler(mux goahttp.Muxer, h http.Handler) {
	f, ok := h.(http.HandlerFunc)
	if !ok {
		f = func(w http.ResponseWriter, r *http.Request) {
			h.ServeHTTP(w, r)
		}
	}
	mux.Handle("POST", "/v1/databases/{database_id}/nodes/{node_name}/backups", f)
}

// NewBackupDatabaseNodeHandler creates a HTTP handler which loads the HTTP
// request and calls the "control-plane" service "backup-database-node"
// endpoint.
func NewBackupDatabaseNodeHandler(
	endpoint goa.Endpoint,
	mux goahttp.Muxer,
	decoder func(*http.Request) goahttp.Decoder,
	encoder func(context.Context, http.ResponseWriter) goahttp.Encoder,
	errhandler func(context.Context, http.ResponseWriter, error),
	formatter func(ctx context.Context, err error) goahttp.Statuser,
) http.Handler {
	var (
		decodeRequest  = DecodeBackupDatabaseNodeRequest(mux, decoder)
		encodeResponse = EncodeBackupDatabaseNodeResponse(encoder)
		encodeError    = EncodeBackupDatabaseNodeError(encoder, formatter)
	)
	return http.HandlerFunc(func(w http.ResponseWriter, r *http.Request) {
		ctx := context.WithValue(r.Context(), goahttp.AcceptTypeKey, r.Header.Get("Accept"))
		ctx = context.WithValue(ctx, goa.MethodKey, "backup-database-node")
		ctx = context.WithValue(ctx, goa.ServiceKey, "control-plane")
		payload, err := decodeRequest(r)
		if err != nil {
			if err := encodeError(ctx, w, err); err != nil {
				errhandler(ctx, w, err)
			}
			return
		}
		res, err := endpoint(ctx, payload)
		if err != nil {
			if err := encodeError(ctx, w, err); err != nil {
				errhandler(ctx, w, err)
			}
			return
		}
		if err := encodeResponse(ctx, w, res); err != nil {
			errhandler(ctx, w, err)
		}
	})
}

// MountListDatabaseTasksHandler configures the mux to serve the
// "control-plane" service "list-database-tasks" endpoint.
func MountListDatabaseTasksHandler(mux goahttp.Muxer, h http.Handler) {
	f, ok := h.(http.HandlerFunc)
	if !ok {
		f = func(w http.ResponseWriter, r *http.Request) {
			h.ServeHTTP(w, r)
		}
	}
	mux.Handle("GET", "/v1/databases/{database_id}/tasks", f)
}

// NewListDatabaseTasksHandler creates a HTTP handler which loads the HTTP
// request and calls the "control-plane" service "list-database-tasks" endpoint.
func NewListDatabaseTasksHandler(
	endpoint goa.Endpoint,
	mux goahttp.Muxer,
	decoder func(*http.Request) goahttp.Decoder,
	encoder func(context.Context, http.ResponseWriter) goahttp.Encoder,
	errhandler func(context.Context, http.ResponseWriter, error),
	formatter func(ctx context.Context, err error) goahttp.Statuser,
) http.Handler {
	var (
		decodeRequest  = DecodeListDatabaseTasksRequest(mux, decoder)
		encodeResponse = EncodeListDatabaseTasksResponse(encoder)
		encodeError    = EncodeListDatabaseTasksError(encoder, formatter)
	)
	return http.HandlerFunc(func(w http.ResponseWriter, r *http.Request) {
		ctx := context.WithValue(r.Context(), goahttp.AcceptTypeKey, r.Header.Get("Accept"))
		ctx = context.WithValue(ctx, goa.MethodKey, "list-database-tasks")
		ctx = context.WithValue(ctx, goa.ServiceKey, "control-plane")
		payload, err := decodeRequest(r)
		if err != nil {
			if err := encodeError(ctx, w, err); err != nil {
				errhandler(ctx, w, err)
			}
			return
		}
		res, err := endpoint(ctx, payload)
		if err != nil {
			if err := encodeError(ctx, w, err); err != nil {
				errhandler(ctx, w, err)
			}
			return
		}
		if err := encodeResponse(ctx, w, res); err != nil {
			errhandler(ctx, w, err)
		}
	})
}

// MountGetDatabaseTaskHandler configures the mux to serve the "control-plane"
// service "get-database-task" endpoint.
func MountGetDatabaseTaskHandler(mux goahttp.Muxer, h http.Handler) {
	f, ok := h.(http.HandlerFunc)
	if !ok {
		f = func(w http.ResponseWriter, r *http.Request) {
			h.ServeHTTP(w, r)
		}
	}
	mux.Handle("GET", "/v1/databases/{database_id}/tasks/{task_id}", f)
}

// NewGetDatabaseTaskHandler creates a HTTP handler which loads the HTTP
// request and calls the "control-plane" service "get-database-task" endpoint.
func NewGetDatabaseTaskHandler(
	endpoint goa.Endpoint,
	mux goahttp.Muxer,
	decoder func(*http.Request) goahttp.Decoder,
	encoder func(context.Context, http.ResponseWriter) goahttp.Encoder,
	errhandler func(context.Context, http.ResponseWriter, error),
	formatter func(ctx context.Context, err error) goahttp.Statuser,
) http.Handler {
	var (
		decodeRequest  = DecodeGetDatabaseTaskRequest(mux, decoder)
		encodeResponse = EncodeGetDatabaseTaskResponse(encoder)
		encodeError    = EncodeGetDatabaseTaskError(encoder, formatter)
	)
	return http.HandlerFunc(func(w http.ResponseWriter, r *http.Request) {
		ctx := context.WithValue(r.Context(), goahttp.AcceptTypeKey, r.Header.Get("Accept"))
		ctx = context.WithValue(ctx, goa.MethodKey, "get-database-task")
		ctx = context.WithValue(ctx, goa.ServiceKey, "control-plane")
		payload, err := decodeRequest(r)
		if err != nil {
			if err := encodeError(ctx, w, err); err != nil {
				errhandler(ctx, w, err)
			}
			return
		}
		res, err := endpoint(ctx, payload)
		if err != nil {
			if err := encodeError(ctx, w, err); err != nil {
				errhandler(ctx, w, err)
			}
			return
		}
		if err := encodeResponse(ctx, w, res); err != nil {
			errhandler(ctx, w, err)
		}
	})
}

// MountGetDatabaseTaskLogHandler configures the mux to serve the
// "control-plane" service "get-database-task-log" endpoint.
func MountGetDatabaseTaskLogHandler(mux goahttp.Muxer, h http.Handler) {
	f, ok := h.(http.HandlerFunc)
	if !ok {
		f = func(w http.ResponseWriter, r *http.Request) {
			h.ServeHTTP(w, r)
		}
	}
	mux.Handle("GET", "/v1/databases/{database_id}/tasks/{task_id}/log", f)
}

// NewGetDatabaseTaskLogHandler creates a HTTP handler which loads the HTTP
// request and calls the "control-plane" service "get-database-task-log"
// endpoint.
func NewGetDatabaseTaskLogHandler(
	endpoint goa.Endpoint,
	mux goahttp.Muxer,
	decoder func(*http.Request) goahttp.Decoder,
	encoder func(context.Context, http.ResponseWriter) goahttp.Encoder,
	errhandler func(context.Context, http.ResponseWriter, error),
	formatter func(ctx context.Context, err error) goahttp.Statuser,
) http.Handler {
	var (
		decodeRequest  = DecodeGetDatabaseTaskLogRequest(mux, decoder)
		encodeResponse = EncodeGetDatabaseTaskLogResponse(encoder)
		encodeError    = EncodeGetDatabaseTaskLogError(encoder, formatter)
	)
	return http.HandlerFunc(func(w http.ResponseWriter, r *http.Request) {
		ctx := context.WithValue(r.Context(), goahttp.AcceptTypeKey, r.Header.Get("Accept"))
		ctx = context.WithValue(ctx, goa.MethodKey, "get-database-task-log")
		ctx = context.WithValue(ctx, goa.ServiceKey, "control-plane")
		payload, err := decodeRequest(r)
		if err != nil {
			if err := encodeError(ctx, w, err); err != nil {
				errhandler(ctx, w, err)
			}
			return
		}
		res, err := endpoint(ctx, payload)
		if err != nil {
			if err := encodeError(ctx, w, err); err != nil {
				errhandler(ctx, w, err)
			}
			return
		}
		if err := encodeResponse(ctx, w, res); err != nil {
			errhandler(ctx, w, err)
		}
	})
}

// MountRestoreDatabaseHandler configures the mux to serve the "control-plane"
// service "restore-database" endpoint.
func MountRestoreDatabaseHandler(mux goahttp.Muxer, h http.Handler) {
	f, ok := h.(http.HandlerFunc)
	if !ok {
		f = func(w http.ResponseWriter, r *http.Request) {
			h.ServeHTTP(w, r)
		}
	}
	mux.Handle("POST", "/v1/databases/{database_id}/restore", f)
}

// NewRestoreDatabaseHandler creates a HTTP handler which loads the HTTP
// request and calls the "control-plane" service "restore-database" endpoint.
func NewRestoreDatabaseHandler(
	endpoint goa.Endpoint,
	mux goahttp.Muxer,
	decoder func(*http.Request) goahttp.Decoder,
	encoder func(context.Context, http.ResponseWriter) goahttp.Encoder,
	errhandler func(context.Context, http.ResponseWriter, error),
	formatter func(ctx context.Context, err error) goahttp.Statuser,
) http.Handler {
	var (
		decodeRequest  = DecodeRestoreDatabaseRequest(mux, decoder)
		encodeResponse = EncodeRestoreDatabaseResponse(encoder)
		encodeError    = EncodeRestoreDatabaseError(encoder, formatter)
	)
	return http.HandlerFunc(func(w http.ResponseWriter, r *http.Request) {
		ctx := context.WithValue(r.Context(), goahttp.AcceptTypeKey, r.Header.Get("Accept"))
		ctx = context.WithValue(ctx, goa.MethodKey, "restore-database")
		ctx = context.WithValue(ctx, goa.ServiceKey, "control-plane")
		payload, err := decodeRequest(r)
		if err != nil {
			if err := encodeError(ctx, w, err); err != nil {
				errhandler(ctx, w, err)
			}
			return
		}
		res, err := endpoint(ctx, payload)
		if err != nil {
			if err := encodeError(ctx, w, err); err != nil {
				errhandler(ctx, w, err)
			}
			return
		}
		if err := encodeResponse(ctx, w, res); err != nil {
			errhandler(ctx, w, err)
		}
	})
}

// MountGetVersionHandler configures the mux to serve the "control-plane"
// service "get-version" endpoint.
func MountGetVersionHandler(mux goahttp.Muxer, h http.Handler) {
	f, ok := h.(http.HandlerFunc)
	if !ok {
		f = func(w http.ResponseWriter, r *http.Request) {
			h.ServeHTTP(w, r)
		}
	}
	mux.Handle("GET", "/v1/version", f)
}

// NewGetVersionHandler creates a HTTP handler which loads the HTTP request and
// calls the "control-plane" service "get-version" endpoint.
func NewGetVersionHandler(
	endpoint goa.Endpoint,
	mux goahttp.Muxer,
	decoder func(*http.Request) goahttp.Decoder,
	encoder func(context.Context, http.ResponseWriter) goahttp.Encoder,
	errhandler func(context.Context, http.ResponseWriter, error),
	formatter func(ctx context.Context, err error) goahttp.Statuser,
) http.Handler {
	var (
		encodeResponse = EncodeGetVersionResponse(encoder)
		encodeError    = EncodeGetVersionError(encoder, formatter)
	)
	return http.HandlerFunc(func(w http.ResponseWriter, r *http.Request) {
		ctx := context.WithValue(r.Context(), goahttp.AcceptTypeKey, r.Header.Get("Accept"))
		ctx = context.WithValue(ctx, goa.MethodKey, "get-version")
		ctx = context.WithValue(ctx, goa.ServiceKey, "control-plane")
		var err error
		res, err := endpoint(ctx, nil)
		if err != nil {
			if err := encodeError(ctx, w, err); err != nil {
				errhandler(ctx, w, err)
			}
			return
		}
		if err := encodeResponse(ctx, w, res); err != nil {
			errhandler(ctx, w, err)
		}
	})
}

// MountRestartInstanceHandler configures the mux to serve the "control-plane"
// service "restart-instance" endpoint.
func MountRestartInstanceHandler(mux goahttp.Muxer, h http.Handler) {
	f, ok := h.(http.HandlerFunc)
	if !ok {
		f = func(w http.ResponseWriter, r *http.Request) {
			h.ServeHTTP(w, r)
		}
	}
	mux.Handle("POST", "/v1/databases/{database_id}/instances/{instance_id}/restart", f)
}

// NewRestartInstanceHandler creates a HTTP handler which loads the HTTP
// request and calls the "control-plane" service "restart-instance" endpoint.
func NewRestartInstanceHandler(
	endpoint goa.Endpoint,
	mux goahttp.Muxer,
	decoder func(*http.Request) goahttp.Decoder,
	encoder func(context.Context, http.ResponseWriter) goahttp.Encoder,
	errhandler func(context.Context, http.ResponseWriter, error),
	formatter func(ctx context.Context, err error) goahttp.Statuser,
) http.Handler {
	var (
		decodeRequest  = DecodeRestartInstanceRequest(mux, decoder)
		encodeResponse = EncodeRestartInstanceResponse(encoder)
		encodeError    = EncodeRestartInstanceError(encoder, formatter)
	)
	return http.HandlerFunc(func(w http.ResponseWriter, r *http.Request) {
		ctx := context.WithValue(r.Context(), goahttp.AcceptTypeKey, r.Header.Get("Accept"))
		ctx = context.WithValue(ctx, goa.MethodKey, "restart-instance")
		ctx = context.WithValue(ctx, goa.ServiceKey, "control-plane")
		payload, err := decodeRequest(r)
		if err != nil {
			if err := encodeError(ctx, w, err); err != nil {
				errhandler(ctx, w, err)
			}
			return
		}
		res, err := endpoint(ctx, payload)
		if err != nil {
			if err := encodeError(ctx, w, err); err != nil {
				errhandler(ctx, w, err)
			}
			return
		}
		if err := encodeResponse(ctx, w, res); err != nil {
			errhandler(ctx, w, err)
		}
	})
}

// MountStopInstanceHandler configures the mux to serve the "control-plane"
// service "stop-instance" endpoint.
func MountStopInstanceHandler(mux goahttp.Muxer, h http.Handler) {
	f, ok := h.(http.HandlerFunc)
	if !ok {
		f = func(w http.ResponseWriter, r *http.Request) {
			h.ServeHTTP(w, r)
		}
	}
	mux.Handle("POST", "/v1/databases/{database_id}/instances/{instance_id}/stop-instance", f)
}

// NewStopInstanceHandler creates a HTTP handler which loads the HTTP request
// and calls the "control-plane" service "stop-instance" endpoint.
func NewStopInstanceHandler(
	endpoint goa.Endpoint,
	mux goahttp.Muxer,
	decoder func(*http.Request) goahttp.Decoder,
	encoder func(context.Context, http.ResponseWriter) goahttp.Encoder,
	errhandler func(context.Context, http.ResponseWriter, error),
	formatter func(ctx context.Context, err error) goahttp.Statuser,
) http.Handler {
	var (
		decodeRequest  = DecodeStopInstanceRequest(mux, decoder)
		encodeResponse = EncodeStopInstanceResponse(encoder)
		encodeError    = EncodeStopInstanceError(encoder, formatter)
	)
	return http.HandlerFunc(func(w http.ResponseWriter, r *http.Request) {
		ctx := context.WithValue(r.Context(), goahttp.AcceptTypeKey, r.Header.Get("Accept"))
		ctx = context.WithValue(ctx, goa.MethodKey, "stop-instance")
		ctx = context.WithValue(ctx, goa.ServiceKey, "control-plane")
		payload, err := decodeRequest(r)
		if err != nil {
			if err := encodeError(ctx, w, err); err != nil {
				errhandler(ctx, w, err)
			}
			return
		}
		res, err := endpoint(ctx, payload)
		if err != nil {
			if err := encodeError(ctx, w, err); err != nil {
				errhandler(ctx, w, err)
			}
			return
		}
		if err := encodeResponse(ctx, w, res); err != nil {
			errhandler(ctx, w, err)
		}
	})
}

// MountStartInstanceHandler configures the mux to serve the "control-plane"
// service "start-instance" endpoint.
func MountStartInstanceHandler(mux goahttp.Muxer, h http.Handler) {
	f, ok := h.(http.HandlerFunc)
	if !ok {
		f = func(w http.ResponseWriter, r *http.Request) {
			h.ServeHTTP(w, r)
		}
	}
	mux.Handle("POST", "/v1/databases/{database_id}/instances/{instance_id}/start-instance", f)
}

// NewStartInstanceHandler creates a HTTP handler which loads the HTTP request
// and calls the "control-plane" service "start-instance" endpoint.
func NewStartInstanceHandler(
	endpoint goa.Endpoint,
	mux goahttp.Muxer,
	decoder func(*http.Request) goahttp.Decoder,
	encoder func(context.Context, http.ResponseWriter) goahttp.Encoder,
	errhandler func(context.Context, http.ResponseWriter, error),
	formatter func(ctx context.Context, err error) goahttp.Statuser,
) http.Handler {
	var (
		decodeRequest  = DecodeStartInstanceRequest(mux, decoder)
		encodeResponse = EncodeStartInstanceResponse(encoder)
		encodeError    = EncodeStartInstanceError(encoder, formatter)
	)
	return http.HandlerFunc(func(w http.ResponseWriter, r *http.Request) {
		ctx := context.WithValue(r.Context(), goahttp.AcceptTypeKey, r.Header.Get("Accept"))
		ctx = context.WithValue(ctx, goa.MethodKey, "start-instance")
		ctx = context.WithValue(ctx, goa.ServiceKey, "control-plane")
		payload, err := decodeRequest(r)
		if err != nil {
			if err := encodeError(ctx, w, err); err != nil {
				errhandler(ctx, w, err)
			}
			return
		}
		res, err := endpoint(ctx, payload)
		if err != nil {
			if err := encodeError(ctx, w, err); err != nil {
				errhandler(ctx, w, err)
			}
			return
		}
		if err := encodeResponse(ctx, w, res); err != nil {
			errhandler(ctx, w, err)
		}
	})
}

// MountCancelDatabaseTaskHandler configures the mux to serve the
// "control-plane" service "cancel-database-task" endpoint.
func MountCancelDatabaseTaskHandler(mux goahttp.Muxer, h http.Handler) {
	f, ok := h.(http.HandlerFunc)
	if !ok {
		f = func(w http.ResponseWriter, r *http.Request) {
			h.ServeHTTP(w, r)
		}
	}
	mux.Handle("GET", "/v1/databases/{database_id}/tasks/{task_id}/cancel", f)
}

// NewCancelDatabaseTaskHandler creates a HTTP handler which loads the HTTP
// request and calls the "control-plane" service "cancel-database-task"
// endpoint.
func NewCancelDatabaseTaskHandler(
	endpoint goa.Endpoint,
	mux goahttp.Muxer,
	decoder func(*http.Request) goahttp.Decoder,
	encoder func(context.Context, http.ResponseWriter) goahttp.Encoder,
	errhandler func(context.Context, http.ResponseWriter, error),
	formatter func(ctx context.Context, err error) goahttp.Statuser,
) http.Handler {
	var (
		decodeRequest  = DecodeCancelDatabaseTaskRequest(mux, decoder)
		encodeResponse = EncodeCancelDatabaseTaskResponse(encoder)
		encodeError    = EncodeCancelDatabaseTaskError(encoder, formatter)
	)
	return http.HandlerFunc(func(w http.ResponseWriter, r *http.Request) {
		ctx := context.WithValue(r.Context(), goahttp.AcceptTypeKey, r.Header.Get("Accept"))
		ctx = context.WithValue(ctx, goa.MethodKey, "cancel-database-task")
		ctx = context.WithValue(ctx, goa.ServiceKey, "control-plane")
		payload, err := decodeRequest(r)
		if err != nil {
			if err := encodeError(ctx, w, err); err != nil {
				errhandler(ctx, w, err)
			}
			return
		}
		res, err := endpoint(ctx, payload)
		if err != nil {
			if err := encodeError(ctx, w, err); err != nil {
				errhandler(ctx, w, err)
			}
			return
		}
		if err := encodeResponse(ctx, w, res); err != nil {
			errhandler(ctx, w, err)
		}
	})
}

// appendFS is a custom implementation of fs.FS that appends a specified prefix
// to the file paths before delegating the Open call to the underlying fs.FS.
type appendFS struct {
	prefix string
	fs     http.FileSystem
}

// Open opens the named file, appending the prefix to the file path before
// passing it to the underlying fs.FS.
func (s appendFS) Open(name string) (http.File, error) {
	switch name {
	case "/openapi.json":
		name = "/openapi3.json"
	}
	return s.fs.Open(path.Join(s.prefix, name))
}

// appendPrefix returns a new fs.FS that appends the specified prefix to file paths
// before delegating to the provided embed.FS.
func appendPrefix(fsys http.FileSystem, prefix string) http.FileSystem {
	return appendFS{prefix: prefix, fs: fsys}
}

// MountGenHTTPOpenapi3JSON configures the mux to serve GET request made to
// "/v1/openapi.json".
func MountGenHTTPOpenapi3JSON(mux goahttp.Muxer, h http.Handler) {
	mux.Handle("GET", "/v1/openapi.json", h.ServeHTTP)
}
