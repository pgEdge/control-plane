{
  "openapi": "3.0.3",
  "info": {
    "title": "pgEdge Control Plane v1 API",
    "description": "A distributed application that provides a declarative API to deploy and manage Postgres databases.",
    "version": "v0.5.0"
  },
  "servers": [
    {
      "url": "http://localhost:3000"
    }
  ],
  "paths": {
    "/v1/cluster": {
      "get": {
        "tags": [
          "Cluster"
        ],
        "summary": "Get cluster",
        "description": "Returns information about the cluster.",
        "operationId": "get-cluster",
        "responses": {
          "200": {
            "description": "OK response.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Cluster"
                },
                "example": {
                  "hosts": [
                    {
                      "cohort": {
                        "cohort_id": "zdjfu3tfxg1cihv3146ro3hy2",
                        "control_available": true,
                        "member_id": "lah4bsznw6kc0hp7biylmmmll",
                        "type": "swarm"
                      },
                      "cpus": 16,
                      "data_dir": "/data",
                      "default_pgedge_version": {
                        "postgres_version": "17.6",
                        "spock_version": "5"
                      },
                      "hostname": "i-0123456789abcdef.ec2.internal",
                      "id": "us-east-1",
                      "ipv4_address": "10.24.34.2",
                      "memory": "16GB",
                      "orchestrator": "swarm",
                      "status": {
                        "components": {},
                        "state": "healthy",
                        "updated_at": "2025-06-17T00:00:00Z"
                      },
                      "supported_pgedge_versions": [
                        {
                          "postgres_version": "17.6",
                          "spock_version": "5"
                        },
                        {
                          "postgres_version": "17.5",
                          "spock_version": "5"
                        },
                        {
                          "postgres_version": "16.10",
                          "spock_version": "5"
                        }
                      ]
                    },
                    {
                      "cohort": {
                        "cohort_id": "zdjfu3tfxg1cihv3146ro3hy2",
                        "control_available": true,
                        "member_id": "cb88u9jael2psnepep5iuzb4r",
                        "type": "swarm"
                      },
                      "cpus": 16,
                      "data_dir": "/data",
                      "default_pgedge_version": {
                        "postgres_version": "17.6",
                        "spock_version": "5"
                      },
                      "hostname": "i-058731542fee493f.ec2.internal",
                      "id": "ap-south-1",
                      "ipv4_address": "10.24.35.2",
                      "memory": "16GB",
                      "orchestrator": "swarm",
                      "status": {
                        "components": {},
                        "state": "healthy",
                        "updated_at": "2025-06-17T00:00:00Z"
                      },
                      "supported_pgedge_versions": [
                        {
                          "postgres_version": "17.6",
                          "spock_version": "5"
                        },
                        {
                          "postgres_version": "17.5",
                          "spock_version": "5"
                        },
                        {
                          "postgres_version": "16.10",
                          "spock_version": "5"
                        }
                      ]
                    },
                    {
                      "cohort": {
                        "cohort_id": "zdjfu3tfxg1cihv3146ro3hy2",
                        "control_available": true,
                        "member_id": "u7u9i3nhqunxc4wj577l6ecb0",
                        "type": "swarm"
                      },
                      "cpus": 16,
                      "data_dir": "/data",
                      "default_pgedge_version": {
                        "postgres_version": "17.6",
                        "spock_version": "5"
                      },
                      "hostname": "i-494027b7b53f6a23.ec2.internal",
                      "id": "eu-central-1",
                      "ipv4_address": "10.24.36.2",
                      "memory": "16GB",
                      "orchestrator": "swarm",
                      "status": {
                        "components": {},
                        "state": "healthy",
                        "updated_at": "2025-06-17T00:00:00Z"
                      },
                      "supported_pgedge_versions": [
                        {
                          "postgres_version": "17.6",
                          "spock_version": "5"
                        },
                        {
                          "postgres_version": "17.5",
                          "spock_version": "5"
                        },
                        {
                          "postgres_version": "16.10",
                          "spock_version": "5"
                        }
                      ]
                    }
                  ],
                  "id": "production",
                  "status": {
                    "state": "available"
                  },
                  "tenant_id": "engineering"
                }
              }
            }
          },
          "409": {
            "description": "cluster_not_initialized: Conflict response.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIError"
                },
                "example": {
                  "message": "A longer description of the error.",
                  "name": "error_name"
                }
              }
            }
          },
          "500": {
            "description": "server_error: Internal Server Error response.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIError"
                },
                "example": {
                  "message": "A longer description of the error.",
                  "name": "error_name"
                }
              }
            }
          }
        }
      }
    },
    "/v1/cluster/init": {
      "get": {
        "tags": [
          "Cluster"
        ],
        "summary": "Initialize cluster",
        "description": "Initializes a new cluster.",
        "operationId": "init-cluster",
        "parameters": [
          {
            "name": "cluster_id",
            "in": "query",
            "description": "Optional id for the cluster, omit for default generated id",
            "allowEmptyValue": true,
            "schema": {
              "type": "string",
              "description": "A user-specified identifier. Must be 1-63 characters, contain only lower-cased letters and hyphens, start and end with a letter or number, and not contain consecutive hyphens.",
              "example": "76f9b8c0-4958-11f0-a489-3bb29577c696",
              "minLength": 1,
              "maxLength": 63
            },
            "examples": {
              "Human-readable": {
                "summary": "Human-readable",
                "description": "Identifiers can be human-readable for ease of use.",
                "value": "production"
              },
              "UUID": {
                "summary": "UUID",
                "description": "UUIDs are valid Identifiers.",
                "value": "76f9b8c0-4958-11f0-a489-3bb29577c696"
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK response.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ClusterJoinToken"
                },
                "example": {
                  "server_url": "http://192.168.1.1:3000",
                  "token": "PGEDGE-dd440afcf5de20ef8e8cf54f6cb9f125fd55f90e64faa94b906130b31235e730-41e975f41d7ea61058f2fe2572cb52dd"
                }
              }
            }
          },
          "400": {
            "description": "operation_not_supported: Bad Request response.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIError"
                },
                "example": {
                  "message": "A longer description of the error.",
                  "name": "error_name"
                }
              }
            }
          },
          "409": {
            "description": "cluster_already_initialized: Conflict response.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIError"
                },
                "example": {
                  "message": "A longer description of the error.",
                  "name": "error_name"
                }
              }
            }
          },
          "500": {
            "description": "server_error: Internal Server Error response.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIError"
                },
                "example": {
                  "message": "A longer description of the error.",
                  "name": "error_name"
                }
              }
            }
          }
        }
      }
    },
    "/v1/cluster/join": {
      "post": {
        "tags": [
          "Cluster"
        ],
        "summary": "Join cluster",
        "description": "Joins this host to an existing cluster.",
        "operationId": "join-cluster",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ClusterJoinToken"
              },
              "example": {
                "server_url": "http://192.168.1.1:3000",
                "token": "PGEDGE-dd440afcf5de20ef8e8cf54f6cb9f125fd55f90e64faa94b906130b31235e730-41e975f41d7ea61058f2fe2572cb52dd"
              }
            }
          }
        },
        "responses": {
          "204": {
            "description": "No Content response."
          },
          "401": {
            "description": "invalid_join_token: Unauthorized response.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIError"
                },
                "example": {
                  "message": "A longer description of the error.",
                  "name": "error_name"
                }
              }
            }
          },
          "409": {
            "description": "cluster_already_initialized: Conflict response.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIError"
                },
                "example": {
                  "message": "A longer description of the error.",
                  "name": "error_name"
                }
              }
            }
          },
          "500": {
            "description": "server_error: Internal Server Error response.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIError"
                },
                "example": {
                  "message": "A longer description of the error.",
                  "name": "error_name"
                }
              }
            }
          }
        }
      }
    },
    "/v1/cluster/join-token": {
      "get": {
        "tags": [
          "Cluster"
        ],
        "summary": "Get cluster join token",
        "description": "Gets the join token for this cluster.",
        "operationId": "get-join-token",
        "responses": {
          "200": {
            "description": "OK response.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ClusterJoinToken"
                },
                "example": {
                  "server_url": "http://192.168.1.1:3000",
                  "token": "PGEDGE-dd440afcf5de20ef8e8cf54f6cb9f125fd55f90e64faa94b906130b31235e730-41e975f41d7ea61058f2fe2572cb52dd"
                }
              }
            }
          },
          "409": {
            "description": "cluster_not_initialized: Conflict response.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIError"
                },
                "example": {
                  "message": "A longer description of the error.",
                  "name": "error_name"
                }
              }
            }
          },
          "500": {
            "description": "server_error: Internal Server Error response.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIError"
                },
                "example": {
                  "message": "A longer description of the error.",
                  "name": "error_name"
                }
              }
            }
          }
        }
      }
    },
    "/v1/databases": {
      "get": {
        "tags": [
          "Database"
        ],
        "summary": "List databases",
        "description": "Lists all databases in the cluster.",
        "operationId": "list-databases",
        "responses": {
          "200": {
            "description": "OK response.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Listdatabasesresponse"
                },
                "example": {
                  "databases": [
                    {
                      "created_at": "2025-06-17T20:05:10Z",
                      "id": "inventory",
                      "instances": [
                        {
                          "host_id": "us-east-1",
                          "id": "inventory-n1-689qacsi",
                          "node_name": "n1",
                          "state": "available"
                        },
                        {
                          "host_id": "ap-south-1",
                          "id": "inventory-n2-9ptayhma",
                          "node_name": "n2",
                          "state": "available"
                        },
                        {
                          "host_id": "eu-central-1",
                          "id": "inventory-n3-ant97dj4",
                          "node_name": "n3",
                          "state": "available"
                        }
                      ],
                      "state": "available",
                      "updated_at": "2025-06-17T20:05:10Z"
                    },
                    {
                      "created_at": "2025-06-17T20:05:10Z",
                      "id": "storefront",
                      "instances": [
                        {
                          "host_id": "us-east-1",
                          "id": "storefront-n1-689qacsi",
                          "node_name": "n1",
                          "state": "available"
                        },
                        {
                          "host_id": "ap-south-1",
                          "id": "storefront-n2-9ptayhma",
                          "node_name": "n2",
                          "state": "available"
                        },
                        {
                          "host_id": "eu-central-1",
                          "id": "storefront-n3-ant97dj4",
                          "node_name": "n3",
                          "state": "available"
                        }
                      ],
                      "state": "available",
                      "updated_at": "2025-06-12T15:10:05Z"
                    }
                  ]
                }
              }
            }
          },
          "409": {
            "description": "cluster_not_initialized: Conflict response.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIError"
                },
                "example": {
                  "message": "A longer description of the error.",
                  "name": "error_name"
                }
              }
            }
          },
          "500": {
            "description": "server_error: Internal Server Error response.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIError"
                },
                "example": {
                  "message": "A longer description of the error.",
                  "name": "error_name"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "Database"
        ],
        "summary": "Create database",
        "description": "Creates a new database in the cluster.",
        "operationId": "create-database",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateDatabaseRequest"
              },
              "examples": {
                "Built-in roles": {
                  "summary": "Built-in roles",
                  "description": "The Control Plane can create multiple users on your behalf, and it includes some built-in roles that make it easy to assign limited permissions.",
                  "value": {
                    "id": "storefront",
                    "spec": {
                      "database_name": "storefront",
                      "database_users": [
                        {
                          "attributes": [
                            "LOGIN",
                            "SUPERUSER"
                          ],
                          "db_owner": true,
                          "password": "password",
                          "username": "admin"
                        },
                        {
                          "attributes": [
                            "LOGIN"
                          ],
                          "password": "password",
                          "roles": [
                            "pgedge_application"
                          ],
                          "username": "storefront_app"
                        },
                        {
                          "attributes": [
                            "LOGIN"
                          ],
                          "password": "password",
                          "roles": [
                            "pgedge_application_read_only"
                          ],
                          "username": "business_intelligence_app"
                        }
                      ],
                      "nodes": [
                        {
                          "host_ids": [
                            "us-east-1"
                          ],
                          "name": "n1"
                        },
                        {
                          "host_ids": [
                            "ap-south-1"
                          ],
                          "name": "n2"
                        },
                        {
                          "host_ids": [
                            "eu-central-1"
                          ],
                          "name": "n3"
                        }
                      ],
                      "port": 5432
                    }
                  }
                },
                "Creating from an existing backup": {
                  "summary": "Creating from an existing backup",
                  "description": "A configuration that creates a database from an existing backup in S3.",
                  "value": {
                    "id": "storefront-staging",
                    "spec": {
                      "database_name": "storefront",
                      "database_users": [
                        {
                          "attributes": [
                            "LOGIN",
                            "SUPERUSER"
                          ],
                          "db_owner": true,
                          "password": "password",
                          "username": "admin"
                        }
                      ],
                      "nodes": [
                        {
                          "host_ids": [
                            "us-east-1"
                          ],
                          "name": "n1"
                        },
                        {
                          "host_ids": [
                            "ap-south-1"
                          ],
                          "name": "n2"
                        },
                        {
                          "host_ids": [
                            "eu-central-1"
                          ],
                          "name": "n3"
                        }
                      ],
                      "port": 5432,
                      "restore_config": {
                        "repository": {
                          "s3_bucket": "storefront-db-backups-us-east-1",
                          "type": "s3"
                        },
                        "source_database_id": "storefront",
                        "source_database_name": "storefront",
                        "source_node_name": "n1"
                      }
                    }
                  }
                },
                "Customized PostgreSQL configuration": {
                  "summary": "Customized PostgreSQL configuration",
                  "description": "The Control Plane will automatically set and tune some parameters based on the resources available to the host. You can override these and other settings for the whole database or per-node.",
                  "value": {
                    "id": "storefront",
                    "spec": {
                      "database_name": "storefront",
                      "database_users": [
                        {
                          "attributes": [
                            "LOGIN",
                            "SUPERUSER"
                          ],
                          "db_owner": true,
                          "password": "password",
                          "username": "admin"
                        }
                      ],
                      "nodes": [
                        {
                          "host_ids": [
                            "us-east-1"
                          ],
                          "name": "n1"
                        },
                        {
                          "host_ids": [
                            "ap-south-1"
                          ],
                          "name": "n2"
                        },
                        {
                          "host_ids": [
                            "eu-central-1"
                          ],
                          "name": "n3"
                        }
                      ],
                      "port": 5432,
                      "postgresql_conf": {
                        "max_connections": 5000
                      }
                    }
                  }
                },
                "Minimal": {
                  "summary": "Minimal",
                  "description": "A minimal configuration that relies on default values for most fields.",
                  "value": {
                    "id": "storefront",
                    "spec": {
                      "database_name": "storefront",
                      "database_users": [
                        {
                          "attributes": [
                            "LOGIN",
                            "SUPERUSER"
                          ],
                          "db_owner": true,
                          "password": "password",
                          "username": "admin"
                        }
                      ],
                      "nodes": [
                        {
                          "host_ids": [
                            "us-east-1"
                          ],
                          "name": "n1"
                        },
                        {
                          "host_ids": [
                            "ap-south-1"
                          ],
                          "name": "n2"
                        },
                        {
                          "host_ids": [
                            "eu-central-1"
                          ],
                          "name": "n3"
                        }
                      ],
                      "port": 5432
                    }
                  }
                },
                "With cloud backups": {
                  "summary": "With cloud backups",
                  "description": "A configuration that includes backups to S3 from all nodes. Note that the S3 access key and secret can be excluded if EC2 instance profiles are configured for each host.",
                  "value": {
                    "id": "storefront",
                    "spec": {
                      "database_name": "storefront",
                      "database_users": [
                        {
                          "attributes": [
                            "LOGIN",
                            "SUPERUSER"
                          ],
                          "db_owner": true,
                          "password": "password",
                          "username": "admin"
                        }
                      ],
                      "nodes": [
                        {
                          "backup_config": {
                            "repositories": [
                              {
                                "s3_bucket": "storefront-db-backups-us-east-1",
                                "type": "s3"
                              }
                            ]
                          },
                          "host_ids": [
                            "us-east-1"
                          ],
                          "name": "n1"
                        },
                        {
                          "backup_config": {
                            "repositories": [
                              {
                                "s3_bucket": "storefront-db-backups-ap-south-1",
                                "type": "s3"
                              }
                            ]
                          },
                          "host_ids": [
                            "ap-south-1"
                          ],
                          "name": "n2"
                        },
                        {
                          "backup_config": {
                            "repositories": [
                              {
                                "s3_bucket": "storefront-db-backups-eu-central-1",
                                "type": "s3"
                              }
                            ]
                          },
                          "host_ids": [
                            "eu-central-1"
                          ],
                          "name": "n3"
                        }
                      ],
                      "port": 5432
                    }
                  }
                },
                "With custom networks, volumes, and labels": {
                  "summary": "With custom networks, volumes, and labels",
                  "description": "A configuration that mounts a local volume, attaches the container to multiple Swarm networks and applies custom labels.",
                  "value": {
                    "id": "inventory-db",
                    "spec": {
                      "database_name": "inventory",
                      "database_users": [
                        {
                          "attributes": [
                            "LOGIN"
                          ],
                          "db_owner": true,
                          "password": "securepass",
                          "username": "inv_admin"
                        }
                      ],
                      "nodes": [
                        {
                          "host_ids": [
                            "host-1"
                          ],
                          "name": "n1",
                          "orchestrator_opts": {
                            "swarm": {
                              "extra_labels": {
                                "environment": "staging",
                                "traefik.enable": "true",
                                "traefik.tcp.routers.db.rule": "HostSNI(`inventory.example.com`)"
                              },
                              "extra_networks": [
                                {
                                  "id": "net-network"
                                }
                              ],
                              "extra_volumes": [
                                {
                                  "destination_path": "/backups",
                                  "host_path": "/mnt/backups"
                                }
                              ]
                            }
                          }
                        },
                        {
                          "host_ids": [
                            "host-2"
                          ],
                          "name": "n2"
                        }
                      ],
                      "port": 5432
                    }
                  }
                },
                "With local backups": {
                  "summary": "With local backups",
                  "description": "A configuration that includes backups to a locally-mounted NFS on n1.",
                  "value": {
                    "id": "storefront",
                    "spec": {
                      "database_name": "storefront",
                      "database_users": [
                        {
                          "attributes": [
                            "LOGIN",
                            "SUPERUSER"
                          ],
                          "db_owner": true,
                          "password": "password",
                          "username": "admin"
                        }
                      ],
                      "nodes": [
                        {
                          "backup_config": {
                            "repositories": [
                              {
                                "base_path": "/backups",
                                "type": "posix"
                              }
                            ]
                          },
                          "host_ids": [
                            "us-east-1"
                          ],
                          "name": "n1",
                          "orchestrator_opts": {
                            "swarm": {
                              "extra_volumes": [
                                {
                                  "destination_path": "/backups",
                                  "host_path": "/mnt/backups"
                                }
                              ]
                            }
                          }
                        },
                        {
                          "host_ids": [
                            "ap-south-1"
                          ],
                          "name": "n2"
                        },
                        {
                          "host_ids": [
                            "eu-central-1"
                          ],
                          "name": "n3"
                        }
                      ],
                      "port": 5432
                    }
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "OK response.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CreateDatabaseResponse"
                },
                "example": {
                  "database": {
                    "created_at": "2025-06-18T16:52:05Z",
                    "id": "storefront",
                    "spec": {
                      "database_name": "storefront",
                      "database_users": [
                        {
                          "attributes": [
                            "SUPERUSER",
                            "LOGIN"
                          ],
                          "db_owner": true,
                          "username": "admin"
                        }
                      ],
                      "nodes": [
                        {
                          "host_ids": [
                            "us-east-1"
                          ],
                          "name": "n1"
                        },
                        {
                          "host_ids": [
                            "ap-south-1"
                          ],
                          "name": "n2"
                        },
                        {
                          "host_ids": [
                            "eu-central-1"
                          ],
                          "name": "n3"
                        }
                      ],
                      "port": 5432,
                      "postgres_version": "17.6",
                      "spock_version": "5"
                    },
                    "state": "creating",
                    "updated_at": "2025-06-18T16:52:05Z"
                  },
                  "task": {
                    "created_at": "2025-06-18T16:52:05Z",
                    "database_id": "storefront",
                    "status": "pending",
                    "task_id": "019783f4-75f4-71e7-85a3-c9b96b345d77",
                    "type": "create"
                  }
                }
              }
            }
          },
          "400": {
            "description": "invalid_input: Bad Request response.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIError"
                },
                "example": {
                  "message": "A longer description of the error.",
                  "name": "error_name"
                }
              }
            }
          },
          "409": {
            "description": "operation_already_in_progress: Conflict response.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIError"
                },
                "example": {
                  "message": "A longer description of the error.",
                  "name": "error_name"
                }
              }
            }
          },
          "500": {
            "description": "server_error: Internal Server Error response.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIError"
                },
                "example": {
                  "message": "A longer description of the error.",
                  "name": "error_name"
                }
              }
            }
          }
        }
      }
    },
    "/v1/databases/{database_id}": {
      "delete": {
        "tags": [
          "Database"
        ],
        "summary": "Delete database",
        "description": "Deletes a database from the cluster.",
        "operationId": "delete-database",
        "parameters": [
          {
            "name": "force",
            "in": "query",
            "description": "Force deletion of a database even in an unmodifiable state",
            "allowEmptyValue": true,
            "schema": {
              "type": "boolean",
              "description": "Force deletion of a database even in an unmodifiable state",
              "default": false,
              "example": true
            },
            "example": true
          },
          {
            "name": "database_id",
            "in": "path",
            "description": "ID of the database to delete.",
            "required": true,
            "schema": {
              "type": "string",
              "description": "A user-specified identifier. Must be 1-63 characters, contain only lower-cased letters and hyphens, start and end with a letter or number, and not contain consecutive hyphens.",
              "example": "76f9b8c0-4958-11f0-a489-3bb29577c696",
              "minLength": 1,
              "maxLength": 63
            },
            "example": "my-app"
          }
        ],
        "responses": {
          "200": {
            "description": "OK response.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DeleteDatabaseResponse"
                },
                "example": {
                  "task": {
                    "created_at": "2025-06-18T16:48:59Z",
                    "database_id": "storefront",
                    "status": "pending",
                    "task_id": "019783f1-9f17-77e7-9a08-fa6ab39e3b29",
                    "type": "delete"
                  }
                }
              }
            }
          },
          "400": {
            "description": "invalid_input: Bad Request response.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIError"
                },
                "example": {
                  "message": "A longer description of the error.",
                  "name": "error_name"
                }
              }
            }
          },
          "404": {
            "description": "not_found: Not Found response.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIError"
                },
                "example": {
                  "message": "A longer description of the error.",
                  "name": "error_name"
                }
              }
            }
          },
          "409": {
            "description": "operation_already_in_progress: Conflict response.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIError"
                },
                "example": {
                  "message": "A longer description of the error.",
                  "name": "error_name"
                }
              }
            }
          },
          "500": {
            "description": "server_error: Internal Server Error response.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIError"
                },
                "example": {
                  "message": "A longer description of the error.",
                  "name": "error_name"
                }
              }
            }
          }
        }
      },
      "get": {
        "tags": [
          "Database"
        ],
        "summary": "Get database",
        "description": "Returns information about a particular database in the cluster.",
        "operationId": "get-database",
        "parameters": [
          {
            "name": "database_id",
            "in": "path",
            "description": "ID of the database to get.",
            "required": true,
            "schema": {
              "type": "string",
              "description": "A user-specified identifier. Must be 1-63 characters, contain only lower-cased letters and hyphens, start and end with a letter or number, and not contain consecutive hyphens.",
              "example": "76f9b8c0-4958-11f0-a489-3bb29577c696",
              "minLength": 1,
              "maxLength": 63
            },
            "example": "my-app"
          }
        ],
        "responses": {
          "200": {
            "description": "OK response.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ControlPlaneGetDatabaseResponseBody"
                },
                "example": {
                  "created_at": "2025-06-18T16:52:05Z",
                  "id": "storefront",
                  "instances": [
                    {
                      "connection_info": {
                        "hostname": "i-0123456789abcdef.ec2.internal",
                        "ipv4_address": "10.24.34.2",
                        "port": 5432
                      },
                      "created_at": "2025-06-18T16:52:22Z",
                      "host_id": "us-east-1",
                      "id": "storefront-n1-689qacsi",
                      "node_name": "n1",
                      "postgres": {
                        "patroni_state": "running",
                        "role": "primary",
                        "version": "17.5"
                      },
                      "spock": {
                        "read_only": "off",
                        "subscriptions": [
                          {
                            "name": "sub_n1n3",
                            "provider_node": "n3",
                            "status": "replicating"
                          },
                          {
                            "name": "sub_n1n2",
                            "provider_node": "n2",
                            "status": "replicating"
                          }
                        ],
                        "version": "4.0.10"
                      },
                      "state": "available",
                      "status_updated_at": "2025-06-18T17:58:56Z",
                      "updated_at": "2025-06-18T17:54:36Z"
                    },
                    {
                      "connection_info": {
                        "hostname": "i-058731542fee493f.ec2.internal",
                        "ipv4_address": "10.24.35.2",
                        "port": 5432
                      },
                      "created_at": "2025-06-18T16:52:22Z",
                      "host_id": "ap-south-1",
                      "id": "storefront-n2-9ptayhma",
                      "node_name": "n2",
                      "postgres": {
                        "patroni_state": "running",
                        "role": "primary",
                        "version": "17.5"
                      },
                      "spock": {
                        "read_only": "off",
                        "subscriptions": [
                          {
                            "name": "sub_n2n1",
                            "provider_node": "n1",
                            "status": "replicating"
                          },
                          {
                            "name": "sub_n2n3",
                            "provider_node": "n3",
                            "status": "replicating"
                          }
                        ],
                        "version": "4.0.10"
                      },
                      "state": "available",
                      "status_updated_at": "2025-06-18T17:58:56Z",
                      "updated_at": "2025-06-18T17:54:01Z"
                    },
                    {
                      "connection_info": {
                        "hostname": "i-494027b7b53f6a23.ec2.internal",
                        "ipv4_address": "10.24.36.2",
                        "port": 5432
                      },
                      "created_at": "2025-06-18T16:52:22Z",
                      "host_id": "eu-central-1",
                      "id": "storefront-n3-ant97dj4",
                      "node_name": "n3",
                      "postgres": {
                        "patroni_state": "running",
                        "role": "primary",
                        "version": "17.5"
                      },
                      "spock": {
                        "read_only": "off",
                        "subscriptions": [
                          {
                            "name": "sub_n3n1",
                            "provider_node": "n1",
                            "status": "replicating"
                          },
                          {
                            "name": "sub_n3n2",
                            "provider_node": "n2",
                            "status": "replicating"
                          }
                        ],
                        "version": "4.0.10"
                      },
                      "state": "available",
                      "status_updated_at": "2025-06-18T17:58:56Z",
                      "updated_at": "2025-06-18T17:54:01Z"
                    }
                  ],
                  "spec": {
                    "database_name": "storefront",
                    "database_users": [
                      {
                        "attributes": [
                          "SUPERUSER",
                          "LOGIN"
                        ],
                        "db_owner": true,
                        "username": "admin"
                      }
                    ],
                    "nodes": [
                      {
                        "host_ids": [
                          "us-east-1"
                        ],
                        "name": "n1"
                      },
                      {
                        "host_ids": [
                          "ap-south-1"
                        ],
                        "name": "n2"
                      },
                      {
                        "host_ids": [
                          "eu-central-1"
                        ],
                        "name": "n3"
                      }
                    ],
                    "port": 5432,
                    "postgres_version": "17.6",
                    "spock_version": "5"
                  },
                  "state": "restoring",
                  "updated_at": "2025-06-18T17:58:59Z"
                }
              }
            }
          },
          "400": {
            "description": "invalid_input: Bad Request response.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIError"
                },
                "example": {
                  "message": "A longer description of the error.",
                  "name": "error_name"
                }
              }
            }
          },
          "404": {
            "description": "not_found: Not Found response.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIError"
                },
                "example": {
                  "message": "A longer description of the error.",
                  "name": "error_name"
                }
              }
            }
          },
          "409": {
            "description": "cluster_not_initialized: Conflict response.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIError"
                },
                "example": {
                  "message": "A longer description of the error.",
                  "name": "error_name"
                }
              }
            }
          },
          "500": {
            "description": "server_error: Internal Server Error response.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIError"
                },
                "example": {
                  "message": "A longer description of the error.",
                  "name": "error_name"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "Database"
        ],
        "summary": "Update database",
        "description": "Updates a database with the given specification.",
        "operationId": "update-database",
        "parameters": [
          {
            "name": "force_update",
            "in": "query",
            "description": "Force update the database even if the spec is the same.",
            "allowEmptyValue": true,
            "schema": {
              "type": "boolean",
              "description": "Force update the database even if the spec is the same.",
              "default": false,
              "example": true
            },
            "example": true
          },
          {
            "name": "database_id",
            "in": "path",
            "description": "ID of the database to update.",
            "required": true,
            "schema": {
              "type": "string",
              "description": "A user-specified identifier. Must be 1-63 characters, contain only lower-cased letters and hyphens, start and end with a letter or number, and not contain consecutive hyphens.",
              "example": "76f9b8c0-4958-11f0-a489-3bb29577c696",
              "minLength": 1,
              "maxLength": 63
            },
            "example": "my-app"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateDatabaseRequest"
              },
              "examples": {
                "Adding a new node from a Cloud backup": {
                  "summary": "Adding a new node from a Cloud backup",
                  "description": "This update request adds a new node, n3, to an existing two-node cluster using the latest backup of n1.",
                  "value": {
                    "spec": {
                      "database_name": "storefront",
                      "database_users": [
                        {
                          "attributes": [
                            "LOGIN",
                            "SUPERUSER"
                          ],
                          "db_owner": true,
                          "username": "admin"
                        }
                      ],
                      "nodes": [
                        {
                          "backup_config": {
                            "repositories": [
                              {
                                "s3_bucket": "storefront-db-backups-us-east-1",
                                "type": "s3"
                              }
                            ]
                          },
                          "host_ids": [
                            "us-east-1"
                          ],
                          "name": "n1"
                        },
                        {
                          "backup_config": {
                            "repositories": [
                              {
                                "s3_bucket": "storefront-db-backups-ap-south-1",
                                "type": "s3"
                              }
                            ]
                          },
                          "host_ids": [
                            "ap-south-1"
                          ],
                          "name": "n2"
                        },
                        {
                          "backup_config": {
                            "repositories": [
                              {
                                "s3_bucket": "storefront-db-backups-eu-central-1",
                                "type": "s3"
                              }
                            ]
                          },
                          "host_ids": [
                            "eu-central-1"
                          ],
                          "name": "n3",
                          "restore_config": {
                            "repository": {
                              "s3_bucket": "storefront-db-backups-us-east-1",
                              "type": "s3"
                            },
                            "source_database_id": "storefront",
                            "source_database_name": "storefront",
                            "source_node_name": "n1"
                          }
                        }
                      ],
                      "port": 5432
                    }
                  }
                },
                "Minimal": {
                  "summary": "Minimal",
                  "value": {
                    "spec": {
                      "database_name": "storefront",
                      "database_users": [
                        {
                          "attributes": [
                            "LOGIN",
                            "SUPERUSER"
                          ],
                          "db_owner": true,
                          "username": "admin"
                        }
                      ],
                      "nodes": [
                        {
                          "host_ids": [
                            "us-east-1"
                          ],
                          "name": "n1"
                        },
                        {
                          "host_ids": [
                            "ap-south-1"
                          ],
                          "name": "n2"
                        },
                        {
                          "host_ids": [
                            "eu-central-1"
                          ],
                          "name": "n3"
                        }
                      ],
                      "port": 5432
                    }
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "OK response.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UpdateDatabaseResponse"
                },
                "example": {
                  "database": {
                    "created_at": "2025-06-18T16:52:05Z",
                    "id": "storefront",
                    "instances": [
                      {
                        "connection_info": {
                          "hostname": "i-0123456789abcdef.ec2.internal",
                          "ipv4_address": "10.24.34.2",
                          "port": 5432
                        },
                        "created_at": "2025-06-18T16:52:22Z",
                        "host_id": "us-east-1",
                        "id": "storefront-n1-689qacsi",
                        "node_name": "n1",
                        "postgres": {
                          "patroni_state": "running",
                          "role": "primary",
                          "version": "17.5"
                        },
                        "spock": {
                          "read_only": "off",
                          "subscriptions": [
                            {
                              "name": "sub_n1n3",
                              "provider_node": "n3",
                              "status": "replicating"
                            },
                            {
                              "name": "sub_n1n2",
                              "provider_node": "n2",
                              "status": "replicating"
                            }
                          ],
                          "version": "4.0.10"
                        },
                        "state": "available",
                        "status_updated_at": "2025-06-18T17:58:56Z",
                        "updated_at": "2025-06-18T17:54:36Z"
                      },
                      {
                        "connection_info": {
                          "hostname": "i-058731542fee493f.ec2.internal",
                          "ipv4_address": "10.24.35.2",
                          "port": 5432
                        },
                        "created_at": "2025-06-18T16:52:22Z",
                        "host_id": "ap-south-1",
                        "id": "storefront-n2-9ptayhma",
                        "node_name": "n2",
                        "postgres": {
                          "patroni_state": "running",
                          "role": "primary",
                          "version": "17.5"
                        },
                        "spock": {
                          "read_only": "off",
                          "subscriptions": [
                            {
                              "name": "sub_n2n1",
                              "provider_node": "n1",
                              "status": "replicating"
                            },
                            {
                              "name": "sub_n2n3",
                              "provider_node": "n3",
                              "status": "replicating"
                            }
                          ],
                          "version": "4.0.10"
                        },
                        "state": "available",
                        "status_updated_at": "2025-06-18T17:58:56Z",
                        "updated_at": "2025-06-18T17:54:01Z"
                      },
                      {
                        "connection_info": {
                          "hostname": "i-494027b7b53f6a23.ec2.internal",
                          "ipv4_address": "10.24.36.2",
                          "port": 5432
                        },
                        "created_at": "2025-06-18T16:52:22Z",
                        "host_id": "eu-central-1",
                        "id": "storefront-n3-ant97dj4",
                        "node_name": "n3",
                        "postgres": {
                          "patroni_state": "running",
                          "role": "primary",
                          "version": "17.5"
                        },
                        "spock": {
                          "read_only": "off",
                          "subscriptions": [
                            {
                              "name": "sub_n3n1",
                              "provider_node": "n1",
                              "status": "replicating"
                            },
                            {
                              "name": "sub_n3n2",
                              "provider_node": "n2",
                              "status": "replicating"
                            }
                          ],
                          "version": "4.0.10"
                        },
                        "state": "available",
                        "status_updated_at": "2025-06-18T17:58:56Z",
                        "updated_at": "2025-06-18T17:54:01Z"
                      }
                    ],
                    "spec": {
                      "database_name": "storefront",
                      "database_users": [
                        {
                          "attributes": [
                            "SUPERUSER",
                            "LOGIN"
                          ],
                          "db_owner": true,
                          "username": "admin"
                        }
                      ],
                      "nodes": [
                        {
                          "host_ids": [
                            "us-east-1"
                          ],
                          "name": "n1"
                        },
                        {
                          "host_ids": [
                            "ap-south-1"
                          ],
                          "name": "n2"
                        },
                        {
                          "host_ids": [
                            "eu-central-1"
                          ],
                          "name": "n3"
                        }
                      ],
                      "port": 5432,
                      "postgres_version": "17.6",
                      "spock_version": "5"
                    },
                    "state": "restoring",
                    "updated_at": "2025-06-18T17:58:59Z"
                  },
                  "task": {
                    "created_at": "2025-06-18T17:23:14Z",
                    "database_id": "storefront",
                    "status": "pending",
                    "task_id": "01978410-fb5d-7cd2-bbd2-66c0bf929dc0",
                    "type": "update"
                  }
                }
              }
            }
          },
          "400": {
            "description": "invalid_input: Bad Request response.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIError"
                },
                "example": {
                  "message": "A longer description of the error.",
                  "name": "error_name"
                }
              }
            }
          },
          "404": {
            "description": "not_found: Not Found response.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIError"
                },
                "example": {
                  "message": "A longer description of the error.",
                  "name": "error_name"
                }
              }
            }
          },
          "409": {
            "description": "operation_already_in_progress: Conflict response.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIError"
                },
                "example": {
                  "message": "A longer description of the error.",
                  "name": "error_name"
                }
              }
            }
          },
          "500": {
            "description": "server_error: Internal Server Error response.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIError"
                },
                "example": {
                  "message": "A longer description of the error.",
                  "name": "error_name"
                }
              }
            }
          }
        }
      }
    },
    "/v1/databases/{database_id}/instances/{instance_id}/restart": {
      "post": {
        "tags": [
          "Database"
        ],
        "summary": "Restart a database instance",
        "description": "Restarts a specific instance within a database. Supports immediate or scheduled restarts.",
        "operationId": "restart-instance",
        "parameters": [
          {
            "name": "database_id",
            "in": "path",
            "description": "The ID of the database that owns the instance.",
            "required": true,
            "schema": {
              "type": "string",
              "description": "A user-specified identifier. Must be 1-63 characters, contain only lower-cased letters and hyphens, start and end with a letter or number, and not contain consecutive hyphens.",
              "example": "76f9b8c0-4958-11f0-a489-3bb29577c696",
              "minLength": 1,
              "maxLength": 63
            },
            "example": "68f50878-44d2-4524-a823-e31bd478706d"
          },
          {
            "name": "instance_id",
            "in": "path",
            "description": "The ID of the instance to restart.",
            "required": true,
            "schema": {
              "type": "string",
              "description": "A user-specified identifier. Must be 1-63 characters, contain only lower-cased letters and hyphens, start and end with a letter or number, and not contain consecutive hyphens.",
              "example": "76f9b8c0-4958-11f0-a489-3bb29577c696",
              "minLength": 1,
              "maxLength": 63
            },
            "example": "68f50878-44d2-4524-a823-e31bd478706d-n1-689qacsi"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "scheduled_at": {
                    "type": "string",
                    "description": "The time at which the restart is scheduled.",
                    "example": "2025-06-18T16:52:05Z",
                    "format": "date-time"
                  }
                },
                "example": {
                  "scheduled_at": "2025-06-18T16:52:05Z"
                }
              },
              "example": {
                "scheduled_at": "2025-06-18T16:52:05Z"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "OK response.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RestartInstanceResponse"
                },
                "examples": {
                  "default": {
                    "summary": "default",
                    "value": {
                      "task": {
                        "created_at": "2025-06-18T16:52:05Z",
                        "database_id": "f2f1cae9-6f37-4609-aa98-d0991bff3493",
                        "instance_id": "f2f1cae9-6f37-4609-aa98-d0991bff3493-n1-689qacsi",
                        "status": "pending",
                        "task_id": "019783f4-75f4-71e7-85a3-c9b96b345d77",
                        "type": "restart_instance"
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "invalid_input: Bad Request response.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIError"
                },
                "example": {
                  "message": "A longer description of the error.",
                  "name": "error_name"
                }
              }
            }
          },
          "404": {
            "description": "not_found: Not Found response.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIError"
                },
                "example": {
                  "message": "A longer description of the error.",
                  "name": "error_name"
                }
              }
            }
          },
          "409": {
            "description": "cluster_not_initialized: Conflict response.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIError"
                },
                "example": {
                  "message": "A longer description of the error.",
                  "name": "error_name"
                }
              }
            }
          },
          "500": {
            "description": "server_error: Internal Server Error response.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIError"
                },
                "example": {
                  "message": "A longer description of the error.",
                  "name": "error_name"
                }
              }
            }
          }
        }
      }
    },
    "/v1/databases/{database_id}/instances/{instance_id}/start-instance": {
      "post": {
        "tags": [
          "Database"
        ],
        "summary": "Starts a database instance",
        "description": "Starts a specific instance within a database. Supports immediate starts",
        "operationId": "start-instance",
        "parameters": [
          {
            "name": "force",
            "in": "query",
            "description": "Force starting an instance even if database in an unmodifiable state",
            "allowEmptyValue": true,
            "schema": {
              "type": "boolean",
              "description": "Force starting an instance even if database in an unmodifiable state",
              "default": false,
              "example": true
            },
            "example": true
          },
          {
            "name": "database_id",
            "in": "path",
            "description": "The ID of the database that owns the instance.",
            "required": true,
            "schema": {
              "type": "string",
              "description": "A user-specified identifier. Must be 1-63 characters, contain only lower-cased letters and hyphens, start and end with a letter or number, and not contain consecutive hyphens.",
              "example": "76f9b8c0-4958-11f0-a489-3bb29577c696",
              "minLength": 1,
              "maxLength": 63
            },
            "example": "68f50878-44d2-4524-a823-e31bd478706d"
          },
          {
            "name": "instance_id",
            "in": "path",
            "description": "The ID of the instance to start.",
            "required": true,
            "schema": {
              "type": "string",
              "description": "A user-specified identifier. Must be 1-63 characters, contain only lower-cased letters and hyphens, start and end with a letter or number, and not contain consecutive hyphens.",
              "example": "76f9b8c0-4958-11f0-a489-3bb29577c696",
              "minLength": 1,
              "maxLength": 63
            },
            "example": "68f50878-44d2-4524-a823-e31bd478706d-n1-689qacsi"
          }
        ],
        "responses": {
          "200": {
            "description": "OK response.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StartInstanceResponse"
                },
                "examples": {
                  "default": {
                    "summary": "default",
                    "value": {
                      "task": {
                        "created_at": "2025-06-18T16:52:05Z",
                        "database_id": "f2f1cae9-6f37-4609-aa98-d0991bff3493",
                        "instance_id": "f2f1cae9-6f37-4609-aa98-d0991bff3493-n1-689qacsi",
                        "status": "pending",
                        "task_id": "019783f4-75f4-71e7-85a3-c9b96b345d77",
                        "type": "start_instance"
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "invalid_input: Bad Request response.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIError"
                },
                "example": {
                  "message": "A longer description of the error.",
                  "name": "error_name"
                }
              }
            }
          },
          "404": {
            "description": "not_found: Not Found response.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIError"
                },
                "example": {
                  "message": "A longer description of the error.",
                  "name": "error_name"
                }
              }
            }
          },
          "409": {
            "description": "cluster_not_initialized: Conflict response.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIError"
                },
                "example": {
                  "message": "A longer description of the error.",
                  "name": "error_name"
                }
              }
            }
          },
          "500": {
            "description": "server_error: Internal Server Error response.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIError"
                },
                "example": {
                  "message": "A longer description of the error.",
                  "name": "error_name"
                }
              }
            }
          }
        }
      }
    },
    "/v1/databases/{database_id}/instances/{instance_id}/stop-instance": {
      "post": {
        "tags": [
          "Database"
        ],
        "summary": "Stops a database instance",
        "description": "Stops a specific instance within a database. Supports immediate stops.",
        "operationId": "stop-instance",
        "parameters": [
          {
            "name": "force",
            "in": "query",
            "description": "Force stopping an instance even if database in an unmodifiable state",
            "allowEmptyValue": true,
            "schema": {
              "type": "boolean",
              "description": "Force stopping an instance even if database in an unmodifiable state",
              "default": false,
              "example": true
            },
            "example": true
          },
          {
            "name": "database_id",
            "in": "path",
            "description": "The ID of the database that owns the instance.",
            "required": true,
            "schema": {
              "type": "string",
              "description": "A user-specified identifier. Must be 1-63 characters, contain only lower-cased letters and hyphens, start and end with a letter or number, and not contain consecutive hyphens.",
              "example": "76f9b8c0-4958-11f0-a489-3bb29577c696",
              "minLength": 1,
              "maxLength": 63
            },
            "example": "68f50878-44d2-4524-a823-e31bd478706d"
          },
          {
            "name": "instance_id",
            "in": "path",
            "description": "The ID of the instance to stop.",
            "required": true,
            "schema": {
              "type": "string",
              "description": "A user-specified identifier. Must be 1-63 characters, contain only lower-cased letters and hyphens, start and end with a letter or number, and not contain consecutive hyphens.",
              "example": "76f9b8c0-4958-11f0-a489-3bb29577c696",
              "minLength": 1,
              "maxLength": 63
            },
            "example": "68f50878-44d2-4524-a823-e31bd478706d-n1-689qacsi"
          }
        ],
        "responses": {
          "200": {
            "description": "OK response.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StopInstanceResponse"
                },
                "examples": {
                  "default": {
                    "summary": "default",
                    "value": {
                      "task": {
                        "created_at": "2025-06-18T16:52:05Z",
                        "database_id": "f2f1cae9-6f37-4609-aa98-d0991bff3493",
                        "instance_id": "f2f1cae9-6f37-4609-aa98-d0991bff3493-n1-689qacsi",
                        "status": "pending",
                        "task_id": "019783f4-75f4-71e7-85a3-c9b96b345d77",
                        "type": "stop_instance"
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "invalid_input: Bad Request response.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIError"
                },
                "example": {
                  "message": "A longer description of the error.",
                  "name": "error_name"
                }
              }
            }
          },
          "404": {
            "description": "not_found: Not Found response.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIError"
                },
                "example": {
                  "message": "A longer description of the error.",
                  "name": "error_name"
                }
              }
            }
          },
          "409": {
            "description": "cluster_not_initialized: Conflict response.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIError"
                },
                "example": {
                  "message": "A longer description of the error.",
                  "name": "error_name"
                }
              }
            }
          },
          "500": {
            "description": "server_error: Internal Server Error response.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIError"
                },
                "example": {
                  "message": "A longer description of the error.",
                  "name": "error_name"
                }
              }
            }
          }
        }
      }
    },
    "/v1/databases/{database_id}/nodes/{node_name}/backups": {
      "post": {
        "tags": [
          "Database"
        ],
        "summary": "Backup database node",
        "description": "Initiates a backup for a database node.",
        "operationId": "backup-database-node",
        "parameters": [
          {
            "name": "force",
            "in": "query",
            "description": "Forcibly attempt backup even in unmodifiable state",
            "allowEmptyValue": true,
            "schema": {
              "type": "boolean",
              "description": "Forcibly attempt backup even in unmodifiable state",
              "default": false,
              "example": true
            },
            "example": true
          },
          {
            "name": "database_id",
            "in": "path",
            "description": "ID of the database to back up.",
            "required": true,
            "schema": {
              "type": "string",
              "description": "A user-specified identifier. Must be 1-63 characters, contain only lower-cased letters and hyphens, start and end with a letter or number, and not contain consecutive hyphens.",
              "example": "76f9b8c0-4958-11f0-a489-3bb29577c696",
              "minLength": 1,
              "maxLength": 63
            },
            "example": "my-app"
          },
          {
            "name": "node_name",
            "in": "path",
            "description": "Name of the node to back up.",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Name of the node to back up.",
              "example": "n1",
              "pattern": "n[0-9]+"
            },
            "example": "n1"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/BackupOptions"
              },
              "examples": {
                "Backup with annotations and options": {
                  "summary": "Backup with annotations and options",
                  "description": "Example of taking backup with annotations and additional backup options.",
                  "value": {
                    "annotations": {
                      "initiated-by": "backup-cron-job"
                    },
                    "backup_options": {
                      "archive-check": "n"
                    },
                    "type": "full"
                  }
                },
                "Full backup": {
                  "summary": "Full backup",
                  "description": "Example of taking a full backup.",
                  "value": {
                    "type": "full"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "OK response.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/BackupDatabaseNodeResponse"
                },
                "example": {
                  "task": {
                    "created_at": "2025-06-18T17:54:28Z",
                    "database_id": "storefront",
                    "status": "pending",
                    "task_id": "0197842d-9082-7496-b787-77bd2e11809f",
                    "type": "node_backup"
                  }
                }
              }
            }
          },
          "400": {
            "description": "invalid_input: Bad Request response.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIError"
                },
                "example": {
                  "message": "A longer description of the error.",
                  "name": "error_name"
                }
              }
            }
          },
          "404": {
            "description": "not_found: Not Found response.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIError"
                },
                "example": {
                  "message": "A longer description of the error.",
                  "name": "error_name"
                }
              }
            }
          },
          "409": {
            "description": "operation_already_in_progress: Conflict response.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIError"
                },
                "example": {
                  "message": "A longer description of the error.",
                  "name": "error_name"
                }
              }
            }
          },
          "500": {
            "description": "server_error: Internal Server Error response.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIError"
                },
                "example": {
                  "message": "A longer description of the error.",
                  "name": "error_name"
                }
              }
            }
          }
        }
      }
    },
    "/v1/databases/{database_id}/nodes/{node_name}/failover": {
      "post": {
        "tags": [
          "Database"
        ],
        "summary": "Failover database node",
        "description": "Performs a failover for a node to a replica candidate.",
        "operationId": "failover-database-node",
        "parameters": [
          {
            "name": "database_id",
            "in": "path",
            "description": "ID of the database to perform the failover for.",
            "required": true,
            "schema": {
              "type": "string",
              "description": "A user-specified identifier. Must be 1-63 characters, contain only lower-cased letters and hyphens, start and end with a letter or number, and not contain consecutive hyphens.",
              "example": "76f9b8c0-4958-11f0-a489-3bb29577c696",
              "minLength": 1,
              "maxLength": 63
            },
            "example": "my-app"
          },
          {
            "name": "node_name",
            "in": "path",
            "description": "Name of the node to initiate the failover from.",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Name of the node to initiate the failover from.",
              "example": "n1",
              "pattern": "n[0-9]+"
            },
            "example": "n1"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/FailoverDatabaseNodeRequest2"
              },
              "example": {
                "candidate_instance_id": "68f50878-44d2-4524-a823-e31bd478706d-n1-689qacsi",
                "skip_validation": true
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "OK response.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FailoverDatabaseNodeResponse"
                },
                "example": {
                  "task": {
                    "created_at": "2025-06-18T17:54:28Z",
                    "database_id": "storefront",
                    "status": "pending",
                    "task_id": "0197842d-9082-7496-b787-77bd2e11809f",
                    "type": "failover"
                  }
                }
              }
            }
          },
          "400": {
            "description": "invalid_input: Bad Request response.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIError"
                },
                "example": {
                  "message": "A longer description of the error.",
                  "name": "error_name"
                }
              }
            }
          },
          "404": {
            "description": "not_found: Not Found response.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIError"
                },
                "example": {
                  "message": "A longer description of the error.",
                  "name": "error_name"
                }
              }
            }
          },
          "409": {
            "description": "operation_already_in_progress: Conflict response.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIError"
                },
                "example": {
                  "message": "A longer description of the error.",
                  "name": "error_name"
                }
              }
            }
          },
          "500": {
            "description": "server_error: Internal Server Error response.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIError"
                },
                "example": {
                  "message": "A longer description of the error.",
                  "name": "error_name"
                }
              }
            }
          }
        }
      }
    },
    "/v1/databases/{database_id}/nodes/{node_name}/switchover": {
      "post": {
        "tags": [
          "Database"
        ],
        "summary": "Switchover database node",
        "description": "Performs a planned switchover for a node's primary to a replica candidate.",
        "operationId": "switchover-database-node",
        "parameters": [
          {
            "name": "database_id",
            "in": "path",
            "description": "ID of the database to operate on.",
            "required": true,
            "schema": {
              "type": "string",
              "description": "A user-specified identifier. Must be 1-63 characters, contain only lower-cased letters and hyphens, start and end with a letter or number, and not contain consecutive hyphens.",
              "example": "76f9b8c0-4958-11f0-a489-3bb29577c696",
              "minLength": 1,
              "maxLength": 63
            },
            "example": "my-app"
          },
          {
            "name": "node_name",
            "in": "path",
            "description": "Name of the node to operate on.",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Name of the node to operate on.",
              "example": "n1",
              "pattern": "n[0-9]+"
            },
            "example": "n1"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SwitchoverDatabaseNodeRequestBody"
              },
              "example": {
                "candidate_instance_id": "68f50878-44d2-4524-a823-e31bd478706d-n1-689qacsi",
                "scheduled_at": "2025-09-20T22:00:00+05:30"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "OK response.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SwitchoverDatabaseNodeResponse"
                },
                "example": {
                  "task": {
                    "created_at": "2025-06-18T17:54:28Z",
                    "database_id": "storefront",
                    "status": "pending",
                    "task_id": "0197842d-9082-7496-b787-77bd2e11809f",
                    "type": "switchover"
                  }
                }
              }
            }
          },
          "400": {
            "description": "invalid_input: Bad Request response.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIError"
                },
                "example": {
                  "message": "A longer description of the error.",
                  "name": "error_name"
                }
              }
            }
          },
          "404": {
            "description": "not_found: Not Found response.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIError"
                },
                "example": {
                  "message": "A longer description of the error.",
                  "name": "error_name"
                }
              }
            }
          },
          "409": {
            "description": "operation_already_in_progress: Conflict response.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIError"
                },
                "example": {
                  "message": "A longer description of the error.",
                  "name": "error_name"
                }
              }
            }
          },
          "500": {
            "description": "server_error: Internal Server Error response.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIError"
                },
                "example": {
                  "message": "A longer description of the error.",
                  "name": "error_name"
                }
              }
            }
          }
        }
      }
    },
    "/v1/databases/{database_id}/restore": {
      "post": {
        "tags": [
          "Database"
        ],
        "summary": "Restore database",
        "description": "Perform an in-place restore of one or more nodes using the given restore configuration.",
        "operationId": "restore-database",
        "parameters": [
          {
            "name": "force",
            "in": "query",
            "description": "Force restoration of a database even in an unmodifiable state",
            "allowEmptyValue": true,
            "schema": {
              "type": "boolean",
              "description": "Force restoration of a database even in an unmodifiable state",
              "default": false,
              "example": true
            },
            "example": true
          },
          {
            "name": "database_id",
            "in": "path",
            "description": "ID of the database to restore.",
            "required": true,
            "schema": {
              "type": "string",
              "description": "A user-specified identifier. Must be 1-63 characters, contain only lower-cased letters and hyphens, start and end with a letter or number, and not contain consecutive hyphens.",
              "example": "76f9b8c0-4958-11f0-a489-3bb29577c696",
              "minLength": 1,
              "maxLength": 63
            },
            "example": "my-app"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RestoreDatabaseRequest"
              },
              "examples": {
                "Restore all nodes": {
                  "summary": "Restore all nodes",
                  "description": "If the target_nodes field is omitted from the request, all nodes will be restored using the given restore_config.",
                  "value": {
                    "restore_config": {
                      "repository": {
                        "base_path": "/backups",
                        "type": "posix"
                      },
                      "source_database_id": "storefront",
                      "source_database_name": "storefront",
                      "source_node_name": "n1"
                    }
                  }
                },
                "Restore n1 only": {
                  "summary": "Restore n1 only",
                  "description": "Example of restoring a single target node.",
                  "value": {
                    "restore_config": {
                      "repository": {
                        "base_path": "/backups",
                        "type": "posix"
                      },
                      "source_database_id": "storefront",
                      "source_database_name": "storefront",
                      "source_node_name": "n1"
                    },
                    "target_nodes": [
                      "n1"
                    ]
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "OK response.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RestoreDatabaseResponse"
                },
                "example": {
                  "database": {
                    "created_at": "2025-06-18T16:52:05Z",
                    "id": "storefront",
                    "instances": [
                      {
                        "connection_info": {
                          "hostname": "i-0123456789abcdef.ec2.internal",
                          "ipv4_address": "10.24.34.2",
                          "port": 5432
                        },
                        "created_at": "2025-06-18T16:52:22Z",
                        "host_id": "us-east-1",
                        "id": "storefront-n1-689qacsi",
                        "node_name": "n1",
                        "postgres": {
                          "patroni_state": "running",
                          "role": "primary",
                          "version": "17.5"
                        },
                        "spock": {
                          "read_only": "off",
                          "subscriptions": [
                            {
                              "name": "sub_n1n3",
                              "provider_node": "n3",
                              "status": "replicating"
                            },
                            {
                              "name": "sub_n1n2",
                              "provider_node": "n2",
                              "status": "replicating"
                            }
                          ],
                          "version": "4.0.10"
                        },
                        "state": "available",
                        "status_updated_at": "2025-06-18T17:58:56Z",
                        "updated_at": "2025-06-18T17:54:36Z"
                      },
                      {
                        "connection_info": {
                          "hostname": "i-058731542fee493f.ec2.internal",
                          "ipv4_address": "10.24.35.2",
                          "port": 5432
                        },
                        "created_at": "2025-06-18T16:52:22Z",
                        "host_id": "ap-south-1",
                        "id": "storefront-n2-9ptayhma",
                        "node_name": "n2",
                        "postgres": {
                          "patroni_state": "running",
                          "role": "primary",
                          "version": "17.5"
                        },
                        "spock": {
                          "read_only": "off",
                          "subscriptions": [
                            {
                              "name": "sub_n2n1",
                              "provider_node": "n1",
                              "status": "replicating"
                            },
                            {
                              "name": "sub_n2n3",
                              "provider_node": "n3",
                              "status": "replicating"
                            }
                          ],
                          "version": "4.0.10"
                        },
                        "state": "available",
                        "status_updated_at": "2025-06-18T17:58:56Z",
                        "updated_at": "2025-06-18T17:54:01Z"
                      },
                      {
                        "connection_info": {
                          "hostname": "i-494027b7b53f6a23.ec2.internal",
                          "ipv4_address": "10.24.36.2",
                          "port": 5432
                        },
                        "created_at": "2025-06-18T16:52:22Z",
                        "host_id": "eu-central-1",
                        "id": "storefront-n3-ant97dj4",
                        "node_name": "n3",
                        "postgres": {
                          "patroni_state": "running",
                          "role": "primary",
                          "version": "17.5"
                        },
                        "spock": {
                          "read_only": "off",
                          "subscriptions": [
                            {
                              "name": "sub_n3n1",
                              "provider_node": "n1",
                              "status": "replicating"
                            },
                            {
                              "name": "sub_n3n2",
                              "provider_node": "n2",
                              "status": "replicating"
                            }
                          ],
                          "version": "4.0.10"
                        },
                        "state": "available",
                        "status_updated_at": "2025-06-18T17:58:56Z",
                        "updated_at": "2025-06-18T17:54:01Z"
                      }
                    ],
                    "spec": {
                      "database_name": "storefront",
                      "database_users": [
                        {
                          "attributes": [
                            "SUPERUSER",
                            "LOGIN"
                          ],
                          "db_owner": true,
                          "username": "admin"
                        }
                      ],
                      "nodes": [
                        {
                          "host_ids": [
                            "us-east-1"
                          ],
                          "name": "n1"
                        },
                        {
                          "host_ids": [
                            "ap-south-1"
                          ],
                          "name": "n2"
                        },
                        {
                          "host_ids": [
                            "eu-central-1"
                          ],
                          "name": "n3"
                        }
                      ],
                      "port": 5432,
                      "postgres_version": "17.6",
                      "spock_version": "5"
                    },
                    "state": "restoring",
                    "updated_at": "2025-06-18T17:58:59Z"
                  },
                  "node_tasks": [
                    {
                      "created_at": "2025-06-18T17:58:59Z",
                      "database_id": "storefront",
                      "node_name": "n1",
                      "parent_id": "01978431-b628-758a-aec6-03b331fa1a17",
                      "status": "pending",
                      "task_id": "01978431-b62b-723b-a09c-e4072cd64bdb",
                      "type": "node_restore"
                    },
                    {
                      "created_at": "2025-06-18T17:58:59Z",
                      "database_id": "storefront",
                      "node_name": "n2",
                      "parent_id": "01978431-b628-758a-aec6-03b331fa1a17",
                      "status": "pending",
                      "task_id": "01978431-b62c-7593-aad8-43b03df2031b",
                      "type": "node_restore"
                    },
                    {
                      "created_at": "2025-06-18T17:58:59Z",
                      "database_id": "storefront",
                      "node_name": "n3",
                      "parent_id": "01978431-b628-758a-aec6-03b331fa1a17",
                      "status": "pending",
                      "task_id": "01978431-b62d-7b65-ab09-272d0b2fea91",
                      "type": "node_restore"
                    }
                  ],
                  "task": {
                    "created_at": "2025-06-18T17:58:59Z",
                    "database_id": "storefront",
                    "status": "pending",
                    "task_id": "01978431-b628-758a-aec6-03b331fa1a17",
                    "type": "restore"
                  }
                }
              }
            }
          },
          "400": {
            "description": "invalid_input: Bad Request response.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIError"
                },
                "example": {
                  "message": "A longer description of the error.",
                  "name": "error_name"
                }
              }
            }
          },
          "404": {
            "description": "not_found: Not Found response.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIError"
                },
                "example": {
                  "message": "A longer description of the error.",
                  "name": "error_name"
                }
              }
            }
          },
          "409": {
            "description": "operation_already_in_progress: Conflict response.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIError"
                },
                "example": {
                  "message": "A longer description of the error.",
                  "name": "error_name"
                }
              }
            }
          },
          "500": {
            "description": "server_error: Internal Server Error response.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIError"
                },
                "example": {
                  "message": "A longer description of the error.",
                  "name": "error_name"
                }
              }
            }
          }
        }
      }
    },
    "/v1/databases/{database_id}/tasks": {
      "get": {
        "tags": [
          "Database"
        ],
        "summary": "List database tasks",
        "description": "Lists all tasks for a database.",
        "operationId": "list-database-tasks",
        "parameters": [
          {
            "name": "after_task_id",
            "in": "query",
            "description": "ID of the task to start from.",
            "allowEmptyValue": true,
            "schema": {
              "type": "string",
              "description": "ID of the task to start from.",
              "example": "3c875a27-f6a6-4c1c-ba5f-6972fb1fc348",
              "format": "uuid"
            },
            "example": "3c875a27-f6a6-4c1c-ba5f-6972fb1fc348"
          },
          {
            "name": "limit",
            "in": "query",
            "description": "Maximum number of tasks to return.",
            "allowEmptyValue": true,
            "schema": {
              "type": "integer",
              "description": "Maximum number of tasks to return.",
              "example": 100,
              "format": "int64"
            },
            "example": 100
          },
          {
            "name": "sort_order",
            "in": "query",
            "description": "Sort order for the tasks.",
            "allowEmptyValue": true,
            "schema": {
              "type": "string",
              "description": "Sort order for the tasks.",
              "example": "ascend",
              "enum": [
                "asc",
                "ascend",
                "ascending",
                "desc",
                "descend",
                "descending"
              ]
            },
            "example": "ascend"
          },
          {
            "name": "database_id",
            "in": "path",
            "description": "ID of the database to list tasks for.",
            "required": true,
            "schema": {
              "type": "string",
              "description": "A user-specified identifier. Must be 1-63 characters, contain only lower-cased letters and hyphens, start and end with a letter or number, and not contain consecutive hyphens.",
              "example": "76f9b8c0-4958-11f0-a489-3bb29577c696",
              "minLength": 1,
              "maxLength": 63
            },
            "example": "my-app"
          }
        ],
        "responses": {
          "200": {
            "description": "OK response.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ListDatabaseTasksResponse"
                },
                "example": {
                  "tasks": [
                    {
                      "completed_at": "2025-06-18T17:54:36Z",
                      "created_at": "2025-06-18T17:54:28Z",
                      "database_id": "storefront",
                      "instance_id": "storefront-n1-689qacsi",
                      "status": "completed",
                      "task_id": "0197842d-9082-7496-b787-77bd2e11809f",
                      "type": "node_backup"
                    },
                    {
                      "completed_at": "2025-06-18T17:54:04Z",
                      "created_at": "2025-06-18T17:53:17Z",
                      "database_id": "storefront",
                      "status": "completed",
                      "task_id": "0197842c-7c4f-7a8c-829e-7405c2a41c8c",
                      "type": "update"
                    },
                    {
                      "completed_at": "2025-06-18T17:23:28Z",
                      "created_at": "2025-06-18T17:23:14Z",
                      "database_id": "storefront",
                      "status": "completed",
                      "task_id": "01978410-fb5d-7cd2-bbd2-66c0bf929dc0",
                      "type": "update"
                    },
                    {
                      "completed_at": "2025-06-18T16:52:35Z",
                      "created_at": "2025-06-18T16:52:05Z",
                      "database_id": "storefront",
                      "status": "completed",
                      "task_id": "019783f4-75f4-71e7-85a3-c9b96b345d77",
                      "type": "create"
                    }
                  ]
                }
              }
            }
          },
          "400": {
            "description": "invalid_input: Bad Request response.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIError"
                },
                "example": {
                  "message": "A longer description of the error.",
                  "name": "error_name"
                }
              }
            }
          },
          "404": {
            "description": "not_found: Not Found response.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIError"
                },
                "example": {
                  "message": "A longer description of the error.",
                  "name": "error_name"
                }
              }
            }
          },
          "409": {
            "description": "cluster_not_initialized: Conflict response.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIError"
                },
                "example": {
                  "message": "A longer description of the error.",
                  "name": "error_name"
                }
              }
            }
          },
          "500": {
            "description": "server_error: Internal Server Error response.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIError"
                },
                "example": {
                  "message": "A longer description of the error.",
                  "name": "error_name"
                }
              }
            }
          }
        }
      }
    },
    "/v1/databases/{database_id}/tasks/{task_id}": {
      "get": {
        "tags": [
          "Database"
        ],
        "summary": "Get database task",
        "description": "Returns information about a particular task.",
        "operationId": "get-database-task",
        "parameters": [
          {
            "name": "database_id",
            "in": "path",
            "description": "ID of the database the task belongs to.",
            "required": true,
            "schema": {
              "type": "string",
              "description": "A user-specified identifier. Must be 1-63 characters, contain only lower-cased letters and hyphens, start and end with a letter or number, and not contain consecutive hyphens.",
              "example": "76f9b8c0-4958-11f0-a489-3bb29577c696",
              "minLength": 1,
              "maxLength": 63
            },
            "example": "my-app"
          },
          {
            "name": "task_id",
            "in": "path",
            "description": "ID of the task to get.",
            "required": true,
            "schema": {
              "type": "string",
              "description": "ID of the task to get.",
              "example": "3c875a27-f6a6-4c1c-ba5f-6972fb1fc348",
              "format": "uuid"
            },
            "example": "3c875a27-f6a6-4c1c-ba5f-6972fb1fc348"
          }
        ],
        "responses": {
          "200": {
            "description": "OK response.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Task"
                },
                "example": {
                  "completed_at": "2025-06-18T16:52:35Z",
                  "created_at": "2025-06-18T16:52:05Z",
                  "database_id": "storefront",
                  "status": "completed",
                  "task_id": "019783f4-75f4-71e7-85a3-c9b96b345d77",
                  "type": "create"
                }
              }
            }
          },
          "400": {
            "description": "invalid_input: Bad Request response.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIError"
                },
                "example": {
                  "message": "A longer description of the error.",
                  "name": "error_name"
                }
              }
            }
          },
          "404": {
            "description": "not_found: Not Found response.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIError"
                },
                "example": {
                  "message": "A longer description of the error.",
                  "name": "error_name"
                }
              }
            }
          },
          "409": {
            "description": "cluster_not_initialized: Conflict response.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIError"
                },
                "example": {
                  "message": "A longer description of the error.",
                  "name": "error_name"
                }
              }
            }
          },
          "500": {
            "description": "server_error: Internal Server Error response.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIError"
                },
                "example": {
                  "message": "A longer description of the error.",
                  "name": "error_name"
                }
              }
            }
          }
        }
      }
    },
    "/v1/databases/{database_id}/tasks/{task_id}/cancel": {
      "get": {
        "tags": [
          "Database"
        ],
        "summary": "Cancel a database task",
        "description": "Cancels a running or pending task for a database.",
        "operationId": "cancel-database-task",
        "parameters": [
          {
            "name": "database_id",
            "in": "path",
            "description": "ID of the database that owns the task.",
            "required": true,
            "schema": {
              "type": "string",
              "description": "A user-specified identifier. Must be 1-63 characters, contain only lower-cased letters and hyphens, start and end with a letter or number, and not contain consecutive hyphens.",
              "example": "76f9b8c0-4958-11f0-a489-3bb29577c696",
              "minLength": 1,
              "maxLength": 63
            },
            "example": "abc123"
          },
          {
            "name": "task_id",
            "in": "path",
            "description": "ID of the task to cancel.",
            "required": true,
            "schema": {
              "type": "string",
              "description": "A user-specified identifier. Must be 1-63 characters, contain only lower-cased letters and hyphens, start and end with a letter or number, and not contain consecutive hyphens.",
              "example": "76f9b8c0-4958-11f0-a489-3bb29577c696",
              "minLength": 1,
              "maxLength": 63
            },
            "example": "def456"
          }
        ],
        "responses": {
          "200": {
            "description": "OK response.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Task"
                },
                "example": {
                  "completed_at": "2025-06-18T16:52:35Z",
                  "created_at": "2025-06-18T16:52:05Z",
                  "database_id": "storefront",
                  "status": "completed",
                  "task_id": "019783f4-75f4-71e7-85a3-c9b96b345d77",
                  "type": "create"
                }
              }
            }
          },
          "400": {
            "description": "invalid_input: Bad Request response.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIError"
                },
                "example": {
                  "message": "A longer description of the error.",
                  "name": "error_name"
                }
              }
            }
          },
          "404": {
            "description": "not_found: Not Found response.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIError"
                },
                "example": {
                  "message": "A longer description of the error.",
                  "name": "error_name"
                }
              }
            }
          },
          "500": {
            "description": "server_error: Internal Server Error response.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIError"
                },
                "example": {
                  "message": "A longer description of the error.",
                  "name": "error_name"
                }
              }
            }
          }
        }
      }
    },
    "/v1/databases/{database_id}/tasks/{task_id}/log": {
      "get": {
        "tags": [
          "Database"
        ],
        "summary": "Get database task log",
        "description": "Returns the log of a particular task for a database.",
        "operationId": "get-database-task-log",
        "parameters": [
          {
            "name": "after_entry_id",
            "in": "query",
            "description": "ID of the entry to start from.",
            "allowEmptyValue": true,
            "schema": {
              "type": "string",
              "description": "ID of the entry to start from.",
              "example": "3c875a27-f6a6-4c1c-ba5f-6972fb1fc348",
              "format": "uuid"
            },
            "example": "3c875a27-f6a6-4c1c-ba5f-6972fb1fc348"
          },
          {
            "name": "limit",
            "in": "query",
            "description": "Maximum number of entries to return.",
            "allowEmptyValue": true,
            "schema": {
              "type": "integer",
              "description": "Maximum number of entries to return.",
              "example": 100,
              "format": "int64"
            },
            "example": 100
          },
          {
            "name": "database_id",
            "in": "path",
            "description": "ID of the database to get the task log for.",
            "required": true,
            "schema": {
              "type": "string",
              "description": "A user-specified identifier. Must be 1-63 characters, contain only lower-cased letters and hyphens, start and end with a letter or number, and not contain consecutive hyphens.",
              "example": "76f9b8c0-4958-11f0-a489-3bb29577c696",
              "minLength": 1,
              "maxLength": 63
            },
            "example": "my-app"
          },
          {
            "name": "task_id",
            "in": "path",
            "description": "ID of the task to get the log for.",
            "required": true,
            "schema": {
              "type": "string",
              "description": "ID of the task to get the log for.",
              "example": "3c875a27-f6a6-4c1c-ba5f-6972fb1fc348",
              "format": "uuid"
            },
            "example": "3c875a27-f6a6-4c1c-ba5f-6972fb1fc348"
          }
        ],
        "responses": {
          "200": {
            "description": "OK response.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TaskLog"
                },
                "examples": {
                  "node_backup task log": {
                    "summary": "node_backup task log",
                    "description": "The task log from a 'node_backup' task. These messages are produced by pgbackrest.",
                    "value": {
                      "database_id": "storefront",
                      "entries": [
                        {
                          "message": "P00   INFO: backup command begin 2.55.1: --config=/opt/pgedge/configs/pgbackrest.backup.conf --exec-id=198-b17fae6e --log-level-console=info --no-log-timestamp --pg1-path=/opt/pgedge/data/pgdata --pg1-user=pgedge --repo1-cipher-type=none --repo1-path=/backups/databases/storefront/n1 --repo1-retention-full=7 --repo1-retention-full-type=time --repo1-type=posix --stanza=db --start-fast --type=full",
                          "timestamp": "2025-06-18T17:54:34Z"
                        },
                        {
                          "message": "P00   INFO: execute non-exclusive backup start: backup begins after the requested immediate checkpoint completes",
                          "timestamp": "2025-06-18T17:54:34Z"
                        },
                        {
                          "message": "P00   INFO: backup start archive = 000000020000000000000004, lsn = 0/4000028",
                          "timestamp": "2025-06-18T17:54:34Z"
                        },
                        {
                          "message": "P00   INFO: check archive for prior segment 000000020000000000000003",
                          "timestamp": "2025-06-18T17:54:34Z"
                        },
                        {
                          "message": "P00   INFO: execute non-exclusive backup stop and wait for all WAL segments to archive",
                          "timestamp": "2025-06-18T17:54:36Z"
                        },
                        {
                          "message": "P00   INFO: backup stop archive = 000000020000000000000004, lsn = 0/4000120",
                          "timestamp": "2025-06-18T17:54:36Z"
                        },
                        {
                          "message": "P00   INFO: check archive for segment(s) 000000020000000000000004:000000020000000000000004",
                          "timestamp": "2025-06-18T17:54:36Z"
                        },
                        {
                          "message": "P00   INFO: new backup label = 20250618-175434F",
                          "timestamp": "2025-06-18T17:54:36Z"
                        },
                        {
                          "message": "P00   INFO: full backup size = 30.6MB, file total = 1342",
                          "timestamp": "2025-06-18T17:54:36Z"
                        },
                        {
                          "message": "P00   INFO: backup command end: completed successfully",
                          "timestamp": "2025-06-18T17:54:36Z"
                        },
                        {
                          "message": "P00   INFO: expire command begin 2.55.1: --config=/opt/pgedge/configs/pgbackrest.backup.conf --exec-id=198-b17fae6e --log-level-console=info --no-log-timestamp --repo1-cipher-type=none --repo1-path=/backups/databases/storefront/n1 --repo1-retention-full=7 --repo1-retention-full-type=time --repo1-type=posix --stanza=db",
                          "timestamp": "2025-06-18T17:54:36Z"
                        },
                        {
                          "message": "P00   INFO: repo1: time-based archive retention not met - archive logs will not be expired",
                          "timestamp": "2025-06-18T17:54:36Z"
                        },
                        {
                          "message": "P00   INFO: expire command end: completed successfully",
                          "timestamp": "2025-06-18T17:54:36Z"
                        }
                      ],
                      "last_entry_id": "0197842d-b14d-7c69-86c1-c006a7c65318",
                      "task_id": "0197842d-9082-7496-b787-77bd2e11809f",
                      "task_status": "completed"
                    }
                  },
                  "update task log": {
                    "summary": "update task log",
                    "description": "This is the task log of an update task. This example excludes many entries for brevity.",
                    "value": {
                      "database_id": "storefront",
                      "entries": [
                        {
                          "message": "refreshing current state",
                          "timestamp": "2025-06-18T17:53:19Z"
                        },
                        {
                          "fields": {
                            "duration_ms": 8972
                          },
                          "message": "finished refreshing current state (took 8.972080116s)",
                          "timestamp": "2025-06-18T17:53:28Z"
                        },
                        {
                          "fields": {
                            "host_id": "host-1",
                            "resource_id": "storefront-n1-689qacsi-backup",
                            "resource_type": "swarm.pgbackrest_config"
                          },
                          "message": "creating resource swarm.pgbackrest_config::storefront-n1-689qacsi-backup",
                          "timestamp": "2025-06-18T17:53:29Z"
                        },
                        {
                          "fields": {
                            "host_id": "host-2",
                            "resource_id": "storefront-n2-9ptayhma-backup",
                            "resource_type": "swarm.pgbackrest_config"
                          },
                          "message": "creating resource swarm.pgbackrest_config::storefront-n2-9ptayhma-backup",
                          "timestamp": "2025-06-18T17:53:29Z"
                        },
                        {
                          "fields": {
                            "duration_ms": 383,
                            "host_id": "host-3",
                            "resource_id": "n3",
                            "resource_type": "swarm.pgbackrest_stanza",
                            "success": true
                          },
                          "message": "finished creating resource swarm.pgbackrest_stanza::n3 (took 383.568613ms)",
                          "timestamp": "2025-06-18T17:54:02Z"
                        },
                        {
                          "fields": {
                            "duration_ms": 1181,
                            "host_id": "host-1",
                            "resource_id": "n1",
                            "resource_type": "swarm.pgbackrest_stanza",
                            "success": true
                          },
                          "message": "finished creating resource swarm.pgbackrest_stanza::n1 (took 1.181454868s)",
                          "timestamp": "2025-06-18T17:54:03Z"
                        }
                      ],
                      "last_entry_id": "0197842d-303b-7251-b814-6d12c98e7d25",
                      "task_id": "0197842c-7c4f-7a8c-829e-7405c2a41c8c",
                      "task_status": "completed"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "invalid_input: Bad Request response.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIError"
                },
                "example": {
                  "message": "A longer description of the error.",
                  "name": "error_name"
                }
              }
            }
          },
          "404": {
            "description": "not_found: Not Found response.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIError"
                },
                "example": {
                  "message": "A longer description of the error.",
                  "name": "error_name"
                }
              }
            }
          },
          "409": {
            "description": "cluster_not_initialized: Conflict response.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIError"
                },
                "example": {
                  "message": "A longer description of the error.",
                  "name": "error_name"
                }
              }
            }
          },
          "500": {
            "description": "server_error: Internal Server Error response.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIError"
                },
                "example": {
                  "message": "A longer description of the error.",
                  "name": "error_name"
                }
              }
            }
          }
        }
      }
    },
    "/v1/hosts": {
      "get": {
        "tags": [
          "Host"
        ],
        "summary": "List hosts",
        "description": "Lists all hosts within the cluster.",
        "operationId": "list-hosts",
        "responses": {
          "200": {
            "description": "OK response.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ListHostsResponse"
                },
                "examples": {
                  "default": {
                    "summary": "default",
                    "value": {
                      "hosts": [
                        {
                          "cohort": {
                            "cohort_id": "zdjfu3tfxg1cihv3146ro3hy2",
                            "control_available": true,
                            "member_id": "lah4bsznw6kc0hp7biylmmmll",
                            "type": "swarm"
                          },
                          "cpus": 16,
                          "data_dir": "/data",
                          "default_pgedge_version": {
                            "postgres_version": "17.6",
                            "spock_version": "5"
                          },
                          "hostname": "i-0123456789abcdef.ec2.internal",
                          "id": "us-east-1",
                          "ipv4_address": "10.24.34.2",
                          "memory": "16GB",
                          "orchestrator": "swarm",
                          "status": {
                            "components": {},
                            "state": "healthy",
                            "updated_at": "2025-06-17T00:00:00Z"
                          },
                          "supported_pgedge_versions": [
                            {
                              "postgres_version": "17.6",
                              "spock_version": "5"
                            },
                            {
                              "postgres_version": "17.5",
                              "spock_version": "5"
                            },
                            {
                              "postgres_version": "16.10",
                              "spock_version": "5"
                            }
                          ]
                        },
                        {
                          "cohort": {
                            "cohort_id": "zdjfu3tfxg1cihv3146ro3hy2",
                            "control_available": true,
                            "member_id": "cb88u9jael2psnepep5iuzb4r",
                            "type": "swarm"
                          },
                          "cpus": 16,
                          "data_dir": "/data",
                          "default_pgedge_version": {
                            "postgres_version": "17.6",
                            "spock_version": "5"
                          },
                          "hostname": "i-058731542fee493f.ec2.internal",
                          "id": "ap-south-1",
                          "ipv4_address": "10.24.35.2",
                          "memory": "16GB",
                          "orchestrator": "swarm",
                          "status": {
                            "components": {},
                            "state": "healthy",
                            "updated_at": "2025-06-17T00:00:00Z"
                          },
                          "supported_pgedge_versions": [
                            {
                              "postgres_version": "17.6",
                              "spock_version": "5"
                            },
                            {
                              "postgres_version": "17.5",
                              "spock_version": "5"
                            },
                            {
                              "postgres_version": "16.10",
                              "spock_version": "5"
                            }
                          ]
                        },
                        {
                          "cohort": {
                            "cohort_id": "zdjfu3tfxg1cihv3146ro3hy2",
                            "control_available": true,
                            "member_id": "u7u9i3nhqunxc4wj577l6ecb0",
                            "type": "swarm"
                          },
                          "cpus": 16,
                          "data_dir": "/data",
                          "default_pgedge_version": {
                            "postgres_version": "17.6",
                            "spock_version": "5"
                          },
                          "hostname": "i-494027b7b53f6a23.ec2.internal",
                          "id": "eu-central-1",
                          "ipv4_address": "10.24.36.2",
                          "memory": "16GB",
                          "orchestrator": "swarm",
                          "status": {
                            "components": {},
                            "state": "healthy",
                            "updated_at": "2025-06-17T00:00:00Z"
                          },
                          "supported_pgedge_versions": [
                            {
                              "postgres_version": "17.6",
                              "spock_version": "5"
                            },
                            {
                              "postgres_version": "17.5",
                              "spock_version": "5"
                            },
                            {
                              "postgres_version": "16.10",
                              "spock_version": "5"
                            }
                          ]
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "409": {
            "description": "cluster_not_initialized: Conflict response.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIError"
                },
                "example": {
                  "message": "A longer description of the error.",
                  "name": "error_name"
                }
              }
            }
          },
          "500": {
            "description": "server_error: Internal Server Error response.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIError"
                },
                "example": {
                  "message": "A longer description of the error.",
                  "name": "error_name"
                }
              }
            }
          }
        }
      }
    },
    "/v1/hosts/{host_id}": {
      "delete": {
        "tags": [
          "Host"
        ],
        "summary": "Remove host",
        "description": "Removes a host from the cluster.",
        "operationId": "remove-host",
        "parameters": [
          {
            "name": "host_id",
            "in": "path",
            "description": "ID of the host to remove.",
            "required": true,
            "schema": {
              "type": "string",
              "description": "A user-specified identifier. Must be 1-63 characters, contain only lower-cased letters and hyphens, start and end with a letter or number, and not contain consecutive hyphens.",
              "example": "76f9b8c0-4958-11f0-a489-3bb29577c696",
              "minLength": 1,
              "maxLength": 63
            },
            "example": "host-1"
          }
        ],
        "responses": {
          "204": {
            "description": "No Content response."
          },
          "400": {
            "description": "invalid_input: Bad Request response.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIError"
                },
                "example": {
                  "message": "A longer description of the error.",
                  "name": "error_name"
                }
              }
            }
          },
          "404": {
            "description": "not_found: Not Found response.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIError"
                },
                "example": {
                  "message": "A longer description of the error.",
                  "name": "error_name"
                }
              }
            }
          },
          "409": {
            "description": "cluster_not_initialized: Conflict response.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIError"
                },
                "example": {
                  "message": "A longer description of the error.",
                  "name": "error_name"
                }
              }
            }
          },
          "500": {
            "description": "server_error: Internal Server Error response.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIError"
                },
                "example": {
                  "message": "A longer description of the error.",
                  "name": "error_name"
                }
              }
            }
          }
        }
      },
      "get": {
        "tags": [
          "Host"
        ],
        "summary": "Get host",
        "description": "Returns information about a particular host in the cluster.",
        "operationId": "get-host",
        "parameters": [
          {
            "name": "host_id",
            "in": "path",
            "description": "ID of the host to get.",
            "required": true,
            "schema": {
              "type": "string",
              "description": "A user-specified identifier. Must be 1-63 characters, contain only lower-cased letters and hyphens, start and end with a letter or number, and not contain consecutive hyphens.",
              "example": "76f9b8c0-4958-11f0-a489-3bb29577c696",
              "minLength": 1,
              "maxLength": 63
            },
            "example": "host-1"
          }
        ],
        "responses": {
          "200": {
            "description": "OK response.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Host"
                },
                "example": {
                  "cohort": {
                    "control_available": true,
                    "member_id": "lah4bsznw6kc0hp7biylmmmll",
                    "type": "swarm"
                  },
                  "cpus": 4,
                  "data_dir": "/data",
                  "default_pgedge_version": {
                    "postgres_version": "17.6",
                    "spock_version": "5"
                  },
                  "hostname": "i-0123456789abcdef.ec2.internal",
                  "id": "de3b1388-1f0c-42f1-a86c-59ab72f255ec",
                  "ipv4_address": "10.24.34.2",
                  "memory": "16GiB",
                  "orchestrator": "swarm",
                  "status": {
                    "components": {
                      "Cum possimus minima.": {
                        "details": {
                          "alarms": [
                            "3: NOSPACE"
                          ]
                        },
                        "error": "failed to connect to etcd",
                        "healthy": false
                      },
                      "Et et.": {
                        "details": {
                          "alarms": [
                            "3: NOSPACE"
                          ]
                        },
                        "error": "failed to connect to etcd",
                        "healthy": false
                      },
                      "Pariatur praesentium.": {
                        "details": {
                          "alarms": [
                            "3: NOSPACE"
                          ]
                        },
                        "error": "failed to connect to etcd",
                        "healthy": false
                      }
                    },
                    "state": "available",
                    "updated_at": "2021-07-01T12:34:56Z"
                  },
                  "supported_pgedge_versions": [
                    {
                      "postgres_version": "17.6",
                      "spock_version": "5"
                    },
                    {
                      "postgres_version": "17.6",
                      "spock_version": "5"
                    },
                    {
                      "postgres_version": "17.6",
                      "spock_version": "5"
                    }
                  ]
                }
              }
            }
          },
          "400": {
            "description": "invalid_input: Bad Request response.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIError"
                },
                "example": {
                  "message": "A longer description of the error.",
                  "name": "error_name"
                }
              }
            }
          },
          "404": {
            "description": "not_found: Not Found response.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIError"
                },
                "example": {
                  "message": "A longer description of the error.",
                  "name": "error_name"
                }
              }
            }
          },
          "409": {
            "description": "cluster_not_initialized: Conflict response.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIError"
                },
                "example": {
                  "message": "A longer description of the error.",
                  "name": "error_name"
                }
              }
            }
          },
          "500": {
            "description": "server_error: Internal Server Error response.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIError"
                },
                "example": {
                  "message": "A longer description of the error.",
                  "name": "error_name"
                }
              }
            }
          }
        }
      }
    },
    "/v1/version": {
      "get": {
        "tags": [
          "System"
        ],
        "summary": "Get version",
        "description": "Returns version information for this Control Plane server.",
        "operationId": "get-version",
        "responses": {
          "200": {
            "description": "OK response.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/VersionInfo"
                },
                "example": {
                  "arch": "amd64",
                  "revision": "e89ae93b",
                  "revision_time": "2025-01-01T01:30:00Z",
                  "version": "1.0.0"
                }
              }
            }
          },
          "500": {
            "description": "server_error: Internal Server Error response.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIError"
                },
                "example": {
                  "message": "A longer description of the error.",
                  "name": "error_name"
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "APIError": {
        "type": "object",
        "properties": {
          "message": {
            "type": "string",
            "description": "The error message.",
            "example": "A longer description of the error."
          },
          "name": {
            "type": "string",
            "description": "The name of the error.",
            "example": "error_name"
          }
        },
        "description": "A Control Plane API error.",
        "example": {
          "message": "A longer description of the error.",
          "name": "error_name"
        },
        "required": [
          "name",
          "message"
        ]
      },
      "BackupConfigSpec": {
        "type": "object",
        "properties": {
          "repositories": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/BackupRepositorySpec"
            },
            "description": "The repositories for this backup configuration.",
            "example": [
              {
                "azure_account": "pgedge-backups",
                "azure_container": "pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1",
                "azure_endpoint": "blob.core.usgovcloudapi.net",
                "azure_key": "YXpLZXk=",
                "base_path": "/backups",
                "custom_options": {
                  "s3-kms-key-id": "1234abcd-12ab-34cd-56ef-1234567890ab",
                  "storage-upload-chunk-size": "5MiB"
                },
                "gcs_bucket": "pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1",
                "gcs_endpoint": "localhost",
                "gcs_key": "ZXhhbXBsZSBnY3Mga2V5Cg==",
                "id": "f6b84a99-5e91-4203-be1e-131fe82e5984",
                "retention_full": 2,
                "retention_full_type": "count",
                "s3_bucket": "pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1",
                "s3_endpoint": "s3.us-east-1.amazonaws.com",
                "s3_key": "AKIAIOSFODNN7EXAMPLE",
                "s3_key_secret": "wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY",
                "s3_region": "us-east-1",
                "type": "s3"
              }
            ],
            "minItems": 1
          },
          "schedules": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/BackupScheduleSpec"
            },
            "description": "The schedules for this backup configuration.",
            "example": [
              {
                "cron_expression": "0 6 * * ?",
                "id": "daily-full-backup",
                "type": "full"
              },
              {
                "cron_expression": "0 6 * * ?",
                "id": "daily-full-backup",
                "type": "full"
              },
              {
                "cron_expression": "0 6 * * ?",
                "id": "daily-full-backup",
                "type": "full"
              }
            ],
            "maxItems": 32
          }
        },
        "example": {
          "repositories": [
            {
              "azure_account": "pgedge-backups",
              "azure_container": "pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1",
              "azure_endpoint": "blob.core.usgovcloudapi.net",
              "azure_key": "YXpLZXk=",
              "base_path": "/backups",
              "custom_options": {
                "s3-kms-key-id": "1234abcd-12ab-34cd-56ef-1234567890ab",
                "storage-upload-chunk-size": "5MiB"
              },
              "gcs_bucket": "pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1",
              "gcs_endpoint": "localhost",
              "gcs_key": "ZXhhbXBsZSBnY3Mga2V5Cg==",
              "id": "f6b84a99-5e91-4203-be1e-131fe82e5984",
              "retention_full": 2,
              "retention_full_type": "count",
              "s3_bucket": "pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1",
              "s3_endpoint": "s3.us-east-1.amazonaws.com",
              "s3_key": "AKIAIOSFODNN7EXAMPLE",
              "s3_key_secret": "wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY",
              "s3_region": "us-east-1",
              "type": "s3"
            }
          ],
          "schedules": [
            {
              "cron_expression": "0 6 * * ?",
              "id": "daily-full-backup",
              "type": "full"
            },
            {
              "cron_expression": "0 6 * * ?",
              "id": "daily-full-backup",
              "type": "full"
            },
            {
              "cron_expression": "0 6 * * ?",
              "id": "daily-full-backup",
              "type": "full"
            }
          ]
        },
        "required": [
          "repositories"
        ]
      },
      "BackupDatabaseNodeResponse": {
        "type": "object",
        "properties": {
          "task": {
            "$ref": "#/components/schemas/Task"
          }
        },
        "example": {
          "task": {
            "created_at": "2025-06-18T17:54:28Z",
            "database_id": "storefront",
            "status": "pending",
            "task_id": "0197842d-9082-7496-b787-77bd2e11809f",
            "type": "node_backup"
          }
        },
        "required": [
          "task"
        ]
      },
      "BackupOptions": {
        "type": "object",
        "properties": {
          "annotations": {
            "type": "object",
            "description": "Annotations for the backup.",
            "example": {
              "key": "value"
            },
            "additionalProperties": {
              "type": "string",
              "example": "Aut dignissimos cum voluptate modi consequatur."
            }
          },
          "backup_options": {
            "type": "object",
            "description": "Options for the backup.",
            "example": {
              "archive-check": "n"
            },
            "additionalProperties": {
              "type": "string",
              "example": "At esse ut possimus error eligendi."
            }
          },
          "type": {
            "type": "string",
            "description": "The type of backup.",
            "example": "full",
            "enum": [
              "full",
              "diff",
              "incr"
            ]
          }
        },
        "example": {
          "annotations": {
            "initiated-by": "backup-cron-job"
          },
          "backup_options": {
            "archive-check": "n"
          },
          "type": "full"
        },
        "required": [
          "type"
        ]
      },
      "BackupRepositorySpec": {
        "type": "object",
        "properties": {
          "azure_account": {
            "type": "string",
            "description": "The Azure account name for this repository. Only applies when type = 'azure'.",
            "example": "pgedge-backups",
            "minLength": 3,
            "maxLength": 24
          },
          "azure_container": {
            "type": "string",
            "description": "The Azure container name for this repository. Only applies when type = 'azure'.",
            "example": "pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1",
            "minLength": 3,
            "maxLength": 63
          },
          "azure_endpoint": {
            "type": "string",
            "description": "The optional Azure endpoint for this repository. Only applies when type = 'azure'.",
            "example": "blob.core.usgovcloudapi.net",
            "minLength": 3,
            "maxLength": 128
          },
          "azure_key": {
            "type": "string",
            "description": "The Azure storage account access key to use for this repository. This field will be excluded from the response of all endpoints. It can also be omitted from update requests to keep the current value.",
            "example": "YXpLZXk=",
            "maxLength": 128
          },
          "base_path": {
            "type": "string",
            "description": "The base path within the repository to store backups. Required for type = 'posix' and 'cifs'.",
            "example": "/backups",
            "maxLength": 256
          },
          "custom_options": {
            "type": "object",
            "description": "Additional options to apply to this repository.",
            "example": {
              "s3-kms-key-id": "1234abcd-12ab-34cd-56ef-1234567890ab",
              "storage-upload-chunk-size": "5MiB"
            },
            "additionalProperties": {
              "type": "string",
              "example": "Nostrum eos reprehenderit harum sapiente qui ullam."
            }
          },
          "gcs_bucket": {
            "type": "string",
            "description": "The GCS bucket name for this repository. Only applies when type = 'gcs'.",
            "example": "pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1",
            "minLength": 3,
            "maxLength": 63
          },
          "gcs_endpoint": {
            "type": "string",
            "description": "The optional GCS endpoint for this repository. Only applies when type = 'gcs'.",
            "example": "localhost",
            "minLength": 3,
            "maxLength": 128
          },
          "gcs_key": {
            "type": "string",
            "description": "Optional base64-encoded private key data. If omitted, pgbackrest will use the service account attached to the instance profile. This field will be excluded from the response of all endpoints. It can also be omitted from update requests to keep the current value.",
            "example": "ZXhhbXBsZSBnY3Mga2V5Cg==",
            "maxLength": 1024
          },
          "id": {
            "type": "string",
            "description": "A user-specified identifier. Must be 1-63 characters, contain only lower-cased letters and hyphens, start and end with a letter or number, and not contain consecutive hyphens.",
            "example": "76f9b8c0-4958-11f0-a489-3bb29577c696",
            "minLength": 1,
            "maxLength": 63
          },
          "retention_full": {
            "type": "integer",
            "description": "The count of full backups to retain or the time to retain full backups.",
            "example": 2,
            "format": "int64",
            "minimum": 1,
            "maximum": 9999999
          },
          "retention_full_type": {
            "type": "string",
            "description": "The type of measure used for retention_full.",
            "example": "count",
            "enum": [
              "time",
              "count"
            ]
          },
          "s3_bucket": {
            "type": "string",
            "description": "The S3 bucket name for this repository. Only applies when type = 's3'.",
            "example": "pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1",
            "minLength": 3,
            "maxLength": 63
          },
          "s3_endpoint": {
            "type": "string",
            "description": "The optional S3 endpoint for this repository. Only applies when type = 's3'.",
            "example": "s3.us-east-1.amazonaws.com",
            "minLength": 3,
            "maxLength": 128
          },
          "s3_key": {
            "type": "string",
            "description": "An optional AWS access key ID to use for this repository. If not provided, pgbackrest will use the default credential provider chain. This field will be excluded from the response of all endpoints. It can also be omitted from update requests to keep the current value.",
            "example": "AKIAIOSFODNN7EXAMPLE",
            "maxLength": 128
          },
          "s3_key_secret": {
            "type": "string",
            "description": "The corresponding secret for the AWS access key ID in s3_key. This field will be excluded from the response of all endpoints. It can also be omitted from update requests to keep the current value.",
            "example": "wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY",
            "maxLength": 128
          },
          "s3_region": {
            "type": "string",
            "description": "The region of the S3 bucket for this repository. Only applies when type = 's3'.",
            "example": "us-east-1",
            "minLength": 1,
            "maxLength": 32
          },
          "type": {
            "type": "string",
            "description": "The type of this repository.",
            "example": "s3",
            "enum": [
              "s3",
              "gcs",
              "azure",
              "posix",
              "cifs"
            ]
          }
        },
        "example": {
          "azure_account": "pgedge-backups",
          "azure_container": "pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1",
          "azure_endpoint": "blob.core.usgovcloudapi.net",
          "azure_key": "YXpLZXk=",
          "base_path": "/backups",
          "custom_options": {
            "s3-kms-key-id": "1234abcd-12ab-34cd-56ef-1234567890ab",
            "storage-upload-chunk-size": "5MiB"
          },
          "gcs_bucket": "pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1",
          "gcs_endpoint": "localhost",
          "gcs_key": "ZXhhbXBsZSBnY3Mga2V5Cg==",
          "id": "f6b84a99-5e91-4203-be1e-131fe82e5984",
          "retention_full": 2,
          "retention_full_type": "count",
          "s3_bucket": "pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1",
          "s3_endpoint": "s3.us-east-1.amazonaws.com",
          "s3_key": "AKIAIOSFODNN7EXAMPLE",
          "s3_key_secret": "wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY",
          "s3_region": "us-east-1",
          "type": "s3"
        },
        "required": [
          "type"
        ]
      },
      "BackupScheduleSpec": {
        "type": "object",
        "properties": {
          "cron_expression": {
            "type": "string",
            "description": "The cron expression for this schedule.",
            "example": "0 6 * * ?",
            "maxLength": 32
          },
          "id": {
            "type": "string",
            "description": "The unique identifier for this backup schedule.",
            "example": "daily-full-backup",
            "maxLength": 64
          },
          "type": {
            "type": "string",
            "description": "The type of backup to take on this schedule.",
            "example": "full",
            "enum": [
              "full",
              "incr"
            ]
          }
        },
        "example": {
          "cron_expression": "0 6 * * ?",
          "id": "daily-full-backup",
          "type": "full"
        },
        "required": [
          "id",
          "type",
          "cron_expression"
        ]
      },
      "CancelDatabaseTaskPayload": {
        "type": "object",
        "properties": {
          "database_id": {
            "type": "string",
            "description": "A user-specified identifier. Must be 1-63 characters, contain only lower-cased letters and hyphens, start and end with a letter or number, and not contain consecutive hyphens.",
            "example": "76f9b8c0-4958-11f0-a489-3bb29577c696",
            "minLength": 1,
            "maxLength": 63
          },
          "task_id": {
            "type": "string",
            "description": "A user-specified identifier. Must be 1-63 characters, contain only lower-cased letters and hyphens, start and end with a letter or number, and not contain consecutive hyphens.",
            "example": "76f9b8c0-4958-11f0-a489-3bb29577c696",
            "minLength": 1,
            "maxLength": 63
          }
        },
        "example": {
          "database_id": "76f9b8c0-4958-11f0-a489-3bb29577c696",
          "task_id": "76f9b8c0-4958-11f0-a489-3bb29577c696"
        },
        "required": [
          "database_id",
          "task_id"
        ]
      },
      "Cluster": {
        "type": "object",
        "properties": {
          "hosts": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Host"
            },
            "description": "All of the hosts in the cluster.",
            "example": [
              {
                "cohort": {
                  "cohort_id": "zdjfu3tfxg1cihv3146ro3hy2",
                  "control_available": true,
                  "member_id": "lah4bsznw6kc0hp7biylmmmll",
                  "type": "swarm"
                },
                "cpus": 16,
                "data_dir": "/data",
                "default_pgedge_version": {
                  "postgres_version": "17.6",
                  "spock_version": "5"
                },
                "hostname": "i-0123456789abcdef.ec2.internal",
                "id": "us-east-1",
                "ipv4_address": "10.24.34.2",
                "memory": "16GB",
                "orchestrator": "swarm",
                "status": {
                  "components": {},
                  "state": "healthy",
                  "updated_at": "2025-06-17T00:00:00Z"
                },
                "supported_pgedge_versions": [
                  {
                    "postgres_version": "17.6",
                    "spock_version": "5"
                  },
                  {
                    "postgres_version": "17.5",
                    "spock_version": "5"
                  },
                  {
                    "postgres_version": "16.10",
                    "spock_version": "5"
                  }
                ]
              },
              {
                "cohort": {
                  "cohort_id": "zdjfu3tfxg1cihv3146ro3hy2",
                  "control_available": true,
                  "member_id": "cb88u9jael2psnepep5iuzb4r",
                  "type": "swarm"
                },
                "cpus": 16,
                "data_dir": "/data",
                "default_pgedge_version": {
                  "postgres_version": "17.6",
                  "spock_version": "5"
                },
                "hostname": "i-058731542fee493f.ec2.internal",
                "id": "ap-south-1",
                "ipv4_address": "10.24.35.2",
                "memory": "16GB",
                "orchestrator": "swarm",
                "status": {
                  "components": {},
                  "state": "healthy",
                  "updated_at": "2025-06-17T00:00:00Z"
                },
                "supported_pgedge_versions": [
                  {
                    "postgres_version": "17.6",
                    "spock_version": "5"
                  },
                  {
                    "postgres_version": "17.5",
                    "spock_version": "5"
                  },
                  {
                    "postgres_version": "16.10",
                    "spock_version": "5"
                  }
                ]
              },
              {
                "cohort": {
                  "cohort_id": "zdjfu3tfxg1cihv3146ro3hy2",
                  "control_available": true,
                  "member_id": "u7u9i3nhqunxc4wj577l6ecb0",
                  "type": "swarm"
                },
                "cpus": 16,
                "data_dir": "/data",
                "default_pgedge_version": {
                  "postgres_version": "17.6",
                  "spock_version": "5"
                },
                "hostname": "i-494027b7b53f6a23.ec2.internal",
                "id": "eu-central-1",
                "ipv4_address": "10.24.36.2",
                "memory": "16GB",
                "orchestrator": "swarm",
                "status": {
                  "components": {},
                  "state": "healthy",
                  "updated_at": "2025-06-17T00:00:00Z"
                },
                "supported_pgedge_versions": [
                  {
                    "postgres_version": "17.6",
                    "spock_version": "5"
                  },
                  {
                    "postgres_version": "17.5",
                    "spock_version": "5"
                  },
                  {
                    "postgres_version": "16.10",
                    "spock_version": "5"
                  }
                ]
              }
            ]
          },
          "id": {
            "type": "string",
            "description": "A user-specified identifier. Must be 1-63 characters, contain only lower-cased letters and hyphens, start and end with a letter or number, and not contain consecutive hyphens.",
            "example": "76f9b8c0-4958-11f0-a489-3bb29577c696",
            "minLength": 1,
            "maxLength": 63
          },
          "status": {
            "$ref": "#/components/schemas/ClusterStatus"
          },
          "tenant_id": {
            "type": "string",
            "description": "A user-specified identifier. Must be 1-63 characters, contain only lower-cased letters and hyphens, start and end with a letter or number, and not contain consecutive hyphens.",
            "example": "76f9b8c0-4958-11f0-a489-3bb29577c696",
            "minLength": 1,
            "maxLength": 63
          }
        },
        "example": {
          "hosts": [
            {
              "cohort": {
                "cohort_id": "zdjfu3tfxg1cihv3146ro3hy2",
                "control_available": true,
                "member_id": "lah4bsznw6kc0hp7biylmmmll",
                "type": "swarm"
              },
              "cpus": 16,
              "data_dir": "/data",
              "default_pgedge_version": {
                "postgres_version": "17.6",
                "spock_version": "5"
              },
              "hostname": "i-0123456789abcdef.ec2.internal",
              "id": "us-east-1",
              "ipv4_address": "10.24.34.2",
              "memory": "16GB",
              "orchestrator": "swarm",
              "status": {
                "components": {},
                "state": "healthy",
                "updated_at": "2025-06-17T00:00:00Z"
              },
              "supported_pgedge_versions": [
                {
                  "postgres_version": "17.6",
                  "spock_version": "5"
                },
                {
                  "postgres_version": "17.5",
                  "spock_version": "5"
                },
                {
                  "postgres_version": "16.10",
                  "spock_version": "5"
                }
              ]
            },
            {
              "cohort": {
                "cohort_id": "zdjfu3tfxg1cihv3146ro3hy2",
                "control_available": true,
                "member_id": "cb88u9jael2psnepep5iuzb4r",
                "type": "swarm"
              },
              "cpus": 16,
              "data_dir": "/data",
              "default_pgedge_version": {
                "postgres_version": "17.6",
                "spock_version": "5"
              },
              "hostname": "i-058731542fee493f.ec2.internal",
              "id": "ap-south-1",
              "ipv4_address": "10.24.35.2",
              "memory": "16GB",
              "orchestrator": "swarm",
              "status": {
                "components": {},
                "state": "healthy",
                "updated_at": "2025-06-17T00:00:00Z"
              },
              "supported_pgedge_versions": [
                {
                  "postgres_version": "17.6",
                  "spock_version": "5"
                },
                {
                  "postgres_version": "17.5",
                  "spock_version": "5"
                },
                {
                  "postgres_version": "16.10",
                  "spock_version": "5"
                }
              ]
            },
            {
              "cohort": {
                "cohort_id": "zdjfu3tfxg1cihv3146ro3hy2",
                "control_available": true,
                "member_id": "u7u9i3nhqunxc4wj577l6ecb0",
                "type": "swarm"
              },
              "cpus": 16,
              "data_dir": "/data",
              "default_pgedge_version": {
                "postgres_version": "17.6",
                "spock_version": "5"
              },
              "hostname": "i-494027b7b53f6a23.ec2.internal",
              "id": "eu-central-1",
              "ipv4_address": "10.24.36.2",
              "memory": "16GB",
              "orchestrator": "swarm",
              "status": {
                "components": {},
                "state": "healthy",
                "updated_at": "2025-06-17T00:00:00Z"
              },
              "supported_pgedge_versions": [
                {
                  "postgres_version": "17.6",
                  "spock_version": "5"
                },
                {
                  "postgres_version": "17.5",
                  "spock_version": "5"
                },
                {
                  "postgres_version": "16.10",
                  "spock_version": "5"
                }
              ]
            }
          ],
          "id": "production",
          "status": {
            "state": "available"
          },
          "tenant_id": "engineering"
        },
        "required": [
          "id",
          "tenant_id",
          "status",
          "hosts"
        ]
      },
      "ClusterCredentials": {
        "type": "object",
        "properties": {
          "ca_cert": {
            "type": "string",
            "description": "The base64-encoded CA certificate for the cluster.",
            "example": "ZGE4NDdkMzMtM2FiYi00YzE2LTkzOGQtNDRkODU2ZDFlZWZlCg=="
          },
          "client_cert": {
            "type": "string",
            "description": "The base64-encoded etcd client certificate for the new cluster member.",
            "example": "NWM0MGMyZTAtYjAyYS00NzkxLTk0YjAtMjMyN2EyZGQ4ZDc3Cg=="
          },
          "client_key": {
            "type": "string",
            "description": "The base64-encoded etcd client key for the new cluster member.",
            "example": "Y2FlNjhmODQtYjE1Ni00YWYyLWFhMWEtM2FhNzI2MmVhYTM0Cg=="
          },
          "password": {
            "type": "string",
            "description": "The Etcd password for the new host.",
            "example": "a78v2x866zirk4o737gjdssfi"
          },
          "server_cert": {
            "type": "string",
            "description": "The base64-encoded etcd server certificate for the new cluster member.",
            "example": "Nzc1OGQyY2UtZjdjOC00YmE4LTk2ZmQtOWE3MjVmYmY3NDdiCg=="
          },
          "server_key": {
            "type": "string",
            "description": "The base64-encoded etcd server key for the new cluster member.",
            "example": "NWRhNzY1ZGUtNzJkMi00OTU3LTk4ODUtOWRiZThjOGE5MGQ3Cg=="
          },
          "username": {
            "type": "string",
            "description": "The Etcd username for the new host.",
            "example": "host-2"
          }
        },
        "example": {
          "ca_cert": "ZGE4NDdkMzMtM2FiYi00YzE2LTkzOGQtNDRkODU2ZDFlZWZlCg==",
          "client_cert": "NWM0MGMyZTAtYjAyYS00NzkxLTk0YjAtMjMyN2EyZGQ4ZDc3Cg==",
          "client_key": "Y2FlNjhmODQtYjE1Ni00YWYyLWFhMWEtM2FhNzI2MmVhYTM0Cg==",
          "password": "a78v2x866zirk4o737gjdssfi",
          "server_cert": "Nzc1OGQyY2UtZjdjOC00YmE4LTk2ZmQtOWE3MjVmYmY3NDdiCg==",
          "server_key": "NWRhNzY1ZGUtNzJkMi00OTU3LTk4ODUtOWRiZThjOGE5MGQ3Cg==",
          "username": "host-2"
        },
        "required": [
          "username",
          "password",
          "ca_cert",
          "client_cert",
          "client_key",
          "server_cert",
          "server_key"
        ]
      },
      "ClusterJoinOptions": {
        "type": "object",
        "properties": {
          "credentials": {
            "$ref": "#/components/schemas/ClusterCredentials"
          },
          "leader": {
            "$ref": "#/components/schemas/EtcdClusterMember"
          }
        },
        "example": {
          "credentials": {
            "ca_cert": "ZGE4NDdkMzMtM2FiYi00YzE2LTkzOGQtNDRkODU2ZDFlZWZlCg==",
            "client_cert": "NWM0MGMyZTAtYjAyYS00NzkxLTk0YjAtMjMyN2EyZGQ4ZDc3Cg==",
            "client_key": "Y2FlNjhmODQtYjE1Ni00YWYyLWFhMWEtM2FhNzI2MmVhYTM0Cg==",
            "password": "a78v2x866zirk4o737gjdssfi",
            "server_cert": "Nzc1OGQyY2UtZjdjOC00YmE4LTk2ZmQtOWE3MjVmYmY3NDdiCg==",
            "server_key": "NWRhNzY1ZGUtNzJkMi00OTU3LTk4ODUtOWRiZThjOGE5MGQ3Cg==",
            "username": "host-2"
          },
          "leader": {
            "client_urls": [
              "http://192.168.1.1:2379"
            ],
            "name": "host-1",
            "peer_urls": [
              "http://192.168.1.1:2380"
            ]
          }
        },
        "required": [
          "leader",
          "credentials"
        ]
      },
      "ClusterJoinRequest": {
        "type": "object",
        "properties": {
          "embedded_etcd_enabled": {
            "type": "boolean",
            "description": "True if the joining member is configured to run an embedded an etcd server.",
            "example": true
          },
          "host_id": {
            "type": "string",
            "description": "A user-specified identifier. Must be 1-63 characters, contain only lower-cased letters and hyphens, start and end with a letter or number, and not contain consecutive hyphens.",
            "example": "76f9b8c0-4958-11f0-a489-3bb29577c696",
            "minLength": 1,
            "maxLength": 63
          },
          "hostname": {
            "type": "string",
            "description": "The hostname of the host that's joining the cluster.",
            "example": "ip-10-1-0-113.ec2.internal",
            "minLength": 3,
            "maxLength": 128
          },
          "ipv4_address": {
            "type": "string",
            "description": "The IPv4 address of the host that's joining the cluster.",
            "example": "10.1.0.113",
            "format": "ipv4"
          },
          "token": {
            "type": "string",
            "description": "Token to join the cluster.",
            "example": "PGEDGE-dd440afcf5de20ef8e8cf54f6cb9f125fd55f90e64faa94b906130b31235e730-41e975f41d7ea61058f2fe2572cb52dd",
            "pattern": "^PGEDGE-[\\w]{64}-[\\w]{32}$"
          }
        },
        "example": {
          "embedded_etcd_enabled": true,
          "host_id": "host-1",
          "hostname": "ip-10-1-0-113.ec2.internal",
          "ipv4_address": "10.1.0.113",
          "token": "PGEDGE-dd440afcf5de20ef8e8cf54f6cb9f125fd55f90e64faa94b906130b31235e730-41e975f41d7ea61058f2fe2572cb52dd"
        },
        "required": [
          "embedded_etcd_enabled",
          "token",
          "host_id",
          "hostname",
          "ipv4_address"
        ]
      },
      "ClusterJoinToken": {
        "type": "object",
        "properties": {
          "server_url": {
            "type": "string",
            "description": "Existing server to join",
            "example": "http://192.168.1.1:3000",
            "format": "uri"
          },
          "token": {
            "type": "string",
            "description": "Token to join an existing cluster.",
            "example": "PGEDGE-dd440afcf5de20ef8e8cf54f6cb9f125fd55f90e64faa94b906130b31235e730-41e975f41d7ea61058f2fe2572cb52dd"
          }
        },
        "example": {
          "server_url": "http://192.168.1.1:3000",
          "token": "PGEDGE-dd440afcf5de20ef8e8cf54f6cb9f125fd55f90e64faa94b906130b31235e730-41e975f41d7ea61058f2fe2572cb52dd"
        },
        "required": [
          "token",
          "server_url"
        ]
      },
      "ClusterStatus": {
        "type": "object",
        "properties": {
          "state": {
            "type": "string",
            "description": "The current state of the cluster.",
            "example": "available",
            "enum": [
              "available",
              "error"
            ]
          }
        },
        "example": {
          "state": "error"
        },
        "required": [
          "state"
        ]
      },
      "ComponentStatus": {
        "type": "object",
        "properties": {
          "details": {
            "type": "object",
            "description": "Additional details about the component.",
            "example": {
              "alarms": [
                "3: NOSPACE"
              ]
            },
            "additionalProperties": true
          },
          "error": {
            "type": "string",
            "description": "Error message from any errors that occurred during the health check.",
            "example": "failed to connect to etcd"
          },
          "healthy": {
            "type": "boolean",
            "description": "Indicates if the component is healthy.",
            "example": false
          }
        },
        "example": {
          "details": {
            "alarms": [
              "3: NOSPACE"
            ]
          },
          "error": "failed to connect to etcd",
          "healthy": false
        },
        "required": [
          "healthy"
        ]
      },
      "ControlPlaneGetDatabaseResponseBody": {
        "type": "object",
        "properties": {
          "created_at": {
            "type": "string",
            "description": "The time that the database was created.",
            "example": "2025-01-01T01:30:00Z",
            "format": "date-time"
          },
          "id": {
            "type": "string",
            "description": "Unique identifier for the database.",
            "example": "02f1a7db-fca8-4521-b57a-2a375c1ced51",
            "minLength": 1,
            "maxLength": 63
          },
          "instances": {
            "$ref": "#/components/schemas/InstanceResponseBodyCollection"
          },
          "spec": {
            "$ref": "#/components/schemas/DatabaseSpec"
          },
          "state": {
            "type": "string",
            "description": "Current state of the database.",
            "example": "backing_up",
            "enum": [
              "creating",
              "modifying",
              "available",
              "deleting",
              "degraded",
              "failed",
              "backing_up",
              "restoring",
              "unknown"
            ]
          },
          "tenant_id": {
            "type": "string",
            "description": "Unique identifier for the database.",
            "example": "02f1a7db-fca8-4521-b57a-2a375c1ced51",
            "minLength": 1,
            "maxLength": 63
          },
          "updated_at": {
            "type": "string",
            "description": "The time that the database was last updated.",
            "example": "2025-01-01T02:30:00Z",
            "format": "date-time"
          }
        },
        "description": "Get-DatabaseResponseBody result type (default view)",
        "example": {
          "created_at": "2025-06-18T16:52:05Z",
          "id": "storefront",
          "instances": [
            {
              "connection_info": {
                "hostname": "i-0123456789abcdef.ec2.internal",
                "ipv4_address": "10.24.34.2",
                "port": 5432
              },
              "created_at": "2025-06-18T16:52:22Z",
              "host_id": "us-east-1",
              "id": "storefront-n1-689qacsi",
              "node_name": "n1",
              "postgres": {
                "patroni_state": "running",
                "role": "primary",
                "version": "17.5"
              },
              "spock": {
                "read_only": "off",
                "subscriptions": [
                  {
                    "name": "sub_n1n3",
                    "provider_node": "n3",
                    "status": "replicating"
                  },
                  {
                    "name": "sub_n1n2",
                    "provider_node": "n2",
                    "status": "replicating"
                  }
                ],
                "version": "4.0.10"
              },
              "state": "available",
              "status_updated_at": "2025-06-18T17:58:56Z",
              "updated_at": "2025-06-18T17:54:36Z"
            },
            {
              "connection_info": {
                "hostname": "i-058731542fee493f.ec2.internal",
                "ipv4_address": "10.24.35.2",
                "port": 5432
              },
              "created_at": "2025-06-18T16:52:22Z",
              "host_id": "ap-south-1",
              "id": "storefront-n2-9ptayhma",
              "node_name": "n2",
              "postgres": {
                "patroni_state": "running",
                "role": "primary",
                "version": "17.5"
              },
              "spock": {
                "read_only": "off",
                "subscriptions": [
                  {
                    "name": "sub_n2n1",
                    "provider_node": "n1",
                    "status": "replicating"
                  },
                  {
                    "name": "sub_n2n3",
                    "provider_node": "n3",
                    "status": "replicating"
                  }
                ],
                "version": "4.0.10"
              },
              "state": "available",
              "status_updated_at": "2025-06-18T17:58:56Z",
              "updated_at": "2025-06-18T17:54:01Z"
            },
            {
              "connection_info": {
                "hostname": "i-494027b7b53f6a23.ec2.internal",
                "ipv4_address": "10.24.36.2",
                "port": 5432
              },
              "created_at": "2025-06-18T16:52:22Z",
              "host_id": "eu-central-1",
              "id": "storefront-n3-ant97dj4",
              "node_name": "n3",
              "postgres": {
                "patroni_state": "running",
                "role": "primary",
                "version": "17.5"
              },
              "spock": {
                "read_only": "off",
                "subscriptions": [
                  {
                    "name": "sub_n3n1",
                    "provider_node": "n1",
                    "status": "replicating"
                  },
                  {
                    "name": "sub_n3n2",
                    "provider_node": "n2",
                    "status": "replicating"
                  }
                ],
                "version": "4.0.10"
              },
              "state": "available",
              "status_updated_at": "2025-06-18T17:58:56Z",
              "updated_at": "2025-06-18T17:54:01Z"
            }
          ],
          "spec": {
            "database_name": "storefront",
            "database_users": [
              {
                "attributes": [
                  "SUPERUSER",
                  "LOGIN"
                ],
                "db_owner": true,
                "username": "admin"
              }
            ],
            "nodes": [
              {
                "host_ids": [
                  "us-east-1"
                ],
                "name": "n1"
              },
              {
                "host_ids": [
                  "ap-south-1"
                ],
                "name": "n2"
              },
              {
                "host_ids": [
                  "eu-central-1"
                ],
                "name": "n3"
              }
            ],
            "port": 5432,
            "postgres_version": "17.6",
            "spock_version": "5"
          },
          "state": "restoring",
          "updated_at": "2025-06-18T17:58:59Z"
        },
        "required": [
          "id",
          "created_at",
          "updated_at",
          "state"
        ]
      },
      "CreateDatabaseRequest": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "A user-specified identifier. Must be 1-63 characters, contain only lower-cased letters and hyphens, start and end with a letter or number, and not contain consecutive hyphens.",
            "example": "76f9b8c0-4958-11f0-a489-3bb29577c696",
            "minLength": 1,
            "maxLength": 63
          },
          "spec": {
            "$ref": "#/components/schemas/DatabaseSpec"
          },
          "tenant_id": {
            "type": "string",
            "description": "A user-specified identifier. Must be 1-63 characters, contain only lower-cased letters and hyphens, start and end with a letter or number, and not contain consecutive hyphens.",
            "example": "76f9b8c0-4958-11f0-a489-3bb29577c696",
            "minLength": 1,
            "maxLength": 63
          }
        },
        "example": {
          "id": "storefront",
          "spec": {
            "database_name": "storefront",
            "database_users": [
              {
                "attributes": [
                  "LOGIN",
                  "SUPERUSER"
                ],
                "db_owner": true,
                "password": "password",
                "username": "admin"
              }
            ],
            "nodes": [
              {
                "host_ids": [
                  "us-east-1"
                ],
                "name": "n1"
              },
              {
                "host_ids": [
                  "ap-south-1"
                ],
                "name": "n2"
              },
              {
                "host_ids": [
                  "eu-central-1"
                ],
                "name": "n3"
              }
            ],
            "port": 5432,
            "postgresql_conf": {
              "max_connections": 5000
            }
          }
        },
        "required": [
          "spec"
        ]
      },
      "CreateDatabaseResponse": {
        "type": "object",
        "properties": {
          "database": {
            "$ref": "#/components/schemas/Database"
          },
          "task": {
            "$ref": "#/components/schemas/Task"
          }
        },
        "example": {
          "database": {
            "created_at": "2025-06-18T16:52:05Z",
            "id": "storefront",
            "spec": {
              "database_name": "storefront",
              "database_users": [
                {
                  "attributes": [
                    "SUPERUSER",
                    "LOGIN"
                  ],
                  "db_owner": true,
                  "username": "admin"
                }
              ],
              "nodes": [
                {
                  "host_ids": [
                    "us-east-1"
                  ],
                  "name": "n1"
                },
                {
                  "host_ids": [
                    "ap-south-1"
                  ],
                  "name": "n2"
                },
                {
                  "host_ids": [
                    "eu-central-1"
                  ],
                  "name": "n3"
                }
              ],
              "port": 5432,
              "postgres_version": "17.6",
              "spock_version": "5"
            },
            "state": "creating",
            "updated_at": "2025-06-18T16:52:05Z"
          },
          "task": {
            "created_at": "2025-06-18T16:52:05Z",
            "database_id": "storefront",
            "status": "pending",
            "task_id": "019783f4-75f4-71e7-85a3-c9b96b345d77",
            "type": "create"
          }
        },
        "required": [
          "task",
          "database"
        ]
      },
      "Database": {
        "type": "object",
        "properties": {
          "created_at": {
            "type": "string",
            "description": "The time that the database was created.",
            "example": "2025-01-01T01:30:00Z",
            "format": "date-time"
          },
          "id": {
            "type": "string",
            "description": "A user-specified identifier. Must be 1-63 characters, contain only lower-cased letters and hyphens, start and end with a letter or number, and not contain consecutive hyphens.",
            "example": "76f9b8c0-4958-11f0-a489-3bb29577c696",
            "minLength": 1,
            "maxLength": 63
          },
          "instances": {
            "$ref": "#/components/schemas/InstanceCollection"
          },
          "spec": {
            "$ref": "#/components/schemas/DatabaseSpec"
          },
          "state": {
            "type": "string",
            "description": "Current state of the database.",
            "example": "deleting",
            "enum": [
              "creating",
              "modifying",
              "available",
              "deleting",
              "degraded",
              "failed",
              "backing_up",
              "restoring",
              "unknown"
            ]
          },
          "tenant_id": {
            "type": "string",
            "description": "A user-specified identifier. Must be 1-63 characters, contain only lower-cased letters and hyphens, start and end with a letter or number, and not contain consecutive hyphens.",
            "example": "76f9b8c0-4958-11f0-a489-3bb29577c696",
            "minLength": 1,
            "maxLength": 63
          },
          "updated_at": {
            "type": "string",
            "description": "The time that the database was last updated.",
            "example": "2025-01-01T02:30:00Z",
            "format": "date-time"
          }
        },
        "example": {
          "created_at": "2025-01-01T01:30:00Z",
          "id": "02f1a7db-fca8-4521-b57a-2a375c1ced51",
          "instances": [
            {
              "connection_info": {
                "hostname": "i-0123456789abcdef.ec2.internal",
                "ipv4_address": "10.24.34.2",
                "port": 5432
              },
              "created_at": "1987-03-24T21:22:02Z",
              "error": "failed to get patroni status: connection refused",
              "host_id": "de3b1388-1f0c-42f1-a86c-59ab72f255ec",
              "id": "a67cbb36-c3c3-49c9-8aac-f4a0438a883d",
              "node_name": "n1",
              "postgres": {
                "patroni_paused": true,
                "patroni_state": "unknown",
                "pending_restart": false,
                "role": "primary",
                "version": "17.5"
              },
              "spock": {
                "read_only": "off",
                "subscriptions": [
                  {
                    "name": "sub_n1n2",
                    "provider_node": "n2",
                    "status": "down"
                  },
                  {
                    "name": "sub_n1n2",
                    "provider_node": "n2",
                    "status": "down"
                  }
                ],
                "version": "4.10.0"
              },
              "state": "creating",
              "status_updated_at": "1974-12-13T04:15:04Z",
              "updated_at": "2006-10-18T16:07:16Z"
            },
            {
              "connection_info": {
                "hostname": "i-0123456789abcdef.ec2.internal",
                "ipv4_address": "10.24.34.2",
                "port": 5432
              },
              "created_at": "1987-03-24T21:22:02Z",
              "error": "failed to get patroni status: connection refused",
              "host_id": "de3b1388-1f0c-42f1-a86c-59ab72f255ec",
              "id": "a67cbb36-c3c3-49c9-8aac-f4a0438a883d",
              "node_name": "n1",
              "postgres": {
                "patroni_paused": true,
                "patroni_state": "unknown",
                "pending_restart": false,
                "role": "primary",
                "version": "17.5"
              },
              "spock": {
                "read_only": "off",
                "subscriptions": [
                  {
                    "name": "sub_n1n2",
                    "provider_node": "n2",
                    "status": "down"
                  },
                  {
                    "name": "sub_n1n2",
                    "provider_node": "n2",
                    "status": "down"
                  }
                ],
                "version": "4.10.0"
              },
              "state": "creating",
              "status_updated_at": "1974-12-13T04:15:04Z",
              "updated_at": "2006-10-18T16:07:16Z"
            }
          ],
          "spec": {
            "backup_config": {
              "repositories": [
                {
                  "azure_account": "pgedge-backups",
                  "azure_container": "pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1",
                  "azure_endpoint": "blob.core.usgovcloudapi.net",
                  "azure_key": "YXpLZXk=",
                  "base_path": "/backups",
                  "custom_options": {
                    "s3-kms-key-id": "1234abcd-12ab-34cd-56ef-1234567890ab",
                    "storage-upload-chunk-size": "5MiB"
                  },
                  "gcs_bucket": "pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1",
                  "gcs_endpoint": "localhost",
                  "gcs_key": "ZXhhbXBsZSBnY3Mga2V5Cg==",
                  "id": "f6b84a99-5e91-4203-be1e-131fe82e5984",
                  "retention_full": 2,
                  "retention_full_type": "count",
                  "s3_bucket": "pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1",
                  "s3_endpoint": "s3.us-east-1.amazonaws.com",
                  "s3_key": "AKIAIOSFODNN7EXAMPLE",
                  "s3_key_secret": "wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY",
                  "s3_region": "us-east-1",
                  "type": "s3"
                }
              ],
              "schedules": [
                {
                  "cron_expression": "0 6 * * ?",
                  "id": "daily-full-backup",
                  "type": "full"
                },
                {
                  "cron_expression": "0 6 * * ?",
                  "id": "daily-full-backup",
                  "type": "full"
                },
                {
                  "cron_expression": "0 6 * * ?",
                  "id": "daily-full-backup",
                  "type": "full"
                }
              ]
            },
            "cpus": "500m",
            "database_name": "northwind",
            "database_users": [
              {
                "attributes": [
                  "LOGIN",
                  "CREATEDB",
                  "CREATEROLE"
                ],
                "db_owner": false,
                "password": "secret",
                "roles": [
                  "pgedge_superuser"
                ],
                "username": "admin"
              },
              {
                "attributes": [
                  "LOGIN",
                  "CREATEDB",
                  "CREATEROLE"
                ],
                "db_owner": false,
                "password": "secret",
                "roles": [
                  "pgedge_superuser"
                ],
                "username": "admin"
              },
              {
                "attributes": [
                  "LOGIN",
                  "CREATEDB",
                  "CREATEROLE"
                ],
                "db_owner": false,
                "password": "secret",
                "roles": [
                  "pgedge_superuser"
                ],
                "username": "admin"
              }
            ],
            "memory": "500M",
            "nodes": [
              {
                "backup_config": {
                  "repositories": [
                    {
                      "azure_account": "pgedge-backups",
                      "azure_container": "pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1",
                      "azure_endpoint": "blob.core.usgovcloudapi.net",
                      "azure_key": "YXpLZXk=",
                      "base_path": "/backups",
                      "custom_options": {
                        "s3-kms-key-id": "1234abcd-12ab-34cd-56ef-1234567890ab",
                        "storage-upload-chunk-size": "5MiB"
                      },
                      "gcs_bucket": "pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1",
                      "gcs_endpoint": "localhost",
                      "gcs_key": "ZXhhbXBsZSBnY3Mga2V5Cg==",
                      "id": "f6b84a99-5e91-4203-be1e-131fe82e5984",
                      "retention_full": 2,
                      "retention_full_type": "count",
                      "s3_bucket": "pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1",
                      "s3_endpoint": "s3.us-east-1.amazonaws.com",
                      "s3_key": "AKIAIOSFODNN7EXAMPLE",
                      "s3_key_secret": "wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY",
                      "s3_region": "us-east-1",
                      "type": "s3"
                    }
                  ],
                  "schedules": [
                    {
                      "cron_expression": "0 6 * * ?",
                      "id": "daily-full-backup",
                      "type": "full"
                    },
                    {
                      "cron_expression": "0 6 * * ?",
                      "id": "daily-full-backup",
                      "type": "full"
                    },
                    {
                      "cron_expression": "0 6 * * ?",
                      "id": "daily-full-backup",
                      "type": "full"
                    }
                  ]
                },
                "cpus": "500m",
                "host_ids": [
                  "de3b1388-1f0c-42f1-a86c-59ab72f255ec"
                ],
                "memory": "500M",
                "name": "n1",
                "orchestrator_opts": {
                  "swarm": {
                    "extra_labels": {
                      "traefik.enable": "true",
                      "traefik.tcp.routers.mydb.rule": "HostSNI(`mydb.example.com`)"
                    },
                    "extra_networks": [
                      {
                        "aliases": [
                          "pg-db",
                          "db-alias"
                        ],
                        "driver_opts": {
                          "com.docker.network.endpoint.expose": "true"
                        },
                        "id": "traefik-public"
                      },
                      {
                        "aliases": [
                          "pg-db",
                          "db-alias"
                        ],
                        "driver_opts": {
                          "com.docker.network.endpoint.expose": "true"
                        },
                        "id": "traefik-public"
                      },
                      {
                        "aliases": [
                          "pg-db",
                          "db-alias"
                        ],
                        "driver_opts": {
                          "com.docker.network.endpoint.expose": "true"
                        },
                        "id": "traefik-public"
                      }
                    ],
                    "extra_volumes": [
                      {
                        "destination_path": "/backups/container",
                        "host_path": "/Users/user/backups/host"
                      },
                      {
                        "destination_path": "/backups/container",
                        "host_path": "/Users/user/backups/host"
                      },
                      {
                        "destination_path": "/backups/container",
                        "host_path": "/Users/user/backups/host"
                      }
                    ]
                  }
                },
                "port": 5432,
                "postgres_version": "17.6",
                "postgresql_conf": {
                  "max_connections": 1000
                },
                "restore_config": {
                  "repository": {
                    "azure_account": "pgedge-backups",
                    "azure_container": "pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1",
                    "azure_endpoint": "blob.core.usgovcloudapi.net",
                    "azure_key": "YXpLZXk=",
                    "base_path": "/backups",
                    "custom_options": {
                      "s3-kms-key-id": "1234abcd-12ab-34cd-56ef-1234567890ab"
                    },
                    "gcs_bucket": "pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1",
                    "gcs_endpoint": "localhost",
                    "gcs_key": "ZXhhbXBsZSBnY3Mga2V5Cg==",
                    "id": "f6b84a99-5e91-4203-be1e-131fe82e5984",
                    "s3_bucket": "pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1",
                    "s3_endpoint": "s3.us-east-1.amazonaws.com",
                    "s3_key": "AKIAIOSFODNN7EXAMPLE",
                    "s3_key_secret": "wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY",
                    "s3_region": "us-east-1",
                    "type": "s3"
                  },
                  "restore_options": {
                    "set": "20250505-153628F",
                    "target": "123456",
                    "type": "xid"
                  },
                  "source_database_id": "02f1a7db-fca8-4521-b57a-2a375c1ced51",
                  "source_database_name": "northwind",
                  "source_node_name": "n1"
                },
                "source_node": "n1"
              },
              {
                "backup_config": {
                  "repositories": [
                    {
                      "azure_account": "pgedge-backups",
                      "azure_container": "pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1",
                      "azure_endpoint": "blob.core.usgovcloudapi.net",
                      "azure_key": "YXpLZXk=",
                      "base_path": "/backups",
                      "custom_options": {
                        "s3-kms-key-id": "1234abcd-12ab-34cd-56ef-1234567890ab",
                        "storage-upload-chunk-size": "5MiB"
                      },
                      "gcs_bucket": "pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1",
                      "gcs_endpoint": "localhost",
                      "gcs_key": "ZXhhbXBsZSBnY3Mga2V5Cg==",
                      "id": "f6b84a99-5e91-4203-be1e-131fe82e5984",
                      "retention_full": 2,
                      "retention_full_type": "count",
                      "s3_bucket": "pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1",
                      "s3_endpoint": "s3.us-east-1.amazonaws.com",
                      "s3_key": "AKIAIOSFODNN7EXAMPLE",
                      "s3_key_secret": "wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY",
                      "s3_region": "us-east-1",
                      "type": "s3"
                    }
                  ],
                  "schedules": [
                    {
                      "cron_expression": "0 6 * * ?",
                      "id": "daily-full-backup",
                      "type": "full"
                    },
                    {
                      "cron_expression": "0 6 * * ?",
                      "id": "daily-full-backup",
                      "type": "full"
                    },
                    {
                      "cron_expression": "0 6 * * ?",
                      "id": "daily-full-backup",
                      "type": "full"
                    }
                  ]
                },
                "cpus": "500m",
                "host_ids": [
                  "de3b1388-1f0c-42f1-a86c-59ab72f255ec"
                ],
                "memory": "500M",
                "name": "n1",
                "orchestrator_opts": {
                  "swarm": {
                    "extra_labels": {
                      "traefik.enable": "true",
                      "traefik.tcp.routers.mydb.rule": "HostSNI(`mydb.example.com`)"
                    },
                    "extra_networks": [
                      {
                        "aliases": [
                          "pg-db",
                          "db-alias"
                        ],
                        "driver_opts": {
                          "com.docker.network.endpoint.expose": "true"
                        },
                        "id": "traefik-public"
                      },
                      {
                        "aliases": [
                          "pg-db",
                          "db-alias"
                        ],
                        "driver_opts": {
                          "com.docker.network.endpoint.expose": "true"
                        },
                        "id": "traefik-public"
                      },
                      {
                        "aliases": [
                          "pg-db",
                          "db-alias"
                        ],
                        "driver_opts": {
                          "com.docker.network.endpoint.expose": "true"
                        },
                        "id": "traefik-public"
                      }
                    ],
                    "extra_volumes": [
                      {
                        "destination_path": "/backups/container",
                        "host_path": "/Users/user/backups/host"
                      },
                      {
                        "destination_path": "/backups/container",
                        "host_path": "/Users/user/backups/host"
                      },
                      {
                        "destination_path": "/backups/container",
                        "host_path": "/Users/user/backups/host"
                      }
                    ]
                  }
                },
                "port": 5432,
                "postgres_version": "17.6",
                "postgresql_conf": {
                  "max_connections": 1000
                },
                "restore_config": {
                  "repository": {
                    "azure_account": "pgedge-backups",
                    "azure_container": "pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1",
                    "azure_endpoint": "blob.core.usgovcloudapi.net",
                    "azure_key": "YXpLZXk=",
                    "base_path": "/backups",
                    "custom_options": {
                      "s3-kms-key-id": "1234abcd-12ab-34cd-56ef-1234567890ab"
                    },
                    "gcs_bucket": "pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1",
                    "gcs_endpoint": "localhost",
                    "gcs_key": "ZXhhbXBsZSBnY3Mga2V5Cg==",
                    "id": "f6b84a99-5e91-4203-be1e-131fe82e5984",
                    "s3_bucket": "pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1",
                    "s3_endpoint": "s3.us-east-1.amazonaws.com",
                    "s3_key": "AKIAIOSFODNN7EXAMPLE",
                    "s3_key_secret": "wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY",
                    "s3_region": "us-east-1",
                    "type": "s3"
                  },
                  "restore_options": {
                    "set": "20250505-153628F",
                    "target": "123456",
                    "type": "xid"
                  },
                  "source_database_id": "02f1a7db-fca8-4521-b57a-2a375c1ced51",
                  "source_database_name": "northwind",
                  "source_node_name": "n1"
                },
                "source_node": "n1"
              }
            ],
            "orchestrator_opts": {
              "swarm": {
                "extra_labels": {
                  "traefik.enable": "true",
                  "traefik.tcp.routers.mydb.rule": "HostSNI(`mydb.example.com`)"
                },
                "extra_networks": [
                  {
                    "aliases": [
                      "pg-db",
                      "db-alias"
                    ],
                    "driver_opts": {
                      "com.docker.network.endpoint.expose": "true"
                    },
                    "id": "traefik-public"
                  },
                  {
                    "aliases": [
                      "pg-db",
                      "db-alias"
                    ],
                    "driver_opts": {
                      "com.docker.network.endpoint.expose": "true"
                    },
                    "id": "traefik-public"
                  },
                  {
                    "aliases": [
                      "pg-db",
                      "db-alias"
                    ],
                    "driver_opts": {
                      "com.docker.network.endpoint.expose": "true"
                    },
                    "id": "traefik-public"
                  }
                ],
                "extra_volumes": [
                  {
                    "destination_path": "/backups/container",
                    "host_path": "/Users/user/backups/host"
                  },
                  {
                    "destination_path": "/backups/container",
                    "host_path": "/Users/user/backups/host"
                  },
                  {
                    "destination_path": "/backups/container",
                    "host_path": "/Users/user/backups/host"
                  }
                ]
              }
            },
            "port": 5432,
            "postgres_version": "17.6",
            "postgresql_conf": {
              "max_connections": 1000
            },
            "restore_config": {
              "repository": {
                "azure_account": "pgedge-backups",
                "azure_container": "pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1",
                "azure_endpoint": "blob.core.usgovcloudapi.net",
                "azure_key": "YXpLZXk=",
                "base_path": "/backups",
                "custom_options": {
                  "s3-kms-key-id": "1234abcd-12ab-34cd-56ef-1234567890ab"
                },
                "gcs_bucket": "pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1",
                "gcs_endpoint": "localhost",
                "gcs_key": "ZXhhbXBsZSBnY3Mga2V5Cg==",
                "id": "f6b84a99-5e91-4203-be1e-131fe82e5984",
                "s3_bucket": "pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1",
                "s3_endpoint": "s3.us-east-1.amazonaws.com",
                "s3_key": "AKIAIOSFODNN7EXAMPLE",
                "s3_key_secret": "wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY",
                "s3_region": "us-east-1",
                "type": "s3"
              },
              "restore_options": {
                "set": "20250505-153628F",
                "target": "123456",
                "type": "xid"
              },
              "source_database_id": "02f1a7db-fca8-4521-b57a-2a375c1ced51",
              "source_database_name": "northwind",
              "source_node_name": "n1"
            },
            "spock_version": "5"
          },
          "state": "backing_up",
          "tenant_id": "8210ec10-2dca-406c-ac4a-0661d2189954",
          "updated_at": "2025-01-01T02:30:00Z"
        },
        "required": [
          "id",
          "created_at",
          "updated_at",
          "state"
        ]
      },
      "DatabaseCollection": {
        "type": "array",
        "items": {
          "$ref": "#/components/schemas/Database"
        },
        "example": [
          {
            "created_at": "2025-01-01T01:30:00Z",
            "id": "02f1a7db-fca8-4521-b57a-2a375c1ced51",
            "instances": [
              {
                "connection_info": {
                  "hostname": "i-0123456789abcdef.ec2.internal",
                  "ipv4_address": "10.24.34.2",
                  "port": 5432
                },
                "created_at": "1987-03-24T21:22:02Z",
                "error": "failed to get patroni status: connection refused",
                "host_id": "de3b1388-1f0c-42f1-a86c-59ab72f255ec",
                "id": "a67cbb36-c3c3-49c9-8aac-f4a0438a883d",
                "node_name": "n1",
                "postgres": {
                  "patroni_paused": true,
                  "patroni_state": "unknown",
                  "pending_restart": false,
                  "role": "primary",
                  "version": "17.5"
                },
                "spock": {
                  "read_only": "off",
                  "subscriptions": [
                    {
                      "name": "sub_n1n2",
                      "provider_node": "n2",
                      "status": "down"
                    },
                    {
                      "name": "sub_n1n2",
                      "provider_node": "n2",
                      "status": "down"
                    }
                  ],
                  "version": "4.10.0"
                },
                "state": "creating",
                "status_updated_at": "1974-12-13T04:15:04Z",
                "updated_at": "2006-10-18T16:07:16Z"
              },
              {
                "connection_info": {
                  "hostname": "i-0123456789abcdef.ec2.internal",
                  "ipv4_address": "10.24.34.2",
                  "port": 5432
                },
                "created_at": "1987-03-24T21:22:02Z",
                "error": "failed to get patroni status: connection refused",
                "host_id": "de3b1388-1f0c-42f1-a86c-59ab72f255ec",
                "id": "a67cbb36-c3c3-49c9-8aac-f4a0438a883d",
                "node_name": "n1",
                "postgres": {
                  "patroni_paused": true,
                  "patroni_state": "unknown",
                  "pending_restart": false,
                  "role": "primary",
                  "version": "17.5"
                },
                "spock": {
                  "read_only": "off",
                  "subscriptions": [
                    {
                      "name": "sub_n1n2",
                      "provider_node": "n2",
                      "status": "down"
                    },
                    {
                      "name": "sub_n1n2",
                      "provider_node": "n2",
                      "status": "down"
                    }
                  ],
                  "version": "4.10.0"
                },
                "state": "creating",
                "status_updated_at": "1974-12-13T04:15:04Z",
                "updated_at": "2006-10-18T16:07:16Z"
              }
            ],
            "spec": {
              "backup_config": {
                "repositories": [
                  {
                    "azure_account": "pgedge-backups",
                    "azure_container": "pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1",
                    "azure_endpoint": "blob.core.usgovcloudapi.net",
                    "azure_key": "YXpLZXk=",
                    "base_path": "/backups",
                    "custom_options": {
                      "s3-kms-key-id": "1234abcd-12ab-34cd-56ef-1234567890ab",
                      "storage-upload-chunk-size": "5MiB"
                    },
                    "gcs_bucket": "pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1",
                    "gcs_endpoint": "localhost",
                    "gcs_key": "ZXhhbXBsZSBnY3Mga2V5Cg==",
                    "id": "f6b84a99-5e91-4203-be1e-131fe82e5984",
                    "retention_full": 2,
                    "retention_full_type": "count",
                    "s3_bucket": "pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1",
                    "s3_endpoint": "s3.us-east-1.amazonaws.com",
                    "s3_key": "AKIAIOSFODNN7EXAMPLE",
                    "s3_key_secret": "wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY",
                    "s3_region": "us-east-1",
                    "type": "s3"
                  }
                ],
                "schedules": [
                  {
                    "cron_expression": "0 6 * * ?",
                    "id": "daily-full-backup",
                    "type": "full"
                  },
                  {
                    "cron_expression": "0 6 * * ?",
                    "id": "daily-full-backup",
                    "type": "full"
                  },
                  {
                    "cron_expression": "0 6 * * ?",
                    "id": "daily-full-backup",
                    "type": "full"
                  }
                ]
              },
              "cpus": "500m",
              "database_name": "northwind",
              "database_users": [
                {
                  "attributes": [
                    "LOGIN",
                    "CREATEDB",
                    "CREATEROLE"
                  ],
                  "db_owner": false,
                  "password": "secret",
                  "roles": [
                    "pgedge_superuser"
                  ],
                  "username": "admin"
                },
                {
                  "attributes": [
                    "LOGIN",
                    "CREATEDB",
                    "CREATEROLE"
                  ],
                  "db_owner": false,
                  "password": "secret",
                  "roles": [
                    "pgedge_superuser"
                  ],
                  "username": "admin"
                },
                {
                  "attributes": [
                    "LOGIN",
                    "CREATEDB",
                    "CREATEROLE"
                  ],
                  "db_owner": false,
                  "password": "secret",
                  "roles": [
                    "pgedge_superuser"
                  ],
                  "username": "admin"
                }
              ],
              "memory": "500M",
              "nodes": [
                {
                  "backup_config": {
                    "repositories": [
                      {
                        "azure_account": "pgedge-backups",
                        "azure_container": "pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1",
                        "azure_endpoint": "blob.core.usgovcloudapi.net",
                        "azure_key": "YXpLZXk=",
                        "base_path": "/backups",
                        "custom_options": {
                          "s3-kms-key-id": "1234abcd-12ab-34cd-56ef-1234567890ab",
                          "storage-upload-chunk-size": "5MiB"
                        },
                        "gcs_bucket": "pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1",
                        "gcs_endpoint": "localhost",
                        "gcs_key": "ZXhhbXBsZSBnY3Mga2V5Cg==",
                        "id": "f6b84a99-5e91-4203-be1e-131fe82e5984",
                        "retention_full": 2,
                        "retention_full_type": "count",
                        "s3_bucket": "pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1",
                        "s3_endpoint": "s3.us-east-1.amazonaws.com",
                        "s3_key": "AKIAIOSFODNN7EXAMPLE",
                        "s3_key_secret": "wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY",
                        "s3_region": "us-east-1",
                        "type": "s3"
                      }
                    ],
                    "schedules": [
                      {
                        "cron_expression": "0 6 * * ?",
                        "id": "daily-full-backup",
                        "type": "full"
                      },
                      {
                        "cron_expression": "0 6 * * ?",
                        "id": "daily-full-backup",
                        "type": "full"
                      },
                      {
                        "cron_expression": "0 6 * * ?",
                        "id": "daily-full-backup",
                        "type": "full"
                      }
                    ]
                  },
                  "cpus": "500m",
                  "host_ids": [
                    "de3b1388-1f0c-42f1-a86c-59ab72f255ec"
                  ],
                  "memory": "500M",
                  "name": "n1",
                  "orchestrator_opts": {
                    "swarm": {
                      "extra_labels": {
                        "traefik.enable": "true",
                        "traefik.tcp.routers.mydb.rule": "HostSNI(`mydb.example.com`)"
                      },
                      "extra_networks": [
                        {
                          "aliases": [
                            "pg-db",
                            "db-alias"
                          ],
                          "driver_opts": {
                            "com.docker.network.endpoint.expose": "true"
                          },
                          "id": "traefik-public"
                        },
                        {
                          "aliases": [
                            "pg-db",
                            "db-alias"
                          ],
                          "driver_opts": {
                            "com.docker.network.endpoint.expose": "true"
                          },
                          "id": "traefik-public"
                        },
                        {
                          "aliases": [
                            "pg-db",
                            "db-alias"
                          ],
                          "driver_opts": {
                            "com.docker.network.endpoint.expose": "true"
                          },
                          "id": "traefik-public"
                        }
                      ],
                      "extra_volumes": [
                        {
                          "destination_path": "/backups/container",
                          "host_path": "/Users/user/backups/host"
                        },
                        {
                          "destination_path": "/backups/container",
                          "host_path": "/Users/user/backups/host"
                        },
                        {
                          "destination_path": "/backups/container",
                          "host_path": "/Users/user/backups/host"
                        }
                      ]
                    }
                  },
                  "port": 5432,
                  "postgres_version": "17.6",
                  "postgresql_conf": {
                    "max_connections": 1000
                  },
                  "restore_config": {
                    "repository": {
                      "azure_account": "pgedge-backups",
                      "azure_container": "pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1",
                      "azure_endpoint": "blob.core.usgovcloudapi.net",
                      "azure_key": "YXpLZXk=",
                      "base_path": "/backups",
                      "custom_options": {
                        "s3-kms-key-id": "1234abcd-12ab-34cd-56ef-1234567890ab"
                      },
                      "gcs_bucket": "pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1",
                      "gcs_endpoint": "localhost",
                      "gcs_key": "ZXhhbXBsZSBnY3Mga2V5Cg==",
                      "id": "f6b84a99-5e91-4203-be1e-131fe82e5984",
                      "s3_bucket": "pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1",
                      "s3_endpoint": "s3.us-east-1.amazonaws.com",
                      "s3_key": "AKIAIOSFODNN7EXAMPLE",
                      "s3_key_secret": "wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY",
                      "s3_region": "us-east-1",
                      "type": "s3"
                    },
                    "restore_options": {
                      "set": "20250505-153628F",
                      "target": "123456",
                      "type": "xid"
                    },
                    "source_database_id": "02f1a7db-fca8-4521-b57a-2a375c1ced51",
                    "source_database_name": "northwind",
                    "source_node_name": "n1"
                  },
                  "source_node": "n1"
                },
                {
                  "backup_config": {
                    "repositories": [
                      {
                        "azure_account": "pgedge-backups",
                        "azure_container": "pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1",
                        "azure_endpoint": "blob.core.usgovcloudapi.net",
                        "azure_key": "YXpLZXk=",
                        "base_path": "/backups",
                        "custom_options": {
                          "s3-kms-key-id": "1234abcd-12ab-34cd-56ef-1234567890ab",
                          "storage-upload-chunk-size": "5MiB"
                        },
                        "gcs_bucket": "pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1",
                        "gcs_endpoint": "localhost",
                        "gcs_key": "ZXhhbXBsZSBnY3Mga2V5Cg==",
                        "id": "f6b84a99-5e91-4203-be1e-131fe82e5984",
                        "retention_full": 2,
                        "retention_full_type": "count",
                        "s3_bucket": "pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1",
                        "s3_endpoint": "s3.us-east-1.amazonaws.com",
                        "s3_key": "AKIAIOSFODNN7EXAMPLE",
                        "s3_key_secret": "wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY",
                        "s3_region": "us-east-1",
                        "type": "s3"
                      }
                    ],
                    "schedules": [
                      {
                        "cron_expression": "0 6 * * ?",
                        "id": "daily-full-backup",
                        "type": "full"
                      },
                      {
                        "cron_expression": "0 6 * * ?",
                        "id": "daily-full-backup",
                        "type": "full"
                      },
                      {
                        "cron_expression": "0 6 * * ?",
                        "id": "daily-full-backup",
                        "type": "full"
                      }
                    ]
                  },
                  "cpus": "500m",
                  "host_ids": [
                    "de3b1388-1f0c-42f1-a86c-59ab72f255ec"
                  ],
                  "memory": "500M",
                  "name": "n1",
                  "orchestrator_opts": {
                    "swarm": {
                      "extra_labels": {
                        "traefik.enable": "true",
                        "traefik.tcp.routers.mydb.rule": "HostSNI(`mydb.example.com`)"
                      },
                      "extra_networks": [
                        {
                          "aliases": [
                            "pg-db",
                            "db-alias"
                          ],
                          "driver_opts": {
                            "com.docker.network.endpoint.expose": "true"
                          },
                          "id": "traefik-public"
                        },
                        {
                          "aliases": [
                            "pg-db",
                            "db-alias"
                          ],
                          "driver_opts": {
                            "com.docker.network.endpoint.expose": "true"
                          },
                          "id": "traefik-public"
                        },
                        {
                          "aliases": [
                            "pg-db",
                            "db-alias"
                          ],
                          "driver_opts": {
                            "com.docker.network.endpoint.expose": "true"
                          },
                          "id": "traefik-public"
                        }
                      ],
                      "extra_volumes": [
                        {
                          "destination_path": "/backups/container",
                          "host_path": "/Users/user/backups/host"
                        },
                        {
                          "destination_path": "/backups/container",
                          "host_path": "/Users/user/backups/host"
                        },
                        {
                          "destination_path": "/backups/container",
                          "host_path": "/Users/user/backups/host"
                        }
                      ]
                    }
                  },
                  "port": 5432,
                  "postgres_version": "17.6",
                  "postgresql_conf": {
                    "max_connections": 1000
                  },
                  "restore_config": {
                    "repository": {
                      "azure_account": "pgedge-backups",
                      "azure_container": "pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1",
                      "azure_endpoint": "blob.core.usgovcloudapi.net",
                      "azure_key": "YXpLZXk=",
                      "base_path": "/backups",
                      "custom_options": {
                        "s3-kms-key-id": "1234abcd-12ab-34cd-56ef-1234567890ab"
                      },
                      "gcs_bucket": "pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1",
                      "gcs_endpoint": "localhost",
                      "gcs_key": "ZXhhbXBsZSBnY3Mga2V5Cg==",
                      "id": "f6b84a99-5e91-4203-be1e-131fe82e5984",
                      "s3_bucket": "pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1",
                      "s3_endpoint": "s3.us-east-1.amazonaws.com",
                      "s3_key": "AKIAIOSFODNN7EXAMPLE",
                      "s3_key_secret": "wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY",
                      "s3_region": "us-east-1",
                      "type": "s3"
                    },
                    "restore_options": {
                      "set": "20250505-153628F",
                      "target": "123456",
                      "type": "xid"
                    },
                    "source_database_id": "02f1a7db-fca8-4521-b57a-2a375c1ced51",
                    "source_database_name": "northwind",
                    "source_node_name": "n1"
                  },
                  "source_node": "n1"
                }
              ],
              "orchestrator_opts": {
                "swarm": {
                  "extra_labels": {
                    "traefik.enable": "true",
                    "traefik.tcp.routers.mydb.rule": "HostSNI(`mydb.example.com`)"
                  },
                  "extra_networks": [
                    {
                      "aliases": [
                        "pg-db",
                        "db-alias"
                      ],
                      "driver_opts": {
                        "com.docker.network.endpoint.expose": "true"
                      },
                      "id": "traefik-public"
                    },
                    {
                      "aliases": [
                        "pg-db",
                        "db-alias"
                      ],
                      "driver_opts": {
                        "com.docker.network.endpoint.expose": "true"
                      },
                      "id": "traefik-public"
                    },
                    {
                      "aliases": [
                        "pg-db",
                        "db-alias"
                      ],
                      "driver_opts": {
                        "com.docker.network.endpoint.expose": "true"
                      },
                      "id": "traefik-public"
                    }
                  ],
                  "extra_volumes": [
                    {
                      "destination_path": "/backups/container",
                      "host_path": "/Users/user/backups/host"
                    },
                    {
                      "destination_path": "/backups/container",
                      "host_path": "/Users/user/backups/host"
                    },
                    {
                      "destination_path": "/backups/container",
                      "host_path": "/Users/user/backups/host"
                    }
                  ]
                }
              },
              "port": 5432,
              "postgres_version": "17.6",
              "postgresql_conf": {
                "max_connections": 1000
              },
              "restore_config": {
                "repository": {
                  "azure_account": "pgedge-backups",
                  "azure_container": "pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1",
                  "azure_endpoint": "blob.core.usgovcloudapi.net",
                  "azure_key": "YXpLZXk=",
                  "base_path": "/backups",
                  "custom_options": {
                    "s3-kms-key-id": "1234abcd-12ab-34cd-56ef-1234567890ab"
                  },
                  "gcs_bucket": "pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1",
                  "gcs_endpoint": "localhost",
                  "gcs_key": "ZXhhbXBsZSBnY3Mga2V5Cg==",
                  "id": "f6b84a99-5e91-4203-be1e-131fe82e5984",
                  "s3_bucket": "pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1",
                  "s3_endpoint": "s3.us-east-1.amazonaws.com",
                  "s3_key": "AKIAIOSFODNN7EXAMPLE",
                  "s3_key_secret": "wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY",
                  "s3_region": "us-east-1",
                  "type": "s3"
                },
                "restore_options": {
                  "set": "20250505-153628F",
                  "target": "123456",
                  "type": "xid"
                },
                "source_database_id": "02f1a7db-fca8-4521-b57a-2a375c1ced51",
                "source_database_name": "northwind",
                "source_node_name": "n1"
              },
              "spock_version": "5"
            },
            "state": "available",
            "tenant_id": "8210ec10-2dca-406c-ac4a-0661d2189954",
            "updated_at": "2025-01-01T02:30:00Z"
          },
          {
            "created_at": "2025-01-01T01:30:00Z",
            "id": "02f1a7db-fca8-4521-b57a-2a375c1ced51",
            "instances": [
              {
                "connection_info": {
                  "hostname": "i-0123456789abcdef.ec2.internal",
                  "ipv4_address": "10.24.34.2",
                  "port": 5432
                },
                "created_at": "1987-03-24T21:22:02Z",
                "error": "failed to get patroni status: connection refused",
                "host_id": "de3b1388-1f0c-42f1-a86c-59ab72f255ec",
                "id": "a67cbb36-c3c3-49c9-8aac-f4a0438a883d",
                "node_name": "n1",
                "postgres": {
                  "patroni_paused": true,
                  "patroni_state": "unknown",
                  "pending_restart": false,
                  "role": "primary",
                  "version": "17.5"
                },
                "spock": {
                  "read_only": "off",
                  "subscriptions": [
                    {
                      "name": "sub_n1n2",
                      "provider_node": "n2",
                      "status": "down"
                    },
                    {
                      "name": "sub_n1n2",
                      "provider_node": "n2",
                      "status": "down"
                    }
                  ],
                  "version": "4.10.0"
                },
                "state": "creating",
                "status_updated_at": "1974-12-13T04:15:04Z",
                "updated_at": "2006-10-18T16:07:16Z"
              },
              {
                "connection_info": {
                  "hostname": "i-0123456789abcdef.ec2.internal",
                  "ipv4_address": "10.24.34.2",
                  "port": 5432
                },
                "created_at": "1987-03-24T21:22:02Z",
                "error": "failed to get patroni status: connection refused",
                "host_id": "de3b1388-1f0c-42f1-a86c-59ab72f255ec",
                "id": "a67cbb36-c3c3-49c9-8aac-f4a0438a883d",
                "node_name": "n1",
                "postgres": {
                  "patroni_paused": true,
                  "patroni_state": "unknown",
                  "pending_restart": false,
                  "role": "primary",
                  "version": "17.5"
                },
                "spock": {
                  "read_only": "off",
                  "subscriptions": [
                    {
                      "name": "sub_n1n2",
                      "provider_node": "n2",
                      "status": "down"
                    },
                    {
                      "name": "sub_n1n2",
                      "provider_node": "n2",
                      "status": "down"
                    }
                  ],
                  "version": "4.10.0"
                },
                "state": "creating",
                "status_updated_at": "1974-12-13T04:15:04Z",
                "updated_at": "2006-10-18T16:07:16Z"
              }
            ],
            "spec": {
              "backup_config": {
                "repositories": [
                  {
                    "azure_account": "pgedge-backups",
                    "azure_container": "pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1",
                    "azure_endpoint": "blob.core.usgovcloudapi.net",
                    "azure_key": "YXpLZXk=",
                    "base_path": "/backups",
                    "custom_options": {
                      "s3-kms-key-id": "1234abcd-12ab-34cd-56ef-1234567890ab",
                      "storage-upload-chunk-size": "5MiB"
                    },
                    "gcs_bucket": "pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1",
                    "gcs_endpoint": "localhost",
                    "gcs_key": "ZXhhbXBsZSBnY3Mga2V5Cg==",
                    "id": "f6b84a99-5e91-4203-be1e-131fe82e5984",
                    "retention_full": 2,
                    "retention_full_type": "count",
                    "s3_bucket": "pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1",
                    "s3_endpoint": "s3.us-east-1.amazonaws.com",
                    "s3_key": "AKIAIOSFODNN7EXAMPLE",
                    "s3_key_secret": "wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY",
                    "s3_region": "us-east-1",
                    "type": "s3"
                  }
                ],
                "schedules": [
                  {
                    "cron_expression": "0 6 * * ?",
                    "id": "daily-full-backup",
                    "type": "full"
                  },
                  {
                    "cron_expression": "0 6 * * ?",
                    "id": "daily-full-backup",
                    "type": "full"
                  },
                  {
                    "cron_expression": "0 6 * * ?",
                    "id": "daily-full-backup",
                    "type": "full"
                  }
                ]
              },
              "cpus": "500m",
              "database_name": "northwind",
              "database_users": [
                {
                  "attributes": [
                    "LOGIN",
                    "CREATEDB",
                    "CREATEROLE"
                  ],
                  "db_owner": false,
                  "password": "secret",
                  "roles": [
                    "pgedge_superuser"
                  ],
                  "username": "admin"
                },
                {
                  "attributes": [
                    "LOGIN",
                    "CREATEDB",
                    "CREATEROLE"
                  ],
                  "db_owner": false,
                  "password": "secret",
                  "roles": [
                    "pgedge_superuser"
                  ],
                  "username": "admin"
                },
                {
                  "attributes": [
                    "LOGIN",
                    "CREATEDB",
                    "CREATEROLE"
                  ],
                  "db_owner": false,
                  "password": "secret",
                  "roles": [
                    "pgedge_superuser"
                  ],
                  "username": "admin"
                }
              ],
              "memory": "500M",
              "nodes": [
                {
                  "backup_config": {
                    "repositories": [
                      {
                        "azure_account": "pgedge-backups",
                        "azure_container": "pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1",
                        "azure_endpoint": "blob.core.usgovcloudapi.net",
                        "azure_key": "YXpLZXk=",
                        "base_path": "/backups",
                        "custom_options": {
                          "s3-kms-key-id": "1234abcd-12ab-34cd-56ef-1234567890ab",
                          "storage-upload-chunk-size": "5MiB"
                        },
                        "gcs_bucket": "pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1",
                        "gcs_endpoint": "localhost",
                        "gcs_key": "ZXhhbXBsZSBnY3Mga2V5Cg==",
                        "id": "f6b84a99-5e91-4203-be1e-131fe82e5984",
                        "retention_full": 2,
                        "retention_full_type": "count",
                        "s3_bucket": "pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1",
                        "s3_endpoint": "s3.us-east-1.amazonaws.com",
                        "s3_key": "AKIAIOSFODNN7EXAMPLE",
                        "s3_key_secret": "wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY",
                        "s3_region": "us-east-1",
                        "type": "s3"
                      }
                    ],
                    "schedules": [
                      {
                        "cron_expression": "0 6 * * ?",
                        "id": "daily-full-backup",
                        "type": "full"
                      },
                      {
                        "cron_expression": "0 6 * * ?",
                        "id": "daily-full-backup",
                        "type": "full"
                      },
                      {
                        "cron_expression": "0 6 * * ?",
                        "id": "daily-full-backup",
                        "type": "full"
                      }
                    ]
                  },
                  "cpus": "500m",
                  "host_ids": [
                    "de3b1388-1f0c-42f1-a86c-59ab72f255ec"
                  ],
                  "memory": "500M",
                  "name": "n1",
                  "orchestrator_opts": {
                    "swarm": {
                      "extra_labels": {
                        "traefik.enable": "true",
                        "traefik.tcp.routers.mydb.rule": "HostSNI(`mydb.example.com`)"
                      },
                      "extra_networks": [
                        {
                          "aliases": [
                            "pg-db",
                            "db-alias"
                          ],
                          "driver_opts": {
                            "com.docker.network.endpoint.expose": "true"
                          },
                          "id": "traefik-public"
                        },
                        {
                          "aliases": [
                            "pg-db",
                            "db-alias"
                          ],
                          "driver_opts": {
                            "com.docker.network.endpoint.expose": "true"
                          },
                          "id": "traefik-public"
                        },
                        {
                          "aliases": [
                            "pg-db",
                            "db-alias"
                          ],
                          "driver_opts": {
                            "com.docker.network.endpoint.expose": "true"
                          },
                          "id": "traefik-public"
                        }
                      ],
                      "extra_volumes": [
                        {
                          "destination_path": "/backups/container",
                          "host_path": "/Users/user/backups/host"
                        },
                        {
                          "destination_path": "/backups/container",
                          "host_path": "/Users/user/backups/host"
                        },
                        {
                          "destination_path": "/backups/container",
                          "host_path": "/Users/user/backups/host"
                        }
                      ]
                    }
                  },
                  "port": 5432,
                  "postgres_version": "17.6",
                  "postgresql_conf": {
                    "max_connections": 1000
                  },
                  "restore_config": {
                    "repository": {
                      "azure_account": "pgedge-backups",
                      "azure_container": "pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1",
                      "azure_endpoint": "blob.core.usgovcloudapi.net",
                      "azure_key": "YXpLZXk=",
                      "base_path": "/backups",
                      "custom_options": {
                        "s3-kms-key-id": "1234abcd-12ab-34cd-56ef-1234567890ab"
                      },
                      "gcs_bucket": "pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1",
                      "gcs_endpoint": "localhost",
                      "gcs_key": "ZXhhbXBsZSBnY3Mga2V5Cg==",
                      "id": "f6b84a99-5e91-4203-be1e-131fe82e5984",
                      "s3_bucket": "pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1",
                      "s3_endpoint": "s3.us-east-1.amazonaws.com",
                      "s3_key": "AKIAIOSFODNN7EXAMPLE",
                      "s3_key_secret": "wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY",
                      "s3_region": "us-east-1",
                      "type": "s3"
                    },
                    "restore_options": {
                      "set": "20250505-153628F",
                      "target": "123456",
                      "type": "xid"
                    },
                    "source_database_id": "02f1a7db-fca8-4521-b57a-2a375c1ced51",
                    "source_database_name": "northwind",
                    "source_node_name": "n1"
                  },
                  "source_node": "n1"
                },
                {
                  "backup_config": {
                    "repositories": [
                      {
                        "azure_account": "pgedge-backups",
                        "azure_container": "pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1",
                        "azure_endpoint": "blob.core.usgovcloudapi.net",
                        "azure_key": "YXpLZXk=",
                        "base_path": "/backups",
                        "custom_options": {
                          "s3-kms-key-id": "1234abcd-12ab-34cd-56ef-1234567890ab",
                          "storage-upload-chunk-size": "5MiB"
                        },
                        "gcs_bucket": "pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1",
                        "gcs_endpoint": "localhost",
                        "gcs_key": "ZXhhbXBsZSBnY3Mga2V5Cg==",
                        "id": "f6b84a99-5e91-4203-be1e-131fe82e5984",
                        "retention_full": 2,
                        "retention_full_type": "count",
                        "s3_bucket": "pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1",
                        "s3_endpoint": "s3.us-east-1.amazonaws.com",
                        "s3_key": "AKIAIOSFODNN7EXAMPLE",
                        "s3_key_secret": "wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY",
                        "s3_region": "us-east-1",
                        "type": "s3"
                      }
                    ],
                    "schedules": [
                      {
                        "cron_expression": "0 6 * * ?",
                        "id": "daily-full-backup",
                        "type": "full"
                      },
                      {
                        "cron_expression": "0 6 * * ?",
                        "id": "daily-full-backup",
                        "type": "full"
                      },
                      {
                        "cron_expression": "0 6 * * ?",
                        "id": "daily-full-backup",
                        "type": "full"
                      }
                    ]
                  },
                  "cpus": "500m",
                  "host_ids": [
                    "de3b1388-1f0c-42f1-a86c-59ab72f255ec"
                  ],
                  "memory": "500M",
                  "name": "n1",
                  "orchestrator_opts": {
                    "swarm": {
                      "extra_labels": {
                        "traefik.enable": "true",
                        "traefik.tcp.routers.mydb.rule": "HostSNI(`mydb.example.com`)"
                      },
                      "extra_networks": [
                        {
                          "aliases": [
                            "pg-db",
                            "db-alias"
                          ],
                          "driver_opts": {
                            "com.docker.network.endpoint.expose": "true"
                          },
                          "id": "traefik-public"
                        },
                        {
                          "aliases": [
                            "pg-db",
                            "db-alias"
                          ],
                          "driver_opts": {
                            "com.docker.network.endpoint.expose": "true"
                          },
                          "id": "traefik-public"
                        },
                        {
                          "aliases": [
                            "pg-db",
                            "db-alias"
                          ],
                          "driver_opts": {
                            "com.docker.network.endpoint.expose": "true"
                          },
                          "id": "traefik-public"
                        }
                      ],
                      "extra_volumes": [
                        {
                          "destination_path": "/backups/container",
                          "host_path": "/Users/user/backups/host"
                        },
                        {
                          "destination_path": "/backups/container",
                          "host_path": "/Users/user/backups/host"
                        },
                        {
                          "destination_path": "/backups/container",
                          "host_path": "/Users/user/backups/host"
                        }
                      ]
                    }
                  },
                  "port": 5432,
                  "postgres_version": "17.6",
                  "postgresql_conf": {
                    "max_connections": 1000
                  },
                  "restore_config": {
                    "repository": {
                      "azure_account": "pgedge-backups",
                      "azure_container": "pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1",
                      "azure_endpoint": "blob.core.usgovcloudapi.net",
                      "azure_key": "YXpLZXk=",
                      "base_path": "/backups",
                      "custom_options": {
                        "s3-kms-key-id": "1234abcd-12ab-34cd-56ef-1234567890ab"
                      },
                      "gcs_bucket": "pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1",
                      "gcs_endpoint": "localhost",
                      "gcs_key": "ZXhhbXBsZSBnY3Mga2V5Cg==",
                      "id": "f6b84a99-5e91-4203-be1e-131fe82e5984",
                      "s3_bucket": "pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1",
                      "s3_endpoint": "s3.us-east-1.amazonaws.com",
                      "s3_key": "AKIAIOSFODNN7EXAMPLE",
                      "s3_key_secret": "wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY",
                      "s3_region": "us-east-1",
                      "type": "s3"
                    },
                    "restore_options": {
                      "set": "20250505-153628F",
                      "target": "123456",
                      "type": "xid"
                    },
                    "source_database_id": "02f1a7db-fca8-4521-b57a-2a375c1ced51",
                    "source_database_name": "northwind",
                    "source_node_name": "n1"
                  },
                  "source_node": "n1"
                }
              ],
              "orchestrator_opts": {
                "swarm": {
                  "extra_labels": {
                    "traefik.enable": "true",
                    "traefik.tcp.routers.mydb.rule": "HostSNI(`mydb.example.com`)"
                  },
                  "extra_networks": [
                    {
                      "aliases": [
                        "pg-db",
                        "db-alias"
                      ],
                      "driver_opts": {
                        "com.docker.network.endpoint.expose": "true"
                      },
                      "id": "traefik-public"
                    },
                    {
                      "aliases": [
                        "pg-db",
                        "db-alias"
                      ],
                      "driver_opts": {
                        "com.docker.network.endpoint.expose": "true"
                      },
                      "id": "traefik-public"
                    },
                    {
                      "aliases": [
                        "pg-db",
                        "db-alias"
                      ],
                      "driver_opts": {
                        "com.docker.network.endpoint.expose": "true"
                      },
                      "id": "traefik-public"
                    }
                  ],
                  "extra_volumes": [
                    {
                      "destination_path": "/backups/container",
                      "host_path": "/Users/user/backups/host"
                    },
                    {
                      "destination_path": "/backups/container",
                      "host_path": "/Users/user/backups/host"
                    },
                    {
                      "destination_path": "/backups/container",
                      "host_path": "/Users/user/backups/host"
                    }
                  ]
                }
              },
              "port": 5432,
              "postgres_version": "17.6",
              "postgresql_conf": {
                "max_connections": 1000
              },
              "restore_config": {
                "repository": {
                  "azure_account": "pgedge-backups",
                  "azure_container": "pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1",
                  "azure_endpoint": "blob.core.usgovcloudapi.net",
                  "azure_key": "YXpLZXk=",
                  "base_path": "/backups",
                  "custom_options": {
                    "s3-kms-key-id": "1234abcd-12ab-34cd-56ef-1234567890ab"
                  },
                  "gcs_bucket": "pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1",
                  "gcs_endpoint": "localhost",
                  "gcs_key": "ZXhhbXBsZSBnY3Mga2V5Cg==",
                  "id": "f6b84a99-5e91-4203-be1e-131fe82e5984",
                  "s3_bucket": "pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1",
                  "s3_endpoint": "s3.us-east-1.amazonaws.com",
                  "s3_key": "AKIAIOSFODNN7EXAMPLE",
                  "s3_key_secret": "wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY",
                  "s3_region": "us-east-1",
                  "type": "s3"
                },
                "restore_options": {
                  "set": "20250505-153628F",
                  "target": "123456",
                  "type": "xid"
                },
                "source_database_id": "02f1a7db-fca8-4521-b57a-2a375c1ced51",
                "source_database_name": "northwind",
                "source_node_name": "n1"
              },
              "spock_version": "5"
            },
            "state": "available",
            "tenant_id": "8210ec10-2dca-406c-ac4a-0661d2189954",
            "updated_at": "2025-01-01T02:30:00Z"
          }
        ]
      },
      "DatabaseNodeSpec": {
        "type": "object",
        "properties": {
          "backup_config": {
            "$ref": "#/components/schemas/BackupConfigSpec"
          },
          "cpus": {
            "type": "string",
            "description": "The number of CPUs to allocate for the database on this node and to use for tuning Postgres. It can include the SI suffix 'm', e.g. '500m' for 500 millicpus. Cannot allocate units smaller than 1m. Defaults to the number of available CPUs on the host if 0 or unspecified. Cannot allocate more CPUs than are available on the host. Whether this limit is enforced depends on the orchestrator.",
            "example": "500m",
            "pattern": "^[0-9]+(\\.[0-9]{1,3}|m)?$"
          },
          "host_ids": {
            "type": "array",
            "items": {
              "type": "string",
              "description": "A user-specified identifier. Must be 1-63 characters, contain only lower-cased letters and hyphens, start and end with a letter or number, and not contain consecutive hyphens.",
              "example": "76f9b8c0-4958-11f0-a489-3bb29577c696",
              "minLength": 1,
              "maxLength": 63
            },
            "description": "The IDs of the hosts that should run this node. When multiple hosts are specified, one host will chosen as a primary, and the others will be read replicas.",
            "example": [
              "de3b1388-1f0c-42f1-a86c-59ab72f255ec",
              "de3b1388-1f0c-42f1-a86c-59ab72f255ec",
              "de3b1388-1f0c-42f1-a86c-59ab72f255ec"
            ],
            "minItems": 1
          },
          "memory": {
            "type": "string",
            "description": "The amount of memory in SI or IEC notation to allocate for the database on this node and to use for tuning Postgres. Defaults to the total available memory on the host. Whether this limit is enforced depends on the orchestrator.",
            "example": "500M",
            "maxLength": 16
          },
          "name": {
            "type": "string",
            "description": "The name of the database node.",
            "example": "n1",
            "pattern": "n[0-9]+"
          },
          "orchestrator_opts": {
            "$ref": "#/components/schemas/OrchestratorOpts"
          },
          "port": {
            "type": "integer",
            "description": "The port used by the Postgres database for this node. Overrides the Postgres port set in the DatabaseSpec.",
            "example": 5432,
            "format": "int64",
            "minimum": 0,
            "maximum": 65535
          },
          "postgres_version": {
            "type": "string",
            "description": "The Postgres version for this node in 'major.minor' format. Overrides the Postgres version set in the DatabaseSpec.",
            "example": "17.6",
            "pattern": "^\\d{2}\\.\\d{1,2}$"
          },
          "postgresql_conf": {
            "type": "object",
            "description": "Additional postgresql.conf settings for this particular node. Will be merged with the settings provided by control-plane.",
            "example": {
              "max_connections": 1000
            },
            "additionalProperties": true
          },
          "restore_config": {
            "$ref": "#/components/schemas/RestoreConfigSpec"
          },
          "source_node": {
            "type": "string",
            "description": "The name of the source node to use for sync. This is typically the node (like 'n1') from which the data will be copied to initialize this new node.",
            "example": "n1"
          }
        },
        "example": {
          "backup_config": {
            "repositories": [
              {
                "azure_account": "pgedge-backups",
                "azure_container": "pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1",
                "azure_endpoint": "blob.core.usgovcloudapi.net",
                "azure_key": "YXpLZXk=",
                "base_path": "/backups",
                "custom_options": {
                  "s3-kms-key-id": "1234abcd-12ab-34cd-56ef-1234567890ab",
                  "storage-upload-chunk-size": "5MiB"
                },
                "gcs_bucket": "pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1",
                "gcs_endpoint": "localhost",
                "gcs_key": "ZXhhbXBsZSBnY3Mga2V5Cg==",
                "id": "f6b84a99-5e91-4203-be1e-131fe82e5984",
                "retention_full": 2,
                "retention_full_type": "count",
                "s3_bucket": "pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1",
                "s3_endpoint": "s3.us-east-1.amazonaws.com",
                "s3_key": "AKIAIOSFODNN7EXAMPLE",
                "s3_key_secret": "wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY",
                "s3_region": "us-east-1",
                "type": "s3"
              }
            ],
            "schedules": [
              {
                "cron_expression": "0 6 * * ?",
                "id": "daily-full-backup",
                "type": "full"
              },
              {
                "cron_expression": "0 6 * * ?",
                "id": "daily-full-backup",
                "type": "full"
              },
              {
                "cron_expression": "0 6 * * ?",
                "id": "daily-full-backup",
                "type": "full"
              }
            ]
          },
          "cpus": "500m",
          "host_ids": [
            "de3b1388-1f0c-42f1-a86c-59ab72f255ec"
          ],
          "memory": "500M",
          "name": "n1",
          "orchestrator_opts": {
            "swarm": {
              "extra_labels": {
                "traefik.enable": "true",
                "traefik.tcp.routers.mydb.rule": "HostSNI(`mydb.example.com`)"
              },
              "extra_networks": [
                {
                  "aliases": [
                    "pg-db",
                    "db-alias"
                  ],
                  "driver_opts": {
                    "com.docker.network.endpoint.expose": "true"
                  },
                  "id": "traefik-public"
                },
                {
                  "aliases": [
                    "pg-db",
                    "db-alias"
                  ],
                  "driver_opts": {
                    "com.docker.network.endpoint.expose": "true"
                  },
                  "id": "traefik-public"
                },
                {
                  "aliases": [
                    "pg-db",
                    "db-alias"
                  ],
                  "driver_opts": {
                    "com.docker.network.endpoint.expose": "true"
                  },
                  "id": "traefik-public"
                }
              ],
              "extra_volumes": [
                {
                  "destination_path": "/backups/container",
                  "host_path": "/Users/user/backups/host"
                },
                {
                  "destination_path": "/backups/container",
                  "host_path": "/Users/user/backups/host"
                },
                {
                  "destination_path": "/backups/container",
                  "host_path": "/Users/user/backups/host"
                }
              ]
            }
          },
          "port": 5432,
          "postgres_version": "17.6",
          "postgresql_conf": {
            "max_connections": 1000
          },
          "restore_config": {
            "repository": {
              "azure_account": "pgedge-backups",
              "azure_container": "pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1",
              "azure_endpoint": "blob.core.usgovcloudapi.net",
              "azure_key": "YXpLZXk=",
              "base_path": "/backups",
              "custom_options": {
                "s3-kms-key-id": "1234abcd-12ab-34cd-56ef-1234567890ab"
              },
              "gcs_bucket": "pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1",
              "gcs_endpoint": "localhost",
              "gcs_key": "ZXhhbXBsZSBnY3Mga2V5Cg==",
              "id": "f6b84a99-5e91-4203-be1e-131fe82e5984",
              "s3_bucket": "pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1",
              "s3_endpoint": "s3.us-east-1.amazonaws.com",
              "s3_key": "AKIAIOSFODNN7EXAMPLE",
              "s3_key_secret": "wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY",
              "s3_region": "us-east-1",
              "type": "s3"
            },
            "restore_options": {
              "set": "20250505-153628F",
              "target": "123456",
              "type": "xid"
            },
            "source_database_id": "02f1a7db-fca8-4521-b57a-2a375c1ced51",
            "source_database_name": "northwind",
            "source_node_name": "n1"
          },
          "source_node": "n1"
        },
        "required": [
          "name",
          "host_ids"
        ]
      },
      "DatabaseSpec": {
        "type": "object",
        "properties": {
          "backup_config": {
            "$ref": "#/components/schemas/BackupConfigSpec"
          },
          "cpus": {
            "type": "string",
            "description": "The number of CPUs to allocate for the database and to use for tuning Postgres. Defaults to the number of available CPUs on the host. Can include an SI suffix, e.g. '500m' for 500 millicpus. Whether this limit is enforced depends on the orchestrator.",
            "example": "500m",
            "pattern": "^[0-9]+(\\.[0-9]{1,3}|m)?$"
          },
          "database_name": {
            "type": "string",
            "description": "The name of the Postgres database.",
            "example": "northwind",
            "minLength": 1,
            "maxLength": 31
          },
          "database_users": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/DatabaseUserSpec"
            },
            "description": "The users to create for this database.",
            "example": [
              {
                "attributes": [
                  "LOGIN",
                  "CREATEDB",
                  "CREATEROLE"
                ],
                "db_owner": false,
                "password": "secret",
                "roles": [
                  "pgedge_superuser"
                ],
                "username": "admin"
              },
              {
                "attributes": [
                  "LOGIN",
                  "CREATEDB",
                  "CREATEROLE"
                ],
                "db_owner": false,
                "password": "secret",
                "roles": [
                  "pgedge_superuser"
                ],
                "username": "admin"
              },
              {
                "attributes": [
                  "LOGIN",
                  "CREATEDB",
                  "CREATEROLE"
                ],
                "db_owner": false,
                "password": "secret",
                "roles": [
                  "pgedge_superuser"
                ],
                "username": "admin"
              }
            ],
            "maxItems": 16
          },
          "memory": {
            "type": "string",
            "description": "The amount of memory in SI or IEC notation to allocate for the database and to use for tuning Postgres. Defaults to the total available memory on the host. Whether this limit is enforced depends on the orchestrator.",
            "example": "500M",
            "maxLength": 16
          },
          "nodes": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/DatabaseNodeSpec"
            },
            "description": "The Spock nodes for this database.",
            "example": [
              {
                "backup_config": {
                  "repositories": [
                    {
                      "azure_account": "pgedge-backups",
                      "azure_container": "pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1",
                      "azure_endpoint": "blob.core.usgovcloudapi.net",
                      "azure_key": "YXpLZXk=",
                      "base_path": "/backups",
                      "custom_options": {
                        "s3-kms-key-id": "1234abcd-12ab-34cd-56ef-1234567890ab",
                        "storage-upload-chunk-size": "5MiB"
                      },
                      "gcs_bucket": "pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1",
                      "gcs_endpoint": "localhost",
                      "gcs_key": "ZXhhbXBsZSBnY3Mga2V5Cg==",
                      "id": "f6b84a99-5e91-4203-be1e-131fe82e5984",
                      "retention_full": 2,
                      "retention_full_type": "count",
                      "s3_bucket": "pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1",
                      "s3_endpoint": "s3.us-east-1.amazonaws.com",
                      "s3_key": "AKIAIOSFODNN7EXAMPLE",
                      "s3_key_secret": "wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY",
                      "s3_region": "us-east-1",
                      "type": "s3"
                    }
                  ],
                  "schedules": [
                    {
                      "cron_expression": "0 6 * * ?",
                      "id": "daily-full-backup",
                      "type": "full"
                    },
                    {
                      "cron_expression": "0 6 * * ?",
                      "id": "daily-full-backup",
                      "type": "full"
                    },
                    {
                      "cron_expression": "0 6 * * ?",
                      "id": "daily-full-backup",
                      "type": "full"
                    }
                  ]
                },
                "cpus": "500m",
                "host_ids": [
                  "de3b1388-1f0c-42f1-a86c-59ab72f255ec"
                ],
                "memory": "500M",
                "name": "n1",
                "orchestrator_opts": {
                  "swarm": {
                    "extra_labels": {
                      "traefik.enable": "true",
                      "traefik.tcp.routers.mydb.rule": "HostSNI(`mydb.example.com`)"
                    },
                    "extra_networks": [
                      {
                        "aliases": [
                          "pg-db",
                          "db-alias"
                        ],
                        "driver_opts": {
                          "com.docker.network.endpoint.expose": "true"
                        },
                        "id": "traefik-public"
                      },
                      {
                        "aliases": [
                          "pg-db",
                          "db-alias"
                        ],
                        "driver_opts": {
                          "com.docker.network.endpoint.expose": "true"
                        },
                        "id": "traefik-public"
                      },
                      {
                        "aliases": [
                          "pg-db",
                          "db-alias"
                        ],
                        "driver_opts": {
                          "com.docker.network.endpoint.expose": "true"
                        },
                        "id": "traefik-public"
                      }
                    ],
                    "extra_volumes": [
                      {
                        "destination_path": "/backups/container",
                        "host_path": "/Users/user/backups/host"
                      },
                      {
                        "destination_path": "/backups/container",
                        "host_path": "/Users/user/backups/host"
                      },
                      {
                        "destination_path": "/backups/container",
                        "host_path": "/Users/user/backups/host"
                      }
                    ]
                  }
                },
                "port": 5432,
                "postgres_version": "17.6",
                "postgresql_conf": {
                  "max_connections": 1000
                },
                "restore_config": {
                  "repository": {
                    "azure_account": "pgedge-backups",
                    "azure_container": "pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1",
                    "azure_endpoint": "blob.core.usgovcloudapi.net",
                    "azure_key": "YXpLZXk=",
                    "base_path": "/backups",
                    "custom_options": {
                      "s3-kms-key-id": "1234abcd-12ab-34cd-56ef-1234567890ab"
                    },
                    "gcs_bucket": "pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1",
                    "gcs_endpoint": "localhost",
                    "gcs_key": "ZXhhbXBsZSBnY3Mga2V5Cg==",
                    "id": "f6b84a99-5e91-4203-be1e-131fe82e5984",
                    "s3_bucket": "pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1",
                    "s3_endpoint": "s3.us-east-1.amazonaws.com",
                    "s3_key": "AKIAIOSFODNN7EXAMPLE",
                    "s3_key_secret": "wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY",
                    "s3_region": "us-east-1",
                    "type": "s3"
                  },
                  "restore_options": {
                    "set": "20250505-153628F",
                    "target": "123456",
                    "type": "xid"
                  },
                  "source_database_id": "02f1a7db-fca8-4521-b57a-2a375c1ced51",
                  "source_database_name": "northwind",
                  "source_node_name": "n1"
                },
                "source_node": "n1"
              }
            ],
            "minItems": 1,
            "maxItems": 9
          },
          "orchestrator_opts": {
            "$ref": "#/components/schemas/OrchestratorOpts"
          },
          "port": {
            "type": "integer",
            "description": "The port used by the Postgres database. If the port is 0, each instance will be assigned a random port. If the port is unspecified, the database will not be exposed on any port, dependent on orchestrator support for that feature.",
            "example": 5432,
            "format": "int64",
            "minimum": 0,
            "maximum": 65535
          },
          "postgres_version": {
            "type": "string",
            "description": "The Postgres version in 'major.minor' format.",
            "example": "17.6",
            "pattern": "^\\d{2}\\.\\d{1,2}$"
          },
          "postgresql_conf": {
            "type": "object",
            "description": "Additional postgresql.conf settings. Will be merged with the settings provided by control-plane.",
            "example": {
              "max_connections": 1000
            },
            "maxLength": 64,
            "additionalProperties": true
          },
          "restore_config": {
            "$ref": "#/components/schemas/RestoreConfigSpec"
          },
          "spock_version": {
            "type": "string",
            "description": "The major version of the Spock extension.",
            "example": "5",
            "pattern": "^\\d{1}$"
          }
        },
        "example": {
          "backup_config": {
            "repositories": [
              {
                "azure_account": "pgedge-backups",
                "azure_container": "pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1",
                "azure_endpoint": "blob.core.usgovcloudapi.net",
                "azure_key": "YXpLZXk=",
                "base_path": "/backups",
                "custom_options": {
                  "s3-kms-key-id": "1234abcd-12ab-34cd-56ef-1234567890ab",
                  "storage-upload-chunk-size": "5MiB"
                },
                "gcs_bucket": "pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1",
                "gcs_endpoint": "localhost",
                "gcs_key": "ZXhhbXBsZSBnY3Mga2V5Cg==",
                "id": "f6b84a99-5e91-4203-be1e-131fe82e5984",
                "retention_full": 2,
                "retention_full_type": "count",
                "s3_bucket": "pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1",
                "s3_endpoint": "s3.us-east-1.amazonaws.com",
                "s3_key": "AKIAIOSFODNN7EXAMPLE",
                "s3_key_secret": "wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY",
                "s3_region": "us-east-1",
                "type": "s3"
              }
            ],
            "schedules": [
              {
                "cron_expression": "0 6 * * ?",
                "id": "daily-full-backup",
                "type": "full"
              },
              {
                "cron_expression": "0 6 * * ?",
                "id": "daily-full-backup",
                "type": "full"
              },
              {
                "cron_expression": "0 6 * * ?",
                "id": "daily-full-backup",
                "type": "full"
              }
            ]
          },
          "cpus": "500m",
          "database_name": "northwind",
          "database_users": [
            {
              "attributes": [
                "LOGIN",
                "CREATEDB",
                "CREATEROLE"
              ],
              "db_owner": false,
              "password": "secret",
              "roles": [
                "pgedge_superuser"
              ],
              "username": "admin"
            },
            {
              "attributes": [
                "LOGIN",
                "CREATEDB",
                "CREATEROLE"
              ],
              "db_owner": false,
              "password": "secret",
              "roles": [
                "pgedge_superuser"
              ],
              "username": "admin"
            },
            {
              "attributes": [
                "LOGIN",
                "CREATEDB",
                "CREATEROLE"
              ],
              "db_owner": false,
              "password": "secret",
              "roles": [
                "pgedge_superuser"
              ],
              "username": "admin"
            }
          ],
          "memory": "500M",
          "nodes": [
            {
              "backup_config": {
                "repositories": [
                  {
                    "azure_account": "pgedge-backups",
                    "azure_container": "pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1",
                    "azure_endpoint": "blob.core.usgovcloudapi.net",
                    "azure_key": "YXpLZXk=",
                    "base_path": "/backups",
                    "custom_options": {
                      "s3-kms-key-id": "1234abcd-12ab-34cd-56ef-1234567890ab",
                      "storage-upload-chunk-size": "5MiB"
                    },
                    "gcs_bucket": "pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1",
                    "gcs_endpoint": "localhost",
                    "gcs_key": "ZXhhbXBsZSBnY3Mga2V5Cg==",
                    "id": "f6b84a99-5e91-4203-be1e-131fe82e5984",
                    "retention_full": 2,
                    "retention_full_type": "count",
                    "s3_bucket": "pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1",
                    "s3_endpoint": "s3.us-east-1.amazonaws.com",
                    "s3_key": "AKIAIOSFODNN7EXAMPLE",
                    "s3_key_secret": "wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY",
                    "s3_region": "us-east-1",
                    "type": "s3"
                  }
                ],
                "schedules": [
                  {
                    "cron_expression": "0 6 * * ?",
                    "id": "daily-full-backup",
                    "type": "full"
                  },
                  {
                    "cron_expression": "0 6 * * ?",
                    "id": "daily-full-backup",
                    "type": "full"
                  },
                  {
                    "cron_expression": "0 6 * * ?",
                    "id": "daily-full-backup",
                    "type": "full"
                  }
                ]
              },
              "cpus": "500m",
              "host_ids": [
                "de3b1388-1f0c-42f1-a86c-59ab72f255ec"
              ],
              "memory": "500M",
              "name": "n1",
              "orchestrator_opts": {
                "swarm": {
                  "extra_labels": {
                    "traefik.enable": "true",
                    "traefik.tcp.routers.mydb.rule": "HostSNI(`mydb.example.com`)"
                  },
                  "extra_networks": [
                    {
                      "aliases": [
                        "pg-db",
                        "db-alias"
                      ],
                      "driver_opts": {
                        "com.docker.network.endpoint.expose": "true"
                      },
                      "id": "traefik-public"
                    },
                    {
                      "aliases": [
                        "pg-db",
                        "db-alias"
                      ],
                      "driver_opts": {
                        "com.docker.network.endpoint.expose": "true"
                      },
                      "id": "traefik-public"
                    },
                    {
                      "aliases": [
                        "pg-db",
                        "db-alias"
                      ],
                      "driver_opts": {
                        "com.docker.network.endpoint.expose": "true"
                      },
                      "id": "traefik-public"
                    }
                  ],
                  "extra_volumes": [
                    {
                      "destination_path": "/backups/container",
                      "host_path": "/Users/user/backups/host"
                    },
                    {
                      "destination_path": "/backups/container",
                      "host_path": "/Users/user/backups/host"
                    },
                    {
                      "destination_path": "/backups/container",
                      "host_path": "/Users/user/backups/host"
                    }
                  ]
                }
              },
              "port": 5432,
              "postgres_version": "17.6",
              "postgresql_conf": {
                "max_connections": 1000
              },
              "restore_config": {
                "repository": {
                  "azure_account": "pgedge-backups",
                  "azure_container": "pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1",
                  "azure_endpoint": "blob.core.usgovcloudapi.net",
                  "azure_key": "YXpLZXk=",
                  "base_path": "/backups",
                  "custom_options": {
                    "s3-kms-key-id": "1234abcd-12ab-34cd-56ef-1234567890ab"
                  },
                  "gcs_bucket": "pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1",
                  "gcs_endpoint": "localhost",
                  "gcs_key": "ZXhhbXBsZSBnY3Mga2V5Cg==",
                  "id": "f6b84a99-5e91-4203-be1e-131fe82e5984",
                  "s3_bucket": "pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1",
                  "s3_endpoint": "s3.us-east-1.amazonaws.com",
                  "s3_key": "AKIAIOSFODNN7EXAMPLE",
                  "s3_key_secret": "wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY",
                  "s3_region": "us-east-1",
                  "type": "s3"
                },
                "restore_options": {
                  "set": "20250505-153628F",
                  "target": "123456",
                  "type": "xid"
                },
                "source_database_id": "02f1a7db-fca8-4521-b57a-2a375c1ced51",
                "source_database_name": "northwind",
                "source_node_name": "n1"
              },
              "source_node": "n1"
            },
            {
              "backup_config": {
                "repositories": [
                  {
                    "azure_account": "pgedge-backups",
                    "azure_container": "pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1",
                    "azure_endpoint": "blob.core.usgovcloudapi.net",
                    "azure_key": "YXpLZXk=",
                    "base_path": "/backups",
                    "custom_options": {
                      "s3-kms-key-id": "1234abcd-12ab-34cd-56ef-1234567890ab",
                      "storage-upload-chunk-size": "5MiB"
                    },
                    "gcs_bucket": "pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1",
                    "gcs_endpoint": "localhost",
                    "gcs_key": "ZXhhbXBsZSBnY3Mga2V5Cg==",
                    "id": "f6b84a99-5e91-4203-be1e-131fe82e5984",
                    "retention_full": 2,
                    "retention_full_type": "count",
                    "s3_bucket": "pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1",
                    "s3_endpoint": "s3.us-east-1.amazonaws.com",
                    "s3_key": "AKIAIOSFODNN7EXAMPLE",
                    "s3_key_secret": "wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY",
                    "s3_region": "us-east-1",
                    "type": "s3"
                  }
                ],
                "schedules": [
                  {
                    "cron_expression": "0 6 * * ?",
                    "id": "daily-full-backup",
                    "type": "full"
                  },
                  {
                    "cron_expression": "0 6 * * ?",
                    "id": "daily-full-backup",
                    "type": "full"
                  },
                  {
                    "cron_expression": "0 6 * * ?",
                    "id": "daily-full-backup",
                    "type": "full"
                  }
                ]
              },
              "cpus": "500m",
              "host_ids": [
                "de3b1388-1f0c-42f1-a86c-59ab72f255ec"
              ],
              "memory": "500M",
              "name": "n1",
              "orchestrator_opts": {
                "swarm": {
                  "extra_labels": {
                    "traefik.enable": "true",
                    "traefik.tcp.routers.mydb.rule": "HostSNI(`mydb.example.com`)"
                  },
                  "extra_networks": [
                    {
                      "aliases": [
                        "pg-db",
                        "db-alias"
                      ],
                      "driver_opts": {
                        "com.docker.network.endpoint.expose": "true"
                      },
                      "id": "traefik-public"
                    },
                    {
                      "aliases": [
                        "pg-db",
                        "db-alias"
                      ],
                      "driver_opts": {
                        "com.docker.network.endpoint.expose": "true"
                      },
                      "id": "traefik-public"
                    },
                    {
                      "aliases": [
                        "pg-db",
                        "db-alias"
                      ],
                      "driver_opts": {
                        "com.docker.network.endpoint.expose": "true"
                      },
                      "id": "traefik-public"
                    }
                  ],
                  "extra_volumes": [
                    {
                      "destination_path": "/backups/container",
                      "host_path": "/Users/user/backups/host"
                    },
                    {
                      "destination_path": "/backups/container",
                      "host_path": "/Users/user/backups/host"
                    },
                    {
                      "destination_path": "/backups/container",
                      "host_path": "/Users/user/backups/host"
                    }
                  ]
                }
              },
              "port": 5432,
              "postgres_version": "17.6",
              "postgresql_conf": {
                "max_connections": 1000
              },
              "restore_config": {
                "repository": {
                  "azure_account": "pgedge-backups",
                  "azure_container": "pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1",
                  "azure_endpoint": "blob.core.usgovcloudapi.net",
                  "azure_key": "YXpLZXk=",
                  "base_path": "/backups",
                  "custom_options": {
                    "s3-kms-key-id": "1234abcd-12ab-34cd-56ef-1234567890ab"
                  },
                  "gcs_bucket": "pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1",
                  "gcs_endpoint": "localhost",
                  "gcs_key": "ZXhhbXBsZSBnY3Mga2V5Cg==",
                  "id": "f6b84a99-5e91-4203-be1e-131fe82e5984",
                  "s3_bucket": "pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1",
                  "s3_endpoint": "s3.us-east-1.amazonaws.com",
                  "s3_key": "AKIAIOSFODNN7EXAMPLE",
                  "s3_key_secret": "wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY",
                  "s3_region": "us-east-1",
                  "type": "s3"
                },
                "restore_options": {
                  "set": "20250505-153628F",
                  "target": "123456",
                  "type": "xid"
                },
                "source_database_id": "02f1a7db-fca8-4521-b57a-2a375c1ced51",
                "source_database_name": "northwind",
                "source_node_name": "n1"
              },
              "source_node": "n1"
            },
            {
              "backup_config": {
                "repositories": [
                  {
                    "azure_account": "pgedge-backups",
                    "azure_container": "pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1",
                    "azure_endpoint": "blob.core.usgovcloudapi.net",
                    "azure_key": "YXpLZXk=",
                    "base_path": "/backups",
                    "custom_options": {
                      "s3-kms-key-id": "1234abcd-12ab-34cd-56ef-1234567890ab",
                      "storage-upload-chunk-size": "5MiB"
                    },
                    "gcs_bucket": "pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1",
                    "gcs_endpoint": "localhost",
                    "gcs_key": "ZXhhbXBsZSBnY3Mga2V5Cg==",
                    "id": "f6b84a99-5e91-4203-be1e-131fe82e5984",
                    "retention_full": 2,
                    "retention_full_type": "count",
                    "s3_bucket": "pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1",
                    "s3_endpoint": "s3.us-east-1.amazonaws.com",
                    "s3_key": "AKIAIOSFODNN7EXAMPLE",
                    "s3_key_secret": "wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY",
                    "s3_region": "us-east-1",
                    "type": "s3"
                  }
                ],
                "schedules": [
                  {
                    "cron_expression": "0 6 * * ?",
                    "id": "daily-full-backup",
                    "type": "full"
                  },
                  {
                    "cron_expression": "0 6 * * ?",
                    "id": "daily-full-backup",
                    "type": "full"
                  },
                  {
                    "cron_expression": "0 6 * * ?",
                    "id": "daily-full-backup",
                    "type": "full"
                  }
                ]
              },
              "cpus": "500m",
              "host_ids": [
                "de3b1388-1f0c-42f1-a86c-59ab72f255ec"
              ],
              "memory": "500M",
              "name": "n1",
              "orchestrator_opts": {
                "swarm": {
                  "extra_labels": {
                    "traefik.enable": "true",
                    "traefik.tcp.routers.mydb.rule": "HostSNI(`mydb.example.com`)"
                  },
                  "extra_networks": [
                    {
                      "aliases": [
                        "pg-db",
                        "db-alias"
                      ],
                      "driver_opts": {
                        "com.docker.network.endpoint.expose": "true"
                      },
                      "id": "traefik-public"
                    },
                    {
                      "aliases": [
                        "pg-db",
                        "db-alias"
                      ],
                      "driver_opts": {
                        "com.docker.network.endpoint.expose": "true"
                      },
                      "id": "traefik-public"
                    },
                    {
                      "aliases": [
                        "pg-db",
                        "db-alias"
                      ],
                      "driver_opts": {
                        "com.docker.network.endpoint.expose": "true"
                      },
                      "id": "traefik-public"
                    }
                  ],
                  "extra_volumes": [
                    {
                      "destination_path": "/backups/container",
                      "host_path": "/Users/user/backups/host"
                    },
                    {
                      "destination_path": "/backups/container",
                      "host_path": "/Users/user/backups/host"
                    },
                    {
                      "destination_path": "/backups/container",
                      "host_path": "/Users/user/backups/host"
                    }
                  ]
                }
              },
              "port": 5432,
              "postgres_version": "17.6",
              "postgresql_conf": {
                "max_connections": 1000
              },
              "restore_config": {
                "repository": {
                  "azure_account": "pgedge-backups",
                  "azure_container": "pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1",
                  "azure_endpoint": "blob.core.usgovcloudapi.net",
                  "azure_key": "YXpLZXk=",
                  "base_path": "/backups",
                  "custom_options": {
                    "s3-kms-key-id": "1234abcd-12ab-34cd-56ef-1234567890ab"
                  },
                  "gcs_bucket": "pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1",
                  "gcs_endpoint": "localhost",
                  "gcs_key": "ZXhhbXBsZSBnY3Mga2V5Cg==",
                  "id": "f6b84a99-5e91-4203-be1e-131fe82e5984",
                  "s3_bucket": "pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1",
                  "s3_endpoint": "s3.us-east-1.amazonaws.com",
                  "s3_key": "AKIAIOSFODNN7EXAMPLE",
                  "s3_key_secret": "wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY",
                  "s3_region": "us-east-1",
                  "type": "s3"
                },
                "restore_options": {
                  "set": "20250505-153628F",
                  "target": "123456",
                  "type": "xid"
                },
                "source_database_id": "02f1a7db-fca8-4521-b57a-2a375c1ced51",
                "source_database_name": "northwind",
                "source_node_name": "n1"
              },
              "source_node": "n1"
            }
          ],
          "orchestrator_opts": {
            "swarm": {
              "extra_labels": {
                "traefik.enable": "true",
                "traefik.tcp.routers.mydb.rule": "HostSNI(`mydb.example.com`)"
              },
              "extra_networks": [
                {
                  "aliases": [
                    "pg-db",
                    "db-alias"
                  ],
                  "driver_opts": {
                    "com.docker.network.endpoint.expose": "true"
                  },
                  "id": "traefik-public"
                },
                {
                  "aliases": [
                    "pg-db",
                    "db-alias"
                  ],
                  "driver_opts": {
                    "com.docker.network.endpoint.expose": "true"
                  },
                  "id": "traefik-public"
                },
                {
                  "aliases": [
                    "pg-db",
                    "db-alias"
                  ],
                  "driver_opts": {
                    "com.docker.network.endpoint.expose": "true"
                  },
                  "id": "traefik-public"
                }
              ],
              "extra_volumes": [
                {
                  "destination_path": "/backups/container",
                  "host_path": "/Users/user/backups/host"
                },
                {
                  "destination_path": "/backups/container",
                  "host_path": "/Users/user/backups/host"
                },
                {
                  "destination_path": "/backups/container",
                  "host_path": "/Users/user/backups/host"
                }
              ]
            }
          },
          "port": 5432,
          "postgres_version": "17.6",
          "postgresql_conf": {
            "max_connections": 1000
          },
          "restore_config": {
            "repository": {
              "azure_account": "pgedge-backups",
              "azure_container": "pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1",
              "azure_endpoint": "blob.core.usgovcloudapi.net",
              "azure_key": "YXpLZXk=",
              "base_path": "/backups",
              "custom_options": {
                "s3-kms-key-id": "1234abcd-12ab-34cd-56ef-1234567890ab"
              },
              "gcs_bucket": "pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1",
              "gcs_endpoint": "localhost",
              "gcs_key": "ZXhhbXBsZSBnY3Mga2V5Cg==",
              "id": "f6b84a99-5e91-4203-be1e-131fe82e5984",
              "s3_bucket": "pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1",
              "s3_endpoint": "s3.us-east-1.amazonaws.com",
              "s3_key": "AKIAIOSFODNN7EXAMPLE",
              "s3_key_secret": "wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY",
              "s3_region": "us-east-1",
              "type": "s3"
            },
            "restore_options": {
              "set": "20250505-153628F",
              "target": "123456",
              "type": "xid"
            },
            "source_database_id": "02f1a7db-fca8-4521-b57a-2a375c1ced51",
            "source_database_name": "northwind",
            "source_node_name": "n1"
          },
          "spock_version": "5"
        },
        "required": [
          "database_name",
          "nodes"
        ]
      },
      "DatabaseUserSpec": {
        "type": "object",
        "properties": {
          "attributes": {
            "type": "array",
            "items": {
              "type": "string",
              "example": "Et eius reiciendis accusamus veritatis quo recusandae."
            },
            "description": "The attributes to assign to this database user.",
            "example": [
              "LOGIN",
              "CREATEDB",
              "CREATEROLE"
            ],
            "maxItems": 16
          },
          "db_owner": {
            "type": "boolean",
            "description": "If true, this user will be granted database ownership.",
            "example": true
          },
          "password": {
            "type": "string",
            "description": "The password for this database user. This field will be excluded from the response of all endpoints. It can also be omitted from update requests to keep the current value.",
            "example": "secret",
            "minLength": 1
          },
          "roles": {
            "type": "array",
            "items": {
              "type": "string",
              "example": "Fuga molestiae."
            },
            "description": "The roles to assign to this database user.",
            "example": [
              "pgedge_superuser"
            ],
            "maxItems": 16
          },
          "username": {
            "type": "string",
            "description": "The username for this database user.",
            "example": "admin",
            "minLength": 1
          }
        },
        "example": {
          "attributes": [
            "LOGIN",
            "CREATEDB",
            "CREATEROLE"
          ],
          "db_owner": false,
          "password": "secret",
          "roles": [
            "pgedge_superuser"
          ],
          "username": "admin"
        },
        "required": [
          "username"
        ]
      },
      "DeleteDatabaseResponse": {
        "type": "object",
        "properties": {
          "task": {
            "$ref": "#/components/schemas/Task"
          }
        },
        "example": {
          "task": {
            "created_at": "2025-06-18T16:48:59Z",
            "database_id": "storefront",
            "status": "pending",
            "task_id": "019783f1-9f17-77e7-9a08-fa6ab39e3b29",
            "type": "delete"
          }
        },
        "required": [
          "task"
        ]
      },
      "EtcdClusterMember": {
        "type": "object",
        "properties": {
          "client_urls": {
            "type": "array",
            "items": {
              "type": "string",
              "example": "Atque facilis non modi explicabo illum."
            },
            "description": "The Etcd client endpoint for this cluster member.",
            "example": [
              "http://192.168.1.1:2379"
            ]
          },
          "name": {
            "type": "string",
            "description": "The name of the Etcd cluster member.",
            "example": "host-1"
          },
          "peer_urls": {
            "type": "array",
            "items": {
              "type": "string",
              "example": "Neque eos rerum quia."
            },
            "description": "The Etcd peer endpoint for this cluster member.",
            "example": [
              "http://192.168.1.1:2380"
            ]
          }
        },
        "example": {
          "client_urls": [
            "http://192.168.1.1:2379"
          ],
          "name": "host-1",
          "peer_urls": [
            "http://192.168.1.1:2380"
          ]
        },
        "required": [
          "name",
          "peer_urls",
          "client_urls"
        ]
      },
      "ExtraNetworkSpec": {
        "type": "object",
        "properties": {
          "aliases": {
            "type": "array",
            "items": {
              "type": "string",
              "example": "Possimus magni quaerat qui quam id."
            },
            "description": "Optional network-scoped aliases for the container.",
            "example": [
              "pg-db",
              "db-alias"
            ],
            "maxItems": 8
          },
          "driver_opts": {
            "type": "object",
            "description": "Optional driver options for the network connection.",
            "example": {
              "com.docker.network.endpoint.expose": "true"
            },
            "additionalProperties": {
              "type": "string",
              "example": "Velit et labore in dolor quisquam placeat."
            }
          },
          "id": {
            "type": "string",
            "description": "The name or ID of the network to connect to.",
            "example": "traefik-public"
          }
        },
        "description": "Describes an additional Docker network to attach the container to.",
        "example": {
          "aliases": [
            "pg-db",
            "db-alias"
          ],
          "driver_opts": {
            "com.docker.network.endpoint.expose": "true"
          },
          "id": "traefik-public"
        },
        "required": [
          "id"
        ]
      },
      "ExtraVolumesSpec": {
        "type": "object",
        "properties": {
          "destination_path": {
            "type": "string",
            "description": "The path inside the container where the volume will be mounted.",
            "example": "/backups/container",
            "maxLength": 256
          },
          "host_path": {
            "type": "string",
            "description": "The host path for the volume.",
            "example": "/Users/user/backups/host",
            "maxLength": 256
          }
        },
        "description": "Extra volumes to mount from the host to the database container.",
        "example": {
          "destination_path": "/backups/container",
          "host_path": "/Users/user/backups/host"
        },
        "required": [
          "host_path",
          "destination_path"
        ]
      },
      "FailoverDatabaseNodeRequest": {
        "type": "object",
        "properties": {
          "candidate_instance_id": {
            "type": "string",
            "description": "Optional instance_id of the replica to promote. If omitted, a candidate will be selected.",
            "example": "68f50878-44d2-4524-a823-e31bd478706d-n1-689qacsi"
          },
          "database_id": {
            "type": "string",
            "description": "A user-specified identifier. Must be 1-63 characters, contain only lower-cased letters and hyphens, start and end with a letter or number, and not contain consecutive hyphens.",
            "example": "76f9b8c0-4958-11f0-a489-3bb29577c696",
            "minLength": 1,
            "maxLength": 63
          },
          "node_name": {
            "type": "string",
            "description": "Name of the node to initiate the failover from.",
            "example": "n1",
            "pattern": "n[0-9]+"
          },
          "skip_validation": {
            "type": "boolean",
            "description": "If true, skip the health validations that prevent running failover on a healthy cluster.",
            "default": false,
            "example": false
          }
        },
        "example": {
          "candidate_instance_id": "68f50878-44d2-4524-a823-e31bd478706d-n1-689qacsi",
          "database_id": "my-app",
          "node_name": "n1",
          "skip_validation": true
        },
        "required": [
          "database_id",
          "node_name"
        ]
      },
      "FailoverDatabaseNodeRequest2": {
        "type": "object",
        "properties": {
          "candidate_instance_id": {
            "type": "string",
            "description": "Optional instance_id of the replica to promote. If omitted, a candidate will be selected.",
            "example": "68f50878-44d2-4524-a823-e31bd478706d-n1-689qacsi"
          },
          "skip_validation": {
            "type": "boolean",
            "description": "If true, skip the health validations that prevent running failover on a healthy cluster.",
            "default": false,
            "example": false
          }
        },
        "example": {
          "candidate_instance_id": "68f50878-44d2-4524-a823-e31bd478706d-n1-689qacsi",
          "skip_validation": true
        }
      },
      "FailoverDatabaseNodeResponse": {
        "type": "object",
        "properties": {
          "task": {
            "$ref": "#/components/schemas/Task"
          }
        },
        "example": {
          "task": {
            "created_at": "2025-06-18T17:54:28Z",
            "database_id": "storefront",
            "status": "pending",
            "task_id": "0197842d-9082-7496-b787-77bd2e11809f",
            "type": "failover"
          }
        },
        "required": [
          "task"
        ]
      },
      "Host": {
        "type": "object",
        "properties": {
          "cohort": {
            "$ref": "#/components/schemas/HostCohort"
          },
          "cpus": {
            "type": "integer",
            "description": "The number of CPUs on this host.",
            "example": 4,
            "format": "int64"
          },
          "data_dir": {
            "type": "string",
            "description": "The data directory for the host.",
            "example": "/data"
          },
          "default_pgedge_version": {
            "$ref": "#/components/schemas/PgEdgeVersion"
          },
          "hostname": {
            "type": "string",
            "description": "The hostname of this host.",
            "example": "i-0123456789abcdef.ec2.internal"
          },
          "id": {
            "type": "string",
            "description": "A user-specified identifier. Must be 1-63 characters, contain only lower-cased letters and hyphens, start and end with a letter or number, and not contain consecutive hyphens.",
            "example": "76f9b8c0-4958-11f0-a489-3bb29577c696",
            "minLength": 1,
            "maxLength": 63
          },
          "ipv4_address": {
            "type": "string",
            "description": "The IPv4 address of this host.",
            "example": "10.24.34.2",
            "format": "ipv4"
          },
          "memory": {
            "type": "string",
            "description": "The amount of memory available on this host.",
            "example": "16GiB"
          },
          "orchestrator": {
            "type": "string",
            "description": "The orchestrator used by this host.",
            "example": "swarm"
          },
          "status": {
            "$ref": "#/components/schemas/HostStatus"
          },
          "supported_pgedge_versions": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/PgEdgeVersion"
            },
            "description": "The PgEdge versions supported by this host.",
            "example": [
              {
                "postgres_version": "17.6",
                "spock_version": "5"
              },
              {
                "postgres_version": "17.6",
                "spock_version": "5"
              },
              {
                "postgres_version": "17.6",
                "spock_version": "5"
              }
            ]
          }
        },
        "example": {
          "cohort": {
            "control_available": true,
            "member_id": "lah4bsznw6kc0hp7biylmmmll",
            "type": "swarm"
          },
          "cpus": 4,
          "data_dir": "/data",
          "default_pgedge_version": {
            "postgres_version": "17.6",
            "spock_version": "5"
          },
          "hostname": "i-0123456789abcdef.ec2.internal",
          "id": "de3b1388-1f0c-42f1-a86c-59ab72f255ec",
          "ipv4_address": "10.24.34.2",
          "memory": "16GiB",
          "orchestrator": "swarm",
          "status": {
            "components": {
              "Enim et voluptatum ex ea dolore.": {
                "details": {
                  "alarms": [
                    "3: NOSPACE"
                  ]
                },
                "error": "failed to connect to etcd",
                "healthy": false
              },
              "Tenetur nostrum repellendus sint qui.": {
                "details": {
                  "alarms": [
                    "3: NOSPACE"
                  ]
                },
                "error": "failed to connect to etcd",
                "healthy": false
              }
            },
            "state": "available",
            "updated_at": "2021-07-01T12:34:56Z"
          },
          "supported_pgedge_versions": [
            {
              "postgres_version": "17.6",
              "spock_version": "5"
            },
            {
              "postgres_version": "17.6",
              "spock_version": "5"
            },
            {
              "postgres_version": "17.6",
              "spock_version": "5"
            }
          ]
        },
        "required": [
          "id",
          "orchestrator",
          "data_dir",
          "hostname",
          "ipv4_address",
          "status"
        ]
      },
      "HostCohort": {
        "type": "object",
        "properties": {
          "control_available": {
            "type": "boolean",
            "description": "Indicates if the host is a control node in the cohort.",
            "example": true
          },
          "member_id": {
            "type": "string",
            "description": "The member ID of the host within the cohort.",
            "example": "lah4bsznw6kc0hp7biylmmmll"
          },
          "type": {
            "type": "string",
            "description": "The type of cohort that the host belongs to.",
            "example": "swarm"
          }
        },
        "example": {
          "control_available": true,
          "member_id": "lah4bsznw6kc0hp7biylmmmll",
          "type": "swarm"
        },
        "required": [
          "type",
          "member_id",
          "control_available"
        ]
      },
      "HostStatus": {
        "type": "object",
        "properties": {
          "components": {
            "type": "object",
            "description": "The status of each component of the host.",
            "example": {
              "Dolorem itaque aut aut cupiditate sunt quibusdam.": {
                "details": {
                  "alarms": [
                    "3: NOSPACE"
                  ]
                },
                "error": "failed to connect to etcd",
                "healthy": false
              },
              "Ipsa nihil facere ad.": {
                "details": {
                  "alarms": [
                    "3: NOSPACE"
                  ]
                },
                "error": "failed to connect to etcd",
                "healthy": false
              }
            },
            "additionalProperties": {
              "$ref": "#/components/schemas/ComponentStatus"
            }
          },
          "state": {
            "type": "string",
            "example": "available",
            "enum": [
              "healthy",
              "unreachable",
              "degraded",
              "unknown"
            ]
          },
          "updated_at": {
            "type": "string",
            "description": "The last time the host status was updated.",
            "example": "2021-07-01T12:34:56Z",
            "format": "date-time"
          }
        },
        "example": {
          "components": {
            "Quisquam dignissimos veritatis et omnis.": {
              "details": {
                "alarms": [
                  "3: NOSPACE"
                ]
              },
              "error": "failed to connect to etcd",
              "healthy": false
            }
          },
          "state": "available",
          "updated_at": "2021-07-01T12:34:56Z"
        },
        "required": [
          "state",
          "updated_at",
          "components"
        ]
      },
      "InitClusterRequest": {
        "type": "object",
        "properties": {
          "cluster_id": {
            "type": "string",
            "description": "A user-specified identifier. Must be 1-63 characters, contain only lower-cased letters and hyphens, start and end with a letter or number, and not contain consecutive hyphens.",
            "example": "76f9b8c0-4958-11f0-a489-3bb29577c696",
            "minLength": 1,
            "maxLength": 63
          }
        },
        "description": "Request to initialize a cluster",
        "example": {
          "cluster_id": "76f9b8c0-4958-11f0-a489-3bb29577c696"
        }
      },
      "Instance": {
        "type": "object",
        "properties": {
          "connection_info": {
            "$ref": "#/components/schemas/InstanceConnectionInfo"
          },
          "created_at": {
            "type": "string",
            "description": "The time that the instance was created.",
            "example": "1971-02-20T15:20:44Z",
            "format": "date-time"
          },
          "error": {
            "type": "string",
            "description": "An error message if the instance is in an error state.",
            "example": "failed to get patroni status: connection refused"
          },
          "host_id": {
            "type": "string",
            "description": "The ID of the host this instance is running on.",
            "example": "de3b1388-1f0c-42f1-a86c-59ab72f255ec"
          },
          "id": {
            "type": "string",
            "description": "Unique identifier for the instance.",
            "example": "a67cbb36-c3c3-49c9-8aac-f4a0438a883d"
          },
          "node_name": {
            "type": "string",
            "description": "The Spock node name for this instance.",
            "example": "n1"
          },
          "postgres": {
            "$ref": "#/components/schemas/InstancePostgresStatus"
          },
          "spock": {
            "$ref": "#/components/schemas/InstanceSpockStatus"
          },
          "state": {
            "type": "string",
            "example": "available",
            "enum": [
              "creating",
              "modifying",
              "backing_up",
              "available",
              "degraded",
              "failed",
              "stopped",
              "unknown"
            ]
          },
          "status_updated_at": {
            "type": "string",
            "description": "The time that the instance status information was last updated.",
            "example": "1995-04-11T11:49:24Z",
            "format": "date-time"
          },
          "updated_at": {
            "type": "string",
            "description": "The time that the instance was last modified.",
            "example": "1983-10-23T08:18:23Z",
            "format": "date-time"
          }
        },
        "description": "An instance of pgEdge Postgres running on a host.",
        "example": {
          "connection_info": {
            "hostname": "i-0123456789abcdef.ec2.internal",
            "ipv4_address": "10.24.34.2",
            "port": 5432
          },
          "created_at": "2014-04-20T04:34:11Z",
          "error": "failed to get patroni status: connection refused",
          "host_id": "de3b1388-1f0c-42f1-a86c-59ab72f255ec",
          "id": "a67cbb36-c3c3-49c9-8aac-f4a0438a883d",
          "node_name": "n1",
          "postgres": {
            "patroni_paused": true,
            "patroni_state": "unknown",
            "pending_restart": false,
            "role": "primary",
            "version": "17.5"
          },
          "spock": {
            "read_only": "off",
            "subscriptions": [
              {
                "name": "sub_n1n2",
                "provider_node": "n2",
                "status": "down"
              },
              {
                "name": "sub_n1n2",
                "provider_node": "n2",
                "status": "down"
              }
            ],
            "version": "4.10.0"
          },
          "state": "degraded",
          "status_updated_at": "2011-10-12T20:33:23Z",
          "updated_at": "1994-09-09T06:25:01Z"
        },
        "required": [
          "id",
          "host_id",
          "node_name",
          "created_at",
          "updated_at",
          "state"
        ]
      },
      "InstanceCollection": {
        "type": "array",
        "items": {
          "$ref": "#/components/schemas/Instance"
        },
        "example": [
          {
            "connection_info": {
              "hostname": "i-0123456789abcdef.ec2.internal",
              "ipv4_address": "10.24.34.2",
              "port": 5432
            },
            "created_at": "1987-03-24T21:22:02Z",
            "error": "failed to get patroni status: connection refused",
            "host_id": "de3b1388-1f0c-42f1-a86c-59ab72f255ec",
            "id": "a67cbb36-c3c3-49c9-8aac-f4a0438a883d",
            "node_name": "n1",
            "postgres": {
              "patroni_paused": true,
              "patroni_state": "unknown",
              "pending_restart": false,
              "role": "primary",
              "version": "17.5"
            },
            "spock": {
              "read_only": "off",
              "subscriptions": [
                {
                  "name": "sub_n1n2",
                  "provider_node": "n2",
                  "status": "down"
                },
                {
                  "name": "sub_n1n2",
                  "provider_node": "n2",
                  "status": "down"
                }
              ],
              "version": "4.10.0"
            },
            "state": "creating",
            "status_updated_at": "1974-12-13T04:15:04Z",
            "updated_at": "2006-10-18T16:07:16Z"
          },
          {
            "connection_info": {
              "hostname": "i-0123456789abcdef.ec2.internal",
              "ipv4_address": "10.24.34.2",
              "port": 5432
            },
            "created_at": "1987-03-24T21:22:02Z",
            "error": "failed to get patroni status: connection refused",
            "host_id": "de3b1388-1f0c-42f1-a86c-59ab72f255ec",
            "id": "a67cbb36-c3c3-49c9-8aac-f4a0438a883d",
            "node_name": "n1",
            "postgres": {
              "patroni_paused": true,
              "patroni_state": "unknown",
              "pending_restart": false,
              "role": "primary",
              "version": "17.5"
            },
            "spock": {
              "read_only": "off",
              "subscriptions": [
                {
                  "name": "sub_n1n2",
                  "provider_node": "n2",
                  "status": "down"
                },
                {
                  "name": "sub_n1n2",
                  "provider_node": "n2",
                  "status": "down"
                }
              ],
              "version": "4.10.0"
            },
            "state": "creating",
            "status_updated_at": "1974-12-13T04:15:04Z",
            "updated_at": "2006-10-18T16:07:16Z"
          },
          {
            "connection_info": {
              "hostname": "i-0123456789abcdef.ec2.internal",
              "ipv4_address": "10.24.34.2",
              "port": 5432
            },
            "created_at": "1987-03-24T21:22:02Z",
            "error": "failed to get patroni status: connection refused",
            "host_id": "de3b1388-1f0c-42f1-a86c-59ab72f255ec",
            "id": "a67cbb36-c3c3-49c9-8aac-f4a0438a883d",
            "node_name": "n1",
            "postgres": {
              "patroni_paused": true,
              "patroni_state": "unknown",
              "pending_restart": false,
              "role": "primary",
              "version": "17.5"
            },
            "spock": {
              "read_only": "off",
              "subscriptions": [
                {
                  "name": "sub_n1n2",
                  "provider_node": "n2",
                  "status": "down"
                },
                {
                  "name": "sub_n1n2",
                  "provider_node": "n2",
                  "status": "down"
                }
              ],
              "version": "4.10.0"
            },
            "state": "creating",
            "status_updated_at": "1974-12-13T04:15:04Z",
            "updated_at": "2006-10-18T16:07:16Z"
          }
        ]
      },
      "InstanceConnectionInfo": {
        "type": "object",
        "properties": {
          "hostname": {
            "type": "string",
            "description": "The hostname of the host that's running this instance.",
            "example": "i-0123456789abcdef.ec2.internal"
          },
          "ipv4_address": {
            "type": "string",
            "description": "The IPv4 address of the host that's running this instance.",
            "example": "10.24.34.2",
            "format": "ipv4"
          },
          "port": {
            "type": "integer",
            "description": "The host port that Postgres is listening on for this instance.",
            "example": 5432,
            "format": "int64"
          }
        },
        "description": "Connection information for a pgEdge instance.",
        "example": {
          "hostname": "i-0123456789abcdef.ec2.internal",
          "ipv4_address": "10.24.34.2",
          "port": 5432
        }
      },
      "InstancePostgresStatus": {
        "type": "object",
        "properties": {
          "patroni_paused": {
            "type": "boolean",
            "description": "True if Patroni is paused for this instance.",
            "example": true
          },
          "patroni_state": {
            "type": "string",
            "example": "unknown"
          },
          "pending_restart": {
            "type": "boolean",
            "description": "True if this instance has a pending restart from a configuration change.",
            "example": true
          },
          "role": {
            "type": "string",
            "example": "primary"
          },
          "version": {
            "type": "string",
            "description": "The version of Postgres for this instance.",
            "example": "17.5"
          }
        },
        "description": "Postgres status information for a pgEdge instance.",
        "example": {
          "patroni_paused": true,
          "patroni_state": "unknown",
          "pending_restart": false,
          "role": "primary",
          "version": "17.5"
        }
      },
      "InstanceResponseBody": {
        "type": "object",
        "properties": {
          "connection_info": {
            "$ref": "#/components/schemas/InstanceConnectionInfo"
          },
          "created_at": {
            "type": "string",
            "description": "The time that the instance was created.",
            "example": "1980-04-03T14:33:01Z",
            "format": "date-time"
          },
          "error": {
            "type": "string",
            "description": "An error message if the instance is in an error state.",
            "example": "failed to get patroni status: connection refused"
          },
          "host_id": {
            "type": "string",
            "description": "The ID of the host this instance is running on.",
            "example": "de3b1388-1f0c-42f1-a86c-59ab72f255ec"
          },
          "id": {
            "type": "string",
            "description": "Unique identifier for the instance.",
            "example": "a67cbb36-c3c3-49c9-8aac-f4a0438a883d"
          },
          "node_name": {
            "type": "string",
            "description": "The Spock node name for this instance.",
            "example": "n1"
          },
          "postgres": {
            "$ref": "#/components/schemas/InstancePostgresStatus"
          },
          "spock": {
            "$ref": "#/components/schemas/InstanceSpockStatus"
          },
          "state": {
            "type": "string",
            "example": "available",
            "enum": [
              "creating",
              "modifying",
              "backing_up",
              "available",
              "degraded",
              "failed",
              "stopped",
              "unknown"
            ]
          },
          "status_updated_at": {
            "type": "string",
            "description": "The time that the instance status information was last updated.",
            "example": "1998-03-14T08:14:25Z",
            "format": "date-time"
          },
          "updated_at": {
            "type": "string",
            "description": "The time that the instance was last modified.",
            "example": "1978-12-17T01:14:06Z",
            "format": "date-time"
          }
        },
        "description": "An instance of pgEdge Postgres running on a host. (default view)",
        "example": {
          "connection_info": {
            "hostname": "i-0123456789abcdef.ec2.internal",
            "ipv4_address": "10.24.34.2",
            "port": 5432
          },
          "created_at": "2007-02-10T23:14:54Z",
          "error": "failed to get patroni status: connection refused",
          "host_id": "de3b1388-1f0c-42f1-a86c-59ab72f255ec",
          "id": "a67cbb36-c3c3-49c9-8aac-f4a0438a883d",
          "node_name": "n1",
          "postgres": {
            "patroni_paused": true,
            "patroni_state": "unknown",
            "pending_restart": false,
            "role": "primary",
            "version": "17.5"
          },
          "spock": {
            "read_only": "off",
            "subscriptions": [
              {
                "name": "sub_n1n2",
                "provider_node": "n2",
                "status": "down"
              },
              {
                "name": "sub_n1n2",
                "provider_node": "n2",
                "status": "down"
              },
              {
                "name": "sub_n1n2",
                "provider_node": "n2",
                "status": "down"
              }
            ],
            "version": "4.10.0"
          },
          "state": "modifying",
          "status_updated_at": "2005-03-22T06:08:17Z",
          "updated_at": "1978-09-03T08:22:47Z"
        },
        "required": [
          "id",
          "host_id",
          "node_name",
          "created_at",
          "updated_at",
          "state"
        ]
      },
      "InstanceResponseBodyCollection": {
        "type": "array",
        "items": {
          "$ref": "#/components/schemas/InstanceResponseBody"
        },
        "description": "InstanceCollectionResponseBody is the result type for an array of InstanceResponseBody (default view)",
        "example": [
          {
            "connection_info": {
              "hostname": "i-0123456789abcdef.ec2.internal",
              "ipv4_address": "10.24.34.2",
              "port": 5432
            },
            "created_at": "1972-02-12T09:45:07Z",
            "error": "failed to get patroni status: connection refused",
            "host_id": "de3b1388-1f0c-42f1-a86c-59ab72f255ec",
            "id": "a67cbb36-c3c3-49c9-8aac-f4a0438a883d",
            "node_name": "n1",
            "postgres": {
              "patroni_paused": true,
              "patroni_state": "unknown",
              "pending_restart": false,
              "role": "primary",
              "version": "17.5"
            },
            "spock": {
              "read_only": "off",
              "subscriptions": [
                {
                  "name": "sub_n1n2",
                  "provider_node": "n2",
                  "status": "down"
                },
                {
                  "name": "sub_n1n2",
                  "provider_node": "n2",
                  "status": "down"
                },
                {
                  "name": "sub_n1n2",
                  "provider_node": "n2",
                  "status": "down"
                }
              ],
              "version": "4.10.0"
            },
            "state": "stopped",
            "status_updated_at": "1989-09-01T22:57:29Z",
            "updated_at": "1978-08-28T00:21:42Z"
          },
          {
            "connection_info": {
              "hostname": "i-0123456789abcdef.ec2.internal",
              "ipv4_address": "10.24.34.2",
              "port": 5432
            },
            "created_at": "1972-02-12T09:45:07Z",
            "error": "failed to get patroni status: connection refused",
            "host_id": "de3b1388-1f0c-42f1-a86c-59ab72f255ec",
            "id": "a67cbb36-c3c3-49c9-8aac-f4a0438a883d",
            "node_name": "n1",
            "postgres": {
              "patroni_paused": true,
              "patroni_state": "unknown",
              "pending_restart": false,
              "role": "primary",
              "version": "17.5"
            },
            "spock": {
              "read_only": "off",
              "subscriptions": [
                {
                  "name": "sub_n1n2",
                  "provider_node": "n2",
                  "status": "down"
                },
                {
                  "name": "sub_n1n2",
                  "provider_node": "n2",
                  "status": "down"
                },
                {
                  "name": "sub_n1n2",
                  "provider_node": "n2",
                  "status": "down"
                }
              ],
              "version": "4.10.0"
            },
            "state": "stopped",
            "status_updated_at": "1989-09-01T22:57:29Z",
            "updated_at": "1978-08-28T00:21:42Z"
          },
          {
            "connection_info": {
              "hostname": "i-0123456789abcdef.ec2.internal",
              "ipv4_address": "10.24.34.2",
              "port": 5432
            },
            "created_at": "1972-02-12T09:45:07Z",
            "error": "failed to get patroni status: connection refused",
            "host_id": "de3b1388-1f0c-42f1-a86c-59ab72f255ec",
            "id": "a67cbb36-c3c3-49c9-8aac-f4a0438a883d",
            "node_name": "n1",
            "postgres": {
              "patroni_paused": true,
              "patroni_state": "unknown",
              "pending_restart": false,
              "role": "primary",
              "version": "17.5"
            },
            "spock": {
              "read_only": "off",
              "subscriptions": [
                {
                  "name": "sub_n1n2",
                  "provider_node": "n2",
                  "status": "down"
                },
                {
                  "name": "sub_n1n2",
                  "provider_node": "n2",
                  "status": "down"
                },
                {
                  "name": "sub_n1n2",
                  "provider_node": "n2",
                  "status": "down"
                }
              ],
              "version": "4.10.0"
            },
            "state": "stopped",
            "status_updated_at": "1989-09-01T22:57:29Z",
            "updated_at": "1978-08-28T00:21:42Z"
          }
        ]
      },
      "InstanceSpockStatus": {
        "type": "object",
        "properties": {
          "read_only": {
            "type": "string",
            "description": "The current spock.readonly setting.",
            "example": "off"
          },
          "subscriptions": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/InstanceSubscription"
            },
            "description": "Status information for this instance's Spock subscriptions.",
            "example": [
              {
                "name": "sub_n1n2",
                "provider_node": "n2",
                "status": "down"
              },
              {
                "name": "sub_n1n2",
                "provider_node": "n2",
                "status": "down"
              },
              {
                "name": "sub_n1n2",
                "provider_node": "n2",
                "status": "down"
              },
              {
                "name": "sub_n1n2",
                "provider_node": "n2",
                "status": "down"
              }
            ]
          },
          "version": {
            "type": "string",
            "description": "The version of Spock for this instance.",
            "example": "4.10.0"
          }
        },
        "description": "Spock status information for a pgEdge instance.",
        "example": {
          "read_only": "off",
          "subscriptions": [
            {
              "name": "sub_n1n2",
              "provider_node": "n2",
              "status": "down"
            },
            {
              "name": "sub_n1n2",
              "provider_node": "n2",
              "status": "down"
            },
            {
              "name": "sub_n1n2",
              "provider_node": "n2",
              "status": "down"
            }
          ],
          "version": "4.10.0"
        }
      },
      "InstanceSubscription": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "description": "The name of the subscription.",
            "example": "sub_n1n2"
          },
          "provider_node": {
            "type": "string",
            "description": "The Spock node name of the provider for this subscription.",
            "example": "n2",
            "pattern": "n[0-9]+"
          },
          "status": {
            "type": "string",
            "description": "The current status of the subscription.",
            "example": "down"
          }
        },
        "description": "Status information for a Spock subscription.",
        "example": {
          "name": "sub_n1n2",
          "provider_node": "n2",
          "status": "down"
        },
        "required": [
          "provider_node",
          "name",
          "status"
        ]
      },
      "ListDatabaseTasksResponse": {
        "type": "object",
        "properties": {
          "tasks": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Task"
            },
            "example": [
              {
                "completed_at": "2025-06-18T16:52:35Z",
                "created_at": "2025-06-18T16:52:05Z",
                "database_id": "storefront",
                "status": "completed",
                "task_id": "019783f4-75f4-71e7-85a3-c9b96b345d77",
                "type": "create"
              },
              {
                "completed_at": "2025-06-18T16:52:35Z",
                "created_at": "2025-06-18T16:52:05Z",
                "database_id": "storefront",
                "status": "completed",
                "task_id": "019783f4-75f4-71e7-85a3-c9b96b345d77",
                "type": "create"
              },
              {
                "completed_at": "2025-06-18T16:52:35Z",
                "created_at": "2025-06-18T16:52:05Z",
                "database_id": "storefront",
                "status": "completed",
                "task_id": "019783f4-75f4-71e7-85a3-c9b96b345d77",
                "type": "create"
              }
            ]
          }
        },
        "example": {
          "tasks": [
            {
              "completed_at": "2025-06-18T17:54:36Z",
              "created_at": "2025-06-18T17:54:28Z",
              "database_id": "storefront",
              "instance_id": "storefront-n1-689qacsi",
              "status": "completed",
              "task_id": "0197842d-9082-7496-b787-77bd2e11809f",
              "type": "node_backup"
            },
            {
              "completed_at": "2025-06-18T17:54:04Z",
              "created_at": "2025-06-18T17:53:17Z",
              "database_id": "storefront",
              "status": "completed",
              "task_id": "0197842c-7c4f-7a8c-829e-7405c2a41c8c",
              "type": "update"
            },
            {
              "completed_at": "2025-06-18T17:23:28Z",
              "created_at": "2025-06-18T17:23:14Z",
              "database_id": "storefront",
              "status": "completed",
              "task_id": "01978410-fb5d-7cd2-bbd2-66c0bf929dc0",
              "type": "update"
            },
            {
              "completed_at": "2025-06-18T16:52:35Z",
              "created_at": "2025-06-18T16:52:05Z",
              "database_id": "storefront",
              "status": "completed",
              "task_id": "019783f4-75f4-71e7-85a3-c9b96b345d77",
              "type": "create"
            }
          ]
        }
      },
      "ListHostsResponse": {
        "type": "object",
        "properties": {
          "hosts": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Host"
            },
            "description": "List of hosts in the cluster",
            "example": [
              {
                "cohort": {
                  "control_available": true,
                  "member_id": "lah4bsznw6kc0hp7biylmmmll",
                  "type": "swarm"
                },
                "cpus": 4,
                "data_dir": "/data",
                "default_pgedge_version": {
                  "postgres_version": "17.6",
                  "spock_version": "5"
                },
                "hostname": "i-0123456789abcdef.ec2.internal",
                "id": "de3b1388-1f0c-42f1-a86c-59ab72f255ec",
                "ipv4_address": "10.24.34.2",
                "memory": "16GiB",
                "orchestrator": "swarm",
                "status": {
                  "components": {
                    "Enim et voluptatum ex ea dolore.": {
                      "details": {
                        "alarms": [
                          "3: NOSPACE"
                        ]
                      },
                      "error": "failed to connect to etcd",
                      "healthy": false
                    },
                    "Tenetur nostrum repellendus sint qui.": {
                      "details": {
                        "alarms": [
                          "3: NOSPACE"
                        ]
                      },
                      "error": "failed to connect to etcd",
                      "healthy": false
                    }
                  },
                  "state": "available",
                  "updated_at": "2021-07-01T12:34:56Z"
                },
                "supported_pgedge_versions": [
                  {
                    "postgres_version": "17.6",
                    "spock_version": "5"
                  },
                  {
                    "postgres_version": "17.6",
                    "spock_version": "5"
                  },
                  {
                    "postgres_version": "17.6",
                    "spock_version": "5"
                  }
                ]
              },
              {
                "cohort": {
                  "control_available": true,
                  "member_id": "lah4bsznw6kc0hp7biylmmmll",
                  "type": "swarm"
                },
                "cpus": 4,
                "data_dir": "/data",
                "default_pgedge_version": {
                  "postgres_version": "17.6",
                  "spock_version": "5"
                },
                "hostname": "i-0123456789abcdef.ec2.internal",
                "id": "de3b1388-1f0c-42f1-a86c-59ab72f255ec",
                "ipv4_address": "10.24.34.2",
                "memory": "16GiB",
                "orchestrator": "swarm",
                "status": {
                  "components": {
                    "Enim et voluptatum ex ea dolore.": {
                      "details": {
                        "alarms": [
                          "3: NOSPACE"
                        ]
                      },
                      "error": "failed to connect to etcd",
                      "healthy": false
                    },
                    "Tenetur nostrum repellendus sint qui.": {
                      "details": {
                        "alarms": [
                          "3: NOSPACE"
                        ]
                      },
                      "error": "failed to connect to etcd",
                      "healthy": false
                    }
                  },
                  "state": "available",
                  "updated_at": "2021-07-01T12:34:56Z"
                },
                "supported_pgedge_versions": [
                  {
                    "postgres_version": "17.6",
                    "spock_version": "5"
                  },
                  {
                    "postgres_version": "17.6",
                    "spock_version": "5"
                  },
                  {
                    "postgres_version": "17.6",
                    "spock_version": "5"
                  }
                ]
              }
            ]
          }
        },
        "description": "Response containing the list of hosts",
        "example": {
          "hosts": [
            {
              "cohort": {
                "control_available": true,
                "member_id": "lah4bsznw6kc0hp7biylmmmll",
                "type": "swarm"
              },
              "cpus": 4,
              "data_dir": "/data",
              "default_pgedge_version": {
                "postgres_version": "17.6",
                "spock_version": "5"
              },
              "hostname": "i-0123456789abcdef.ec2.internal",
              "id": "de3b1388-1f0c-42f1-a86c-59ab72f255ec",
              "ipv4_address": "10.24.34.2",
              "memory": "16GiB",
              "orchestrator": "swarm",
              "status": {
                "components": {
                  "Enim et voluptatum ex ea dolore.": {
                    "details": {
                      "alarms": [
                        "3: NOSPACE"
                      ]
                    },
                    "error": "failed to connect to etcd",
                    "healthy": false
                  },
                  "Tenetur nostrum repellendus sint qui.": {
                    "details": {
                      "alarms": [
                        "3: NOSPACE"
                      ]
                    },
                    "error": "failed to connect to etcd",
                    "healthy": false
                  }
                },
                "state": "available",
                "updated_at": "2021-07-01T12:34:56Z"
              },
              "supported_pgedge_versions": [
                {
                  "postgres_version": "17.6",
                  "spock_version": "5"
                },
                {
                  "postgres_version": "17.6",
                  "spock_version": "5"
                },
                {
                  "postgres_version": "17.6",
                  "spock_version": "5"
                }
              ]
            },
            {
              "cohort": {
                "control_available": true,
                "member_id": "lah4bsznw6kc0hp7biylmmmll",
                "type": "swarm"
              },
              "cpus": 4,
              "data_dir": "/data",
              "default_pgedge_version": {
                "postgres_version": "17.6",
                "spock_version": "5"
              },
              "hostname": "i-0123456789abcdef.ec2.internal",
              "id": "de3b1388-1f0c-42f1-a86c-59ab72f255ec",
              "ipv4_address": "10.24.34.2",
              "memory": "16GiB",
              "orchestrator": "swarm",
              "status": {
                "components": {
                  "Enim et voluptatum ex ea dolore.": {
                    "details": {
                      "alarms": [
                        "3: NOSPACE"
                      ]
                    },
                    "error": "failed to connect to etcd",
                    "healthy": false
                  },
                  "Tenetur nostrum repellendus sint qui.": {
                    "details": {
                      "alarms": [
                        "3: NOSPACE"
                      ]
                    },
                    "error": "failed to connect to etcd",
                    "healthy": false
                  }
                },
                "state": "available",
                "updated_at": "2021-07-01T12:34:56Z"
              },
              "supported_pgedge_versions": [
                {
                  "postgres_version": "17.6",
                  "spock_version": "5"
                },
                {
                  "postgres_version": "17.6",
                  "spock_version": "5"
                },
                {
                  "postgres_version": "17.6",
                  "spock_version": "5"
                }
              ]
            },
            {
              "cohort": {
                "control_available": true,
                "member_id": "lah4bsznw6kc0hp7biylmmmll",
                "type": "swarm"
              },
              "cpus": 4,
              "data_dir": "/data",
              "default_pgedge_version": {
                "postgres_version": "17.6",
                "spock_version": "5"
              },
              "hostname": "i-0123456789abcdef.ec2.internal",
              "id": "de3b1388-1f0c-42f1-a86c-59ab72f255ec",
              "ipv4_address": "10.24.34.2",
              "memory": "16GiB",
              "orchestrator": "swarm",
              "status": {
                "components": {
                  "Enim et voluptatum ex ea dolore.": {
                    "details": {
                      "alarms": [
                        "3: NOSPACE"
                      ]
                    },
                    "error": "failed to connect to etcd",
                    "healthy": false
                  },
                  "Tenetur nostrum repellendus sint qui.": {
                    "details": {
                      "alarms": [
                        "3: NOSPACE"
                      ]
                    },
                    "error": "failed to connect to etcd",
                    "healthy": false
                  }
                },
                "state": "available",
                "updated_at": "2021-07-01T12:34:56Z"
              },
              "supported_pgedge_versions": [
                {
                  "postgres_version": "17.6",
                  "spock_version": "5"
                },
                {
                  "postgres_version": "17.6",
                  "spock_version": "5"
                },
                {
                  "postgres_version": "17.6",
                  "spock_version": "5"
                }
              ]
            }
          ]
        },
        "required": [
          "hosts"
        ]
      },
      "Listdatabasesresponse": {
        "type": "object",
        "properties": {
          "databases": {
            "$ref": "#/components/schemas/DatabaseCollection"
          }
        },
        "example": {
          "databases": [
            {
              "created_at": "2025-06-17T20:05:10Z",
              "id": "inventory",
              "instances": [
                {
                  "host_id": "us-east-1",
                  "id": "inventory-n1-689qacsi",
                  "node_name": "n1",
                  "state": "available"
                },
                {
                  "host_id": "ap-south-1",
                  "id": "inventory-n2-9ptayhma",
                  "node_name": "n2",
                  "state": "available"
                },
                {
                  "host_id": "eu-central-1",
                  "id": "inventory-n3-ant97dj4",
                  "node_name": "n3",
                  "state": "available"
                }
              ],
              "state": "available",
              "updated_at": "2025-06-17T20:05:10Z"
            },
            {
              "created_at": "2025-06-17T20:05:10Z",
              "id": "storefront",
              "instances": [
                {
                  "host_id": "us-east-1",
                  "id": "storefront-n1-689qacsi",
                  "node_name": "n1",
                  "state": "available"
                },
                {
                  "host_id": "ap-south-1",
                  "id": "storefront-n2-9ptayhma",
                  "node_name": "n2",
                  "state": "available"
                },
                {
                  "host_id": "eu-central-1",
                  "id": "storefront-n3-ant97dj4",
                  "node_name": "n3",
                  "state": "available"
                }
              ],
              "state": "available",
              "updated_at": "2025-06-12T15:10:05Z"
            }
          ]
        }
      },
      "OrchestratorOpts": {
        "type": "object",
        "properties": {
          "swarm": {
            "$ref": "#/components/schemas/SwarmOpts"
          }
        },
        "description": "Options specific to the selected orchestrator.",
        "example": {
          "swarm": {
            "extra_labels": {
              "traefik.enable": "true",
              "traefik.tcp.routers.mydb.rule": "HostSNI(`mydb.example.com`)"
            },
            "extra_networks": [
              {
                "aliases": [
                  "pg-db",
                  "db-alias"
                ],
                "driver_opts": {
                  "com.docker.network.endpoint.expose": "true"
                },
                "id": "traefik-public"
              },
              {
                "aliases": [
                  "pg-db",
                  "db-alias"
                ],
                "driver_opts": {
                  "com.docker.network.endpoint.expose": "true"
                },
                "id": "traefik-public"
              },
              {
                "aliases": [
                  "pg-db",
                  "db-alias"
                ],
                "driver_opts": {
                  "com.docker.network.endpoint.expose": "true"
                },
                "id": "traefik-public"
              }
            ],
            "extra_volumes": [
              {
                "destination_path": "/backups/container",
                "host_path": "/Users/user/backups/host"
              },
              {
                "destination_path": "/backups/container",
                "host_path": "/Users/user/backups/host"
              },
              {
                "destination_path": "/backups/container",
                "host_path": "/Users/user/backups/host"
              }
            ]
          }
        }
      },
      "PgEdgeVersion": {
        "type": "object",
        "properties": {
          "postgres_version": {
            "type": "string",
            "description": "The Postgres major and minor version.",
            "example": "17.6"
          },
          "spock_version": {
            "type": "string",
            "description": "The Spock major version.",
            "example": "5"
          }
        },
        "example": {
          "postgres_version": "17.6",
          "spock_version": "5"
        },
        "required": [
          "postgres_version",
          "spock_version"
        ]
      },
      "RestartInstanceResponse": {
        "type": "object",
        "properties": {
          "task": {
            "$ref": "#/components/schemas/Task"
          }
        },
        "description": "Response containing the restart task",
        "example": {
          "task": {
            "completed_at": "2025-06-18T16:52:35Z",
            "created_at": "2025-06-18T16:52:05Z",
            "database_id": "storefront",
            "status": "completed",
            "task_id": "019783f4-75f4-71e7-85a3-c9b96b345d77",
            "type": "create"
          }
        },
        "required": [
          "task"
        ]
      },
      "RestoreConfigSpec": {
        "type": "object",
        "properties": {
          "repository": {
            "$ref": "#/components/schemas/RestoreRepositorySpec"
          },
          "restore_options": {
            "type": "object",
            "description": "Additional options to use when restoring this database. If omitted, the database will be restored to the latest point in the given repository.",
            "example": {
              "set": "20250505-153628F",
              "target": "123456",
              "type": "xid"
            },
            "maxLength": 32,
            "additionalProperties": {
              "type": "string",
              "example": "Nihil qui non quae sint ea."
            }
          },
          "source_database_id": {
            "type": "string",
            "description": "A user-specified identifier. Must be 1-63 characters, contain only lower-cased letters and hyphens, start and end with a letter or number, and not contain consecutive hyphens.",
            "example": "76f9b8c0-4958-11f0-a489-3bb29577c696",
            "minLength": 1,
            "maxLength": 63
          },
          "source_database_name": {
            "type": "string",
            "description": "The name of the database in this repository. The database will be renamed to the database_name in the DatabaseSpec after it's restored.",
            "example": "northwind",
            "minLength": 1,
            "maxLength": 31
          },
          "source_node_name": {
            "type": "string",
            "description": "The name of the node to restore this database from.",
            "example": "n1",
            "pattern": "n[0-9]+"
          }
        },
        "example": {
          "repository": {
            "azure_account": "pgedge-backups",
            "azure_container": "pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1",
            "azure_endpoint": "blob.core.usgovcloudapi.net",
            "azure_key": "YXpLZXk=",
            "base_path": "/backups",
            "custom_options": {
              "s3-kms-key-id": "1234abcd-12ab-34cd-56ef-1234567890ab"
            },
            "gcs_bucket": "pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1",
            "gcs_endpoint": "localhost",
            "gcs_key": "ZXhhbXBsZSBnY3Mga2V5Cg==",
            "id": "f6b84a99-5e91-4203-be1e-131fe82e5984",
            "s3_bucket": "pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1",
            "s3_endpoint": "s3.us-east-1.amazonaws.com",
            "s3_key": "AKIAIOSFODNN7EXAMPLE",
            "s3_key_secret": "wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY",
            "s3_region": "us-east-1",
            "type": "s3"
          },
          "restore_options": {
            "set": "20250505-153628F",
            "target": "123456",
            "type": "xid"
          },
          "source_database_id": "02f1a7db-fca8-4521-b57a-2a375c1ced51",
          "source_database_name": "northwind",
          "source_node_name": "n1"
        },
        "required": [
          "source_database_id",
          "source_node_name",
          "source_database_name",
          "repository"
        ]
      },
      "RestoreDatabaseRequest": {
        "type": "object",
        "properties": {
          "restore_config": {
            "$ref": "#/components/schemas/RestoreConfigSpec"
          },
          "target_nodes": {
            "type": "array",
            "items": {
              "type": "string",
              "example": "Dolorem impedit laudantium et quia commodi consequatur."
            },
            "description": "The nodes to restore. Defaults to all nodes if empty or unspecified.",
            "example": [
              "n1"
            ],
            "maxItems": 9
          }
        },
        "example": {
          "restore_config": {
            "repository": {
              "base_path": "/backups",
              "type": "posix"
            },
            "source_database_id": "storefront",
            "source_database_name": "storefront",
            "source_node_name": "n1"
          },
          "target_nodes": [
            "n1"
          ]
        },
        "required": [
          "restore_config"
        ]
      },
      "RestoreDatabaseResponse": {
        "type": "object",
        "properties": {
          "database": {
            "$ref": "#/components/schemas/Database"
          },
          "node_tasks": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Task"
            },
            "description": "The tasks that will restore each database node.",
            "example": [
              {
                "completed_at": "2025-06-18T16:52:35Z",
                "created_at": "2025-06-18T16:52:05Z",
                "database_id": "storefront",
                "status": "completed",
                "task_id": "019783f4-75f4-71e7-85a3-c9b96b345d77",
                "type": "create"
              },
              {
                "completed_at": "2025-06-18T16:52:35Z",
                "created_at": "2025-06-18T16:52:05Z",
                "database_id": "storefront",
                "status": "completed",
                "task_id": "019783f4-75f4-71e7-85a3-c9b96b345d77",
                "type": "create"
              },
              {
                "completed_at": "2025-06-18T16:52:35Z",
                "created_at": "2025-06-18T16:52:05Z",
                "database_id": "storefront",
                "status": "completed",
                "task_id": "019783f4-75f4-71e7-85a3-c9b96b345d77",
                "type": "create"
              },
              {
                "completed_at": "2025-06-18T16:52:35Z",
                "created_at": "2025-06-18T16:52:05Z",
                "database_id": "storefront",
                "status": "completed",
                "task_id": "019783f4-75f4-71e7-85a3-c9b96b345d77",
                "type": "create"
              }
            ]
          },
          "task": {
            "$ref": "#/components/schemas/Task"
          }
        },
        "example": {
          "database": {
            "created_at": "2025-06-18T16:52:05Z",
            "id": "storefront",
            "instances": [
              {
                "connection_info": {
                  "hostname": "i-0123456789abcdef.ec2.internal",
                  "ipv4_address": "10.24.34.2",
                  "port": 5432
                },
                "created_at": "2025-06-18T16:52:22Z",
                "host_id": "us-east-1",
                "id": "storefront-n1-689qacsi",
                "node_name": "n1",
                "postgres": {
                  "patroni_state": "running",
                  "role": "primary",
                  "version": "17.5"
                },
                "spock": {
                  "read_only": "off",
                  "subscriptions": [
                    {
                      "name": "sub_n1n3",
                      "provider_node": "n3",
                      "status": "replicating"
                    },
                    {
                      "name": "sub_n1n2",
                      "provider_node": "n2",
                      "status": "replicating"
                    }
                  ],
                  "version": "4.0.10"
                },
                "state": "available",
                "status_updated_at": "2025-06-18T17:58:56Z",
                "updated_at": "2025-06-18T17:54:36Z"
              },
              {
                "connection_info": {
                  "hostname": "i-058731542fee493f.ec2.internal",
                  "ipv4_address": "10.24.35.2",
                  "port": 5432
                },
                "created_at": "2025-06-18T16:52:22Z",
                "host_id": "ap-south-1",
                "id": "storefront-n2-9ptayhma",
                "node_name": "n2",
                "postgres": {
                  "patroni_state": "running",
                  "role": "primary",
                  "version": "17.5"
                },
                "spock": {
                  "read_only": "off",
                  "subscriptions": [
                    {
                      "name": "sub_n2n1",
                      "provider_node": "n1",
                      "status": "replicating"
                    },
                    {
                      "name": "sub_n2n3",
                      "provider_node": "n3",
                      "status": "replicating"
                    }
                  ],
                  "version": "4.0.10"
                },
                "state": "available",
                "status_updated_at": "2025-06-18T17:58:56Z",
                "updated_at": "2025-06-18T17:54:01Z"
              },
              {
                "connection_info": {
                  "hostname": "i-494027b7b53f6a23.ec2.internal",
                  "ipv4_address": "10.24.36.2",
                  "port": 5432
                },
                "created_at": "2025-06-18T16:52:22Z",
                "host_id": "eu-central-1",
                "id": "storefront-n3-ant97dj4",
                "node_name": "n3",
                "postgres": {
                  "patroni_state": "running",
                  "role": "primary",
                  "version": "17.5"
                },
                "spock": {
                  "read_only": "off",
                  "subscriptions": [
                    {
                      "name": "sub_n3n1",
                      "provider_node": "n1",
                      "status": "replicating"
                    },
                    {
                      "name": "sub_n3n2",
                      "provider_node": "n2",
                      "status": "replicating"
                    }
                  ],
                  "version": "4.0.10"
                },
                "state": "available",
                "status_updated_at": "2025-06-18T17:58:56Z",
                "updated_at": "2025-06-18T17:54:01Z"
              }
            ],
            "spec": {
              "database_name": "storefront",
              "database_users": [
                {
                  "attributes": [
                    "SUPERUSER",
                    "LOGIN"
                  ],
                  "db_owner": true,
                  "username": "admin"
                }
              ],
              "nodes": [
                {
                  "host_ids": [
                    "us-east-1"
                  ],
                  "name": "n1"
                },
                {
                  "host_ids": [
                    "ap-south-1"
                  ],
                  "name": "n2"
                },
                {
                  "host_ids": [
                    "eu-central-1"
                  ],
                  "name": "n3"
                }
              ],
              "port": 5432,
              "postgres_version": "17.6",
              "spock_version": "5"
            },
            "state": "restoring",
            "updated_at": "2025-06-18T17:58:59Z"
          },
          "node_tasks": [
            {
              "created_at": "2025-06-18T17:58:59Z",
              "database_id": "storefront",
              "node_name": "n1",
              "parent_id": "01978431-b628-758a-aec6-03b331fa1a17",
              "status": "pending",
              "task_id": "01978431-b62b-723b-a09c-e4072cd64bdb",
              "type": "node_restore"
            },
            {
              "created_at": "2025-06-18T17:58:59Z",
              "database_id": "storefront",
              "node_name": "n2",
              "parent_id": "01978431-b628-758a-aec6-03b331fa1a17",
              "status": "pending",
              "task_id": "01978431-b62c-7593-aad8-43b03df2031b",
              "type": "node_restore"
            },
            {
              "created_at": "2025-06-18T17:58:59Z",
              "database_id": "storefront",
              "node_name": "n3",
              "parent_id": "01978431-b628-758a-aec6-03b331fa1a17",
              "status": "pending",
              "task_id": "01978431-b62d-7b65-ab09-272d0b2fea91",
              "type": "node_restore"
            }
          ],
          "task": {
            "created_at": "2025-06-18T17:58:59Z",
            "database_id": "storefront",
            "status": "pending",
            "task_id": "01978431-b628-758a-aec6-03b331fa1a17",
            "type": "restore"
          }
        },
        "required": [
          "task",
          "node_tasks",
          "database"
        ]
      },
      "RestoreRepositorySpec": {
        "type": "object",
        "properties": {
          "azure_account": {
            "type": "string",
            "description": "The Azure account name for this repository. Only applies when type = 'azure'.",
            "example": "pgedge-backups",
            "minLength": 3,
            "maxLength": 24
          },
          "azure_container": {
            "type": "string",
            "description": "The Azure container name for this repository. Only applies when type = 'azure'.",
            "example": "pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1",
            "minLength": 3,
            "maxLength": 63
          },
          "azure_endpoint": {
            "type": "string",
            "description": "The optional Azure endpoint for this repository. Only applies when type = 'azure'.",
            "example": "blob.core.usgovcloudapi.net",
            "minLength": 3,
            "maxLength": 128
          },
          "azure_key": {
            "type": "string",
            "description": "An optional Azure storage account access key to use for this repository. If not provided, pgbackrest will use the VM's managed identity.",
            "example": "YXpLZXk=",
            "maxLength": 128
          },
          "base_path": {
            "type": "string",
            "description": "The base path within the repository to store backups. Required for type = 'posix' and 'cifs'.",
            "example": "/backups",
            "maxLength": 256
          },
          "custom_options": {
            "type": "object",
            "description": "Additional options to apply to this repository.",
            "example": {
              "s3-kms-key-id": "1234abcd-12ab-34cd-56ef-1234567890ab"
            },
            "additionalProperties": {
              "type": "string",
              "example": "Ducimus quia deserunt animi."
            }
          },
          "gcs_bucket": {
            "type": "string",
            "description": "The GCS bucket name for this repository. Only applies when type = 'gcs'.",
            "example": "pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1",
            "minLength": 3,
            "maxLength": 63
          },
          "gcs_endpoint": {
            "type": "string",
            "description": "The optional GCS endpoint for this repository. Only applies when type = 'gcs'.",
            "example": "localhost",
            "minLength": 3,
            "maxLength": 128
          },
          "gcs_key": {
            "type": "string",
            "description": "Optional base64-encoded private key data. If omitted, pgbackrest will use the service account attached to the instance profile.",
            "example": "ZXhhbXBsZSBnY3Mga2V5Cg==",
            "maxLength": 1024
          },
          "id": {
            "type": "string",
            "description": "A user-specified identifier. Must be 1-63 characters, contain only lower-cased letters and hyphens, start and end with a letter or number, and not contain consecutive hyphens.",
            "example": "76f9b8c0-4958-11f0-a489-3bb29577c696",
            "minLength": 1,
            "maxLength": 63
          },
          "s3_bucket": {
            "type": "string",
            "description": "The S3 bucket name for this repository. Only applies when type = 's3'.",
            "example": "pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1",
            "minLength": 3,
            "maxLength": 63
          },
          "s3_endpoint": {
            "type": "string",
            "description": "The optional S3 endpoint for this repository. Only applies when type = 's3'.",
            "example": "s3.us-east-1.amazonaws.com",
            "minLength": 3,
            "maxLength": 128
          },
          "s3_key": {
            "type": "string",
            "description": "An optional AWS access key ID to use for this repository. If not provided, pgbackrest will use the default credential provider chain.",
            "example": "AKIAIOSFODNN7EXAMPLE",
            "maxLength": 128
          },
          "s3_key_secret": {
            "type": "string",
            "description": "The corresponding secret for the AWS access key ID in s3_key.",
            "example": "wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY",
            "maxLength": 128
          },
          "s3_region": {
            "type": "string",
            "description": "The region of the S3 bucket for this repository. Only applies when type = 's3'.",
            "example": "us-east-1",
            "minLength": 1,
            "maxLength": 32
          },
          "type": {
            "type": "string",
            "description": "The type of this repository.",
            "example": "s3",
            "enum": [
              "s3",
              "gcs",
              "azure",
              "posix",
              "cifs"
            ]
          }
        },
        "example": {
          "azure_account": "pgedge-backups",
          "azure_container": "pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1",
          "azure_endpoint": "blob.core.usgovcloudapi.net",
          "azure_key": "YXpLZXk=",
          "base_path": "/backups",
          "custom_options": {
            "s3-kms-key-id": "1234abcd-12ab-34cd-56ef-1234567890ab"
          },
          "gcs_bucket": "pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1",
          "gcs_endpoint": "localhost",
          "gcs_key": "ZXhhbXBsZSBnY3Mga2V5Cg==",
          "id": "f6b84a99-5e91-4203-be1e-131fe82e5984",
          "s3_bucket": "pgedge-backups-9f81786f-373b-4ff2-afee-e054a06a96f1",
          "s3_endpoint": "s3.us-east-1.amazonaws.com",
          "s3_key": "AKIAIOSFODNN7EXAMPLE",
          "s3_key_secret": "wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY",
          "s3_region": "us-east-1",
          "type": "s3"
        },
        "required": [
          "type"
        ]
      },
      "StartInstanceResponse": {
        "type": "object",
        "properties": {
          "task": {
            "$ref": "#/components/schemas/Task"
          }
        },
        "description": "Response containing the start task",
        "example": {
          "task": {
            "completed_at": "2025-06-18T16:52:35Z",
            "created_at": "2025-06-18T16:52:05Z",
            "database_id": "storefront",
            "status": "completed",
            "task_id": "019783f4-75f4-71e7-85a3-c9b96b345d77",
            "type": "create"
          }
        },
        "required": [
          "task"
        ]
      },
      "StopInstanceResponse": {
        "type": "object",
        "properties": {
          "task": {
            "$ref": "#/components/schemas/Task"
          }
        },
        "description": "Response containing the stop task",
        "example": {
          "task": {
            "completed_at": "2025-06-18T16:52:35Z",
            "created_at": "2025-06-18T16:52:05Z",
            "database_id": "storefront",
            "status": "completed",
            "task_id": "019783f4-75f4-71e7-85a3-c9b96b345d77",
            "type": "create"
          }
        },
        "required": [
          "task"
        ]
      },
      "SwarmOpts": {
        "type": "object",
        "properties": {
          "extra_labels": {
            "type": "object",
            "description": "Arbitrary labels to apply to the Docker Swarm service",
            "example": {
              "traefik.enable": "true",
              "traefik.tcp.routers.mydb.rule": "HostSNI(`mydb.example.com`)"
            },
            "additionalProperties": {
              "type": "string",
              "example": "Voluptates laborum earum illo aut et."
            }
          },
          "extra_networks": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ExtraNetworkSpec"
            },
            "description": "A list of additional Docker Swarm networks to attach containers in this database to.",
            "example": [
              {
                "aliases": [
                  "pg-db",
                  "db-alias"
                ],
                "driver_opts": {
                  "com.docker.network.endpoint.expose": "true"
                },
                "id": "traefik-public"
              },
              {
                "aliases": [
                  "pg-db",
                  "db-alias"
                ],
                "driver_opts": {
                  "com.docker.network.endpoint.expose": "true"
                },
                "id": "traefik-public"
              },
              {
                "aliases": [
                  "pg-db",
                  "db-alias"
                ],
                "driver_opts": {
                  "com.docker.network.endpoint.expose": "true"
                },
                "id": "traefik-public"
              }
            ],
            "maxItems": 8
          },
          "extra_volumes": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ExtraVolumesSpec"
            },
            "description": "A list of extra volumes to mount. Each entry defines a host and container path.",
            "example": [
              {
                "destination_path": "/backups/container",
                "host_path": "/Users/user/backups/host"
              },
              {
                "destination_path": "/backups/container",
                "host_path": "/Users/user/backups/host"
              },
              {
                "destination_path": "/backups/container",
                "host_path": "/Users/user/backups/host"
              }
            ],
            "maxItems": 16
          }
        },
        "description": "Docker Swarm-specific options.",
        "example": {
          "extra_labels": {
            "traefik.enable": "true",
            "traefik.tcp.routers.mydb.rule": "HostSNI(`mydb.example.com`)"
          },
          "extra_networks": [
            {
              "aliases": [
                "pg-db",
                "db-alias"
              ],
              "driver_opts": {
                "com.docker.network.endpoint.expose": "true"
              },
              "id": "traefik-public"
            },
            {
              "aliases": [
                "pg-db",
                "db-alias"
              ],
              "driver_opts": {
                "com.docker.network.endpoint.expose": "true"
              },
              "id": "traefik-public"
            },
            {
              "aliases": [
                "pg-db",
                "db-alias"
              ],
              "driver_opts": {
                "com.docker.network.endpoint.expose": "true"
              },
              "id": "traefik-public"
            }
          ],
          "extra_volumes": [
            {
              "destination_path": "/backups/container",
              "host_path": "/Users/user/backups/host"
            },
            {
              "destination_path": "/backups/container",
              "host_path": "/Users/user/backups/host"
            },
            {
              "destination_path": "/backups/container",
              "host_path": "/Users/user/backups/host"
            }
          ]
        }
      },
      "SwitchoverDatabaseNodeRequest": {
        "type": "object",
        "properties": {
          "candidate_instance_id": {
            "type": "string",
            "description": "Optional instance_id of the replica to promote. If omitted, a candidate will be selected.",
            "example": "3c875a27-f6a6-4c1c-ba5f-6972fb1fc348"
          },
          "database_id": {
            "type": "string",
            "description": "A user-specified identifier. Must be 1-63 characters, contain only lower-cased letters and hyphens, start and end with a letter or number, and not contain consecutive hyphens.",
            "example": "76f9b8c0-4958-11f0-a489-3bb29577c696",
            "minLength": 1,
            "maxLength": 63
          },
          "node_name": {
            "type": "string",
            "description": "Name of the node to initiate the switchover from (informational).",
            "example": "n1",
            "pattern": "n[0-9]+"
          },
          "scheduled_at": {
            "type": "string",
            "description": "Optional ISO8601 datetime when the switchover should occur. If omitted the switchover occurs immediately.",
            "example": "2025-09-20T22:00:00+05:30",
            "format": "date-time"
          }
        },
        "example": {
          "candidate_instance_id": "3c875a27-f6a6-4c1c-ba5f-6972fb1fc348",
          "database_id": "my-app",
          "node_name": "n1",
          "scheduled_at": "2025-09-20T22:00:00+05:30"
        },
        "required": [
          "database_id",
          "node_name"
        ]
      },
      "SwitchoverDatabaseNodeRequestBody": {
        "type": "object",
        "properties": {
          "candidate_instance_id": {
            "type": "string",
            "description": "Optional instance_id for the replica candidate.",
            "example": "68f50878-44d2-4524-a823-e31bd478706d-n1-689qacsi"
          },
          "scheduled_at": {
            "type": "string",
            "description": "Optional scheduled time (ISO8601) for the switchover. If absent switchover happens immediately.",
            "example": "2025-09-20T22:00:00+05:30",
            "format": "date-time"
          }
        },
        "example": {
          "candidate_instance_id": "68f50878-44d2-4524-a823-e31bd478706d-n1-689qacsi",
          "scheduled_at": "2025-09-20T22:00:00+05:30"
        }
      },
      "SwitchoverDatabaseNodeResponse": {
        "type": "object",
        "properties": {
          "task": {
            "$ref": "#/components/schemas/Task"
          }
        },
        "example": {
          "task": {
            "created_at": "2025-06-18T17:54:28Z",
            "database_id": "storefront",
            "status": "pending",
            "task_id": "0197842d-9082-7496-b787-77bd2e11809f",
            "type": "switchover"
          }
        },
        "required": [
          "task"
        ]
      },
      "Task": {
        "type": "object",
        "properties": {
          "completed_at": {
            "type": "string",
            "description": "The time when the task was completed.",
            "example": "2025-01-01T02:30:00Z",
            "format": "date-time"
          },
          "created_at": {
            "type": "string",
            "description": "The time when the task was created.",
            "example": "2025-01-01T01:30:00Z",
            "format": "date-time"
          },
          "database_id": {
            "type": "string",
            "description": "The database ID of the task.",
            "example": "02f1a7db-fca8-4521-b57a-2a375c1ced51"
          },
          "error": {
            "type": "string",
            "description": "The error message if the task failed.",
            "example": "failed to connect to database"
          },
          "host_id": {
            "type": "string",
            "description": "The ID of the host that the task is running on.",
            "example": "2e52dcde-86d8-4f71-b58e-8dc3a10c936a"
          },
          "instance_id": {
            "type": "string",
            "description": "The ID of the instance that the task is operating on.",
            "example": "3c875a27-f6a6-4c1c-ba5f-6972fb1fc348"
          },
          "node_name": {
            "type": "string",
            "description": "The name of the node that the task is operating on.",
            "example": "n1"
          },
          "parent_id": {
            "type": "string",
            "description": "The parent task ID of the task.",
            "example": "439eb515-e700-4740-b508-4a3f12ec4f83",
            "format": "uuid"
          },
          "status": {
            "type": "string",
            "description": "The status of the task.",
            "example": "pending",
            "enum": [
              "pending",
              "running",
              "completed",
              "canceled",
              "canceling",
              "failed",
              "unknown"
            ]
          },
          "task_id": {
            "type": "string",
            "description": "The unique ID of the task.",
            "example": "3c875a27-f6a6-4c1c-ba5f-6972fb1fc348",
            "format": "uuid"
          },
          "type": {
            "type": "string",
            "description": "The type of the task.",
            "example": "restore"
          }
        },
        "example": {
          "completed_at": "2025-06-18T16:52:35Z",
          "created_at": "2025-06-18T16:52:05Z",
          "database_id": "storefront",
          "status": "completed",
          "task_id": "019783f4-75f4-71e7-85a3-c9b96b345d77",
          "type": "create"
        },
        "required": [
          "database_id",
          "task_id",
          "created_at",
          "type",
          "status"
        ]
      },
      "TaskLog": {
        "type": "object",
        "properties": {
          "database_id": {
            "type": "string",
            "description": "The database ID of the task log.",
            "example": "02f1a7db-fca8-4521-b57a-2a375c1ced51"
          },
          "entries": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/TaskLogEntry"
            },
            "description": "Entries in the task log.",
            "example": [
              {
                "fields": {
                  "option.enabled": true,
                  "status": "creating"
                },
                "message": "task started",
                "timestamp": "2025-05-29T15:43:13Z"
              },
              {
                "fields": {
                  "option.enabled": true,
                  "status": "creating"
                },
                "message": "task started",
                "timestamp": "2025-05-29T15:43:13Z"
              },
              {
                "fields": {
                  "option.enabled": true,
                  "status": "creating"
                },
                "message": "task started",
                "timestamp": "2025-05-29T15:43:13Z"
              }
            ]
          },
          "last_entry_id": {
            "type": "string",
            "description": "The ID of the last entry in the task log.",
            "example": "3c875a27-f6a6-4c1c-ba5f-6972fb1fc348"
          },
          "task_id": {
            "type": "string",
            "description": "The unique ID of the task log.",
            "example": "3c875a27-f6a6-4c1c-ba5f-6972fb1fc348"
          },
          "task_status": {
            "type": "string",
            "description": "The status of the task.",
            "example": "pending",
            "enum": [
              "pending",
              "running",
              "completed",
              "failed",
              "unknown",
              "canceled",
              "canceling"
            ]
          }
        },
        "example": {
          "database_id": "storefront",
          "entries": [
            {
              "message": "refreshing current state",
              "timestamp": "2025-06-18T17:53:19Z"
            },
            {
              "fields": {
                "duration_ms": 8972
              },
              "message": "finished refreshing current state (took 8.972080116s)",
              "timestamp": "2025-06-18T17:53:28Z"
            },
            {
              "fields": {
                "host_id": "host-1",
                "resource_id": "storefront-n1-689qacsi-backup",
                "resource_type": "swarm.pgbackrest_config"
              },
              "message": "creating resource swarm.pgbackrest_config::storefront-n1-689qacsi-backup",
              "timestamp": "2025-06-18T17:53:29Z"
            },
            {
              "fields": {
                "host_id": "host-2",
                "resource_id": "storefront-n2-9ptayhma-backup",
                "resource_type": "swarm.pgbackrest_config"
              },
              "message": "creating resource swarm.pgbackrest_config::storefront-n2-9ptayhma-backup",
              "timestamp": "2025-06-18T17:53:29Z"
            },
            {
              "fields": {
                "duration_ms": 383,
                "host_id": "host-3",
                "resource_id": "n3",
                "resource_type": "swarm.pgbackrest_stanza",
                "success": true
              },
              "message": "finished creating resource swarm.pgbackrest_stanza::n3 (took 383.568613ms)",
              "timestamp": "2025-06-18T17:54:02Z"
            },
            {
              "fields": {
                "duration_ms": 1181,
                "host_id": "host-1",
                "resource_id": "n1",
                "resource_type": "swarm.pgbackrest_stanza",
                "success": true
              },
              "message": "finished creating resource swarm.pgbackrest_stanza::n1 (took 1.181454868s)",
              "timestamp": "2025-06-18T17:54:03Z"
            }
          ],
          "last_entry_id": "0197842d-303b-7251-b814-6d12c98e7d25",
          "task_id": "0197842c-7c4f-7a8c-829e-7405c2a41c8c",
          "task_status": "completed"
        },
        "required": [
          "database_id",
          "task_id",
          "task_status",
          "entries"
        ]
      },
      "TaskLogEntry": {
        "type": "object",
        "properties": {
          "fields": {
            "type": "object",
            "description": "Additional fields for the log entry.",
            "example": {
              "option.enabled": true,
              "status": "creating"
            },
            "additionalProperties": true
          },
          "message": {
            "type": "string",
            "description": "The log message.",
            "example": "task started"
          },
          "timestamp": {
            "type": "string",
            "description": "The timestamp of the log entry.",
            "example": "2025-05-29T15:43:13Z",
            "format": "date-time"
          }
        },
        "example": {
          "fields": {
            "option.enabled": true,
            "status": "creating"
          },
          "message": "task started",
          "timestamp": "2025-05-29T15:43:13Z"
        },
        "required": [
          "timestamp",
          "message"
        ]
      },
      "UpdateDatabaseRequest": {
        "type": "object",
        "properties": {
          "spec": {
            "$ref": "#/components/schemas/DatabaseSpec"
          },
          "tenant_id": {
            "type": "string",
            "description": "A user-specified identifier. Must be 1-63 characters, contain only lower-cased letters and hyphens, start and end with a letter or number, and not contain consecutive hyphens.",
            "example": "76f9b8c0-4958-11f0-a489-3bb29577c696",
            "minLength": 1,
            "maxLength": 63
          }
        },
        "example": {
          "spec": {
            "database_name": "storefront",
            "database_users": [
              {
                "attributes": [
                  "LOGIN",
                  "SUPERUSER"
                ],
                "db_owner": true,
                "username": "admin"
              }
            ],
            "nodes": [
              {
                "backup_config": {
                  "repositories": [
                    {
                      "s3_bucket": "storefront-db-backups-us-east-1",
                      "type": "s3"
                    }
                  ]
                },
                "host_ids": [
                  "us-east-1"
                ],
                "name": "n1"
              },
              {
                "backup_config": {
                  "repositories": [
                    {
                      "s3_bucket": "storefront-db-backups-ap-south-1",
                      "type": "s3"
                    }
                  ]
                },
                "host_ids": [
                  "ap-south-1"
                ],
                "name": "n2"
              },
              {
                "backup_config": {
                  "repositories": [
                    {
                      "s3_bucket": "storefront-db-backups-eu-central-1",
                      "type": "s3"
                    }
                  ]
                },
                "host_ids": [
                  "eu-central-1"
                ],
                "name": "n3",
                "restore_config": {
                  "repository": {
                    "s3_bucket": "storefront-db-backups-us-east-1",
                    "type": "s3"
                  },
                  "source_database_id": "storefront",
                  "source_database_name": "storefront",
                  "source_node_name": "n1"
                }
              }
            ],
            "port": 5432
          }
        },
        "required": [
          "spec"
        ]
      },
      "UpdateDatabaseResponse": {
        "type": "object",
        "properties": {
          "database": {
            "$ref": "#/components/schemas/Database"
          },
          "task": {
            "$ref": "#/components/schemas/Task"
          }
        },
        "example": {
          "database": {
            "created_at": "2025-06-18T16:52:05Z",
            "id": "storefront",
            "instances": [
              {
                "connection_info": {
                  "hostname": "i-0123456789abcdef.ec2.internal",
                  "ipv4_address": "10.24.34.2",
                  "port": 5432
                },
                "created_at": "2025-06-18T16:52:22Z",
                "host_id": "us-east-1",
                "id": "storefront-n1-689qacsi",
                "node_name": "n1",
                "postgres": {
                  "patroni_state": "running",
                  "role": "primary",
                  "version": "17.5"
                },
                "spock": {
                  "read_only": "off",
                  "subscriptions": [
                    {
                      "name": "sub_n1n3",
                      "provider_node": "n3",
                      "status": "replicating"
                    },
                    {
                      "name": "sub_n1n2",
                      "provider_node": "n2",
                      "status": "replicating"
                    }
                  ],
                  "version": "4.0.10"
                },
                "state": "available",
                "status_updated_at": "2025-06-18T17:58:56Z",
                "updated_at": "2025-06-18T17:54:36Z"
              },
              {
                "connection_info": {
                  "hostname": "i-058731542fee493f.ec2.internal",
                  "ipv4_address": "10.24.35.2",
                  "port": 5432
                },
                "created_at": "2025-06-18T16:52:22Z",
                "host_id": "ap-south-1",
                "id": "storefront-n2-9ptayhma",
                "node_name": "n2",
                "postgres": {
                  "patroni_state": "running",
                  "role": "primary",
                  "version": "17.5"
                },
                "spock": {
                  "read_only": "off",
                  "subscriptions": [
                    {
                      "name": "sub_n2n1",
                      "provider_node": "n1",
                      "status": "replicating"
                    },
                    {
                      "name": "sub_n2n3",
                      "provider_node": "n3",
                      "status": "replicating"
                    }
                  ],
                  "version": "4.0.10"
                },
                "state": "available",
                "status_updated_at": "2025-06-18T17:58:56Z",
                "updated_at": "2025-06-18T17:54:01Z"
              },
              {
                "connection_info": {
                  "hostname": "i-494027b7b53f6a23.ec2.internal",
                  "ipv4_address": "10.24.36.2",
                  "port": 5432
                },
                "created_at": "2025-06-18T16:52:22Z",
                "host_id": "eu-central-1",
                "id": "storefront-n3-ant97dj4",
                "node_name": "n3",
                "postgres": {
                  "patroni_state": "running",
                  "role": "primary",
                  "version": "17.5"
                },
                "spock": {
                  "read_only": "off",
                  "subscriptions": [
                    {
                      "name": "sub_n3n1",
                      "provider_node": "n1",
                      "status": "replicating"
                    },
                    {
                      "name": "sub_n3n2",
                      "provider_node": "n2",
                      "status": "replicating"
                    }
                  ],
                  "version": "4.0.10"
                },
                "state": "available",
                "status_updated_at": "2025-06-18T17:58:56Z",
                "updated_at": "2025-06-18T17:54:01Z"
              }
            ],
            "spec": {
              "database_name": "storefront",
              "database_users": [
                {
                  "attributes": [
                    "SUPERUSER",
                    "LOGIN"
                  ],
                  "db_owner": true,
                  "username": "admin"
                }
              ],
              "nodes": [
                {
                  "host_ids": [
                    "us-east-1"
                  ],
                  "name": "n1"
                },
                {
                  "host_ids": [
                    "ap-south-1"
                  ],
                  "name": "n2"
                },
                {
                  "host_ids": [
                    "eu-central-1"
                  ],
                  "name": "n3"
                }
              ],
              "port": 5432,
              "postgres_version": "17.6",
              "spock_version": "5"
            },
            "state": "restoring",
            "updated_at": "2025-06-18T17:58:59Z"
          },
          "task": {
            "created_at": "2025-06-18T17:23:14Z",
            "database_id": "storefront",
            "status": "pending",
            "task_id": "01978410-fb5d-7cd2-bbd2-66c0bf929dc0",
            "type": "update"
          }
        },
        "required": [
          "task",
          "database"
        ]
      },
      "VersionInfo": {
        "type": "object",
        "properties": {
          "arch": {
            "type": "string",
            "description": "The CPU architecture of the API server.",
            "example": "amd64"
          },
          "revision": {
            "type": "string",
            "description": "The VCS revision of the API server.",
            "example": "e89ae93b"
          },
          "revision_time": {
            "type": "string",
            "description": "The timestamp associated with the revision.",
            "example": "2025-01-01T01:30:00Z",
            "format": "date-time"
          },
          "version": {
            "type": "string",
            "description": "The version of the API server.",
            "example": "1.0.0"
          }
        },
        "example": {
          "arch": "amd64",
          "revision": "e89ae93b",
          "revision_time": "2025-01-01T01:30:00Z",
          "version": "1.0.0"
        },
        "required": [
          "version",
          "revision",
          "revision_time",
          "arch"
        ]
      }
    }
  },
  "tags": [
    {
      "name": "Cluster"
    },
    {
      "name": "Database"
    },
    {
      "name": "Host"
    },
    {
      "name": "System"
    }
  ]
}